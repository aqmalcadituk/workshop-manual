{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 8eff8812ff3d72816e99","webpack:///Cortona3DSolo.js","webpack:///./lib/util.js","webpack:///./src/app.js","webpack:///./src/solo.js","webpack:///C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/pako/lib/utils/common.js","webpack:///./lib/create-element.js","webpack:///C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/css-loader/lib/css-base.js","webpack:///C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/style-loader/addStyles.js","webpack:///./src/app.drawing.js","webpack:///./src/interactivity.metadata.js","webpack:///./src/util.js","webpack:///C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/events/events.js","webpack:///C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/pako/lib/zlib/messages.js","webpack:///./src/interactivity.options.js","webpack:///./lib/color-object.js","webpack:///./lib/css-object.js","webpack:///./src/xml2json.js","webpack:///C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/hammerjs/hammer.js","webpack:///C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/pako/lib/utils/strings.js","webpack:///C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/pako/lib/zlib/adler32.js","webpack:///C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/pako/lib/zlib/constants.js","webpack:///C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/pako/lib/zlib/crc32.js","webpack:///C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/pako/lib/zlib/zstream.js","webpack:///./src/core.css?657f","webpack:///./lib/deface.js","webpack:///./lib/vec3f.js","webpack:///./src/core.solo.js","webpack:///C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/es6-promise/auto.js","webpack:///./lib/b64ToBlob.js","webpack:///./src/app.base.js","webpack:///./src/app.ipc.js","webpack:///./src/app.procedure.js","webpack:///./src/app.ui.js","webpack:///./src/app.util.js","webpack:///./src/core.base.js","webpack:///./src/require-mini.js","webpack:///./src/require-plugin-css.js","webpack:///./src/require-plugin-file.js","webpack:///./src/require-plugin-json.js","webpack:///./src/require-plugin-res.js","webpack:///./src/require-plugin-xml.js","webpack:///./src/skin.js","webpack:///./src/touch.js","webpack:///./src/skin/skin.less","webpack:///./src/core.css","webpack:///./src/drawing.css","webpack:///./src/tiramisu.css","webpack:///../solo-core/src/res/tiramisu.css","webpack:///C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/es6-promise/dist/es6-promise.js","webpack:///C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/pako/index.js","webpack:///C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/pako/lib/deflate.js","webpack:///C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/pako/lib/inflate.js","webpack:///C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/pako/lib/zlib/deflate.js","webpack:///C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/pako/lib/zlib/gzheader.js","webpack:///C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/pako/lib/zlib/inffast.js","webpack:///C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/pako/lib/zlib/inflate.js","webpack:///C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/pako/lib/zlib/inftrees.js","webpack:///C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/pako/lib/zlib/trees.js","webpack:///C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/pepjs/dist/pep.js","webpack:///C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/process/browser.js","webpack:///./src/skin/skin.less?7681","webpack:///./src/drawing.css?b742","webpack:///./src/tiramisu.css?1e5a","webpack:///../solo-core/src/res/tiramisu.css?26d3","webpack:///(webpack)/buildin/global.js","webpack:///./lib/deepmerge.js","webpack:///./lib/rotation.js","webpack:///./src/XMLNodeData.js","webpack:///./src/app.ipc.dpl.js","webpack:///./src/app.ipc.interactivity.js","webpack:///./src/app.procedure.interactivity.js","webpack:///./src/drawing.js","webpack:///./src/index.js","webpack:///./src/skin/UISkinController.js"],"names":["root","factory","exports","module","define","amd","this","__webpack_require__","moduleId","installedModules","i","l","modules","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","extend","f","G","defineClass","parent","ctor","methods","Inheritance","constructor","superClass","expand","obj","arguments","length","props","isObject","key","isFunction","Array","RGB","r","g","b","fromHTMLColor","color","isNumber","isString","match","parseInt","RegExp","$1","substr","loadScript","fileName","async","resolve","reject","scriptElement","document","createElement","type","src","isUndefined","onload","onerror","getElementsByTagName","appendChild","loadStyleSheet","linkElement","href","rel","arg","detectAMDLoader","window","requirejs","getBaseURL","url","test","a","cloneNode","protocol","host","pathname","substring","lastIndexOf","loadResource","overrideMimeType","responseType","Promise","errorHandler","e","Cortona3DSolo","dispatch","DOMURL","URL","webkitURL","xhr","XMLHttpRequest","open","onprogress","loaded","total","lengthComputable","undefined","onabort","onreadystatechange","readyState","DONE","revokeObjectURL","status","Error","statusText","send","toggleClass","element","className","flag","classList","contains","add","remove","util","xmlToJson","m_instanceConfigurationFlags","m_usedModules","addons","m_loaded","app","configureInstance","set","reset","core","Module","ccall","drawing","drawingFeatures","config","features","configure","initialize","canvas","use","once","attach","show","load","catch","setAttribute","style","touchAction","moduleArguments","Arguments","toUrl","createObjectURL","Blob","contentScaleFactor","devicePixelRatio","toModule","version","isDocumentLoaded","loadCompanionFile","then","data","json","responseXML","baseURL","options","interactivity","specificationName","SpecID","ipc","metadata","$","SimulationInteractivity","writable","checkConfigureOptions","getInstanceConfigurationFlags","getDocumentURL","res","args","indexOf","usedModules","EventEmitter","_has","TYPED_OK","Uint8Array","Uint16Array","Int32Array","assign","sources","slice","source","shift","TypeError","shrinkBuf","buf","size","subarray","fnTyped","arraySet","dest","src_offs","len","dest_offs","flattenChunks","chunks","pos","chunk","result","fnUntyped","concat","apply","setTyped","on","Buf8","Buf16","Buf32","parseSelector","selector","token","id","tag","re","exec","push","createElementsFromHTML","syntax","div","innerHTML","childNodes","content","addChild","child","el","append","isArray","forEach","parsed","hasOptions","Node","datakey","dataset","cl","cssWithMappingToString","item","useSourceMap","cssMapping","btoa","sourceMapping","toComment","map","sourceRoot","join","sourceMap","unescape","encodeURIComponent","JSON","stringify","list","toString","mediaQuery","alreadyImportedModules","addStylesToDom","styles","domStyle","stylesInDom","refs","j","parts","addStyle","listToStyles","newStyles","css","media","part","insertStyleElement","styleElement","head","getHeadElement","lastStyleElementInsertedAtTop","styleElementsInsertedAtTop","insertAt","nextSibling","insertBefore","firstChild","removeStyleElement","parentNode","removeChild","idx","splice","createStyleElement","createLinkElement","update","singleton","styleIndex","singletonCounter","singletonElement","applyToSingletonTag","bind","updateLink","applyToTag","newObj","index","styleSheet","cssText","replaceText","cssNode","createTextNode","blob","oldSrc","memoize","fn","memo","isOldIE","self","navigator","userAgent","toLowerCase","DEBUG","newList","mayRemove","textStore","replacement","filter","Boolean","attachSVGViewer","SVGDrawing","svg","parentElement","createElementNS","beforeElement","body","overflow","applyStyle","render","stroke","m_hotspotHightlightColor","strokeOpacity","strokeWidth","fill","m_hotspotSelectionColor","fillOpacity","m_hoveredHotspot","m_isSVGVisible","m_urlDrawing","ui","delegate","onProgress","didClickHotspot","keys","didEnterHotspot","toggleHotspotClass","didLeaveHotspot","didCallContextMenu","offsetX","offsetY","target","onZoomChange","zoom","getDocumentBaseURL","appExports","imageURL","willStartLoadDrawing","shallBeURL","replace","createResourceURL","didCompleteLoad","revokeResourceURL","failedLoadingDocument","unload","visible","isVisible","selectHotspot","unselect","select","highlightHotspot","unhighlight","highlight","hoverHotspot","force","scaleBy","hotspotExists","some","getAttribute","defineProperties","maxScale","minScale","hotspotHoverColor","hotspotHighlightColor","hotspotSelectionColor","enableHoverFilling","DRAWING_HOTSPOT_HIGHLIGHT_SOLID","enableDrawingOptimization","DISABLE_DRAWING_INTERACTIVITY_OPTIMIZATION","getSVGViewer","metaValues","val","$text","$attr","ProcessEmitWarning","warning","console","warn","init","checkListener","listener","_getMaxListeners","that","_maxListeners","defaultMaxListeners","_addListener","prepend","events","existing","_events","create","_eventsCount","newListener","emit","unshift","warned","w","String","emitter","count","onceWrapper","fired","removeListener","wrapFn","_onceWrap","state","wrapped","_listeners","unwrap","evlistener","unwrapListeners","arrayClone","listenerCount","arr","copy","spliceOne","pop","ret","ReflectOwnKeys","R","Reflect","ReflectApply","receiver","Function","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","NumberIsNaN","Number","isNaN","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","error","er","err","message","context","handler","listeners","addListener","prependListener","prependOnceListener","position","originalListener","off","removeAllListeners","rawListeners","eventNames","2","1","0","valueIterator","SimulationInformation","PublisherVersion","SpecVersion","SpecLang","ModificationDate","DocumentFile","ColorObject","clamp255","Math","round","clamp01","max","min","bound01","abs","parseFloat","hue2rgb","q","t","millicolor","hex","h","toRgb","toHsl","toHslString","hsl","toRgbString","inverse","rgb","getBrightness","getLuminance","B","R01","G01","B01","pow","desaturate","amount","saturate","grayscale","lighten","darken","spin","hue","brighten","complement","camelToKebab","$0","$2","CSSObject","rules","rule","prop","fullSelector","children","trim","isMedia","split","clear","xml","XMLNodeData","nodeType","nodeName","attributes","attribute","nodeValue","hasText","hasMultiText","hasNodes","hasCDATA","hasChildNodes","isElement","isText","old","exportName","setTimeoutContext","timeout","setTimeout","bindFn","invokeArrayArg","each","iterator","deprecate","method","deprecationMessage","stack","log","inherit","base","properties","childP","baseP","_super","boolOrFn","TYPE_FUNCTION","ifUndefined","val1","val2","addEventListeners","types","splitStr","addEventListener","removeEventListeners","removeEventListener","hasParent","node","inStr","str","find","inArray","findByKey","toArray","uniqueArray","sort","results","values","prefixed","prefix","camelProp","toUpperCase","VENDOR_PREFIXES","uniqueId","_uniqueId","getWindowForElement","doc","ownerDocument","defaultView","parentWindow","Input","manager","callback","inputTarget","domHandler","ev","enable","createInputInstance","inputClass","SUPPORT_POINTER_EVENTS","PointerEventInput","SUPPORT_ONLY_TOUCH","TouchInput","SUPPORT_TOUCH","TouchMouseInput","MouseInput","inputHandler","eventType","input","pointersLen","pointers","changedPointersLen","changedPointers","isFirst","INPUT_START","isFinal","INPUT_END","INPUT_CANCEL","session","computeInputData","recognize","prevInput","pointersLength","firstInput","simpleCloneInputData","firstMultiple","offsetCenter","center","getCenter","timeStamp","now","deltaTime","angle","getAngle","distance","getDistance","computeDeltaXY","offsetDirection","getDirection","deltaX","deltaY","overallVelocity","getVelocity","overallVelocityX","x","overallVelocityY","y","scale","getScale","rotation","getRotation","maxPointers","computeIntervalInputData","srcEvent","offset","offsetDelta","prevDelta","velocity","velocityX","velocityY","direction","last","lastInterval","COMPUTE_INTERVAL","v","clientX","clientY","DIRECTION_NONE","DIRECTION_LEFT","DIRECTION_RIGHT","DIRECTION_UP","DIRECTION_DOWN","p1","p2","PROPS_XY","sqrt","atan2","PI","start","end","PROPS_CLIENT_XY","evEl","MOUSE_ELEMENT_EVENTS","evWin","MOUSE_WINDOW_EVENTS","pressed","POINTER_ELEMENT_EVENTS","POINTER_WINDOW_EVENTS","store","pointerEvents","SingleTouchInput","evTarget","SINGLE_TOUCH_TARGET_EVENTS","SINGLE_TOUCH_WINDOW_EVENTS","started","normalizeSingleTouches","all","touches","changed","changedTouches","TOUCH_TARGET_EVENTS","targetIds","getTouches","allTouches","INPUT_MOVE","identifier","targetTouches","changedTargetTouches","touch","mouse","primaryTouch","lastTouches","recordTouches","eventData","setLastTouch","lastTouch","lts","removeLastTouch","DEDUP_TIMEOUT","isSyntheticEvent","dx","dy","DEDUP_DISTANCE","TouchAction","cleanTouchActions","actions","TOUCH_ACTION_NONE","hasPanX","TOUCH_ACTION_PAN_X","hasPanY","TOUCH_ACTION_PAN_Y","TOUCH_ACTION_MANIPULATION","TOUCH_ACTION_AUTO","Recognizer","defaults","STATE_POSSIBLE","simultaneous","requireFail","stateStr","STATE_CANCELLED","STATE_ENDED","STATE_CHANGED","STATE_BEGAN","directionStr","getRecognizerByNameIfManager","otherRecognizer","recognizer","AttrRecognizer","PanRecognizer","pX","pY","PinchRecognizer","PressRecognizer","_timer","_input","RotateRecognizer","SwipeRecognizer","TapRecognizer","pTime","pCenter","Hammer","recognizers","preset","Manager","handlers","oldCssProps","toggleCssProps","recognizeWith","requireFailure","cssProps","triggerDomEvent","event","gestureEvent","createEvent","initEvent","gesture","dispatchEvent","TEST_ELEMENT","Date","output","nextKey","merge","MOBILE_REGEX","DIRECTION_HORIZONTAL","DIRECTION_VERTICAL","DIRECTION_ALL","destroy","MOUSE_INPUT_MAP","mousedown","mousemove","mouseup","button","which","pointerType","POINTER_INPUT_MAP","pointerdown","pointermove","pointerup","pointercancel","pointerout","IE10_POINTER_TYPE_ENUM","3","4","5","MSPointerEvent","PointerEvent","removePointer","eventTypeNormalized","isTouch","storeIndex","pointerId","SINGLE_TOUCH_INPUT_MAP","touchstart","touchmove","touchend","touchcancel","TOUCH_INPUT_MAP","inputEvent","inputData","isMouse","sourceCapabilities","firesTouchEvents","PREFIXED_TOUCH_ACTION","NATIVE_TOUCH_ACTION","TOUCH_ACTION_MAP","touchMap","cssSupports","CSS","supports","compute","getTouchAction","preventDefaults","prevented","preventDefault","hasNone","isTapPointer","isTapMovement","isTapTouchTime","preventSrc","STATE_RECOGNIZED","dropRecognizeWith","dropRequireFailure","hasRequireFailures","canRecognizeWith","additionalEvent","tryEmit","canEmit","inputDataClone","process","attrTest","optionPointers","isRecognized","isValid","threshold","directionTest","hasMoved","inOut","time","validPointers","validMovement","validTime","clearTimeout","taps","interval","posThreshold","validTouchTime","failTimeout","validInterval","validMultiTap","tapCount","VERSION","domEvents","userSelect","touchSelect","touchCallout","contentZooming","userDrag","tapHighlightColor","stop","stopped","curRecognizer","STATE_FAILED","Tap","Pan","Swipe","Pinch","Rotate","Press","buf2binstring","STR_APPLY_UIA_OK","STR_APPLY_OK","fromCharCode","utils","__","_utf8len","string2buf","c2","m_pos","str_len","buf_len","charCodeAt","binstring2buf","buf2string","out","c_len","utf16buf","utf8border","adler32","adler","s1","s2","Z_NO_FLUSH","Z_PARTIAL_FLUSH","Z_SYNC_FLUSH","Z_FULL_FLUSH","Z_FINISH","Z_BLOCK","Z_TREES","Z_OK","Z_STREAM_END","Z_NEED_DICT","Z_ERRNO","Z_STREAM_ERROR","Z_DATA_ERROR","Z_BUF_ERROR","Z_NO_COMPRESSION","Z_BEST_SPEED","Z_BEST_COMPRESSION","Z_DEFAULT_COMPRESSION","Z_FILTERED","Z_HUFFMAN_ONLY","Z_RLE","Z_FIXED","Z_DEFAULT_STRATEGY","Z_BINARY","Z_TEXT","Z_UNKNOWN","Z_DEFLATED","crc32","crc","crcTable","table","k","ZStream","next_in","avail_in","total_in","next_out","avail_out","total_out","msg","data_type","locals","deface","Vec3f","z","oVec3f","subtract","dot","cross","divide","fValue","multiply","normalize","negate","TiramisuLoadingError","coreURL","ENABLE_VRML_TEXT_NODE","locateFile","memoryInitializerPrefixURL","script","response","messageOrEvent","lineno","colno","filename","Tiramisu","polyfill","b64toBlob","b64Data","contentType","sliceSize","charAt","workerCode","onmessage","byteCharacters","byteArrays","byteNumbers","postMessage","param","atob","atobStrict","defaultSliceSize","code","worker","Worker","beforeFirstFrameRender","didDrawScene","PanelService","showCanvas","setBannerImage","fetchBannerImage","attachInteractivityXML","companionFile","isInteractivityXmlEmissionEnabled","DISABLE_INTERACTIVITY_XML_EMISSION","parseHTMLColor","toHTMLColor","getVec3fValue","getValue","ccallWithObjectHandles","cname","handles","animated","objects","allocate","ALLOC_STACK","setValue","typs","attachCanvasListeners","eventStopper","stopPropagation","contextmenu","m_isPressed","rect","getBoundingClientRect","left","top","pressHandler","doubleTapHandler","pickObject","_t","fitObjectsInView","handle","fitSceneInView","getElementsByClassName","popover","isMSGestureEnabled","livingOnTheEdge","ENABLE_NAVIGATION_FIT_TO_OBJECT","shiftKey","ctrlKey","altKey","srcElement","setRotationCenterToObjects","lastTapTime","lastTapPoint","detail","MSGESTURE_FLAG_BEGIN","MSGESTURE_FLAG_END","valueOf","DOUBLE_TAP_TIME","screenX","screenY","mcOptions","pointerEnabled","mc","press","PRESS_TIME","doubletap","gestureHandler","microsoftGesture","translationX","translationY","microsoftPointerUp","microsoftPointerDown","MSGesture","setPointerCapture","addPointer","box","pageXOffset","clientLeft","pageYOffset","clientTop","pageX","pageY","m_doc","m_didFinishLoadDocument","m_firstFrameDidArrive","m_hiddenObjects","didFinishLoadDocument","bundleURL","firstFrameDidArrive","timestamp","didFailLoadDocument","didClickHyperlink","urls","willStartNavigateInScene","wrapStringArray","strings","Pointer_stringify","wrapSheetArray","sheets","description","indentationLevel","unmarshalObjectArray","unmarshalFloatArray","floats","major","minor","build","BUILD_TIME","resize","width","height","getObjectName","getObjectTypeName","getObjectWithName","isObjectIgnorableByPicker","setObjectIgnorableByPicker","ignorable","needsTopLevelParent","mode","pickObjectChain","_tiramisu_pickObjectChain","coord","normal","sceneCoord","sceneNormal","chain","_free","getPickerTransparencyThreshold","setPickerTransparencyThreshold","addSelectedObjects","setSelectedObjects","getSelectedObjects","setDefaultBackgroundColors","colors","colorArray","sp","Runtime","stackSave","stackRestore","setMouseDragMode","setObjectPropertyf","v0","v1","v2","v3","PROPERTY_VISIBILITY","_tiramisu_isObjectVisibile","_tiramisu_setObjectVisibility","getObjectPropertyf","buffer","_tiramisu_getObjectPropertyf","restoreObjectProperty","getObjectsWithDirtyProperty","isRotationCenterVisible","setRotationCenterVisibility","setDefaultView","alignHorizon","jumpToStandardView","viewName","factor","fitSelectedObjectsInView","setRotationCenterToScene","setRotationCenterToSelectedObjects","centerRotationCenterInView","resetRotationCenter","getDocumentInfo","getOptions","dict","pairs","getOption","setObjectName","getHoverColor","_tiramisu_getHoverColor","setHoverColor","_tiramisu_setHoverColor","getSelectionColor","_tiramisu_getSelectionColor","setSelectionColor","_tiramisu_setSelectionColor","getViewpoints","bulk","_tiramisu_getViewpoints","viewpoints","getActiveViewpoint","_tiramisu_getActiveViewpoint","setActiveViewpoint","_tiramisu_setActiveViewpoint","addObjects","parentHandle","removeObjects","removeAllObjects","getChildObjects","_tiramisu_getChildObjects","setChildObjects","objectArray","_tiramisu_setChildObjects","getParentObject","_tiramisu_getParentObject","getObjectVisibility","flags","_tiramisu_getObjectVisibility","getObjectFlags","_tiramisu_getObjectFlags","createObjectsFromString","baseUrl","nodes","printErr","createObjectsFromURL","byteArray","arrayBuffer","_malloc","byteLength","writeArrayToMemory","createObjectsFromDocumentBundle","setCameraPosition","orientation","scalarParam","rotationCenter","_location","_orientation","_rotationCenter","_tiramisu_setCameraPosition","setObjectsTransparency","objs","PROPERTY_TRANSPARENCY","getObjectsTransparency","reduce","acc","toggleObjectsVisibility","_tiramisu_getGlobalEdgeColor","_tiramisu_setGlobalEdgeColor","_tiramisu_getEdgeColorWeights","weights","weightArray","_tiramisu_setEdgeColorWeights","_tiramisu_isAmbientOcclusionEnabled","enabled","_tiramisu_enableAmbientOcclusion","_tiramisu_isAmbientOcclusionSupported","_tiramisu_isRecursiveObjectLookupEnabled","_tiramisu_enableRecursiveObjectLookup","unmarshalIndexArray","indexArray","itemCount","m_currentSheet","m_sheets","sheet","didSelectSheet","ipcHoverColor","ipcSelectionColor","getDrawingForIPCView","ENABLE_AUTO_SWITCHING_DISPLAY_MODE","isDrawingDisplayMode","toggleDrawingDisplayMode","didHoverItem","items","didSelectItem","didChangeItemVisibility","isHidden","rows","willStartSheetTransitionAnimation","didStopSheetTransitionAnimation","setCurrentSheet","sheetId","toggleItemVisibility","selectItem","hoverItem","resetCurrentSheet","getItemWithHotspot","hotspotName","getCurrentSheet","drawingMode","_ipc_getSheetTransitionAnimationDurations","_ipc_setSheetTransitionAnimationDurations","dpl","procedure","didFireEvent","title","info","didChangePlayerState","didEnterSubstep","substepPath","didEnterSubstepWithName","substepId","seekToSubstep","seekMode","setPlaybackSpeed","playbackSpeed","freezeCamera","setPlayPosition","playPosition","requestState","backward","forward","play","doNotAutoRewind","pause","setPlayRange","firstPlayable","lastPlayable","getPlayableRangeStartTime","getPlayableRangeStopTime","requestPlayerState","setPlayableItemList","itemArray","intArrayFromString","_procedure_setPlayableItemList","_procedure_getDefaultSeekMode","_procedure_setDefaultSeekMode","_procedure_getDuration","m_speakerIcon","m_isCanvasVisible","image","display","group","querySelector","showPanels","isCanvasVisible","toggleSpeakerIcon","opacity","createImageFromData","autoRevokeTimeout","completeHandler","HEAPU8","Image","marshallTypedArray","typedArray","dataSize","BYTES_PER_ELEMENT","dataOffset","fetchImageFromDocumentBundle","img","decodeURI","params","frameCount","frameDuration","Rotation","inflate","_tiramisu_utility_inflate","byteOffset","freeTypedArray","resolveSceneURL","dataScript","totalMemory","DEFAULT_TOTAL_MEMORY","textContent","isRAContent","isViewpointInScene","isTextInScene","DISABLE_DISCARDABLE_GEOMETRY_DATA","m_runtimeReady","text","lastErrorText","print","setStatus","didChangeLayout","pane","clientWidth","clientHeight","isRuntimeReady","onRuntimeInitialized","canvasElement","filePackagePrefixURL","coreSolo","prefixURL","TOTAL_MEMORY","safeGet","global","defer","promise","invokeLater","cleanup","pendingModule","lastTask","appendJs","pathName","path","component","createContext","contextName","contextOptions","loadDep","shim","loadByShim","deferred","_require","deps","exportsFn","loadWithPlugin","dependency","plugin","getContext","localRequire","resolved","fromText","previousModule","wrapCommonJS","commentRegExp","cjsRequireRegExp","dep","errback","currentModule","newPath","predefines","instances","reason","onError","appendJS","bundle","bundles","paths","urlArgs","contexts","require","moduleName","resetContext","deepmerge","specified","querySelectorAll","link","parse","xmlToJSON","usedSkins","UISkinController","m_options","skin","baseElement","requirePromise","runtimeReady","eventName","eventHandlers","pickObjectsRightThrough","topMost","picked","m_lastPickInfo","MOUSE_CLICK_THRESHOLD","FEATURE_PICK_TOPMOST","debounceTimeout","whichToButtons","buttonToButtons","getMouseEventArguments","isMove","buttons","aVec1","aVec2","isMouseMoved","mouseArgs1","mouseArgs2","overObject","lastMouseArguments","lastMouseMove","stealthyLayer","isFF","createStealthyLayer","bottom","right","zIndex","onmousemove","mouseArguments","handleOld","handleNew","pointerenter","lpi","currentLastPickInfo","soloExports","objectOrFunction","setScheduler","scheduleFn","customSchedulerFn","setAsap","asapFn","asap","useVertxTimer","vertxNext","flush","useSetTimeout","globalSetTimeout","queue","onFulfillment","onRejection","noop","PROMISE_ID","makePromise","_state","invokeCallback","_result","subscribe","resolve$1","Constructor","selfFulfillment","cannotReturnOwn","tryThen","then$$1","fulfillmentHandler","rejectionHandler","handleForeignThenable","thenable","sealed","fulfill","_label","handleOwnThenable","FULFILLED","REJECTED","handleMaybeThenable","maybeThenable","publishRejection","_onerror","publish","PENDING","_subscribers","subscribers","settled","hasCallback","succeeded","initializePromise","resolver","nextId","validationError","entries","Enumerator","race","_","reject$1","needsResolver","needsNew","local","P","promiseToString","cast","Promise$1","_isArray","scheduleFlush","browserWindow","browserGlobal","BrowserMutationObserver","MutationObserver","WebKitMutationObserver","isNode","isWorker","Uint8ClampedArray","importScripts","MessageChannel","nextTick","iterations","observer","observe","characterData","channel","port1","port2","vertx","runOnLoop","runOnContext","random","_instanceConstructor","_remaining","_enumerate","_eachEntry","entry","resolve$$1","_then","didError","_settledAt","_willSettleAt","enumerator","finally","_setScheduler","_setAsap","_asap","deflate","constants","pako","Deflate","level","chunkSize","windowBits","memLevel","strategy","to","opt","raw","gzip","ended","strm","zlib_deflate","deflateInit2","header","deflateSetHeader","dictionary","deflateSetDictionary","_dict_set","deflator","deflateRaw","_mode","onEnd","onData","deflateEnd","Inflate","zlib_inflate","inflateInit2","GZheader","inflateGetHeader","inflateSetDictionary","inflator","inflateRaw","next_out_utf8","tail","utf8str","allowBufError","inflateEnd","ungzip","errorCode","rank","zero","flush_pending","pending","pending_buf","pending_out","flush_block_only","trees","_tr_flush_block","block_start","strstart","put_byte","putShortMSB","read_buf","wrap","longest_match","cur_match","chain_length","max_chain_length","scan","best_len","prev_length","nice_match","limit","w_size","MIN_LOOKAHEAD","_win","wmask","w_mask","prev","strend","MAX_MATCH","scan_end1","scan_end","good_match","lookahead","match_start","fill_window","more","_w_size","window_size","hash_size","insert","MIN_MATCH","ins_h","hash_shift","hash_mask","deflate_stored","max_block_size","pending_buf_size","BS_NEED_MORE","max_start","BS_FINISH_STARTED","BS_FINISH_DONE","deflate_fast","hash_head","bflush","match_length","_tr_tally","max_lazy_match","last_lit","BS_BLOCK_DONE","deflate_slow","max_insert","prev_match","match_available","deflate_rle","deflate_huff","Config","good_length","max_lazy","nice_length","max_chain","func","lm_init","configuration_table","DeflateState","gzhead","gzindex","last_flush","w_bits","hash_bits","dyn_ltree","HEAP_SIZE","dyn_dtree","D_CODES","bl_tree","BL_CODES","l_desc","d_desc","bl_desc","bl_count","MAX_BITS","heap","L_CODES","heap_len","heap_max","depth","l_buf","lit_bufsize","d_buf","opt_len","static_len","matches","bi_buf","bi_valid","deflateResetKeep","INIT_STATE","BUSY_STATE","_tr_init","deflateReset","MAX_MEM_LEVEL","deflateInit","MAX_WBITS","DEF_MEM_LEVEL","old_flush","beg","FINISH_STATE","hcrc","extra","comment","os","EXTRA_STATE","OS_CODE","level_flags","PRESET_DICT","NAME_STATE","COMMENT_STATE","HCRC_STATE","bstate","_tr_align","_tr_stored_block","avail","next","tmpDict","dictLength","LITERALS","deflateInfo","xflags","extra_len","done","_in","_out","dmax","wsize","whave","wnext","s_window","hold","bits","lcode","dcode","lmask","dmask","here","op","dist","from","from_source","lencode","distcode","lenbits","distbits","dolen","dodist","sane","zswap32","InflateState","havedict","check","wbits","ncode","nlen","ndist","have","lens","work","lendyn","distdyn","back","was","inflateResetKeep","HEAD","ENOUGH_LENS","ENOUGH_DISTS","inflateReset","inflateReset2","inflateInit","DEF_WBITS","fixedtables","virgin","sym","lenfix","distfix","inflate_table","LENS","DISTS","updatewindow","put","here_bits","here_op","here_val","last_bits","last_op","last_val","opts","hbuf","order","TYPE","TYPEDO","inf_leave","FLAGS","BAD","DICTID","TIME","OS","EXLEN","EXTRA","NAME","COMMENT","HCRC","DICT","CHECK","STORED","LEN_","TABLE","COPY_","COPY","LENLENS","CODES","CODELENS","LEN","inflate_fast","LIT","LENEXT","DIST","DISTEXT","MATCH","LENGTH","MEM","Z_MEM_ERROR","SYNC","dictid","inflateInfo","lbase","lext","dbase","dext","lens_index","codes","table_index","incr","low","mask","curr","drop","used","huff","base_index","MAXBITS","offs","extra_index","StaticTreeDesc","static_tree","extra_bits","extra_base","elems","max_length","has_stree","TreeDesc","dyn_tree","stat_desc","max_code","d_code","_dist_code","put_short","send_bits","Buf_size","send_code","tree","bi_reverse","bi_flush","gen_bitlen","desc","xbits","stree","gen_codes","next_code","tr_static_init","LENGTH_CODES","base_length","extra_lbits","_length_code","base_dist","extra_dbits","static_ltree","static_dtree","static_l_desc","static_d_desc","static_bl_desc","extra_blbits","MAX_BL_BITS","init_block","END_BLOCK","bi_windup","copy_block","smaller","_n2","_m2","pqdownheap","compress_block","ltree","dtree","lc","lx","build_tree","scan_tree","curlen","prevlen","nextlen","max_count","min_count","REP_3_6","REPZ_3_10","REPZ_11_138","send_tree","build_bl_tree","max_blindex","bl_order","send_all_trees","lcodes","dcodes","blcodes","detect_data_type","black_mask","static_init_done","stored_len","STORED_BLOCK","STATIC_TREES","opt_lenb","static_lenb","DYN_TREES","inType","inDict","bubbles","cancelable","MOUSE_PROPS","MOUSE_DEFAULTS","pressure","tiltX","tiltY","twist","tangentialPressure","hwTimestamp","isPrimary","SparseArrayMap","array","Installer","binder","addCallback","removeCallback","changedCallback","MO","mutationWatcher","shadowSelector","assertActive","dispatcher","pointermap","has","assertConnected","elem","inActiveButtonState","USE_MAP","Map","PointerMap","delete","thisArg","CLONE_PROPS","CLONE_DEFAULTS","BOUNDARY_EVENTS","HAS_SVG_INSTANCE","SVGElementInstance","eventMap","captureInfo","eventSources","eventSourceList","registerSource","newEvents","register","es","unregister","container","contained","ex","down","inEvent","fireEvent","move","up","enter","leave","over","cancel","leaveOut","propagate","enterOver","eventHandler","_handledByPE","listen","addEvent","unlisten","removeEvent","boundHandler","makeEvent","relatedTarget","_target","cloneEvent","eventCopy","correspondingUseElement","getTarget","capture","propagateDown","targets","reverse","setCapture","inPointerId","inTarget","skipDispatch","releaseCapture","implicitRelease","asyncDispatchEvent","requestAnimationFrame","targeting","shadow","inEl","shadowRoot","webkitShadowRoot","canTarget","elementFromPoint","targetingShadow","olderShadow","olderShadowRoot","se","allShadows","shadows","searchRoot","inRoot","st","sr","ssr","owner","DOCUMENT_NODE","DOCUMENT_FRAGMENT_NODE","findTarget","OBSERVER_INIT","subtree","childList","attributeOldValue","attributeFilter","watchSubtree","enableOnSubtree","installOnLoad","installNewSubtree","findElements","addElement","removeElement","elementChanged","oldValue","concatLists","accum","ELEMENT_NODE","flattenMutationTree","inNodes","mutations","mutationHandler","addedNodes","removedNodes","attrib2css","selectors","hasNativePE","hasShadowRoot","ShadowDOMPolyfill","createShadowRoot","BUTTON_TO_BUTTONS","HAS_BUTTONS","MouseEvent","INSTALLER","mouseEvents","POINTER_ID","POINTER_TYPE","isEventSimulatedFromTouch","prepareEvent","pd","prepareButtonsForMove","mouseover","mouseout","deactivateMouse","pointermap$1","touchEvents","elementAdded","touchActionToScrollType","_scrollType","elementRemoved","oldSt","scrollTypes","EMITTER","XSCROLLER","YSCROLLER","SCROLLER","firstTouch","isPrimaryTouch","inTouch","setPrimaryTouch","firstXY","X","Y","scrolling","cancelResetClickCount","removePrimaryPointer","inPointer","resetClickCount","clickCount","resetId","typeToButtons","touchToPointer","cte","currentTouchEvent","radiusX","webkitRadiusX","radiusY","webkitRadiusY","webkitForce","metaKey","processTouches","inFunction","tl","shouldScroll","scrollAxis","currentTarget","oa","da","doa","findTouch","inTL","inId","vacuumTouches","cancelOut","dedupSynthMouse","overDown","outTarget","moveOverOut","pointer","outEvent","upOut","cleanUpPointer","lt","pointermap$2","HAS_BITMAP_TYPE","MSPOINTER_TYPE_MOUSE","msEvents","POINTER_TYPES","MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSLostPointerCapture","MSGotPointerCapture","msPointerEnabled","msSetPointerCapture","msReleasePointerCapture","tp","msMaxTouchPoints","ontouchstart","Element","targetFinding","defaultSetTimout","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","runClearTimeout","marker","cachedClearTimeout","cleanUpNextTick","draining","currentQueue","queueIndex","drainQueue","run","Item","browser","env","argv","versions","binding","cwd","chdir","dir","umask","eval","dst","setAxis","axis","multVec","sin","cos","oRotation","Sa","Ca","As","getAxis","Sb","Cb","Bs","Cab","ABs","msq","Sab","recurse","current","m_hoverRow","ipcExports","setupTable","dplTableElement","timeoutOut","indexOut","row","onmouseover","onmouseout","onclick","__debounceTimeout","oncontextmenu","hoverRow","getElementById","highlightRow","selectRow","toggleRow","normalizeCSN","initializeDPLItemMap","m_ipcInteractivityMap","csn","willGetCSNString","itemInfo","callout","roles","getMeta","declId","getIndent","indent","getMetadata","def","prefferedViews","dplid","sheetsMap","modelInfo","view","sh","refItem","refmedias","refmedia","mediaId","asp","itemMetaValues","partMetaValues","role","refview","screentip","tooltip","objectNames","commands","command","getRowByIndex","currentSheetId","getIndexByRow","getRowByItem","getItemByRow","getIndexByItem","getItemByIndex","getRowByObjectName","getObjectsNamesByRow","currentSheetInfo","sheetInfo","getSheetInfo","getProjectMetadata","getScreenTip","getItemInfo","getPrefferedSheetId","getParent","getChildren","deep","ch","findDescription","Simulation","Step","Substep","processEvent","parentId","m_prcInteractivityMap","procedureItems","processItem","steps","step","substep","parentStep","action","defs","docitems","DocItem","defInfo","docid","pictures","Picture","procedureId","Procedure","getProcedureId","getDrawings","getDocIdByObjectName","getObjectNamesByDocId","docId","docItemInfo","getDocItemInfo","getDocItemMetadata","getDocItems","getProcedureItemInfo","arrayBufferToString","encoding","reader","FileReader","evt","readAsText","getFirstChild","tagName","getHotspotRegion","textParentNode","childElementCount","getHotspotNodes","hotspotRegion","getSVGAElement","getViewBoxDimensions","m_zoom","m_viewBox","m_enableDrawingOptimization","m_viewportShadow","m_svgShadow","getBBox","m_svgElement","viewBox","W","m_view","H","A","setOriginBy","dimensions","setOrigin","m_originX","m_originY","viewW","viewH","oX","oY","setTransform","applyTransform","applyTransformTo","viewport","transform","baseVal","getItem","setTranslate","setScale","m_viewport","m_applyTimeout","_apply","m_shadowTimeout","visibility","getSVGSource","removeAttribute","m_isReady","m_svgHammerManagers","anchor","m_eventHandlersA","pinch","pan","m_eventHandlers","dblclick","m_isDoubleTap","m_lastScale","m_minScale","m_maxScale","cursor","m_lastX","m_lastY","detach","__mc","raster","onLoadSvg","cssClass","replaceChild","titleNode","SVGNS","createSVGTransform","appendItem","m_isHidden","m_loadingUrl","m_textNodesCount","initShadow","calculateScaleLimit","m_xhr","abort","m_image","setAttributeNS","XLINKNS","binData","freeShadow","svgString","XMLSerializer","serializeToString","drawImage","png","toDataURL","m_disableAutoCalculationScaleLimit","toggle","m_enableHoverFilling","delta","hide","svgElement","ClassList","regExp","scope","SVGElement","svgANode","wheel","checkComplete","checkShown","m_baseUrl","currentScript","usedModule","usedAddon","localOptions","resourceUrl","req","html","ns","toUISkinKey","createTag","attr","NodeList","argArr","docFrag","createDocumentFragment","argItem","Document","DocumentFragment","UISkinElement","$el","UISkinComponent","rootNode","components","resolveUISkinComponent","toolbar","panel","buttonImg","span","option","selected","ul","ol","dl","term","label","offsetWidth","offsetHeight","checkHorizontal","nodeRect","thisRect"],"mappings":"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","file":"Cortona3DSolo.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Cortona3DSolo\"] = factory();\n\telse\n\t\troot[\"Cortona3DSolo\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 71);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8eff8812ff3d72816e99","/*! Cortona3D Solo 1.6.6, Copyright (c) 2015-2020 Paragraphics, Ltd. | 5612802b7d76e898326e2f25993f5ba8 */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Cortona3DSolo\"] = factory();\n\telse\n\t\troot[\"Cortona3DSolo\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 71);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\n// cortona3d/util.js\n\n/**\n * @module cortona3d/util\n */\n\nmodule.exports = {\n    extend: extend,\n    defineClass: defineClass,\n    expand: expand,\n    RGB: RGB,\n    fromHTMLColor: fromHTMLColor,\n    loadScript: loadScript,\n    loadStyleSheet: loadStyleSheet,\n    isFunction: isFunction,\n    isNumber: isNumber,\n    isString: isString,\n    isObject: isObject,\n    isUndefined: isUndefined,\n    detectAMDLoader: detectAMDLoader,\n    getBaseURL: getBaseURL,\n    loadResource: loadResource,\n    toggleClass: toggleClass\n};\n\n/*\n */\nfunction extend(f) {\n    function G() {}\n    G.prototype = f.prototype || f;\n    return new G();\n}\n\n/** \n * Utility function for defining a new class.\n *\n * @param parent {Function} the parent class of the new class or null\n * @param ctor {Function} the constructor of the new class\n * @param methods {Object} an object literal containing the methods of the new class\n * @return {Function} the constructor function of the new class\n */\nfunction defineClass(parent, ctor, methods) {\n    function Inheritance() {}\n    if (parent) {\n        Inheritance.prototype = parent.prototype;\n        ctor.prototype = new Inheritance();\n        ctor.prototype.constructor = ctor;\n        ctor.superClass = parent;\n    }\n    if (methods) {\n        for (var m in methods) {\n            if (methods.hasOwnProperty(m)) {\n                ctor.prototype[m] = methods[m];\n            }\n        }\n    }\n    return ctor;\n}\n\n/**\n * @param obj {Object}\n * @param [props, ...] {Object}\n */\nfunction expand(obj) {\n    for (var i = 1; i < arguments.length; i++) {\n        var props = arguments[i];\n        if (!isObject(props)) continue;\n        for (var key in props) {\n            if (props.hasOwnProperty(key)) {\n                if (key in obj) {\n                    if (isFunction(obj[key]) && isFunction(props[key])) {\n                        obj[key] = props[key];\n                    } else if (obj[key] instanceof Array && props[key] instanceof Array) {\n                        obj[key] = props[key];\n                    } else if (obj[key] instanceof Object && props[key] instanceof Object && props[key] !== {}) {\n                        expand(obj[key], props[key]);\n                    } else {\n                        obj[key] = props[key];\n                    }\n                } else {\n                    obj[key] = props[key];\n                }\n            }\n        }\n    }\n    return obj;\n}\n\n/**\n * @param r {Number} [0...255]\n * @param g {Number} [0...255]\n * @param b {Number} [0...255]\n * @return {Number} \n */\nfunction RGB(r, g, b) {\n    return (r + g * 256 + b * 65536);\n}\n\n/**\n * @param color {string} HTML HEX color\n * @return {Number} \n */\nfunction fromHTMLColor(color) {\n    if (isNumber(color)) return color;\n    if (isString(color) && color.match(/^#?([0-9A-F]{6})$/i)) {\n        return parseInt(\n            RegExp.$1.substr(4, 2) +\n            RegExp.$1.substr(2, 2) +\n            RegExp.$1.substr(0, 2), 16);\n    }\n    return 0;\n}\n\n/**\n * @callback requestCallback\n */\n\n/**\n * @param fileName {string} url for loading\n * @param [async] {boolean} async attribute\n * @param  resolve {requestCallback}\n * @returns {HTMLElement}\n * @memberof cortona3d\n */\nfunction loadScript(fileName, async, resolve, reject) {\n    var scriptElement = document.createElement('script');\n    scriptElement.type = 'text/javascript';\n    scriptElement.src = fileName;\n    if (!isUndefined(async)) {\n        scriptElement.async = !!async;\n    }\n    scriptElement.onload = resolve;\n    scriptElement.onerror = reject;\n    document.getElementsByTagName('head')[0].appendChild(scriptElement);\n    return scriptElement;\n}\n\n/**\n * @param fileName {string} url for loading\n * @param  resolve {requestCallback}\n * @returns {HTMLElement}\n * @memberof cortona3d\n */\nfunction loadStyleSheet(fileName, resolve, reject) {\n    var linkElement = document.createElement('link');\n    linkElement.href = fileName;\n    linkElement.rel = 'stylesheet';\n    linkElement.type = 'text/css';\n    linkElement.onload = resolve;\n    linkElement.onerror = reject;\n    document.getElementsByTagName('head')[0].appendChild(linkElement);\n    return linkElement;\n}\n\n/**\n * @param arg {object} \n * @return {boolean} \n */\nfunction isFunction(arg) {\n    return typeof arg === 'function';\n}\n\n/**\n * @param arg {object} \n * @return {boolean} \n */\nfunction isNumber(arg) {\n    return typeof arg === 'number';\n}\n\n/**\n * @param arg {object} \n * @return {boolean} \n */\nfunction isString(arg) {\n    return typeof arg === 'string';\n}\n\n/**\n * @param arg {object} \n * @return {boolean} \n * @memberof cortona3d\n */\nfunction isObject(arg) {\n    return typeof arg === 'object' && arg !== null;\n}\n\n/**\n * @param arg {object} \n * @return {boolean} \n */\nfunction isUndefined(arg) {\n    return arg === void 0;\n}\n\n/**\n * @return {boolean}\n */\nfunction detectAMDLoader() {\n    return isFunction(window.requirejs) && (isFunction(window.define) && window.define.amd);\n}\n\n/**\n * @param [url] {string} \n * @return {string} \n * @memberof cortona3d\n */\nfunction getBaseURL(url) {\n    if (typeof url !== 'string') {\n        url = '#';\n    }\n    // check is data URI\n    if (!/^[a-z]+\\:\\/\\//i.test(url) && !/^\\/\\//.test(url) && /^[a-z]+\\:/i.test(url)) {\n        return \"\";\n    }\n    var a = document.createElement('a');\n    a.href = url;\n    a = a.cloneNode(false);\n    url = a.protocol + '//' + a.host + (a.pathname[0] === '/' ? '' : '/') + a.pathname;\n    return url.substring(0, url.lastIndexOf('/') + 1);\n}\n\n\n/**\n * Loads a resource from url using XMLHttpRequest\n * @param {string} url \n * @param {string} [overrideMimeType]\n * @param {string} [responseType]\n * @return promise<xhr>\n */\nfunction loadResource(url, overrideMimeType, responseType) {\n    return new Promise(function (resolve, reject) {\n        var DOMURL = window.URL || window.webkitURL || window,\n            xhr = new XMLHttpRequest();\n\n        if (overrideMimeType && xhr.overrideMimeType) {\n            xhr.overrideMimeType(overrideMimeType);\n        }\n\n        xhr.open(\"GET\", url, true);\n\n        if (responseType) {\n            xhr.responseType = responseType;\n        }\n\n        function errorHandler(e) {\n            if (window.Cortona3DSolo) window.Cortona3DSolo.dispatch('app.onProgress', 0, -1, e.type);\n        }\n\n        xhr.onprogress = function (e) {\n            var loaded = e.loaded,\n                total = e.lengthComputable || e.lengthComputable === undefined ? e.total : 0;\n            if (window.Cortona3DSolo) window.Cortona3DSolo.dispatch('app.onProgress', loaded, total, e.type);\n        };\n        xhr.onabort = errorHandler;\n        xhr.onerror = errorHandler;\n        xhr.onload = errorHandler;\n        xhr.onreadystatechange = function (e) {\n            if (xhr.readyState === XMLHttpRequest.DONE) {\n\n                if (/^blob:/i.test(url)) {\n                    DOMURL.revokeObjectURL(url);\n                }\n\n                var data;\n                if (xhr.status === 200 || xhr.status === 0) {\n                    resolve(xhr);\n                } else {\n                    reject(new Error(url + \" \" + xhr.status + \" \" + xhr.statusText));\n                }\n            }\n        };\n        try {\n            xhr.send(null);\n        } catch (e) {\n            reject(e);\n        }\n    });\n}\n\n/**\n * @param element {HTMLElement} \n * @param className {string} \n * @param flag [{boolean}]\n */\nfunction toggleClass(element, className, flag) {\n    if (element) {\n        flag = isUndefined(flag) ? !element.classList.contains(className) : flag;\n        if (flag) {\n            element.classList.add(className);\n        } else {\n            element.classList.remove(className);\n        }\n    }\n}\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar util = __webpack_require__(0);\nvar expand = util.expand;\nvar xmlToJson = __webpack_require__(15);\n\nvar m_instanceConfigurationFlags = 0;\nvar m_usedModules = {\n    addons: {}\n};\nvar m_loaded = false;\n\n/**\n * The namespace represents the main application interface for Cortona3D Solo.\n * \n * @namespace \n * @memberof module:solo\n * @property {number} DISABLE_DOCUMENT_INTERACTIVITY=0x000001 Disables the selection and parts highlighting in the 3D window\n * @property {number} DISABLE_PROCEDURE_TEXT_EMISSION=0x000002 Disables parsing and delivery text comments when loading procedure\n * @property {number} DISABLE_AUDIO=0x000004 Disables audio in the procedure\n * @property {number} DISABLE_VERTEX_ARRAY_OBJECT_OES=0x000008 Disables the OES_vertex_array_object extension (part of the WebGL API)  \n * @property {number} DISABLE_DISCARDABLE_GEOMETRY_DATA=0x000010 The flag must be set to enable geometry pick. See {@link module:solo.app.pickObjectChain app.pickObjectChain()}. \n * @property {number} DISABLE_PROPERTY_VALUE_ANIMATIONS=0x000020 The flag must be set to turn off the animated color transition when objects are selected in the interactive catalog.\n * @property {number} ENABLE_GLES3=0x000040 The flag must be set to enable WebGL 2.0.\n * @property {number} DISABLE_ANTIALIASING_GLES3=0x000080 The flag must be set to disable antialiasing in the WebGL 2.0.\n * @property {number} TRANSPARENT_BACKGROUND=0x000100 The flag must be set to enable transparent background in the scene without VRML Background node.\n * @property {number} ENABLE_NAVIGATION_FIT_TO_OBJECT=0x008000 Enables fit to object and change center of rotation in the 3D window\n * @property {number} DISABLE_INTERACTIVITY_XML_EMISSION=0x010000 Disables access to the interactivity.xml as JSON object \n * @property {number} DRAWING_HOTSPOT_HIGHLIGHT_SOLID=0x020000 Determines whether to use the frame selection representation for selected hotspot area on the SVG image (default value), or to fill with another color\n * @property {number} ENABLE_AUTO_SWITCHING_DISPLAY_MODE=0x040000 Enables automatic switching of display modes (2D and 3D) for IPC\n * @property {number} ENABLE_VRML_TEXT_NODE=0x080000 Enables VRML Text node support\n * @property {number} DISABLE_DRAWING_INTERACTIVITY_OPTIMIZATION=0x100000 Disables optimization for the large drawing (more than 5000 text nodes)\n */\nvar app = {\n    /**\n     * Configures the Cortona3D Solo instance.\n     * See {@link module:solo.app app} properties.\n     * \n     * @param {number} set - Flags bitmask \n     * @param {number} reset - Flags bitmask\n     */\n    configureInstance: function (set, reset) {\n        if (typeof set == 'number') m_instanceConfigurationFlags |= set;\n        if (typeof reset == 'number') m_instanceConfigurationFlags &= ~reset;\n        if (m_usedModules.core) {\n            if (Module.ccall) {\n                Module.ccall('tiramisu_configure', 'number', ['number', 'number'], [set & 32767, reset & 32767]);\n            }\n        }\n        if (m_usedModules.drawing) {\n            var drawingFeatures = m_usedModules.drawing.config.features || 0;\n            if (typeof set == 'number') drawingFeatures |= set;\n            if (typeof reset == 'number') drawingFeatures &= ~reset;\n            m_usedModules.drawing.config.features = drawingFeatures;\n            __webpack_require__(7).configure(m_usedModules.drawing.config);\n        }\n        return m_instanceConfigurationFlags;\n    },\n\n    /**\n     * Initializes the Cortona3D Solo instance.\n     * \n     * @memberof module:solo.app\n     * @async\n     * @function initialize\n     * @param {string} [url] - The optional argument specifies the URL of the external file:\n     * - companion file *.interactivity.xml*\n     * - VRML file *.wrl*\n     * - compressed (zip) package file containing the RapidAuthor publication *.cortona3d* *.vmb* *.zip*\n     * - SVG file *.svg* \n     * - image file *.png* *.jpg* *.gif*\n     * \n     * If omitted, the value specified in the `src` property is used.\n     * @returns {Promise<DocumentInfo>} `Promise` whose fulfillment handler receives an {@link DocumentInfo} object when the requested file has successfully been loaded.\n     * @see external:Promise\n     * @see {@link module:solo.use use()}\n     */\n    initialize: function (canvas, url) {\n        var src = url;\n        var Cortona3DSolo = __webpack_require__(2);\n\n        if (typeof canvas === \"string\") {\n            // initialize(src)\n            src = canvas;\n\n            if (!m_usedModules.drawing && !m_usedModules.core) {\n                Cortona3DSolo.use('core', {\n                    src: src,\n                    features: m_instanceConfigurationFlags\n                });\n            }\n        } else if (canvas && url) {\n            // initialize(canvas, src)\n\n            if (m_usedModules.core) {\n                if (canvas) Cortona3DSolo.core.canvas = canvas;\n            }\n\n            Cortona3DSolo.use('core', {\n                canvas: canvas,\n                src: url,\n                features: m_instanceConfigurationFlags\n            });\n\n            /*\n            if (!app.drawing) {\n                var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n                canvas.parentNode.insertBefore(svg, canvas);\n                Cortona3DSolo.use('drawing', {\n                    svg: svg,\n                    features: m_instanceConfigurationFlags\n                });\n            }\n            */\n        }\n\n        function loaded() {\n            m_loaded = true;\n        }\n\n        Cortona3DSolo.once('app.didFinishLoadDocument', loaded);\n        Cortona3DSolo.once('app.didFailLoadDocument', loaded);\n\n        if (m_usedModules.drawing) {\n            __webpack_require__(7).attach(Cortona3DSolo.core && Cortona3DSolo.core.canvas);\n            if (!m_usedModules.core) {\n                src = src || m_usedModules.drawing.config.src;\n                if (src) {\n                    Cortona3DSolo.app.drawing.show(true);\n                    return new Promise(function (resolve, reject) {\n                        Cortona3DSolo.once('app.didFinishLoadDocument', resolve);\n                        Cortona3DSolo.app.drawing.load(src).catch(reject);\n                    });\n                }\n                return Promise.resolve({});\n            }\n        }\n\n        if (m_usedModules.core) {\n            if (Cortona3DSolo.core.canvas) {\n                Cortona3DSolo.core.canvas.setAttribute('touch-action', 'none');\n                Cortona3DSolo.core.canvas.style.touchAction = 'none';\n            }\n\n            var moduleArguments = __webpack_require__(25).Arguments;\n\n            src = src || moduleArguments.document;\n\n            if (src) {\n                moduleArguments.document = Cortona3DSolo.app.util.toUrl(src);\n            } else {\n                moduleArguments.document = URL.createObjectURL(new Blob([\"#VRML V2.0 utf8\"], {\n                    type: \"model/vrml\"\n                }));\n            }\n            moduleArguments.features = (m_instanceConfigurationFlags & 32767);\n            moduleArguments.contentScaleFactor = window.devicePixelRatio || 1;\n            moduleArguments.toModule();\n            return new Promise(function (resolve, reject) {\n                Cortona3DSolo.once(\"core.onError\", reject);\n                Cortona3DSolo.once('app.didFinishLoadDocument', resolve);\n                Cortona3DSolo.once('app.didFailLoadDocument', reject);\n            });\n        }\n\n        return Promise.reject(new Error('Solo initialize: nothing to do'));\n    },\n\n    version: function () {\n        return \"1.6.6\";\n    },\n\n    /**\n     * Returns true if the library has already been initialized and the document has already been loaded.\n     * \n     * @memberof module:solo.app\n     * @function isDocumentLoaded\n     * @returns {boolean} \n     * @since 1.4.3\n     */\n    isDocumentLoaded: function () {\n        return m_loaded;\n    },\n\n    /**\n     * _Asynchronous method_. Loads the companion file.\n     * \n     * @async\n     * @memberof module:solo.app\n     * @function loadCompanionFile\n     * @param {string} url - An URL to load the external companion file *.interactivity.xml*\n     * @returns {Promise<CompanionFileInfo>} `Promise` whose fulfillment handler receives an {@link CompanionFileInfo} object when the requested file has successfully been loaded.\n     * @fires \"app.onProgress\"\n     * @see external:Promise\n     * @since 1.4.0\n     */\n    loadCompanionFile: function (url) {\n        return util.loadResource(url, 'text/xml').then(function (xhr) {\n            var data,\n                json,\n                type = '',\n                meta = [];\n\n            if (xhr.responseXML) {\n                json = xmlToJson(xhr.responseXML);\n\n                data = {\n                    baseURL: util.getBaseURL(url),\n                    options: __webpack_require__(12)(json),\n                    interactivity: {\n                        json: json\n                    }\n                };\n\n                data.specificationName = data.options.SpecID;\n\n                if (json.ipc) {\n                    expand(data, {\n                            type: 'ipc',\n                            metadata: __webpack_require__(8)(json.$('ipc/figure/metadata/value'))\n                        },\n                        __webpack_require__(68)(data.interactivity, data.baseURL));\n                } else if (json.SimulationInteractivity) {\n                    expand(data, {\n                            type: 'procedure',\n                            metadata: __webpack_require__(8)(json.$('SimulationInteractivity/SimulationInformation/metadata/value'))\n                        },\n                        __webpack_require__(69)(data.interactivity, data.baseURL));\n                }\n\n                return Promise.resolve(data);\n            } else {\n                return Promise.reject(new Error(url + \" empty content\"));\n            }\n        });\n    }\n};\n\nObject.defineProperty(app, 'DISABLE_DOCUMENT_INTERACTIVITY', {\n    value: 1,\n    writable: false\n});\nObject.defineProperty(app, 'DISABLE_PROCEDURE_TEXT_EMISSION', {\n    value: 2,\n    writable: false\n});\nObject.defineProperty(app, 'DISABLE_AUDIO', {\n    value: 4,\n    writable: false\n});\nObject.defineProperty(app, 'DISABLE_VERTEX_ARRAY_OBJECT_OES', {\n    value: 8,\n    writable: false\n});\nObject.defineProperty(app, 'DISABLE_DISCARDABLE_GEOMETRY_DATA', {\n    value: 16,\n    writable: false\n});\nObject.defineProperty(app, 'DISABLE_PROPERTY_VALUE_ANIMATIONS', {\n    value: 32,\n    writable: false\n});\nObject.defineProperty(app, 'ENABLE_GLES3', {\n    value: 64,\n    writable: false\n});\nObject.defineProperty(app, 'DISABLE_ANTIALIASING_GLES3', {\n    value: 128,\n    writable: false\n});\nObject.defineProperty(app, 'TRANSPARENT_BACKGROUND', {\n    value: 256,\n    writable: false\n});\nObject.defineProperty(app, 'ENABLE_NAVIGATION_FIT_TO_OBJECT', {\n    value: 32768,\n    writable: false\n});\nObject.defineProperty(app, 'DISABLE_INTERACTIVITY_XML_EMISSION', {\n    value: 32768 * 2,\n    writable: false\n});\nObject.defineProperty(app, 'DRAWING_HOTSPOT_HIGHLIGHT_SOLID', {\n    value: 32768 * 4,\n    writable: false\n});\nObject.defineProperty(app, 'ENABLE_AUTO_SWITCHING_DISPLAY_MODE', {\n    value: 32768 * 8,\n    writable: false\n});\nObject.defineProperty(app, 'ENABLE_VRML_TEXT_NODE', {\n    value: 32768 * 16,\n    writable: false\n});\nObject.defineProperty(app, 'DISABLE_DRAWING_INTERACTIVITY_OPTIMIZATION', {\n    value: 32768 * 32,\n    writable: false\n});\n\n\nmodule.exports = {\n    app: app,\n    checkConfigureOptions: function (options) {\n        return !!(m_instanceConfigurationFlags & options);\n    },\n    getInstanceConfigurationFlags: function () {\n        return m_instanceConfigurationFlags;\n    },\n    getDocumentURL: function () {\n        var res = \"\";\n        if (m_usedModules.core) {\n            var args = Module.arguments;\n            if (args) {\n                var i = args.indexOf('document');\n                if (i >= 0) {\n                    res = args[i + 1];\n                }\n            }\n        }\n        return res;\n    },\n    usedModules: m_usedModules\n};\n\n/**\n * Information from the loaded companion file, for example:\n * ```\n * {\n *      type: 'ipc',\n *      metadata: {\n *          TITLE: \"Pump IPC - Complete\",\n *          ...\n *      },\n *      options: {\n *          SpecID: \"GENERIC_IPC\",\n *          SpecLang: \"en\",\n *          ...\n *      },\n *      specificationName: \"GENERIC_IPC\",\n *      interactivity: { ... }\n * }\n * ```\n * @prop {string} type - Name of the companion file type:\n * - `\"ipc\"`\n * - `\"procedure\"`\n * @prop {KeyValuePairs} metadata - An object represents project metadata from the companion file.\n * @prop {KeyValuePairs} options - An object represents published options from the companion file.\n * @prop {string} specificationName - Identifier of the specification component.\n * @prop {object} interactivity - The namespace corresponding to the type of companion file. See {@link module:solo.app.ipc.interactivity app.ipc.interactivity} and {@link module:solo.app.procedure.interactivity app.procedure.interactivity}.\n * @prop {string} baseURL - A base path to the loaded companion file or the empty string if the model loaded from the bundle file.\n * @typedef {object} CompanionFileInfo\n * @see {@link module:solo.app.loadCompanionFile app.loadCompanionFile()}\n */\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n * The Cortona3D Solo module. The main interface of the Cortona3D Solo API:\n *\n * - Uses the Universal Module Definition (UMD) interface;\n * - Exports {@link Cortona3DSolo} global object;\n * - The exported object is an instance of the {@link external:EventEmitter EventEmitter} class;\n * - Exports namespaces {@link module:solo.core core}, {@link module:solo.app app}.\n *  \n * **Configuration:**\n * ```\n * Cortona3DSolo.use('core', {\n *      prefixURL: 'res/',\n *      totalMemory: 64\n * });\n * ```\n * See the {@link module:solo.use use()} method for more details.\n * \n * **Configuration using global variable:**\n * ```\n * var Cortona3DSolo = {\n *     config: {\n *         memoryInitializerPrefixURL: 'res/',\n *         TOTAL_MEMORY: 0x4000000 // 64 MB\n *     }\n * }\n * ```\n * See the {@link module:solo.core core} namespace.\n * \n * @module solo\n * @implements {@link external:EventEmitter EventEmitter}\n */\n\nvar expand = __webpack_require__(0).expand;\nvar EventEmitter = __webpack_require__(10).EventEmitter;\n\nmodule.exports = expand(new EventEmitter(), window.Cortona3DSolo || {});\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n\nvar TYPED_OK =  (typeof Uint8Array !== 'undefined') &&\n                (typeof Uint16Array !== 'undefined') &&\n                (typeof Int32Array !== 'undefined');\n\nfunction _has(obj, key) {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\n\nexports.assign = function (obj /*from1, from2, from3, ...*/) {\n  var sources = Array.prototype.slice.call(arguments, 1);\n  while (sources.length) {\n    var source = sources.shift();\n    if (!source) { continue; }\n\n    if (typeof source !== 'object') {\n      throw new TypeError(source + 'must be non-object');\n    }\n\n    for (var p in source) {\n      if (_has(source, p)) {\n        obj[p] = source[p];\n      }\n    }\n  }\n\n  return obj;\n};\n\n\n// reduce buffer size, avoiding mem copy\nexports.shrinkBuf = function (buf, size) {\n  if (buf.length === size) { return buf; }\n  if (buf.subarray) { return buf.subarray(0, size); }\n  buf.length = size;\n  return buf;\n};\n\n\nvar fnTyped = {\n  arraySet: function (dest, src, src_offs, len, dest_offs) {\n    if (src.subarray && dest.subarray) {\n      dest.set(src.subarray(src_offs, src_offs + len), dest_offs);\n      return;\n    }\n    // Fallback to ordinary array\n    for (var i = 0; i < len; i++) {\n      dest[dest_offs + i] = src[src_offs + i];\n    }\n  },\n  // Join array of chunks to single array.\n  flattenChunks: function (chunks) {\n    var i, l, len, pos, chunk, result;\n\n    // calculate data length\n    len = 0;\n    for (i = 0, l = chunks.length; i < l; i++) {\n      len += chunks[i].length;\n    }\n\n    // join chunks\n    result = new Uint8Array(len);\n    pos = 0;\n    for (i = 0, l = chunks.length; i < l; i++) {\n      chunk = chunks[i];\n      result.set(chunk, pos);\n      pos += chunk.length;\n    }\n\n    return result;\n  }\n};\n\nvar fnUntyped = {\n  arraySet: function (dest, src, src_offs, len, dest_offs) {\n    for (var i = 0; i < len; i++) {\n      dest[dest_offs + i] = src[src_offs + i];\n    }\n  },\n  // Join array of chunks to single array.\n  flattenChunks: function (chunks) {\n    return [].concat.apply([], chunks);\n  }\n};\n\n\n// Enable/Disable typed arrays use, for testing\n//\nexports.setTyped = function (on) {\n  if (on) {\n    exports.Buf8  = Uint8Array;\n    exports.Buf16 = Uint16Array;\n    exports.Buf32 = Int32Array;\n    exports.assign(exports, fnTyped);\n  } else {\n    exports.Buf8  = Array;\n    exports.Buf16 = Array;\n    exports.Buf32 = Array;\n    exports.assign(exports, fnUntyped);\n  }\n};\n\nexports.setTyped(TYPED_OK);\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar util = __webpack_require__(0);\r\n\r\n/**\r\n * @module create-element\r\n * @private\r\n */\r\n\r\n/**\r\n * Parse CSS selector and returns object with tag name, ID and array of class names.\r\n * \r\n * @private\r\n * @param {string} selector \r\n * @returns {object} \r\n */\r\nfunction parseSelector(selector) {\r\n    var token,\r\n        classList = [],\r\n        id,\r\n        tag,\r\n        re = /(^[^.#]+|\\.[^.#]+|#[^.#]+)/g;\r\n    while (re.exec(selector)) {\r\n        token = RegExp.$1;\r\n        switch (token.substring(0, 1)) {\r\n            case '.':\r\n                classList.push(token.substr(1));\r\n                break;\r\n            case '#':\r\n                id = token.substr(1);\r\n                break;\r\n            default:\r\n                tag = token;\r\n        }\r\n    }\r\n    return {\r\n        id: id,\r\n        classList: classList,\r\n        tag: tag || 'div'\r\n    };\r\n}\r\n\r\n\r\n/**\r\n * Create HTML elements from string.\r\n *\r\n * @param {string} syntax\r\n * @returns {HTMLElement[]}\r\n */\r\nfunction createElementsFromHTML(syntax) {\r\n    var div = document.createElement('div');\r\n    div.innerHTML = syntax;\r\n    return Array.prototype.slice.call(div.childNodes);\r\n}\r\n\r\n\r\n/**\r\n * Creates HTML element with given tag name, list of attributes and array of children.\r\n *\r\n * @param {string} name\r\n * @param {object} [options]\r\n * @param {*} [content]\r\n * @returns {HTMLElement}\r\n */\r\nfunction createElement(name, options, content) {\r\n    var el,\r\n        parsed = {},\r\n        isArray = function (o) { return util.isObject(o) && util.isFunction(o.forEach); },\r\n        hasOptions = util.isObject(options) && !isArray(options) && !(options instanceof Node);\r\n\r\n    parsed = parseSelector(name);\r\n    el = document.createElement(parsed.tag);\r\n\r\n    function addChild(child) {\r\n        if (util.isString(child)) {\r\n            el.append.apply(el, createElementsFromHTML(child));\r\n        } else if (isArray(child)) {\r\n            child.forEach(addChild);\r\n        } else {\r\n            el.append(child || '');\r\n        }\r\n    }\r\n\r\n    Array.prototype.slice.call(arguments, hasOptions ? 2 : 1).forEach(addChild);\r\n    \r\n    if (hasOptions) {\r\n        for (var key in options) {\r\n            if (!util.isUndefined(options[key])) {\r\n                if (options.hasOwnProperty(key)) {\r\n                    if (key === 'dataset' && util.isObject(options[key])) {\r\n                        for (var datakey in options.dataset) {\r\n                            if (!util.isUndefined(options.dataset[datakey])) {\r\n                                if (options.dataset.hasOwnProperty(datakey)) {\r\n                                    el.dataset[datakey] = options.dataset[datakey];\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    el[key] = options[key];\r\n                } else {\r\n                    el.setAttribute(key, options[key]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (parsed.id) {\r\n        el.id = parsed.id;\r\n    }\r\n    parsed.classList.forEach(function (cl) {\r\n        el.classList.add(cl);\r\n    });\r\n    return el;\r\n}\r\n\r\nmodule.exports = {\r\n    parseSelector: parseSelector,    \r\n    createElement: createElement,\r\n    createElementsFromHTML: createElementsFromHTML\r\n};\r\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\nvar stylesInDom = {},\n\tmemoize = function(fn) {\n\t\tvar memo;\n\t\treturn function () {\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\t\treturn memo;\n\t\t};\n\t},\n\tisOldIE = memoize(function() {\n\t\treturn /msie [6-9]\\b/.test(self.navigator.userAgent.toLowerCase());\n\t}),\n\tgetHeadElement = memoize(function () {\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\n\t}),\n\tsingletonElement = null,\n\tsingletonCounter = 0,\n\tstyleElementsInsertedAtTop = [];\n\nmodule.exports = function(list, options) {\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the bottom of <head>.\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list);\n\taddStylesToDom(styles, options);\n\n\treturn function update(newList) {\n\t\tvar mayRemove = [];\n\t\tfor(var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\n\t\t\t\t\tdomStyle.parts[j]();\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n}\n\nfunction addStylesToDom(styles, options) {\n\tfor(var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles(list) {\n\tvar styles = [];\n\tvar newStyles = {};\n\tfor(var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\t\tif(!newStyles[id])\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse\n\t\t\tnewStyles[id].parts.push(part);\n\t}\n\treturn styles;\n}\n\nfunction insertStyleElement(options, styleElement) {\n\tvar head = getHeadElement();\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\n\tif (options.insertAt === \"top\") {\n\t\tif(!lastStyleElementInsertedAtTop) {\n\t\t\thead.insertBefore(styleElement, head.firstChild);\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\thead.appendChild(styleElement);\n\t\t}\n\t\tstyleElementsInsertedAtTop.push(styleElement);\n\t} else if (options.insertAt === \"bottom\") {\n\t\thead.appendChild(styleElement);\n\t} else {\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t}\n}\n\nfunction removeStyleElement(styleElement) {\n\tstyleElement.parentNode.removeChild(styleElement);\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\n\tif(idx >= 0) {\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement(options) {\n\tvar styleElement = document.createElement(\"style\");\n\tstyleElement.type = \"text/css\";\n\tinsertStyleElement(options, styleElement);\n\treturn styleElement;\n}\n\nfunction createLinkElement(options) {\n\tvar linkElement = document.createElement(\"link\");\n\tlinkElement.rel = \"stylesheet\";\n\tinsertStyleElement(options, linkElement);\n\treturn linkElement;\n}\n\nfunction addStyle(obj, options) {\n\tvar styleElement, update, remove;\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\n\t} else if(obj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\") {\n\t\tstyleElement = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, styleElement);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t\tif(styleElement.href)\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\n\t\t};\n\t} else {\n\t\tstyleElement = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, styleElement);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle(newObj) {\n\t\tif(newObj) {\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\n\t\t\t\treturn;\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = styleElement.childNodes;\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\n\t\tif (childNodes.length) {\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyleElement.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag(styleElement, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyleElement.setAttribute(\"media\", media)\n\t}\n\n\tif(styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = css;\n\t} else {\n\t\twhile(styleElement.firstChild) {\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\n\t\t}\n\t\tstyleElement.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink(linkElement, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\tif(sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = linkElement.href;\n\n\tlinkElement.href = URL.createObjectURL(blob);\n\n\tif(oldSrc)\n\t\tURL.revokeObjectURL(oldSrc);\n}\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Cortona3DSolo = __webpack_require__(2);\nvar app = __webpack_require__(1).app;\nvar expand = __webpack_require__(0).expand;\n\n__webpack_require__(60);\nvar SVGDrawing = __webpack_require__(70);\n\nvar usedModules = __webpack_require__(1).usedModules;\n\nvar m_isSVGVisible = false;\nvar m_urlDrawing = '';\n\nvar m_hotspotHightlightColor = '#FF0000';\nvar m_hotspotSelectionColor = '#FF0000';\n\nvar m_hoveredHotspot;\n\nvar css = Cortona3DSolo.app.ui.css();\n\n// SVGDrawing hooks\nexpand(SVGDrawing, {\n    delegate: {\n        onProgress: function (loaded, total) {\n            Cortona3DSolo.dispatch('app.onProgress', loaded, total);\n        },\n        didClickHotspot: function (name, keys) {\n            Cortona3DSolo.dispatch('app.drawing.didSelectHotspot', name, keys);\n        },\n        didEnterHotspot: function (name) {\n            SVGDrawing.toggleHotspotClass(name, 'hover', true);\n            Cortona3DSolo.dispatch('app.drawing.didEnterHotspot', name);\n            Cortona3DSolo.dispatch('app.drawing.didHoverHotspot', name, true);\n        },\n        didLeaveHotspot: function (name) {\n            SVGDrawing.toggleHotspotClass(name, 'hover', false);\n            Cortona3DSolo.dispatch('app.drawing.didLeaveHotspot', name);\n            Cortona3DSolo.dispatch('app.drawing.didHoverHotspot', name, false);\n        },\n        didCallContextMenu: function (name, offsetX, offsetY, target) {\n            Cortona3DSolo.dispatch('app.drawing.didCallContextMenu', name, offsetX, offsetY, target);\n        },\n        onZoomChange: function (zoom) {\n            Cortona3DSolo.dispatch('app.drawing.didChangeScale', zoom);\n        }\n    }\n});\n\n/**\n * @private\n */\nfunction attachSVGViewer(canvas) {\n    if (!SVGDrawing.svg) {\n        var svg = usedModules.drawing.config.element || usedModules.drawing.config.svg || (function () {\n            var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n            var beforeElement = canvas,\n                parentElement;\n            if (!canvas) {\n                __webpack_require__(22);\n                beforeElement = document.body.firstChild;\n                parentElement = document.body;\n            } else {\n                parentElement = canvas.parentNode;\n            }\n            parentElement.insertBefore(svg, beforeElement);\n            return svg;\n        })();\n\n        svg.parentNode.style.overflow = 'hidden';\n\n        SVGDrawing.initialize(svg);\n    }\n}\n\nfunction applyStyle() {\n    css.render({\n        '.cortona3dsolo-svg svg a[name]': {\n            '& .hover': {\n                stroke: m_hotspotHightlightColor,\n                strokeOpacity: 1\n            },\n            '& path.hover': {\n                strokeWidth: '2px',\n            },\n            '& text.hover': {\n                strokeWidth: '.1em',\n            },\n            '& path.selected': {\n                fill: m_hotspotSelectionColor,\n                fillOpacity: 0.8\n            }\n        }\n    });\n}\n\nvar getDocumentBaseURL = __webpack_require__(9).getDocumentBaseURL;\n\nvar appExports = {\n    /**\n     * The namespace represents an application interface to manage interactive 2D graphics.\n     * \n     * Requires the use of the internal module `\"drawing\"`.\n     * \n     * @namespace\n     * @memberof module:solo.app\n     * @example\nCortona3DSolo.use('drawing', {\n    src: 'sample.svg'\n});\nCortona3DSolo.app.initialize();\n     */\n    drawing: {\n        /**\n         * Loads the 2D illustration file.\n         * Supported formats are SVG, JPG, PNG, GIF.\n         * \n         * @async\n         * @fires \"app.drawing.didStartLoadDrawing\"\n         * @fires \"app.drawing.didFinishLoadDrawing\"\n         * @fires \"app.drawing.didFailLoadDrawing\"\n         * @param {string} imageURL\n         * @returns {Promise} A promise \n         * @see external:Promise\n         */\n        load: function (imageURL) {\n            Cortona3DSolo.dispatch('app.drawing.didStartLoadDrawing', imageURL);\n            if (typeof app.drawing.willStartLoadDrawing === 'function') {\n                var shallBeURL = app.drawing.willStartLoadDrawing.call(app, imageURL);\n                if (typeof shallBeURL == 'string') imageURL = shallBeURL;\n            }\n            imageURL = imageURL.replace(/\\.(cgm|tiff?)$/i, '.svg');\n            if (imageURL == m_urlDrawing) {\n                Cortona3DSolo.dispatch('app.drawing.didFinishLoadDrawing', imageURL);\n                return Promise.resolve();\n            }\n            var url;\n            if (app.util && app.util.createResourceURL) url = app.util.createResourceURL(imageURL);\n            if (!url) {\n                url = imageURL;\n                if (!/^[^\\/]+:/.test(url)) {\n                    url = getDocumentBaseURL() + url;\n                }\n            }\n            return new Promise(function (resolve, reject) {\n                SVGDrawing.delegate.didCompleteLoad = function (url) {\n                    if (app.util && app.util.revokeResourceURL) app.util.revokeResourceURL(url);\n                    m_urlDrawing = imageURL;\n                    m_hoveredHotspot = null;\n                    Cortona3DSolo.dispatch('app.drawing.didFinishLoadDrawing', imageURL);\n                    if (!usedModules.core) {\n                        var arg = {\n                            type: 'drawing',\n                            baseURL: __webpack_require__(9).getBaseURL(imageURL)\n                        };\n                        Cortona3DSolo.dispatch('app.didFinishLoadDocument', arg);\n                    }\n                    resolve();\n                };\n                SVGDrawing.delegate.failedLoadingDocument = function (url, status) {\n                    if (app.util && app.util.revokeResourceURL) app.util.revokeResourceURL(url);\n                    m_urlDrawing = imageURL;\n                    m_hoveredHotspot = null;\n                    SVGDrawing.unload();\n                    Cortona3DSolo.dispatch('app.drawing.didFailLoadDrawing', imageURL, status);\n                    if (!usedModules.core) {\n                        Cortona3DSolo.dispatch('app.didFailLoadDocument', status);\n                    }\n                    reject(new Error('Image loading failed: status ' + status));\n                };\n                SVGDrawing.load(url, /\\.(png|jpe?g|jpe|gif)$/i.test(imageURL));\n            });\n        },\n\n        /**\n         * Show or hides the 2D window.\n         * \n         * @param {boolean} [visible=true]\n         */\n        show: function (visible) {\n            visible = (typeof visible == 'undefined') ? true : !!visible;\n            SVGDrawing[visible ? 'show' : 'hide']();\n            m_isSVGVisible = !!visible;\n        },\n\n        /**\n         * Checks if the 2D window visible\n         * \n         * @returns {boolean}\n         */\n        isVisible: function () {\n            return m_isSVGVisible;\n        },\n\n        /**\n         * Selects the hotspot by its name.\n         * \n         * @param {string} name\n         * @param {HexColorString} [color] A string representing the color. Specify empty string to clear the selection. If omitted, the value specified in the options statement is used. See {@link module:solo.use use()} properties\n         */\n        selectHotspot: function (name, color) {\n            color = typeof color === 'undefined' ? m_hotspotSelectionColor : color;\n            if (color === '') {\n                SVGDrawing.unselect(name);\n            } else {\n                SVGDrawing.select(name, color);\n            }\n        },\n\n        /**\n         * Highlights the hotspot by its name.\n         * \n         * @param {string} name\n         * @param {HexColorString} [color] A string representing the color. Specify empty string to clear the selection. If omitted, the value specified in the options statement is used. See {@link module:solo.use use()} properties\n         */\n        highlightHotspot: function (name, color) {\n            color = typeof color === 'undefined' ? m_hotspotHightlightColor : color;\n            if (color === '') {\n                SVGDrawing.unhighlight(name);\n            } else {\n                SVGDrawing.highlight(name, color);\n            }\n        },\n\n        /**\n         * Highlights the hotspot by its name using the color specified in the options statement. See {@link module:solo.use use()} properties.\n         * Unlike of the method {@link module:solo.app.drawing.highlightHotspot app.drawing.highlightHotspot()}, this method clears the last selection.\n         * \n         * @param {string} name\n         */\n        hoverHotspot: function (name) {\n            if (m_hoveredHotspot) {\n                SVGDrawing.toggleHotspotClass(m_hoveredHotspot, 'hover', false);\n            }\n            if (name) {\n                SVGDrawing.toggleHotspotClass(name, 'hover', true);\n            }\n            m_hoveredHotspot = name;\n        },\n\n        /**\n         * Toggle the class value for all `SVGPathElement` and `SVGTextElement` inside a hotspot node; i.e., if the class exists then remove it and return `false`, if not, then add it and return `true`.\n         * When the `force` argument is present: If the `force` argument evaluates to `true`, add the specified class value, and if it evaluates to `false`, remove it.\n         * \n         * @param {string} name\n         * @param {string} className\n         * @param {boolean} [force]\n         * @returns {boolean}\n         */\n        toggleHotspotClass: function (name, className, force) {\n            return SVGDrawing.toggleHotspotClass(name, className, force);\n        },\n\n        /**\n         * Restores the default view.\n         * @since 1.4.3\n         */\n        reset: function () {\n            SVGDrawing.reset();\n        },\n\n        /**\n         * Change the scale to the specified value.\n         * @param {number} value \n         * @since 1.4.3\n         */\n        scaleBy: function (value) {\n            SVGDrawing.scaleBy(value);\n        },\n\n        /**\n         * Checks if hotspot with specified name exists in the 2D illustration.\n         * \n         * @param {string} name\n         * @since 1.5.0\n         */\n        hotspotExists: function (name) {\n            return Array.prototype.slice.call(SVGDrawing.svg.getElementsByTagName('a')).some(function (n) {\n                return (n.getAttribute('name') === name);\n            });\n        }\n    }\n};\n\n/**\n * The HTML `<svg>` element.\n * \n * @static\n * @member {SVGSVGElement} svg\n * @memberof module:solo.app.drawing\n * @since 1.4.3\n */\n\n/**\n * Gets or sets the color of the hovered hotspot in the 2D illustration.\n * \n * @static\n * @member {HexColorString} hoverColor\n * @memberof module:solo.app.drawing\n * @since 1.5.0\n */\n\n/**\n * Gets or sets the color of the selected hotspot in the 2D illustration.\n * \n * @static\n * @member {HexColorString} selectionColor\n * @memberof module:solo.app.drawing\n * @since 1.5.0\n */\n\n/**\n * Gets or sets the maximum scaling limit for the drawing.\n * \n * @static\n * @member {number} maxScale\n * @memberof module:solo.app.drawing\n * @since 1.6.0\n */\n\n/**\n * Gets or sets the minimum scaling limit for the drawing.\n * \n * @static\n * @member {number} minScale\n * @memberof module:solo.app.drawing\n * @since 1.6.0\n */\n\nObject.defineProperties(appExports.drawing, {\n    'svg': {\n        get: function () {\n            return SVGDrawing.svg;\n        },\n        enumerable: true\n    },\n    'hoverColor': {\n        get: function () {\n            return m_hotspotHightlightColor;\n        },\n        set: function (color) {\n            m_hotspotHightlightColor = color;\n            applyStyle();\n        },\n        enumerable: true\n    },\n    'selectionColor': {\n        get: function () {\n            return m_hotspotSelectionColor;\n        },\n        set: function (color) {\n            m_hotspotSelectionColor = color;\n            applyStyle();\n        },\n        enumerable: true\n    },\n    'maxScale': {\n        get: function () {\n            return SVGDrawing.maxScale;\n        },\n        set: function (value) {\n            SVGDrawing.maxScale = value;\n        },\n        enumerable: true\n    },\n    'minScale': {\n        get: function () {\n            return SVGDrawing.minScale;\n        },\n        set: function (value) {\n            SVGDrawing.minScale = value;\n        },\n        enumerable: true\n    }\n});\n\nmodule.exports = {\n    configure: function (options) {\n        options = options || {};\n        m_hotspotHightlightColor = options.hotspotHoverColor || options.hotspotHighlightColor || '#FF0000';\n        m_hotspotSelectionColor = options.hotspotSelectionColor || '#FF0000';\n        SVGDrawing.enableHoverFilling = (options.features || 0) & app.DRAWING_HOTSPOT_HIGHLIGHT_SOLID;\n        SVGDrawing.enableDrawingOptimization = !((options.features || 0) & app.DISABLE_DRAWING_INTERACTIVITY_OPTIMIZATION);\n        if (options.maxScale) SVGDrawing.maxScale = +options.maxScale;\n        if (options.minScale) SVGDrawing.minScale = +options.minScale;\n        applyStyle();\n        return appExports;\n    },\n\n    attach: attachSVGViewer,\n\n    getSVGViewer: function () {\n        return SVGDrawing;\n    }\n};\n\n/**\n * The hook method is invoked before loading the 2D illustartion file. \n * Must return the URL to the 2D illustration file that should be loaded.\n * \n * @function willStartLoadDrawing  \n * @abstract \n * @memberof module:solo.app.drawing\n * @param {string} imageURL Request URL to load 2D illustration\n * @returns {string} Returns URL to load 2D illustration\n */\n\n/**\n * The hook method is invoked before loading the 2D llustration.\n * \n * @function didStartLoadDrawing\n * @abstract \n * @memberof module:solo.app.drawing\n * @param {string} url Request URL to load 2D illustration\n * @see The corresponding event {@link event:\"app.drawing.didStartLoadDrawing\" \"app.drawing.didStartLoadDrawing\"}\n */\n/**\n * @event \"app.drawing.didStartLoadDrawing\"\n * @see The corresponding hook method {@link module:solo.app.drawing.didStartLoadDrawing app.drawing.didStartLoadDrawing()}\n */\n\n/**\n * The hook method is invoked when the 2D llustration is failed to load.\n * \n * @function didFailLoadDrawing\n * @abstract \n * @memberof module:solo.app.drawing\n * @param {string} url Request URL to load 2D illustration\n * @param {string} status Status code\n * @see The corresponding event {@link event:\"app.drawing.didFailLoadDrawing\" \"app.drawing.didFailLoadDrawing\"}\n */\n/**\n * @event \"app.drawing.didFailLoadDrawing\"\n * @see The corresponding hook method {@link module:solo.app.drawing.didFailLoadDrawing app.drawing.didFailLoadDrawing()}\n */\n\n/**\n * The hook method is invoked when the 2D llustration is loaded.\n * \n * @function didFinishLoadDrawing \n * @abstract \n * @memberof module:solo.app.drawing\n * @param {string} url Request URL to load 2D illustration\n * @see The corresponding event {@link event:\"app.drawing.didFinishLoadDrawing\" \"app.drawing.didFinishLoadDrawing\"}\n */\n/**\n * @event \"app.drawing.didFinishLoadDrawing\"\n * @see The corresponding hook method {@link module:solo.app.drawing.didFinishLoadDrawing app.drawing.didFinishLoadDrawing()}\n */\n\n/**\n * The hook is invoked when the hotspot is selected.\n * \n * @function didSelectHotspot \n * @abstract \n * @memberof module:solo.app.drawing\n * @param {string} name Name of the selected hotspot\n * @param {number} keys \n * @see The corresponding event {@link event:\"app.drawing.didSelectHotspot\" \"app.drawing.didSelectHotspot\"}\n */\n/**\n * @event \"app.drawing.didSelectHotspot\"\n * @see The corresponding hook method {@link module:solo.app.drawing.didSelectHotspot app.drawing.didSelectHotspot()}\n */\n\n/**\n * The hook is invoked when the hotspot is highlighted.\n * \n * @function didHoverHotspot \n * @abstract \n * @memberof module:solo.app.drawing\n * @param {string} name Name of the selected hotspot\n * @param {boolean} hover -\n * - true - Hotspot is highlighted\n * - false - Hotspot is not highlighted\n * @see The corresponding event {@link event:\"app.drawing.didHoverHotspot\" \"app.drawing.didHoverHotspot\"}\n */\n/**\n * @event \"app.drawing.didHoverHotspot\"\n * @see The corresponding hook method {@link module:solo.app.drawing.didHoverHotspot app.drawing.didHoverHotspot()}\n */\n\n/**\n * The hook method is invoked when the context menu is called in the 2D window. \n * The mouse uses secondary button click. The touch device uses long tap.\n * \n * @function didCallContextMenu \n * @abstract \n * @memberof module:solo.app.drawing\n * @param {string} name Name of the clicked hotspot or empty string\n * @param {number} offsetX The X coordinate relative to the target element \n * @param {number} offsetY The Y coordinate relative to the target element\n * @param {HTMLElement} target Target element (parent of the element `<svg>`)\n * @see The corresponding event {@link event:\"app.drawing.didCallContextMenu\" \"app.drawing.didCallContextMenu\"}\n */\n/**\n * @event \"app.drawing.didCallContextMenu\"\n * @see The corresponding hook method {@link module:solo.app.drawing.didCallContextMenu app.drawing.didCallContextMenu()}\n */\n\n/**\n * The hook method is invoked when the scale of 2D illustartion is changed.\n * \n * @function didChangeScale \n * @abstract \n * @memberof module:solo.app.drawing\n * @param {number} zoom The value of the scale\n * @see The corresponding event {@link event:\"app.drawing.didChangeScale\" \"app.drawing.didChangeScale\"}\n */\n/**\n * @event \"app.drawing.didChangeScale\"\n * @see The corresponding hook method {@link module:solo.app.drawing.didChangeScale app.drawing.didChangeScale()}\n */\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports) {\n\nmodule.exports = function (metaValues) {\r\n    var metadata = {};\r\n    metaValues.forEach(function (value) {\r\n        var val = value.$text();\r\n        if (/^(Yes|No)$/.test(val)) {\r\n            val = (val == 'Yes');\r\n        }\r\n        metadata[value.$attr('decl-id')] = val;\r\n    });\r\n    return metadata;\r\n};\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar getBaseURL = __webpack_require__(0).getBaseURL;\n\n/**\n * Return base URL.\n * \n * @private\n * @returns {string}\n */\nmodule.exports = {\n    getBaseURL: getBaseURL,\n    getDocumentBaseURL: function () {\n        return getBaseURL(__webpack_require__(1).getDocumentURL());\n    },\n};\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nmodule.exports = {\n  2:      'need dictionary',     /* Z_NEED_DICT       2  */\n  1:      'stream end',          /* Z_STREAM_END      1  */\n  0:      '',                    /* Z_OK              0  */\n  '-1':   'file error',          /* Z_ERRNO         (-1) */\n  '-2':   'stream error',        /* Z_STREAM_ERROR  (-2) */\n  '-3':   'data error',          /* Z_DATA_ERROR    (-3) */\n  '-4':   'insufficient memory', /* Z_MEM_ERROR     (-4) */\n  '-5':   'buffer error',        /* Z_BUF_ERROR     (-5) */\n  '-6':   'incompatible version' /* Z_VERSION_ERROR (-6) */\n};\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports) {\n\nmodule.exports = function (json) {\r\n    var options = {};\r\n\r\n    function valueIterator(value) {\r\n        var val = value.$text();\r\n        if (/^(Yes|No)$/.test(val)) {\r\n            val = (val == 'Yes');\r\n        }\r\n        options[value.$attr('name')] = val;\r\n    }\r\n\r\n    if (json.ipc) {\r\n        json.$('ipc/figure/media').filter(function (media) {\r\n            return media.$attr('id') == 1;\r\n        })[0].$('value').forEach(valueIterator);\r\n    } else if (json.SimulationInteractivity) {\r\n        json.$('SimulationInteractivity/SimulationInformation/Options/Value').forEach(valueIterator);\r\n\r\n        var SimulationInformation = json.SimulationInteractivity.SimulationInformation;\r\n        options.PublisherVersion = SimulationInformation.$text('ExporterVersionNumber');\r\n        options.SpecID = SimulationInformation.$text('SpecID');\r\n        options.SpecVersion = SimulationInformation.$text('SpecVersion');\r\n        options.SpecLang = SimulationInformation.$text('SpecLang');\r\n        options.ModificationDate = SimulationInformation.$text('ModificationDate');\r\n        options.DocumentFile = SimulationInformation.$text('DocumentFile');\r\n    }\r\n\r\n    return options;\r\n};\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports) {\n\n/*\r\n    millicolor('#FF0000') :color\r\n    millicolor({r: 10, g: 200, b: 2}) :color\r\n    millicolor({h: 60, s: 50, l: 20}) :color\r\n\r\n    color.toString() -> #...\r\n    color.toHSVString() -> hsv(...)\r\n    color.toRgbString() -> rgb(...)\r\n\r\n    color.toRgb() -> { r:, g:, b: }\r\n    color.toHsl() -> { h:, s:, l: } \r\n    color.getBrightness()\r\n    color.getLuminance()\r\n\r\n    color.desaturate(amount)\r\n    color.saturate(amount)\r\n    color.grayscale()\r\n    color.lighten(amount)\r\n    color.brighten(amount)\r\n    color.darken(amount)\r\n    color.spin(amount)\r\n    color.complement()\r\n\r\n    millicolor('#FF0000').darken().desaturate()\r\n*/\r\n\r\n/**\r\n * @classdesc A helper object to manipulate the HTML color.\r\n * @class\r\n * @hideconstructor\r\n * @param {number} r 0...255\r\n * @param {number} g 0...255\r\n * @param {number} b 0...255\r\n */\r\nfunction ColorObject(r, g, b) {\r\n\r\n    /**\r\n     * The red component, a number from 0 to 255.\r\n     * @type {number}\r\n     */\r\n    this.r = clamp255(Math.round(r || 0));\r\n    /**\r\n     * The blue component, a number from 0 to 255.\r\n     * @type {number}\r\n     */\r\n    this.b = clamp255(Math.round(b || 0));\r\n    /**\r\n     * The green component, a number from 0 to 255.\r\n     * @type {number}\r\n     */\r\n    this.g = clamp255(Math.round(g || 0));\r\n}\r\n\r\n/**\r\n * @returns {object} RGB object. The value of each RGB component is a number between 0 and 255.\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.toRgb() // { r: 255, g: 0, b: 0 }\r\n */\r\nColorObject.prototype.toRgb = function () {\r\n    return {\r\n        r: this.r,\r\n        g: this.g,\r\n        b: this.b\r\n    };\r\n};\r\n\r\n/**\r\n * @returns {object} HSL object. The value of each HSL component is a number between 0 and 1.\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.toHsl() // { h: 0, s: 1, l: 0.5 }\r\n */\r\nColorObject.prototype.toHsl = function () {\r\n    var r = bound01(this.r, 255),\r\n        g = bound01(this.g, 255),\r\n        b = bound01(this.b, 255),\r\n        max = Math.max(r, g, b),\r\n        min = Math.min(r, g, b);\r\n\r\n    var h = 0,\r\n        s = 0,\r\n        l = (max + min) / 2;\r\n\r\n    if (max !== min) {\r\n        var d = max - min;\r\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n        switch (max) {\r\n            case r:\r\n                h = (g - b) / d + (g < b ? 6 : 0);\r\n                break;\r\n            case g:\r\n                h = (b - r) / d + 2;\r\n                break;\r\n            case b:\r\n                h = (r - g) / d + 4;\r\n                break;\r\n        }\r\n\r\n        h /= 6;\r\n    }\r\n\r\n    return {\r\n        h: h * 360,\r\n        s: s * 100,\r\n        l: l * 100\r\n    };\r\n};\r\n\r\n/**\r\n * @returns {string} HTML hex string.\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.toString() // \"#ff0000\"\r\n */\r\nColorObject.prototype.toString = function () {\r\n    var hex = '000000' + ((this.r << 16) + (this.g << 8) + this.b).toString(16);\r\n    return '#' + hex.substring(hex.length - 6);\r\n};\r\n\r\n/**\r\n * @returns {string} HTML hsl string.\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.toHslString() // \"hsl(0, 100, 50)\"\r\n */\r\nColorObject.prototype.toHslString = function () {\r\n    var hsl = this.toHsl();\r\n    return 'hsl(' + Math.round(hsl.h) + ',' + Math.round(hsl.s) + ',' + Math.round(hsl.l) + ')';\r\n};\r\n\r\n/**\r\n * @returns {string} HTML rgb string.\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.toRgbString() // \"rgb(255, 0, 0)\"\r\n */\r\nColorObject.prototype.toRgbString = function () {\r\n    return 'rgb(' + this.r + ',' + this.g + ',' + this.b + ')';\r\n};\r\n\r\n/**\r\n * Returns the inverse color.\r\n * \r\n * @returns {ColorObject} \r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.inverse().toRgbString() // \"rgb(0, 255, 255)\"\r\n */\r\nColorObject.prototype.inverse = function () {\r\n    var rgb = this.toRgb();\r\n    rgb.r = 255 - rgb.r;\r\n    rgb.g = 255 - rgb.g;\r\n    rgb.b = 255 - rgb.b;\r\n    return millicolor(rgb);\r\n};\r\n\r\n/**\r\n * Returns the perceived brightness of a color, from 0 to 255.\r\n * \r\n * @returns {number} \r\n * @see {@link http://www.w3.org/TR/AERT#color-contrast}\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.getBrightness() // 76.245\r\n */\r\nColorObject.prototype.getBrightness = function () {\r\n    var rgb = this.toRgb();\r\n    return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;\r\n};\r\n\r\n/**\r\n * Returns the perceived luminance of a color, from 0 to 1.\r\n * \r\n * @returns {number} \r\n * @see {@link http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef}\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.getLuminance() // 0.2126\r\n */\r\nColorObject.prototype.getLuminance = function () {\r\n    var rgb = this.toRgb(),\r\n        R01 = rgb.r / 255,\r\n        G01 = rgb.g / 255,\r\n        B01 = rgb.b / 255,\r\n        R, G, B;\r\n\r\n    if (R01 <= 0.03928) {\r\n        R = R01 / 12.92;\r\n    } else {\r\n        R = Math.pow(((R01 + 0.055) / 1.055), 2.4);\r\n    }\r\n    if (G01 <= 0.03928) {\r\n        G = G01 / 12.92;\r\n    } else {\r\n        G = Math.pow(((G01 + 0.055) / 1.055), 2.4);\r\n    }\r\n    if (B01 <= 0.03928) {\r\n        B = B01 / 12.92;\r\n    } else {\r\n        B = Math.pow(((B01 + 0.055) / 1.055), 2.4);\r\n    }\r\n\r\n    return (0.2126 * R) + (0.7152 * G) + (0.0722 * B);\r\n};\r\n\r\n/**\r\n * Desaturate the color by the specified value, from 0 to 100. Setting 100 is equivalent to calling greyscale.\r\n * \r\n * @param {number} [amount=10] 0...100\r\n * @returns {ColorObject}\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.desaturate().toRgbString() // \"rgb(242, 13, 13)\"\r\n */\r\nColorObject.prototype.desaturate = function (amount) {\r\n    amount = (amount === 0) ? 0 : (amount || 10);\r\n    var hsl = this.toHsl();\r\n    hsl.s -= amount;\r\n    hsl.s = clamp01(hsl.s / 100) * 100;\r\n    return millicolor(hsl);\r\n};\r\n\r\n/**\r\n * Saturate the color by the specified value, from 0 to 100.\r\n * \r\n * @param {number} [amount=10] 0...100\r\n * @returns {ColorObject}\r\n * @example\r\nvar color = new ColorObject(242, 13, 13);\r\ncolor.saturate().toRgbString() // \"rgb(255, 0, 0)\"\r\n */\r\nColorObject.prototype.saturate = function (amount) {\r\n    amount = (amount === 0) ? 0 : (amount || 10);\r\n    var hsl = this.toHsl();\r\n    hsl.s += amount;\r\n    hsl.s = clamp01(hsl.s / 100) * 100;\r\n    return millicolor(hsl);\r\n};\r\n\r\n/**\r\n * Completely desaturates a color into greyscale. This is equivalent to calling desaturate(100).\r\n * \r\n * @returns {ColorObject}\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.grayscale().toRgbString() // \"rgb(128, 128, 128)\"\r\n */\r\nColorObject.prototype.grayscale = function () {\r\n    return this.desaturate(100);\r\n};\r\n\r\n/**\r\n * Returns a lighter by the specified value, from 0 to 100 (in percent). Use the value of 100 for the white color.\r\n * \r\n * @param {number} [amount=10] 0...100\r\n * @returns {ColorObject}\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.lighten().toRgbString() // \"rgb(255, 51, 51)\"\r\n */\r\nColorObject.prototype.lighten = function (amount) {\r\n    amount = (amount === 0) ? 0 : (amount || 10);\r\n    var hsl = this.toHsl();\r\n    hsl.l += amount;\r\n    hsl.l = clamp01(hsl.l / 100) * 100;\r\n    return millicolor(hsl);\r\n};\r\n\r\n/**\r\n * Returns a darker color by the specified value, from 0 to 100 (in percent). Use the value of 100 for the black color.\r\n * \r\n * @param {number} [amount=10] 0...100\r\n * @returns {ColorObject}\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.darken().toRgbString() // \"rgb(204, 0, 0)\"\r\n */\r\nColorObject.prototype.darken = function (amount) {\r\n    amount = (amount === 0) ? 0 : (amount || 10);\r\n    var hsl = this.toHsl();\r\n    hsl.l -= amount;\r\n    hsl.l = clamp01(hsl.l / 100) * 100;\r\n    return millicolor(hsl);\r\n};\r\n\r\n/**\r\n * Spin the hue by the specified value, from -360 to 360. \r\n * Calling with 0, 360, or -360 will do nothing (since it sets the hue back to what it was before).\r\n * \r\n * @param {number} amount --360...360\r\n * @returns {ColorObject}\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.spin(90).toHslString() // \"hsl(90, 100, 50)\"\r\n */\r\nColorObject.prototype.spin = function (amount) {\r\n    var hsl = this.toHsl();\r\n    var hue = (hsl.h + amount) % 360;\r\n    hsl.h = hue < 0 ? 360 + hue : hue;\r\n    return millicolor(hsl);\r\n};\r\n\r\n/**\r\n * Returns a brighter color by the specified value, from 0 to 100 (in percent).\r\n * \r\n * @param {number} [amount=10] 0...100\r\n * @returns {ColorObject}\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.brighten().toRgbString() // \"rgb(255, 25, 25)\"\r\n */\r\nColorObject.prototype.brighten = function (amount) {\r\n    amount = (amount === 0) ? 0 : (amount || 10);\r\n    var rgb = this.toRgb();\r\n    rgb.r = clamp255(rgb.r - Math.round(-255 * (amount / 100)));\r\n    rgb.g = clamp255(rgb.g - Math.round(-255 * (amount / 100)));\r\n    rgb.b = clamp255(rgb.b - Math.round(-255 * (amount / 100)));\r\n    return millicolor(rgb);\r\n};\r\n\r\n/**\r\n * Returns the complement color. This is equivalent to calling spin(180).\r\n * \r\n * @returns {ColorObject}\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.complement().toHslString() // \"hsl(180, 100, 50)\"\r\n */\r\nColorObject.prototype.complement = function () {\r\n    var hsl = this.toHsl();\r\n    hsl.h = (hsl.h + 180) % 360;\r\n    return millicolor(hsl);\r\n};\r\n\r\nfunction clamp01(value) {\r\n    return Math.max(0, Math.min(1, value));\r\n}\r\n\r\nfunction clamp255(value) {\r\n    return Math.max(0, Math.min(255, value));\r\n}\r\n\r\nfunction bound01(n, max) {\r\n    if ((Math.abs(n - max) < 0.000001)) {\r\n        return 1;\r\n    }\r\n    return (n % max) / parseFloat(max);\r\n}\r\n\r\nfunction hue2rgb(p, q, t) {\r\n    if (t < 0) t += 1;\r\n    if (t > 1) t -= 1;\r\n    if (t < 1 / 6) return p + (q - p) * 6 * t;\r\n    if (t < 1 / 2) return q;\r\n    if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\r\n    return p;\r\n}\r\n\r\n/**\r\n * Returns a new instance of ColorObject\r\n *\r\n * @private\r\n * @param {*} color\r\n * @returns {ColorObject}\r\n */\r\nfunction millicolor(color) {\r\n    var hex, r, g, b, a;\r\n    if (typeof color === 'string') {\r\n        a = color.match(/^#?([0-9A-F]{6})$/i);\r\n        if (a) {\r\n            hex = a[1];\r\n            r = parseInt(hex.substr(0, 2), 16);\r\n            g = parseInt(hex.substr(2, 2), 16);\r\n            b = parseInt(hex.substr(4, 2), 16);\r\n            return new ColorObject(r, g, b);\r\n        }\r\n        a = color.match(/^#?([0-9A-F]{3})$/i);\r\n        if (a) {\r\n            hex = a[1];\r\n            r = parseInt(hex.substr(0, 1) + hex.substr(0, 1), 16);\r\n            g = parseInt(hex.substr(1, 1) + hex.substr(1, 1), 16);\r\n            b = parseInt(hex.substr(2, 1) + hex.substr(2, 1), 16);\r\n            return new ColorObject(r, g, b);\r\n        }\r\n        throw new Error('Not a hex color: ' + color);\r\n    }\r\n\r\n    if (typeof color === 'object') {\r\n        if (color.r !== void 0 && color.g !== void 0 && color.b !== void 0) {\r\n            return new ColorObject(color.r, color.g, color.b);\r\n        }\r\n        if (color.h !== void 0 && color.s !== void 0 && color.l !== void 0) {\r\n            var h = bound01(color.h, 360),\r\n                s = bound01(color.s, 100),\r\n                l = bound01(color.l, 100);\r\n\r\n            if (s === 0) {\r\n                r = g = b = l; // achromatic\r\n            } else {\r\n                var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n                var p = 2 * l - q;\r\n                r = hue2rgb(p, q, h + 1 / 3);\r\n                g = hue2rgb(p, q, h);\r\n                b = hue2rgb(p, q, h - 1 / 3);\r\n            }\r\n\r\n            return new ColorObject(r * 255, g * 255, b * 255);\r\n        }\r\n        throw new Error('Can not recognize color object');\r\n    }\r\n\r\n    if (typeof color === 'number') {\r\n        r = color & 0xFF;\r\n        g = (color >> 8) & 0xFF;\r\n        b = (color >> 16) & 0xFF;\r\n        return new ColorObject(r, g, b);\r\n    }\r\n\r\n    return new ColorObject();\r\n}\r\n\r\nmodule.exports = millicolor;\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar util = __webpack_require__(0);\r\n\r\nfunction camelToKebab(s) {\r\n    return s.replace(/(\\S)([A-Z])/g, function ($0, $1, $2) {\r\n        return $1 + '-' + $2.toLowerCase();\r\n    });\r\n}\r\n\r\n/*\r\n    css({\r\n        'selector': {                   // selector {}\r\n            backgroundColor: \"#FFF\"\r\n            '&': {\r\n                'child_selector': {},   // selector child_selector {}\r\n                '& > selector': {}      // selector > selector {}\r\n            },\r\n            '&:first-child': {}         // selector:first-child {}\r\n        },\r\n        '@media print': {               // @media print { selector {} }\r\n            'selector': {}\r\n        }\r\n    })\r\n*/\r\n\r\n/**\r\n * @classdesc A helper object for managing CSS rules.\r\n * @class\r\n * @hideconstructor\r\n * @param {object} [rules] An object with CSS rules.\r\n * @param {*} [parent]\r\n */\r\nfunction CSSObject(options, parent) {\r\n    if (parent) {\r\n        this.parent = parent;\r\n    }\r\n    /**\r\n     * The rules property contains the CSS rules as a JavaScript object. \r\n     * \r\n     * The CSS property name should be written as camelCased name instead of kebab-cased (hyphen-delimited) name.\r\n     * \r\n     * You can use '&' in CSS selector to indicate the selector of the parent rule.\r\n     * \r\n     * @type {object}\r\n     * @example\r\n{\r\n    body: {\r\n        color: 'darkgray',\r\n        backgroundColor: '#EDFFFF'\r\n        '& > div': {\r\n            fontWeight: 'bold',\r\n            opacity: 0.5\r\n        }\r\n    }\r\n}\r\n     * @example <caption>CSS</caption>\r\nbody {\r\n    color: darkgray;\r\n    background-color: #EDFFFF;\r\n}\r\nbody > div {\r\n    font-weight: bold;\r\n    opacity: 0.5;\r\n}\r\n     */\r\n    this.rules = options || {};\r\n    /**\r\n     * Reference to `<style>` element in which CSS rules are rendered.\r\n     * @type {HTMLElement}\r\n     */\r\n    this.style = null;\r\n}\r\n\r\n/**\r\n * Returns string representation for the CSS object.\r\n * \r\n * @return {string} CSS syntax\r\n * @example\r\nCortona3DSolo.app.ui.css({body: { backgroundColor: 'red' } }).toString()\r\n// -> \"body { background-color: red; }\"\r\n */\r\nCSSObject.prototype.toString = function () {\r\n    var syntax = '',\r\n        rule,\r\n        selector,\r\n        prop,\r\n        fullSelector,\r\n        parent = this.parent,\r\n        trim = /(^\\s+|\\s+$)/,\r\n        children;\r\n    for (selector in this.rules) {\r\n        var isMedia = selector.indexOf('@media') === 0 && !parent;\r\n        if (this.rules.hasOwnProperty(selector)) {\r\n            if (syntax) {\r\n                syntax += '\\n';\r\n            }\r\n            if (parent) {\r\n                fullSelector = selector.split(/\\s*,\\s*/).map(function (s) {\r\n                    s = s.replace(trim, '');\r\n                    return (s.indexOf('&') < 0) ? (parent + ' ' + s) : s.replace(/&/, parent);\r\n                }).join(',');\r\n            } else {\r\n                fullSelector = selector.replace(trim, '');\r\n            }\r\n            syntax += fullSelector + ' {';\r\n            if (isMedia) {\r\n                syntax += '\\n' + new CSSObject(this.rules[selector]);\r\n            } else {\r\n                children = [];\r\n                rule = this.rules[selector];\r\n                if (util.isObject(rule)) {\r\n                    for (prop in rule) {\r\n                        if (rule.hasOwnProperty(prop)) {\r\n                            if (prop.indexOf('&') < 0) {\r\n                                syntax += '\\n' + camelToKebab(prop) + ': ' + rule[prop] + ';';\r\n                            } else if (prop !== '&') {\r\n                                children.push(prop);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            syntax += '\\n}';\r\n            if (!isMedia) {\r\n                children.forEach(function (prop) {\r\n                    var o = {};\r\n                    o[prop] = rule[prop];\r\n                    syntax += '\\n' + new CSSObject(o, fullSelector);\r\n                });\r\n                if (util.isObject(rule['&'])) {\r\n                    syntax += '\\n' + new CSSObject(rule['&'], fullSelector);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return syntax;\r\n};\r\n\r\n/**\r\n * Apply CSS rules to an HTML page.\r\n * \r\n * @param {object} [rules] Additional rules for merging with existing ones. \r\n * @return {CSSObject}\r\n * @example\r\nvar css = Cortona3DSolo.app.ui.css({body: { backgroundColor: 'red' } });\r\ncss.render({ body: { color: 'white' } });\r\n// -> body { background-color: red; color: white; }\r\n */\r\nCSSObject.prototype.render = function (options) {\r\n    if (!this.style) {\r\n        this.style = document.head.appendChild(document.createElement('style'));\r\n        this.style.type = 'text/css';\r\n    }\r\n    if (options) {\r\n        util.expand(this.rules, options);\r\n    }\r\n    this.style.innerHTML = this.toString();\r\n    return this;\r\n};\r\n\r\n/**\r\n * Clears all CSS rules.\r\n * \r\n * @return {CSSObject}\r\n */\r\nCSSObject.prototype.clear = function () {\r\n    this.rules = {};\r\n    return this;\r\n};\r\n\r\n/**\r\n * Returns new instance of CSSObject.\r\n * \r\n * @private\r\n * @param {object} [rules]\r\n * @return {CSSObject}\r\n */\r\nfunction css(options) {\r\n    return new CSSObject(options);\r\n}\r\n\r\nmodule.exports = css;\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n * XML to JSON converter\n *\n * @module xml2json\n * @author timduck@cortona3d.com\n */\n\nvar XMLNodeData = __webpack_require__(66);\n\n/**\n * Convert XML tree to JSON object\n * \n * <node att1=\"att1-value\" att2=\"att2-value\">\n *      <foo>Foo</foo>\n *      <bar>\n *          <![CDATA[Bar]]>\n *      </bar>\n *      <items>\n *          <item>i1</item>\n *          <item>i2</item>\n *          <item>i3</item>\n *          <item>i4</item>\n *      </items>\n * </node>\n * \n * {\n *  node: {\n *      \"@attributes\": {\n *          att1: \"att1-value\",\n *          att2: \"att2-value\"\n *      },\n *      foo: { \"#text\": \"Foo\" },\n *      bar: { \"#text\": \"Bar\" },\n *      items: {\n *          item: [\n *              { \"#text\": \"i1\" },\n *              { \"#text\": \"i2\" },\n *              { \"#text\": \"i3\" },\n *              { \"#text\": \"i4\" }\n *          ]\n *      }\n *  }\n * }\n * \n * @param {DOMNode} xml The XML DOMNode\n * @returns {XMLNodeData} The JavaScript object\n */\n\n/*\n * var json = xmlToJson(xmlNode);\n * /node/foo/text() --> json.node.foo['#text'] --> json.node.foo.$text()\n * /node/bar --> json.node.bar['#text'] --> json.node.bar.$text()\n * count(/node/children/item) --> json.$(json.node.children.item).length --> json.$('node/children/item').length\n * /node/children/item[2] --> json.node.children.item[1] --> json.$('node.children.item')[1]\n * /node/@att1 --> json.node['@attributes'].att1 --> json.node.$attr('att1')\n * \n */ \n\nfunction xmlToJson(xml) {\n    var obj = new XMLNodeData();\n\n    if (xml.nodeType == 1) { // element\n        // node name\n        obj[\"@name\"] = xml.nodeName;\n        // attributes\n        if (xml.attributes.length > 0) {\n            obj[\"@attributes\"] = {};\n            for (var j = 0; j < xml.attributes.length; j++) {\n                var attribute = xml.attributes.item(j);\n                obj[\"@attributes\"][attribute.nodeName] = attribute.nodeValue;\n            }\n        }\n    }\n\n    // children\n    var hasText = false;\n    var hasMultiText = false;\n    var hasNodes = false;\n    var hasCDATA = false;\n    if (xml.hasChildNodes()) {\n        obj['@children'] = [];\n        for (var i = 0; i < xml.childNodes.length; i++) {\n            var item = xml.childNodes.item(i);\n            var nodeName = item.nodeName;\n            var isElement = item.nodeType === 1;\n            var isText = item.nodeType === 3;\n            var child = xmlToJson(item);\n            hasText = hasText || isText;\n            hasNodes = hasNodes || !isText;\n            hasCDATA = hasCDATA || item.nodeType === 4;\n            if (typeof obj[nodeName] === \"undefined\") {\n                obj[nodeName] = child;\n            } else {\n                if (typeof obj[nodeName].push === \"undefined\") {\n                    hasMultiText = hasMultiText || isText;\n                    var old = obj[nodeName];\n                    obj[nodeName] = [];\n                    obj[nodeName].push(old);\n                }\n                obj[nodeName].push(child);\n            }\n            if (isElement || (isText && child)) obj['@children'].push(child);\n        }\n\n        if (hasMultiText) {\n            obj['#text'] = obj['#text'].join('').replace(/^[\\s\\r\\n]*$/, '');\n        }\n        if (hasText && hasNodes) {\n            delete obj['#text'];\n        }\n        if (hasCDATA) {\n            obj['#text'] = obj['#cdata-section'];\n            delete obj['#cdata-section'];\n        }\n    } else if (typeof xml.nodeValue === \"string\") {\n        obj = xml.nodeValue.replace(/^[\\s\\r\\n]*$/, '');\n    }\n\n    return obj;\n}\n\nmodule.exports = xmlToJson;\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_RESULT__;/*! Hammer.JS - v2.0.7 - 2016-04-22\n * http://hammerjs.github.io/\n *\n * Copyright (c) 2016 Jorik Tangelder;\n * Licensed under the MIT license */\n(function(window, document, exportName, undefined) {\n  'use strict';\n\nvar VENDOR_PREFIXES = ['', 'webkit', 'Moz', 'MS', 'ms', 'o'];\nvar TEST_ELEMENT = document.createElement('div');\n\nvar TYPE_FUNCTION = 'function';\n\nvar round = Math.round;\nvar abs = Math.abs;\nvar now = Date.now;\n\n/**\n * set a timeout with a given scope\n * @param {Function} fn\n * @param {Number} timeout\n * @param {Object} context\n * @returns {number}\n */\nfunction setTimeoutContext(fn, timeout, context) {\n    return setTimeout(bindFn(fn, context), timeout);\n}\n\n/**\n * if the argument is an array, we want to execute the fn on each entry\n * if it aint an array we don't want to do a thing.\n * this is used by all the methods that accept a single and array argument.\n * @param {*|Array} arg\n * @param {String} fn\n * @param {Object} [context]\n * @returns {Boolean}\n */\nfunction invokeArrayArg(arg, fn, context) {\n    if (Array.isArray(arg)) {\n        each(arg, context[fn], context);\n        return true;\n    }\n    return false;\n}\n\n/**\n * walk objects and arrays\n * @param {Object} obj\n * @param {Function} iterator\n * @param {Object} context\n */\nfunction each(obj, iterator, context) {\n    var i;\n\n    if (!obj) {\n        return;\n    }\n\n    if (obj.forEach) {\n        obj.forEach(iterator, context);\n    } else if (obj.length !== undefined) {\n        i = 0;\n        while (i < obj.length) {\n            iterator.call(context, obj[i], i, obj);\n            i++;\n        }\n    } else {\n        for (i in obj) {\n            obj.hasOwnProperty(i) && iterator.call(context, obj[i], i, obj);\n        }\n    }\n}\n\n/**\n * wrap a method with a deprecation warning and stack trace\n * @param {Function} method\n * @param {String} name\n * @param {String} message\n * @returns {Function} A new function wrapping the supplied method.\n */\nfunction deprecate(method, name, message) {\n    var deprecationMessage = 'DEPRECATED METHOD: ' + name + '\\n' + message + ' AT \\n';\n    return function() {\n        var e = new Error('get-stack-trace');\n        var stack = e && e.stack ? e.stack.replace(/^[^\\(]+?[\\n$]/gm, '')\n            .replace(/^\\s+at\\s+/gm, '')\n            .replace(/^Object.<anonymous>\\s*\\(/gm, '{anonymous}()@') : 'Unknown Stack Trace';\n\n        var log = window.console && (window.console.warn || window.console.log);\n        if (log) {\n            log.call(window.console, deprecationMessage, stack);\n        }\n        return method.apply(this, arguments);\n    };\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} target\n * @param {...Object} objects_to_assign\n * @returns {Object} target\n */\nvar assign;\nif (typeof Object.assign !== 'function') {\n    assign = function assign(target) {\n        if (target === undefined || target === null) {\n            throw new TypeError('Cannot convert undefined or null to object');\n        }\n\n        var output = Object(target);\n        for (var index = 1; index < arguments.length; index++) {\n            var source = arguments[index];\n            if (source !== undefined && source !== null) {\n                for (var nextKey in source) {\n                    if (source.hasOwnProperty(nextKey)) {\n                        output[nextKey] = source[nextKey];\n                    }\n                }\n            }\n        }\n        return output;\n    };\n} else {\n    assign = Object.assign;\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} dest\n * @param {Object} src\n * @param {Boolean} [merge=false]\n * @returns {Object} dest\n */\nvar extend = deprecate(function extend(dest, src, merge) {\n    var keys = Object.keys(src);\n    var i = 0;\n    while (i < keys.length) {\n        if (!merge || (merge && dest[keys[i]] === undefined)) {\n            dest[keys[i]] = src[keys[i]];\n        }\n        i++;\n    }\n    return dest;\n}, 'extend', 'Use `assign`.');\n\n/**\n * merge the values from src in the dest.\n * means that properties that exist in dest will not be overwritten by src\n * @param {Object} dest\n * @param {Object} src\n * @returns {Object} dest\n */\nvar merge = deprecate(function merge(dest, src) {\n    return extend(dest, src, true);\n}, 'merge', 'Use `assign`.');\n\n/**\n * simple class inheritance\n * @param {Function} child\n * @param {Function} base\n * @param {Object} [properties]\n */\nfunction inherit(child, base, properties) {\n    var baseP = base.prototype,\n        childP;\n\n    childP = child.prototype = Object.create(baseP);\n    childP.constructor = child;\n    childP._super = baseP;\n\n    if (properties) {\n        assign(childP, properties);\n    }\n}\n\n/**\n * simple function bind\n * @param {Function} fn\n * @param {Object} context\n * @returns {Function}\n */\nfunction bindFn(fn, context) {\n    return function boundFn() {\n        return fn.apply(context, arguments);\n    };\n}\n\n/**\n * let a boolean value also be a function that must return a boolean\n * this first item in args will be used as the context\n * @param {Boolean|Function} val\n * @param {Array} [args]\n * @returns {Boolean}\n */\nfunction boolOrFn(val, args) {\n    if (typeof val == TYPE_FUNCTION) {\n        return val.apply(args ? args[0] || undefined : undefined, args);\n    }\n    return val;\n}\n\n/**\n * use the val2 when val1 is undefined\n * @param {*} val1\n * @param {*} val2\n * @returns {*}\n */\nfunction ifUndefined(val1, val2) {\n    return (val1 === undefined) ? val2 : val1;\n}\n\n/**\n * addEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction addEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.addEventListener(type, handler, false);\n    });\n}\n\n/**\n * removeEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction removeEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.removeEventListener(type, handler, false);\n    });\n}\n\n/**\n * find if a node is in the given parent\n * @method hasParent\n * @param {HTMLElement} node\n * @param {HTMLElement} parent\n * @return {Boolean} found\n */\nfunction hasParent(node, parent) {\n    while (node) {\n        if (node == parent) {\n            return true;\n        }\n        node = node.parentNode;\n    }\n    return false;\n}\n\n/**\n * small indexOf wrapper\n * @param {String} str\n * @param {String} find\n * @returns {Boolean} found\n */\nfunction inStr(str, find) {\n    return str.indexOf(find) > -1;\n}\n\n/**\n * split string on whitespace\n * @param {String} str\n * @returns {Array} words\n */\nfunction splitStr(str) {\n    return str.trim().split(/\\s+/g);\n}\n\n/**\n * find if a array contains the object using indexOf or a simple polyFill\n * @param {Array} src\n * @param {String} find\n * @param {String} [findByKey]\n * @return {Boolean|Number} false when not found, or the index\n */\nfunction inArray(src, find, findByKey) {\n    if (src.indexOf && !findByKey) {\n        return src.indexOf(find);\n    } else {\n        var i = 0;\n        while (i < src.length) {\n            if ((findByKey && src[i][findByKey] == find) || (!findByKey && src[i] === find)) {\n                return i;\n            }\n            i++;\n        }\n        return -1;\n    }\n}\n\n/**\n * convert array-like objects to real arrays\n * @param {Object} obj\n * @returns {Array}\n */\nfunction toArray(obj) {\n    return Array.prototype.slice.call(obj, 0);\n}\n\n/**\n * unique array with objects based on a key (like 'id') or just by the array's value\n * @param {Array} src [{id:1},{id:2},{id:1}]\n * @param {String} [key]\n * @param {Boolean} [sort=False]\n * @returns {Array} [{id:1},{id:2}]\n */\nfunction uniqueArray(src, key, sort) {\n    var results = [];\n    var values = [];\n    var i = 0;\n\n    while (i < src.length) {\n        var val = key ? src[i][key] : src[i];\n        if (inArray(values, val) < 0) {\n            results.push(src[i]);\n        }\n        values[i] = val;\n        i++;\n    }\n\n    if (sort) {\n        if (!key) {\n            results = results.sort();\n        } else {\n            results = results.sort(function sortUniqueArray(a, b) {\n                return a[key] > b[key];\n            });\n        }\n    }\n\n    return results;\n}\n\n/**\n * get the prefixed property\n * @param {Object} obj\n * @param {String} property\n * @returns {String|Undefined} prefixed\n */\nfunction prefixed(obj, property) {\n    var prefix, prop;\n    var camelProp = property[0].toUpperCase() + property.slice(1);\n\n    var i = 0;\n    while (i < VENDOR_PREFIXES.length) {\n        prefix = VENDOR_PREFIXES[i];\n        prop = (prefix) ? prefix + camelProp : property;\n\n        if (prop in obj) {\n            return prop;\n        }\n        i++;\n    }\n    return undefined;\n}\n\n/**\n * get a unique id\n * @returns {number} uniqueId\n */\nvar _uniqueId = 1;\nfunction uniqueId() {\n    return _uniqueId++;\n}\n\n/**\n * get the window object of an element\n * @param {HTMLElement} element\n * @returns {DocumentView|Window}\n */\nfunction getWindowForElement(element) {\n    var doc = element.ownerDocument || element;\n    return (doc.defaultView || doc.parentWindow || window);\n}\n\nvar MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android/i;\n\nvar SUPPORT_TOUCH = ('ontouchstart' in window);\nvar SUPPORT_POINTER_EVENTS = prefixed(window, 'PointerEvent') !== undefined;\nvar SUPPORT_ONLY_TOUCH = SUPPORT_TOUCH && MOBILE_REGEX.test(navigator.userAgent);\n\nvar INPUT_TYPE_TOUCH = 'touch';\nvar INPUT_TYPE_PEN = 'pen';\nvar INPUT_TYPE_MOUSE = 'mouse';\nvar INPUT_TYPE_KINECT = 'kinect';\n\nvar COMPUTE_INTERVAL = 25;\n\nvar INPUT_START = 1;\nvar INPUT_MOVE = 2;\nvar INPUT_END = 4;\nvar INPUT_CANCEL = 8;\n\nvar DIRECTION_NONE = 1;\nvar DIRECTION_LEFT = 2;\nvar DIRECTION_RIGHT = 4;\nvar DIRECTION_UP = 8;\nvar DIRECTION_DOWN = 16;\n\nvar DIRECTION_HORIZONTAL = DIRECTION_LEFT | DIRECTION_RIGHT;\nvar DIRECTION_VERTICAL = DIRECTION_UP | DIRECTION_DOWN;\nvar DIRECTION_ALL = DIRECTION_HORIZONTAL | DIRECTION_VERTICAL;\n\nvar PROPS_XY = ['x', 'y'];\nvar PROPS_CLIENT_XY = ['clientX', 'clientY'];\n\n/**\n * create new input type manager\n * @param {Manager} manager\n * @param {Function} callback\n * @returns {Input}\n * @constructor\n */\nfunction Input(manager, callback) {\n    var self = this;\n    this.manager = manager;\n    this.callback = callback;\n    this.element = manager.element;\n    this.target = manager.options.inputTarget;\n\n    // smaller wrapper around the handler, for the scope and the enabled state of the manager,\n    // so when disabled the input events are completely bypassed.\n    this.domHandler = function(ev) {\n        if (boolOrFn(manager.options.enable, [manager])) {\n            self.handler(ev);\n        }\n    };\n\n    this.init();\n\n}\n\nInput.prototype = {\n    /**\n     * should handle the inputEvent data and trigger the callback\n     * @virtual\n     */\n    handler: function() { },\n\n    /**\n     * bind the events\n     */\n    init: function() {\n        this.evEl && addEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && addEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && addEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    },\n\n    /**\n     * unbind the events\n     */\n    destroy: function() {\n        this.evEl && removeEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && removeEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && removeEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    }\n};\n\n/**\n * create new input type manager\n * called by the Manager constructor\n * @param {Hammer} manager\n * @returns {Input}\n */\nfunction createInputInstance(manager) {\n    var Type;\n    var inputClass = manager.options.inputClass;\n\n    if (inputClass) {\n        Type = inputClass;\n    } else if (SUPPORT_POINTER_EVENTS) {\n        Type = PointerEventInput;\n    } else if (SUPPORT_ONLY_TOUCH) {\n        Type = TouchInput;\n    } else if (!SUPPORT_TOUCH) {\n        Type = MouseInput;\n    } else {\n        Type = TouchMouseInput;\n    }\n    return new (Type)(manager, inputHandler);\n}\n\n/**\n * handle input events\n * @param {Manager} manager\n * @param {String} eventType\n * @param {Object} input\n */\nfunction inputHandler(manager, eventType, input) {\n    var pointersLen = input.pointers.length;\n    var changedPointersLen = input.changedPointers.length;\n    var isFirst = (eventType & INPUT_START && (pointersLen - changedPointersLen === 0));\n    var isFinal = (eventType & (INPUT_END | INPUT_CANCEL) && (pointersLen - changedPointersLen === 0));\n\n    input.isFirst = !!isFirst;\n    input.isFinal = !!isFinal;\n\n    if (isFirst) {\n        manager.session = {};\n    }\n\n    // source event is the normalized value of the domEvents\n    // like 'touchstart, mouseup, pointerdown'\n    input.eventType = eventType;\n\n    // compute scale, rotation etc\n    computeInputData(manager, input);\n\n    // emit secret event\n    manager.emit('hammer.input', input);\n\n    manager.recognize(input);\n    manager.session.prevInput = input;\n}\n\n/**\n * extend the data with some usable properties like scale, rotate, velocity etc\n * @param {Object} manager\n * @param {Object} input\n */\nfunction computeInputData(manager, input) {\n    var session = manager.session;\n    var pointers = input.pointers;\n    var pointersLength = pointers.length;\n\n    // store the first input to calculate the distance and direction\n    if (!session.firstInput) {\n        session.firstInput = simpleCloneInputData(input);\n    }\n\n    // to compute scale and rotation we need to store the multiple touches\n    if (pointersLength > 1 && !session.firstMultiple) {\n        session.firstMultiple = simpleCloneInputData(input);\n    } else if (pointersLength === 1) {\n        session.firstMultiple = false;\n    }\n\n    var firstInput = session.firstInput;\n    var firstMultiple = session.firstMultiple;\n    var offsetCenter = firstMultiple ? firstMultiple.center : firstInput.center;\n\n    var center = input.center = getCenter(pointers);\n    input.timeStamp = now();\n    input.deltaTime = input.timeStamp - firstInput.timeStamp;\n\n    input.angle = getAngle(offsetCenter, center);\n    input.distance = getDistance(offsetCenter, center);\n\n    computeDeltaXY(session, input);\n    input.offsetDirection = getDirection(input.deltaX, input.deltaY);\n\n    var overallVelocity = getVelocity(input.deltaTime, input.deltaX, input.deltaY);\n    input.overallVelocityX = overallVelocity.x;\n    input.overallVelocityY = overallVelocity.y;\n    input.overallVelocity = (abs(overallVelocity.x) > abs(overallVelocity.y)) ? overallVelocity.x : overallVelocity.y;\n\n    input.scale = firstMultiple ? getScale(firstMultiple.pointers, pointers) : 1;\n    input.rotation = firstMultiple ? getRotation(firstMultiple.pointers, pointers) : 0;\n\n    input.maxPointers = !session.prevInput ? input.pointers.length : ((input.pointers.length >\n        session.prevInput.maxPointers) ? input.pointers.length : session.prevInput.maxPointers);\n\n    computeIntervalInputData(session, input);\n\n    // find the correct target\n    var target = manager.element;\n    if (hasParent(input.srcEvent.target, target)) {\n        target = input.srcEvent.target;\n    }\n    input.target = target;\n}\n\nfunction computeDeltaXY(session, input) {\n    var center = input.center;\n    var offset = session.offsetDelta || {};\n    var prevDelta = session.prevDelta || {};\n    var prevInput = session.prevInput || {};\n\n    if (input.eventType === INPUT_START || prevInput.eventType === INPUT_END) {\n        prevDelta = session.prevDelta = {\n            x: prevInput.deltaX || 0,\n            y: prevInput.deltaY || 0\n        };\n\n        offset = session.offsetDelta = {\n            x: center.x,\n            y: center.y\n        };\n    }\n\n    input.deltaX = prevDelta.x + (center.x - offset.x);\n    input.deltaY = prevDelta.y + (center.y - offset.y);\n}\n\n/**\n * velocity is calculated every x ms\n * @param {Object} session\n * @param {Object} input\n */\nfunction computeIntervalInputData(session, input) {\n    var last = session.lastInterval || input,\n        deltaTime = input.timeStamp - last.timeStamp,\n        velocity, velocityX, velocityY, direction;\n\n    if (input.eventType != INPUT_CANCEL && (deltaTime > COMPUTE_INTERVAL || last.velocity === undefined)) {\n        var deltaX = input.deltaX - last.deltaX;\n        var deltaY = input.deltaY - last.deltaY;\n\n        var v = getVelocity(deltaTime, deltaX, deltaY);\n        velocityX = v.x;\n        velocityY = v.y;\n        velocity = (abs(v.x) > abs(v.y)) ? v.x : v.y;\n        direction = getDirection(deltaX, deltaY);\n\n        session.lastInterval = input;\n    } else {\n        // use latest velocity info if it doesn't overtake a minimum period\n        velocity = last.velocity;\n        velocityX = last.velocityX;\n        velocityY = last.velocityY;\n        direction = last.direction;\n    }\n\n    input.velocity = velocity;\n    input.velocityX = velocityX;\n    input.velocityY = velocityY;\n    input.direction = direction;\n}\n\n/**\n * create a simple clone from the input used for storage of firstInput and firstMultiple\n * @param {Object} input\n * @returns {Object} clonedInputData\n */\nfunction simpleCloneInputData(input) {\n    // make a simple copy of the pointers because we will get a reference if we don't\n    // we only need clientXY for the calculations\n    var pointers = [];\n    var i = 0;\n    while (i < input.pointers.length) {\n        pointers[i] = {\n            clientX: round(input.pointers[i].clientX),\n            clientY: round(input.pointers[i].clientY)\n        };\n        i++;\n    }\n\n    return {\n        timeStamp: now(),\n        pointers: pointers,\n        center: getCenter(pointers),\n        deltaX: input.deltaX,\n        deltaY: input.deltaY\n    };\n}\n\n/**\n * get the center of all the pointers\n * @param {Array} pointers\n * @return {Object} center contains `x` and `y` properties\n */\nfunction getCenter(pointers) {\n    var pointersLength = pointers.length;\n\n    // no need to loop when only one touch\n    if (pointersLength === 1) {\n        return {\n            x: round(pointers[0].clientX),\n            y: round(pointers[0].clientY)\n        };\n    }\n\n    var x = 0, y = 0, i = 0;\n    while (i < pointersLength) {\n        x += pointers[i].clientX;\n        y += pointers[i].clientY;\n        i++;\n    }\n\n    return {\n        x: round(x / pointersLength),\n        y: round(y / pointersLength)\n    };\n}\n\n/**\n * calculate the velocity between two points. unit is in px per ms.\n * @param {Number} deltaTime\n * @param {Number} x\n * @param {Number} y\n * @return {Object} velocity `x` and `y`\n */\nfunction getVelocity(deltaTime, x, y) {\n    return {\n        x: x / deltaTime || 0,\n        y: y / deltaTime || 0\n    };\n}\n\n/**\n * get the direction between two points\n * @param {Number} x\n * @param {Number} y\n * @return {Number} direction\n */\nfunction getDirection(x, y) {\n    if (x === y) {\n        return DIRECTION_NONE;\n    }\n\n    if (abs(x) >= abs(y)) {\n        return x < 0 ? DIRECTION_LEFT : DIRECTION_RIGHT;\n    }\n    return y < 0 ? DIRECTION_UP : DIRECTION_DOWN;\n}\n\n/**\n * calculate the absolute distance between two points\n * @param {Object} p1 {x, y}\n * @param {Object} p2 {x, y}\n * @param {Array} [props] containing x and y keys\n * @return {Number} distance\n */\nfunction getDistance(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n\n    return Math.sqrt((x * x) + (y * y));\n}\n\n/**\n * calculate the angle between two coordinates\n * @param {Object} p1\n * @param {Object} p2\n * @param {Array} [props] containing x and y keys\n * @return {Number} angle\n */\nfunction getAngle(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n    return Math.atan2(y, x) * 180 / Math.PI;\n}\n\n/**\n * calculate the rotation degrees between two pointersets\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} rotation\n */\nfunction getRotation(start, end) {\n    return getAngle(end[1], end[0], PROPS_CLIENT_XY) + getAngle(start[1], start[0], PROPS_CLIENT_XY);\n}\n\n/**\n * calculate the scale factor between two pointersets\n * no scale is 1, and goes down to 0 when pinched together, and bigger when pinched out\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} scale\n */\nfunction getScale(start, end) {\n    return getDistance(end[0], end[1], PROPS_CLIENT_XY) / getDistance(start[0], start[1], PROPS_CLIENT_XY);\n}\n\nvar MOUSE_INPUT_MAP = {\n    mousedown: INPUT_START,\n    mousemove: INPUT_MOVE,\n    mouseup: INPUT_END\n};\n\nvar MOUSE_ELEMENT_EVENTS = 'mousedown';\nvar MOUSE_WINDOW_EVENTS = 'mousemove mouseup';\n\n/**\n * Mouse events input\n * @constructor\n * @extends Input\n */\nfunction MouseInput() {\n    this.evEl = MOUSE_ELEMENT_EVENTS;\n    this.evWin = MOUSE_WINDOW_EVENTS;\n\n    this.pressed = false; // mousedown state\n\n    Input.apply(this, arguments);\n}\n\ninherit(MouseInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function MEhandler(ev) {\n        var eventType = MOUSE_INPUT_MAP[ev.type];\n\n        // on start we want to have the left mouse button down\n        if (eventType & INPUT_START && ev.button === 0) {\n            this.pressed = true;\n        }\n\n        if (eventType & INPUT_MOVE && ev.which !== 1) {\n            eventType = INPUT_END;\n        }\n\n        // mouse must be down\n        if (!this.pressed) {\n            return;\n        }\n\n        if (eventType & INPUT_END) {\n            this.pressed = false;\n        }\n\n        this.callback(this.manager, eventType, {\n            pointers: [ev],\n            changedPointers: [ev],\n            pointerType: INPUT_TYPE_MOUSE,\n            srcEvent: ev\n        });\n    }\n});\n\nvar POINTER_INPUT_MAP = {\n    pointerdown: INPUT_START,\n    pointermove: INPUT_MOVE,\n    pointerup: INPUT_END,\n    pointercancel: INPUT_CANCEL,\n    pointerout: INPUT_CANCEL\n};\n\n// in IE10 the pointer types is defined as an enum\nvar IE10_POINTER_TYPE_ENUM = {\n    2: INPUT_TYPE_TOUCH,\n    3: INPUT_TYPE_PEN,\n    4: INPUT_TYPE_MOUSE,\n    5: INPUT_TYPE_KINECT // see https://twitter.com/jacobrossi/status/480596438489890816\n};\n\nvar POINTER_ELEMENT_EVENTS = 'pointerdown';\nvar POINTER_WINDOW_EVENTS = 'pointermove pointerup pointercancel';\n\n// IE10 has prefixed support, and case-sensitive\nif (window.MSPointerEvent && !window.PointerEvent) {\n    POINTER_ELEMENT_EVENTS = 'MSPointerDown';\n    POINTER_WINDOW_EVENTS = 'MSPointerMove MSPointerUp MSPointerCancel';\n}\n\n/**\n * Pointer events input\n * @constructor\n * @extends Input\n */\nfunction PointerEventInput() {\n    this.evEl = POINTER_ELEMENT_EVENTS;\n    this.evWin = POINTER_WINDOW_EVENTS;\n\n    Input.apply(this, arguments);\n\n    this.store = (this.manager.session.pointerEvents = []);\n}\n\ninherit(PointerEventInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function PEhandler(ev) {\n        var store = this.store;\n        var removePointer = false;\n\n        var eventTypeNormalized = ev.type.toLowerCase().replace('ms', '');\n        var eventType = POINTER_INPUT_MAP[eventTypeNormalized];\n        var pointerType = IE10_POINTER_TYPE_ENUM[ev.pointerType] || ev.pointerType;\n\n        var isTouch = (pointerType == INPUT_TYPE_TOUCH);\n\n        // get index of the event in the store\n        var storeIndex = inArray(store, ev.pointerId, 'pointerId');\n\n        // start and mouse must be down\n        if (eventType & INPUT_START && (ev.button === 0 || isTouch)) {\n            if (storeIndex < 0) {\n                store.push(ev);\n                storeIndex = store.length - 1;\n            }\n        } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n            removePointer = true;\n        }\n\n        // it not found, so the pointer hasn't been down (so it's probably a hover)\n        if (storeIndex < 0) {\n            return;\n        }\n\n        // update the event in the store\n        store[storeIndex] = ev;\n\n        this.callback(this.manager, eventType, {\n            pointers: store,\n            changedPointers: [ev],\n            pointerType: pointerType,\n            srcEvent: ev\n        });\n\n        if (removePointer) {\n            // remove from the store\n            store.splice(storeIndex, 1);\n        }\n    }\n});\n\nvar SINGLE_TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar SINGLE_TOUCH_TARGET_EVENTS = 'touchstart';\nvar SINGLE_TOUCH_WINDOW_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Touch events input\n * @constructor\n * @extends Input\n */\nfunction SingleTouchInput() {\n    this.evTarget = SINGLE_TOUCH_TARGET_EVENTS;\n    this.evWin = SINGLE_TOUCH_WINDOW_EVENTS;\n    this.started = false;\n\n    Input.apply(this, arguments);\n}\n\ninherit(SingleTouchInput, Input, {\n    handler: function TEhandler(ev) {\n        var type = SINGLE_TOUCH_INPUT_MAP[ev.type];\n\n        // should we handle the touch events?\n        if (type === INPUT_START) {\n            this.started = true;\n        }\n\n        if (!this.started) {\n            return;\n        }\n\n        var touches = normalizeSingleTouches.call(this, ev, type);\n\n        // when done, reset the started state\n        if (type & (INPUT_END | INPUT_CANCEL) && touches[0].length - touches[1].length === 0) {\n            this.started = false;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction normalizeSingleTouches(ev, type) {\n    var all = toArray(ev.touches);\n    var changed = toArray(ev.changedTouches);\n\n    if (type & (INPUT_END | INPUT_CANCEL)) {\n        all = uniqueArray(all.concat(changed), 'identifier', true);\n    }\n\n    return [all, changed];\n}\n\nvar TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar TOUCH_TARGET_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Multi-user touch events input\n * @constructor\n * @extends Input\n */\nfunction TouchInput() {\n    this.evTarget = TOUCH_TARGET_EVENTS;\n    this.targetIds = {};\n\n    Input.apply(this, arguments);\n}\n\ninherit(TouchInput, Input, {\n    handler: function MTEhandler(ev) {\n        var type = TOUCH_INPUT_MAP[ev.type];\n        var touches = getTouches.call(this, ev, type);\n        if (!touches) {\n            return;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction getTouches(ev, type) {\n    var allTouches = toArray(ev.touches);\n    var targetIds = this.targetIds;\n\n    // when there is only one touch, the process can be simplified\n    if (type & (INPUT_START | INPUT_MOVE) && allTouches.length === 1) {\n        targetIds[allTouches[0].identifier] = true;\n        return [allTouches, allTouches];\n    }\n\n    var i,\n        targetTouches,\n        changedTouches = toArray(ev.changedTouches),\n        changedTargetTouches = [],\n        target = this.target;\n\n    // get target touches from touches\n    targetTouches = allTouches.filter(function(touch) {\n        return hasParent(touch.target, target);\n    });\n\n    // collect touches\n    if (type === INPUT_START) {\n        i = 0;\n        while (i < targetTouches.length) {\n            targetIds[targetTouches[i].identifier] = true;\n            i++;\n        }\n    }\n\n    // filter changed touches to only contain touches that exist in the collected target ids\n    i = 0;\n    while (i < changedTouches.length) {\n        if (targetIds[changedTouches[i].identifier]) {\n            changedTargetTouches.push(changedTouches[i]);\n        }\n\n        // cleanup removed touches\n        if (type & (INPUT_END | INPUT_CANCEL)) {\n            delete targetIds[changedTouches[i].identifier];\n        }\n        i++;\n    }\n\n    if (!changedTargetTouches.length) {\n        return;\n    }\n\n    return [\n        // merge targetTouches with changedTargetTouches so it contains ALL touches, including 'end' and 'cancel'\n        uniqueArray(targetTouches.concat(changedTargetTouches), 'identifier', true),\n        changedTargetTouches\n    ];\n}\n\n/**\n * Combined touch and mouse input\n *\n * Touch has a higher priority then mouse, and while touching no mouse events are allowed.\n * This because touch devices also emit mouse events while doing a touch.\n *\n * @constructor\n * @extends Input\n */\n\nvar DEDUP_TIMEOUT = 2500;\nvar DEDUP_DISTANCE = 25;\n\nfunction TouchMouseInput() {\n    Input.apply(this, arguments);\n\n    var handler = bindFn(this.handler, this);\n    this.touch = new TouchInput(this.manager, handler);\n    this.mouse = new MouseInput(this.manager, handler);\n\n    this.primaryTouch = null;\n    this.lastTouches = [];\n}\n\ninherit(TouchMouseInput, Input, {\n    /**\n     * handle mouse and touch events\n     * @param {Hammer} manager\n     * @param {String} inputEvent\n     * @param {Object} inputData\n     */\n    handler: function TMEhandler(manager, inputEvent, inputData) {\n        var isTouch = (inputData.pointerType == INPUT_TYPE_TOUCH),\n            isMouse = (inputData.pointerType == INPUT_TYPE_MOUSE);\n\n        if (isMouse && inputData.sourceCapabilities && inputData.sourceCapabilities.firesTouchEvents) {\n            return;\n        }\n\n        // when we're in a touch event, record touches to  de-dupe synthetic mouse event\n        if (isTouch) {\n            recordTouches.call(this, inputEvent, inputData);\n        } else if (isMouse && isSyntheticEvent.call(this, inputData)) {\n            return;\n        }\n\n        this.callback(manager, inputEvent, inputData);\n    },\n\n    /**\n     * remove the event listeners\n     */\n    destroy: function destroy() {\n        this.touch.destroy();\n        this.mouse.destroy();\n    }\n});\n\nfunction recordTouches(eventType, eventData) {\n    if (eventType & INPUT_START) {\n        this.primaryTouch = eventData.changedPointers[0].identifier;\n        setLastTouch.call(this, eventData);\n    } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n        setLastTouch.call(this, eventData);\n    }\n}\n\nfunction setLastTouch(eventData) {\n    var touch = eventData.changedPointers[0];\n\n    if (touch.identifier === this.primaryTouch) {\n        var lastTouch = {x: touch.clientX, y: touch.clientY};\n        this.lastTouches.push(lastTouch);\n        var lts = this.lastTouches;\n        var removeLastTouch = function() {\n            var i = lts.indexOf(lastTouch);\n            if (i > -1) {\n                lts.splice(i, 1);\n            }\n        };\n        setTimeout(removeLastTouch, DEDUP_TIMEOUT);\n    }\n}\n\nfunction isSyntheticEvent(eventData) {\n    var x = eventData.srcEvent.clientX, y = eventData.srcEvent.clientY;\n    for (var i = 0; i < this.lastTouches.length; i++) {\n        var t = this.lastTouches[i];\n        var dx = Math.abs(x - t.x), dy = Math.abs(y - t.y);\n        if (dx <= DEDUP_DISTANCE && dy <= DEDUP_DISTANCE) {\n            return true;\n        }\n    }\n    return false;\n}\n\nvar PREFIXED_TOUCH_ACTION = prefixed(TEST_ELEMENT.style, 'touchAction');\nvar NATIVE_TOUCH_ACTION = PREFIXED_TOUCH_ACTION !== undefined;\n\n// magical touchAction value\nvar TOUCH_ACTION_COMPUTE = 'compute';\nvar TOUCH_ACTION_AUTO = 'auto';\nvar TOUCH_ACTION_MANIPULATION = 'manipulation'; // not implemented\nvar TOUCH_ACTION_NONE = 'none';\nvar TOUCH_ACTION_PAN_X = 'pan-x';\nvar TOUCH_ACTION_PAN_Y = 'pan-y';\nvar TOUCH_ACTION_MAP = getTouchActionProps();\n\n/**\n * Touch Action\n * sets the touchAction property or uses the js alternative\n * @param {Manager} manager\n * @param {String} value\n * @constructor\n */\nfunction TouchAction(manager, value) {\n    this.manager = manager;\n    this.set(value);\n}\n\nTouchAction.prototype = {\n    /**\n     * set the touchAction value on the element or enable the polyfill\n     * @param {String} value\n     */\n    set: function(value) {\n        // find out the touch-action by the event handlers\n        if (value == TOUCH_ACTION_COMPUTE) {\n            value = this.compute();\n        }\n\n        if (NATIVE_TOUCH_ACTION && this.manager.element.style && TOUCH_ACTION_MAP[value]) {\n            this.manager.element.style[PREFIXED_TOUCH_ACTION] = value;\n        }\n        this.actions = value.toLowerCase().trim();\n    },\n\n    /**\n     * just re-set the touchAction value\n     */\n    update: function() {\n        this.set(this.manager.options.touchAction);\n    },\n\n    /**\n     * compute the value for the touchAction property based on the recognizer's settings\n     * @returns {String} value\n     */\n    compute: function() {\n        var actions = [];\n        each(this.manager.recognizers, function(recognizer) {\n            if (boolOrFn(recognizer.options.enable, [recognizer])) {\n                actions = actions.concat(recognizer.getTouchAction());\n            }\n        });\n        return cleanTouchActions(actions.join(' '));\n    },\n\n    /**\n     * this method is called on each input cycle and provides the preventing of the browser behavior\n     * @param {Object} input\n     */\n    preventDefaults: function(input) {\n        var srcEvent = input.srcEvent;\n        var direction = input.offsetDirection;\n\n        // if the touch action did prevented once this session\n        if (this.manager.session.prevented) {\n            srcEvent.preventDefault();\n            return;\n        }\n\n        var actions = this.actions;\n        var hasNone = inStr(actions, TOUCH_ACTION_NONE) && !TOUCH_ACTION_MAP[TOUCH_ACTION_NONE];\n        var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y];\n        var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];\n\n        if (hasNone) {\n            //do not prevent defaults if this is a tap gesture\n\n            var isTapPointer = input.pointers.length === 1;\n            var isTapMovement = input.distance < 2;\n            var isTapTouchTime = input.deltaTime < 250;\n\n            if (isTapPointer && isTapMovement && isTapTouchTime) {\n                return;\n            }\n        }\n\n        if (hasPanX && hasPanY) {\n            // `pan-x pan-y` means browser handles all scrolling/panning, do not prevent\n            return;\n        }\n\n        if (hasNone ||\n            (hasPanY && direction & DIRECTION_HORIZONTAL) ||\n            (hasPanX && direction & DIRECTION_VERTICAL)) {\n            return this.preventSrc(srcEvent);\n        }\n    },\n\n    /**\n     * call preventDefault to prevent the browser's default behavior (scrolling in most cases)\n     * @param {Object} srcEvent\n     */\n    preventSrc: function(srcEvent) {\n        this.manager.session.prevented = true;\n        srcEvent.preventDefault();\n    }\n};\n\n/**\n * when the touchActions are collected they are not a valid value, so we need to clean things up. *\n * @param {String} actions\n * @returns {*}\n */\nfunction cleanTouchActions(actions) {\n    // none\n    if (inStr(actions, TOUCH_ACTION_NONE)) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X);\n    var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y);\n\n    // if both pan-x and pan-y are set (different recognizers\n    // for different directions, e.g. horizontal pan but vertical swipe?)\n    // we need none (as otherwise with pan-x pan-y combined none of these\n    // recognizers will work, since the browser would handle all panning\n    if (hasPanX && hasPanY) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    // pan-x OR pan-y\n    if (hasPanX || hasPanY) {\n        return hasPanX ? TOUCH_ACTION_PAN_X : TOUCH_ACTION_PAN_Y;\n    }\n\n    // manipulation\n    if (inStr(actions, TOUCH_ACTION_MANIPULATION)) {\n        return TOUCH_ACTION_MANIPULATION;\n    }\n\n    return TOUCH_ACTION_AUTO;\n}\n\nfunction getTouchActionProps() {\n    if (!NATIVE_TOUCH_ACTION) {\n        return false;\n    }\n    var touchMap = {};\n    var cssSupports = window.CSS && window.CSS.supports;\n    ['auto', 'manipulation', 'pan-y', 'pan-x', 'pan-x pan-y', 'none'].forEach(function(val) {\n\n        // If css.supports is not supported but there is native touch-action assume it supports\n        // all values. This is the case for IE 10 and 11.\n        touchMap[val] = cssSupports ? window.CSS.supports('touch-action', val) : true;\n    });\n    return touchMap;\n}\n\n/**\n * Recognizer flow explained; *\n * All recognizers have the initial state of POSSIBLE when a input session starts.\n * The definition of a input session is from the first input until the last input, with all it's movement in it. *\n * Example session for mouse-input: mousedown -> mousemove -> mouseup\n *\n * On each recognizing cycle (see Manager.recognize) the .recognize() method is executed\n * which determines with state it should be.\n *\n * If the recognizer has the state FAILED, CANCELLED or RECOGNIZED (equals ENDED), it is reset to\n * POSSIBLE to give it another change on the next cycle.\n *\n *               Possible\n *                  |\n *            +-----+---------------+\n *            |                     |\n *      +-----+-----+               |\n *      |           |               |\n *   Failed      Cancelled          |\n *                          +-------+------+\n *                          |              |\n *                      Recognized       Began\n *                                         |\n *                                      Changed\n *                                         |\n *                                  Ended/Recognized\n */\nvar STATE_POSSIBLE = 1;\nvar STATE_BEGAN = 2;\nvar STATE_CHANGED = 4;\nvar STATE_ENDED = 8;\nvar STATE_RECOGNIZED = STATE_ENDED;\nvar STATE_CANCELLED = 16;\nvar STATE_FAILED = 32;\n\n/**\n * Recognizer\n * Every recognizer needs to extend from this class.\n * @constructor\n * @param {Object} options\n */\nfunction Recognizer(options) {\n    this.options = assign({}, this.defaults, options || {});\n\n    this.id = uniqueId();\n\n    this.manager = null;\n\n    // default is enable true\n    this.options.enable = ifUndefined(this.options.enable, true);\n\n    this.state = STATE_POSSIBLE;\n\n    this.simultaneous = {};\n    this.requireFail = [];\n}\n\nRecognizer.prototype = {\n    /**\n     * @virtual\n     * @type {Object}\n     */\n    defaults: {},\n\n    /**\n     * set options\n     * @param {Object} options\n     * @return {Recognizer}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // also update the touchAction, in case something changed about the directions/enabled state\n        this.manager && this.manager.touchAction.update();\n        return this;\n    },\n\n    /**\n     * recognize simultaneous with an other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    recognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'recognizeWith', this)) {\n            return this;\n        }\n\n        var simultaneous = this.simultaneous;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (!simultaneous[otherRecognizer.id]) {\n            simultaneous[otherRecognizer.id] = otherRecognizer;\n            otherRecognizer.recognizeWith(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the simultaneous link. it doesnt remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRecognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRecognizeWith', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        delete this.simultaneous[otherRecognizer.id];\n        return this;\n    },\n\n    /**\n     * recognizer can only run when an other is failing\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    requireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'requireFailure', this)) {\n            return this;\n        }\n\n        var requireFail = this.requireFail;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (inArray(requireFail, otherRecognizer) === -1) {\n            requireFail.push(otherRecognizer);\n            otherRecognizer.requireFailure(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the requireFailure link. it does not remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRequireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRequireFailure', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        var index = inArray(this.requireFail, otherRecognizer);\n        if (index > -1) {\n            this.requireFail.splice(index, 1);\n        }\n        return this;\n    },\n\n    /**\n     * has require failures boolean\n     * @returns {boolean}\n     */\n    hasRequireFailures: function() {\n        return this.requireFail.length > 0;\n    },\n\n    /**\n     * if the recognizer can recognize simultaneous with an other recognizer\n     * @param {Recognizer} otherRecognizer\n     * @returns {Boolean}\n     */\n    canRecognizeWith: function(otherRecognizer) {\n        return !!this.simultaneous[otherRecognizer.id];\n    },\n\n    /**\n     * You should use `tryEmit` instead of `emit` directly to check\n     * that all the needed recognizers has failed before emitting.\n     * @param {Object} input\n     */\n    emit: function(input) {\n        var self = this;\n        var state = this.state;\n\n        function emit(event) {\n            self.manager.emit(event, input);\n        }\n\n        // 'panstart' and 'panmove'\n        if (state < STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n\n        emit(self.options.event); // simple 'eventName' events\n\n        if (input.additionalEvent) { // additional event(panleft, panright, pinchin, pinchout...)\n            emit(input.additionalEvent);\n        }\n\n        // panend and pancancel\n        if (state >= STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n    },\n\n    /**\n     * Check that all the require failure recognizers has failed,\n     * if true, it emits a gesture event,\n     * otherwise, setup the state to FAILED.\n     * @param {Object} input\n     */\n    tryEmit: function(input) {\n        if (this.canEmit()) {\n            return this.emit(input);\n        }\n        // it's failing anyway\n        this.state = STATE_FAILED;\n    },\n\n    /**\n     * can we emit?\n     * @returns {boolean}\n     */\n    canEmit: function() {\n        var i = 0;\n        while (i < this.requireFail.length) {\n            if (!(this.requireFail[i].state & (STATE_FAILED | STATE_POSSIBLE))) {\n                return false;\n            }\n            i++;\n        }\n        return true;\n    },\n\n    /**\n     * update the recognizer\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        // make a new copy of the inputData\n        // so we can change the inputData without messing up the other recognizers\n        var inputDataClone = assign({}, inputData);\n\n        // is is enabled and allow recognizing?\n        if (!boolOrFn(this.options.enable, [this, inputDataClone])) {\n            this.reset();\n            this.state = STATE_FAILED;\n            return;\n        }\n\n        // reset when we've reached the end\n        if (this.state & (STATE_RECOGNIZED | STATE_CANCELLED | STATE_FAILED)) {\n            this.state = STATE_POSSIBLE;\n        }\n\n        this.state = this.process(inputDataClone);\n\n        // the recognizer has recognized a gesture\n        // so trigger an event\n        if (this.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED | STATE_CANCELLED)) {\n            this.tryEmit(inputDataClone);\n        }\n    },\n\n    /**\n     * return the state of the recognizer\n     * the actual recognizing happens in this method\n     * @virtual\n     * @param {Object} inputData\n     * @returns {Const} STATE\n     */\n    process: function(inputData) { }, // jshint ignore:line\n\n    /**\n     * return the preferred touch-action\n     * @virtual\n     * @returns {Array}\n     */\n    getTouchAction: function() { },\n\n    /**\n     * called when the gesture isn't allowed to recognize\n     * like when another is being recognized or it is disabled\n     * @virtual\n     */\n    reset: function() { }\n};\n\n/**\n * get a usable string, used as event postfix\n * @param {Const} state\n * @returns {String} state\n */\nfunction stateStr(state) {\n    if (state & STATE_CANCELLED) {\n        return 'cancel';\n    } else if (state & STATE_ENDED) {\n        return 'end';\n    } else if (state & STATE_CHANGED) {\n        return 'move';\n    } else if (state & STATE_BEGAN) {\n        return 'start';\n    }\n    return '';\n}\n\n/**\n * direction cons to string\n * @param {Const} direction\n * @returns {String}\n */\nfunction directionStr(direction) {\n    if (direction == DIRECTION_DOWN) {\n        return 'down';\n    } else if (direction == DIRECTION_UP) {\n        return 'up';\n    } else if (direction == DIRECTION_LEFT) {\n        return 'left';\n    } else if (direction == DIRECTION_RIGHT) {\n        return 'right';\n    }\n    return '';\n}\n\n/**\n * get a recognizer by name if it is bound to a manager\n * @param {Recognizer|String} otherRecognizer\n * @param {Recognizer} recognizer\n * @returns {Recognizer}\n */\nfunction getRecognizerByNameIfManager(otherRecognizer, recognizer) {\n    var manager = recognizer.manager;\n    if (manager) {\n        return manager.get(otherRecognizer);\n    }\n    return otherRecognizer;\n}\n\n/**\n * This recognizer is just used as a base for the simple attribute recognizers.\n * @constructor\n * @extends Recognizer\n */\nfunction AttrRecognizer() {\n    Recognizer.apply(this, arguments);\n}\n\ninherit(AttrRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof AttrRecognizer\n     */\n    defaults: {\n        /**\n         * @type {Number}\n         * @default 1\n         */\n        pointers: 1\n    },\n\n    /**\n     * Used to check if it the recognizer receives valid input, like input.distance > 10.\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {Boolean} recognized\n     */\n    attrTest: function(input) {\n        var optionPointers = this.options.pointers;\n        return optionPointers === 0 || input.pointers.length === optionPointers;\n    },\n\n    /**\n     * Process the input and return the state for the recognizer\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {*} State\n     */\n    process: function(input) {\n        var state = this.state;\n        var eventType = input.eventType;\n\n        var isRecognized = state & (STATE_BEGAN | STATE_CHANGED);\n        var isValid = this.attrTest(input);\n\n        // on cancel input and we've recognized before, return STATE_CANCELLED\n        if (isRecognized && (eventType & INPUT_CANCEL || !isValid)) {\n            return state | STATE_CANCELLED;\n        } else if (isRecognized || isValid) {\n            if (eventType & INPUT_END) {\n                return state | STATE_ENDED;\n            } else if (!(state & STATE_BEGAN)) {\n                return STATE_BEGAN;\n            }\n            return state | STATE_CHANGED;\n        }\n        return STATE_FAILED;\n    }\n});\n\n/**\n * Pan\n * Recognized when the pointer is down and moved in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PanRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n\n    this.pX = null;\n    this.pY = null;\n}\n\ninherit(PanRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PanRecognizer\n     */\n    defaults: {\n        event: 'pan',\n        threshold: 10,\n        pointers: 1,\n        direction: DIRECTION_ALL\n    },\n\n    getTouchAction: function() {\n        var direction = this.options.direction;\n        var actions = [];\n        if (direction & DIRECTION_HORIZONTAL) {\n            actions.push(TOUCH_ACTION_PAN_Y);\n        }\n        if (direction & DIRECTION_VERTICAL) {\n            actions.push(TOUCH_ACTION_PAN_X);\n        }\n        return actions;\n    },\n\n    directionTest: function(input) {\n        var options = this.options;\n        var hasMoved = true;\n        var distance = input.distance;\n        var direction = input.direction;\n        var x = input.deltaX;\n        var y = input.deltaY;\n\n        // lock to axis?\n        if (!(direction & options.direction)) {\n            if (options.direction & DIRECTION_HORIZONTAL) {\n                direction = (x === 0) ? DIRECTION_NONE : (x < 0) ? DIRECTION_LEFT : DIRECTION_RIGHT;\n                hasMoved = x != this.pX;\n                distance = Math.abs(input.deltaX);\n            } else {\n                direction = (y === 0) ? DIRECTION_NONE : (y < 0) ? DIRECTION_UP : DIRECTION_DOWN;\n                hasMoved = y != this.pY;\n                distance = Math.abs(input.deltaY);\n            }\n        }\n        input.direction = direction;\n        return hasMoved && distance > options.threshold && direction & options.direction;\n    },\n\n    attrTest: function(input) {\n        return AttrRecognizer.prototype.attrTest.call(this, input) &&\n            (this.state & STATE_BEGAN || (!(this.state & STATE_BEGAN) && this.directionTest(input)));\n    },\n\n    emit: function(input) {\n\n        this.pX = input.deltaX;\n        this.pY = input.deltaY;\n\n        var direction = directionStr(input.direction);\n\n        if (direction) {\n            input.additionalEvent = this.options.event + direction;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Pinch\n * Recognized when two or more pointers are moving toward (zoom-in) or away from each other (zoom-out).\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PinchRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(PinchRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'pinch',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.scale - 1) > this.options.threshold || this.state & STATE_BEGAN);\n    },\n\n    emit: function(input) {\n        if (input.scale !== 1) {\n            var inOut = input.scale < 1 ? 'in' : 'out';\n            input.additionalEvent = this.options.event + inOut;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Press\n * Recognized when the pointer is down for x ms without any movement.\n * @constructor\n * @extends Recognizer\n */\nfunction PressRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    this._timer = null;\n    this._input = null;\n}\n\ninherit(PressRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PressRecognizer\n     */\n    defaults: {\n        event: 'press',\n        pointers: 1,\n        time: 251, // minimal time of the pointer to be pressed\n        threshold: 9 // a minimal movement is ok, but keep it low\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_AUTO];\n    },\n\n    process: function(input) {\n        var options = this.options;\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTime = input.deltaTime > options.time;\n\n        this._input = input;\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (!validMovement || !validPointers || (input.eventType & (INPUT_END | INPUT_CANCEL) && !validTime)) {\n            this.reset();\n        } else if (input.eventType & INPUT_START) {\n            this.reset();\n            this._timer = setTimeoutContext(function() {\n                this.state = STATE_RECOGNIZED;\n                this.tryEmit();\n            }, options.time, this);\n        } else if (input.eventType & INPUT_END) {\n            return STATE_RECOGNIZED;\n        }\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function(input) {\n        if (this.state !== STATE_RECOGNIZED) {\n            return;\n        }\n\n        if (input && (input.eventType & INPUT_END)) {\n            this.manager.emit(this.options.event + 'up', input);\n        } else {\n            this._input.timeStamp = now();\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Rotate\n * Recognized when two or more pointer are moving in a circular motion.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction RotateRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(RotateRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof RotateRecognizer\n     */\n    defaults: {\n        event: 'rotate',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.rotation) > this.options.threshold || this.state & STATE_BEGAN);\n    }\n});\n\n/**\n * Swipe\n * Recognized when the pointer is moving fast (velocity), with enough distance in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction SwipeRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(SwipeRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof SwipeRecognizer\n     */\n    defaults: {\n        event: 'swipe',\n        threshold: 10,\n        velocity: 0.3,\n        direction: DIRECTION_HORIZONTAL | DIRECTION_VERTICAL,\n        pointers: 1\n    },\n\n    getTouchAction: function() {\n        return PanRecognizer.prototype.getTouchAction.call(this);\n    },\n\n    attrTest: function(input) {\n        var direction = this.options.direction;\n        var velocity;\n\n        if (direction & (DIRECTION_HORIZONTAL | DIRECTION_VERTICAL)) {\n            velocity = input.overallVelocity;\n        } else if (direction & DIRECTION_HORIZONTAL) {\n            velocity = input.overallVelocityX;\n        } else if (direction & DIRECTION_VERTICAL) {\n            velocity = input.overallVelocityY;\n        }\n\n        return this._super.attrTest.call(this, input) &&\n            direction & input.offsetDirection &&\n            input.distance > this.options.threshold &&\n            input.maxPointers == this.options.pointers &&\n            abs(velocity) > this.options.velocity && input.eventType & INPUT_END;\n    },\n\n    emit: function(input) {\n        var direction = directionStr(input.offsetDirection);\n        if (direction) {\n            this.manager.emit(this.options.event + direction, input);\n        }\n\n        this.manager.emit(this.options.event, input);\n    }\n});\n\n/**\n * A tap is ecognized when the pointer is doing a small tap/click. Multiple taps are recognized if they occur\n * between the given interval and position. The delay option can be used to recognize multi-taps without firing\n * a single tap.\n *\n * The eventData from the emitted event contains the property `tapCount`, which contains the amount of\n * multi-taps being recognized.\n * @constructor\n * @extends Recognizer\n */\nfunction TapRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    // previous time and center,\n    // used for tap counting\n    this.pTime = false;\n    this.pCenter = false;\n\n    this._timer = null;\n    this._input = null;\n    this.count = 0;\n}\n\ninherit(TapRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'tap',\n        pointers: 1,\n        taps: 1,\n        interval: 300, // max time between the multi-tap taps\n        time: 250, // max time of the pointer to be down (like finger on the screen)\n        threshold: 9, // a minimal movement is ok, but keep it low\n        posThreshold: 10 // a multi-tap can be a bit off the initial position\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_MANIPULATION];\n    },\n\n    process: function(input) {\n        var options = this.options;\n\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTouchTime = input.deltaTime < options.time;\n\n        this.reset();\n\n        if ((input.eventType & INPUT_START) && (this.count === 0)) {\n            return this.failTimeout();\n        }\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (validMovement && validTouchTime && validPointers) {\n            if (input.eventType != INPUT_END) {\n                return this.failTimeout();\n            }\n\n            var validInterval = this.pTime ? (input.timeStamp - this.pTime < options.interval) : true;\n            var validMultiTap = !this.pCenter || getDistance(this.pCenter, input.center) < options.posThreshold;\n\n            this.pTime = input.timeStamp;\n            this.pCenter = input.center;\n\n            if (!validMultiTap || !validInterval) {\n                this.count = 1;\n            } else {\n                this.count += 1;\n            }\n\n            this._input = input;\n\n            // if tap count matches we have recognized it,\n            // else it has began recognizing...\n            var tapCount = this.count % options.taps;\n            if (tapCount === 0) {\n                // no failing requirements, immediately trigger the tap event\n                // or wait as long as the multitap interval to trigger\n                if (!this.hasRequireFailures()) {\n                    return STATE_RECOGNIZED;\n                } else {\n                    this._timer = setTimeoutContext(function() {\n                        this.state = STATE_RECOGNIZED;\n                        this.tryEmit();\n                    }, options.interval, this);\n                    return STATE_BEGAN;\n                }\n            }\n        }\n        return STATE_FAILED;\n    },\n\n    failTimeout: function() {\n        this._timer = setTimeoutContext(function() {\n            this.state = STATE_FAILED;\n        }, this.options.interval, this);\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function() {\n        if (this.state == STATE_RECOGNIZED) {\n            this._input.tapCount = this.count;\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Simple way to create a manager with a default set of recognizers.\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Hammer(element, options) {\n    options = options || {};\n    options.recognizers = ifUndefined(options.recognizers, Hammer.defaults.preset);\n    return new Manager(element, options);\n}\n\n/**\n * @const {string}\n */\nHammer.VERSION = '2.0.7';\n\n/**\n * default settings\n * @namespace\n */\nHammer.defaults = {\n    /**\n     * set if DOM events are being triggered.\n     * But this is slower and unused by simple implementations, so disabled by default.\n     * @type {Boolean}\n     * @default false\n     */\n    domEvents: false,\n\n    /**\n     * The value for the touchAction property/fallback.\n     * When set to `compute` it will magically set the correct value based on the added recognizers.\n     * @type {String}\n     * @default compute\n     */\n    touchAction: TOUCH_ACTION_COMPUTE,\n\n    /**\n     * @type {Boolean}\n     * @default true\n     */\n    enable: true,\n\n    /**\n     * EXPERIMENTAL FEATURE -- can be removed/changed\n     * Change the parent input target element.\n     * If Null, then it is being set the to main element.\n     * @type {Null|EventTarget}\n     * @default null\n     */\n    inputTarget: null,\n\n    /**\n     * force an input class\n     * @type {Null|Function}\n     * @default null\n     */\n    inputClass: null,\n\n    /**\n     * Default recognizer setup when calling `Hammer()`\n     * When creating a new Manager these will be skipped.\n     * @type {Array}\n     */\n    preset: [\n        // RecognizerClass, options, [recognizeWith, ...], [requireFailure, ...]\n        [RotateRecognizer, {enable: false}],\n        [PinchRecognizer, {enable: false}, ['rotate']],\n        [SwipeRecognizer, {direction: DIRECTION_HORIZONTAL}],\n        [PanRecognizer, {direction: DIRECTION_HORIZONTAL}, ['swipe']],\n        [TapRecognizer],\n        [TapRecognizer, {event: 'doubletap', taps: 2}, ['tap']],\n        [PressRecognizer]\n    ],\n\n    /**\n     * Some CSS properties can be used to improve the working of Hammer.\n     * Add them to this method and they will be set when creating a new Manager.\n     * @namespace\n     */\n    cssProps: {\n        /**\n         * Disables text selection to improve the dragging gesture. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userSelect: 'none',\n\n        /**\n         * Disable the Windows Phone grippers when pressing an element.\n         * @type {String}\n         * @default 'none'\n         */\n        touchSelect: 'none',\n\n        /**\n         * Disables the default callout shown when you touch and hold a touch target.\n         * On iOS, when you touch and hold a touch target such as a link, Safari displays\n         * a callout containing information about the link. This property allows you to disable that callout.\n         * @type {String}\n         * @default 'none'\n         */\n        touchCallout: 'none',\n\n        /**\n         * Specifies whether zooming is enabled. Used by IE10>\n         * @type {String}\n         * @default 'none'\n         */\n        contentZooming: 'none',\n\n        /**\n         * Specifies that an entire element should be draggable instead of its contents. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userDrag: 'none',\n\n        /**\n         * Overrides the highlight color shown when the user taps a link or a JavaScript\n         * clickable element in iOS. This property obeys the alpha value, if specified.\n         * @type {String}\n         * @default 'rgba(0,0,0,0)'\n         */\n        tapHighlightColor: 'rgba(0,0,0,0)'\n    }\n};\n\nvar STOP = 1;\nvar FORCED_STOP = 2;\n\n/**\n * Manager\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Manager(element, options) {\n    this.options = assign({}, Hammer.defaults, options || {});\n\n    this.options.inputTarget = this.options.inputTarget || element;\n\n    this.handlers = {};\n    this.session = {};\n    this.recognizers = [];\n    this.oldCssProps = {};\n\n    this.element = element;\n    this.input = createInputInstance(this);\n    this.touchAction = new TouchAction(this, this.options.touchAction);\n\n    toggleCssProps(this, true);\n\n    each(this.options.recognizers, function(item) {\n        var recognizer = this.add(new (item[0])(item[1]));\n        item[2] && recognizer.recognizeWith(item[2]);\n        item[3] && recognizer.requireFailure(item[3]);\n    }, this);\n}\n\nManager.prototype = {\n    /**\n     * set options\n     * @param {Object} options\n     * @returns {Manager}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // Options that need a little more setup\n        if (options.touchAction) {\n            this.touchAction.update();\n        }\n        if (options.inputTarget) {\n            // Clean up existing event listeners and reinitialize\n            this.input.destroy();\n            this.input.target = options.inputTarget;\n            this.input.init();\n        }\n        return this;\n    },\n\n    /**\n     * stop recognizing for this session.\n     * This session will be discarded, when a new [input]start event is fired.\n     * When forced, the recognizer cycle is stopped immediately.\n     * @param {Boolean} [force]\n     */\n    stop: function(force) {\n        this.session.stopped = force ? FORCED_STOP : STOP;\n    },\n\n    /**\n     * run the recognizers!\n     * called by the inputHandler function on every movement of the pointers (touches)\n     * it walks through all the recognizers and tries to detect the gesture that is being made\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        var session = this.session;\n        if (session.stopped) {\n            return;\n        }\n\n        // run the touch-action polyfill\n        this.touchAction.preventDefaults(inputData);\n\n        var recognizer;\n        var recognizers = this.recognizers;\n\n        // this holds the recognizer that is being recognized.\n        // so the recognizer's state needs to be BEGAN, CHANGED, ENDED or RECOGNIZED\n        // if no recognizer is detecting a thing, it is set to `null`\n        var curRecognizer = session.curRecognizer;\n\n        // reset when the last recognizer is recognized\n        // or when we're in a new session\n        if (!curRecognizer || (curRecognizer && curRecognizer.state & STATE_RECOGNIZED)) {\n            curRecognizer = session.curRecognizer = null;\n        }\n\n        var i = 0;\n        while (i < recognizers.length) {\n            recognizer = recognizers[i];\n\n            // find out if we are allowed try to recognize the input for this one.\n            // 1.   allow if the session is NOT forced stopped (see the .stop() method)\n            // 2.   allow if we still haven't recognized a gesture in this session, or the this recognizer is the one\n            //      that is being recognized.\n            // 3.   allow if the recognizer is allowed to run simultaneous with the current recognized recognizer.\n            //      this can be setup with the `recognizeWith()` method on the recognizer.\n            if (session.stopped !== FORCED_STOP && ( // 1\n                    !curRecognizer || recognizer == curRecognizer || // 2\n                    recognizer.canRecognizeWith(curRecognizer))) { // 3\n                recognizer.recognize(inputData);\n            } else {\n                recognizer.reset();\n            }\n\n            // if the recognizer has been recognizing the input as a valid gesture, we want to store this one as the\n            // current active recognizer. but only if we don't already have an active recognizer\n            if (!curRecognizer && recognizer.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED)) {\n                curRecognizer = session.curRecognizer = recognizer;\n            }\n            i++;\n        }\n    },\n\n    /**\n     * get a recognizer by its event name.\n     * @param {Recognizer|String} recognizer\n     * @returns {Recognizer|Null}\n     */\n    get: function(recognizer) {\n        if (recognizer instanceof Recognizer) {\n            return recognizer;\n        }\n\n        var recognizers = this.recognizers;\n        for (var i = 0; i < recognizers.length; i++) {\n            if (recognizers[i].options.event == recognizer) {\n                return recognizers[i];\n            }\n        }\n        return null;\n    },\n\n    /**\n     * add a recognizer to the manager\n     * existing recognizers with the same event name will be removed\n     * @param {Recognizer} recognizer\n     * @returns {Recognizer|Manager}\n     */\n    add: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'add', this)) {\n            return this;\n        }\n\n        // remove existing\n        var existing = this.get(recognizer.options.event);\n        if (existing) {\n            this.remove(existing);\n        }\n\n        this.recognizers.push(recognizer);\n        recognizer.manager = this;\n\n        this.touchAction.update();\n        return recognizer;\n    },\n\n    /**\n     * remove a recognizer by name or instance\n     * @param {Recognizer|String} recognizer\n     * @returns {Manager}\n     */\n    remove: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'remove', this)) {\n            return this;\n        }\n\n        recognizer = this.get(recognizer);\n\n        // let's make sure this recognizer exists\n        if (recognizer) {\n            var recognizers = this.recognizers;\n            var index = inArray(recognizers, recognizer);\n\n            if (index !== -1) {\n                recognizers.splice(index, 1);\n                this.touchAction.update();\n            }\n        }\n\n        return this;\n    },\n\n    /**\n     * bind event\n     * @param {String} events\n     * @param {Function} handler\n     * @returns {EventEmitter} this\n     */\n    on: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n        if (handler === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            handlers[event] = handlers[event] || [];\n            handlers[event].push(handler);\n        });\n        return this;\n    },\n\n    /**\n     * unbind event, leave emit blank to remove all handlers\n     * @param {String} events\n     * @param {Function} [handler]\n     * @returns {EventEmitter} this\n     */\n    off: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            if (!handler) {\n                delete handlers[event];\n            } else {\n                handlers[event] && handlers[event].splice(inArray(handlers[event], handler), 1);\n            }\n        });\n        return this;\n    },\n\n    /**\n     * emit event to the listeners\n     * @param {String} event\n     * @param {Object} data\n     */\n    emit: function(event, data) {\n        // we also want to trigger dom events\n        if (this.options.domEvents) {\n            triggerDomEvent(event, data);\n        }\n\n        // no handlers, so skip it all\n        var handlers = this.handlers[event] && this.handlers[event].slice();\n        if (!handlers || !handlers.length) {\n            return;\n        }\n\n        data.type = event;\n        data.preventDefault = function() {\n            data.srcEvent.preventDefault();\n        };\n\n        var i = 0;\n        while (i < handlers.length) {\n            handlers[i](data);\n            i++;\n        }\n    },\n\n    /**\n     * destroy the manager and unbinds all events\n     * it doesn't unbind dom events, that is the user own responsibility\n     */\n    destroy: function() {\n        this.element && toggleCssProps(this, false);\n\n        this.handlers = {};\n        this.session = {};\n        this.input.destroy();\n        this.element = null;\n    }\n};\n\n/**\n * add/remove the css properties as defined in manager.options.cssProps\n * @param {Manager} manager\n * @param {Boolean} add\n */\nfunction toggleCssProps(manager, add) {\n    var element = manager.element;\n    if (!element.style) {\n        return;\n    }\n    var prop;\n    each(manager.options.cssProps, function(value, name) {\n        prop = prefixed(element.style, name);\n        if (add) {\n            manager.oldCssProps[prop] = element.style[prop];\n            element.style[prop] = value;\n        } else {\n            element.style[prop] = manager.oldCssProps[prop] || '';\n        }\n    });\n    if (!add) {\n        manager.oldCssProps = {};\n    }\n}\n\n/**\n * trigger dom event\n * @param {String} event\n * @param {Object} data\n */\nfunction triggerDomEvent(event, data) {\n    var gestureEvent = document.createEvent('Event');\n    gestureEvent.initEvent(event, true, true);\n    gestureEvent.gesture = data;\n    data.target.dispatchEvent(gestureEvent);\n}\n\nassign(Hammer, {\n    INPUT_START: INPUT_START,\n    INPUT_MOVE: INPUT_MOVE,\n    INPUT_END: INPUT_END,\n    INPUT_CANCEL: INPUT_CANCEL,\n\n    STATE_POSSIBLE: STATE_POSSIBLE,\n    STATE_BEGAN: STATE_BEGAN,\n    STATE_CHANGED: STATE_CHANGED,\n    STATE_ENDED: STATE_ENDED,\n    STATE_RECOGNIZED: STATE_RECOGNIZED,\n    STATE_CANCELLED: STATE_CANCELLED,\n    STATE_FAILED: STATE_FAILED,\n\n    DIRECTION_NONE: DIRECTION_NONE,\n    DIRECTION_LEFT: DIRECTION_LEFT,\n    DIRECTION_RIGHT: DIRECTION_RIGHT,\n    DIRECTION_UP: DIRECTION_UP,\n    DIRECTION_DOWN: DIRECTION_DOWN,\n    DIRECTION_HORIZONTAL: DIRECTION_HORIZONTAL,\n    DIRECTION_VERTICAL: DIRECTION_VERTICAL,\n    DIRECTION_ALL: DIRECTION_ALL,\n\n    Manager: Manager,\n    Input: Input,\n    TouchAction: TouchAction,\n\n    TouchInput: TouchInput,\n    MouseInput: MouseInput,\n    PointerEventInput: PointerEventInput,\n    TouchMouseInput: TouchMouseInput,\n    SingleTouchInput: SingleTouchInput,\n\n    Recognizer: Recognizer,\n    AttrRecognizer: AttrRecognizer,\n    Tap: TapRecognizer,\n    Pan: PanRecognizer,\n    Swipe: SwipeRecognizer,\n    Pinch: PinchRecognizer,\n    Rotate: RotateRecognizer,\n    Press: PressRecognizer,\n\n    on: addEventListeners,\n    off: removeEventListeners,\n    each: each,\n    merge: merge,\n    extend: extend,\n    assign: assign,\n    inherit: inherit,\n    bindFn: bindFn,\n    prefixed: prefixed\n});\n\n// this prevents errors when Hammer is loaded in the presence of an AMD\n//  style loader but by script tag, not by the loader.\nvar freeGlobal = (typeof window !== 'undefined' ? window : (typeof self !== 'undefined' ? self : {})); // jshint ignore:line\nfreeGlobal.Hammer = Hammer;\n\nif (true) {\n    !(__WEBPACK_AMD_DEFINE_RESULT__ = function() {\n        return Hammer;\n    }.call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n} else if (typeof module != 'undefined' && module.exports) {\n    module.exports = Hammer;\n} else {\n    window[exportName] = Hammer;\n}\n\n})(window, document, 'Hammer');\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n// String encode/decode helpers\n\n\n\nvar utils = __webpack_require__(3);\n\n\n// Quick check if we can use fast array to bin string conversion\n//\n// - apply(Array) can fail on Android 2.2\n// - apply(Uint8Array) can fail on iOS 5.1 Safari\n//\nvar STR_APPLY_OK = true;\nvar STR_APPLY_UIA_OK = true;\n\ntry { String.fromCharCode.apply(null, [ 0 ]); } catch (__) { STR_APPLY_OK = false; }\ntry { String.fromCharCode.apply(null, new Uint8Array(1)); } catch (__) { STR_APPLY_UIA_OK = false; }\n\n\n// Table with utf8 lengths (calculated by first byte of sequence)\n// Note, that 5 & 6-byte values and some 4-byte values can not be represented in JS,\n// because max possible codepoint is 0x10ffff\nvar _utf8len = new utils.Buf8(256);\nfor (var q = 0; q < 256; q++) {\n  _utf8len[q] = (q >= 252 ? 6 : q >= 248 ? 5 : q >= 240 ? 4 : q >= 224 ? 3 : q >= 192 ? 2 : 1);\n}\n_utf8len[254] = _utf8len[254] = 1; // Invalid sequence start\n\n\n// convert string to array (typed, when possible)\nexports.string2buf = function (str) {\n  var buf, c, c2, m_pos, i, str_len = str.length, buf_len = 0;\n\n  // count binary size\n  for (m_pos = 0; m_pos < str_len; m_pos++) {\n    c = str.charCodeAt(m_pos);\n    if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {\n      c2 = str.charCodeAt(m_pos + 1);\n      if ((c2 & 0xfc00) === 0xdc00) {\n        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n        m_pos++;\n      }\n    }\n    buf_len += c < 0x80 ? 1 : c < 0x800 ? 2 : c < 0x10000 ? 3 : 4;\n  }\n\n  // allocate buffer\n  buf = new utils.Buf8(buf_len);\n\n  // convert\n  for (i = 0, m_pos = 0; i < buf_len; m_pos++) {\n    c = str.charCodeAt(m_pos);\n    if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {\n      c2 = str.charCodeAt(m_pos + 1);\n      if ((c2 & 0xfc00) === 0xdc00) {\n        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n        m_pos++;\n      }\n    }\n    if (c < 0x80) {\n      /* one byte */\n      buf[i++] = c;\n    } else if (c < 0x800) {\n      /* two bytes */\n      buf[i++] = 0xC0 | (c >>> 6);\n      buf[i++] = 0x80 | (c & 0x3f);\n    } else if (c < 0x10000) {\n      /* three bytes */\n      buf[i++] = 0xE0 | (c >>> 12);\n      buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n      buf[i++] = 0x80 | (c & 0x3f);\n    } else {\n      /* four bytes */\n      buf[i++] = 0xf0 | (c >>> 18);\n      buf[i++] = 0x80 | (c >>> 12 & 0x3f);\n      buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n      buf[i++] = 0x80 | (c & 0x3f);\n    }\n  }\n\n  return buf;\n};\n\n// Helper (used in 2 places)\nfunction buf2binstring(buf, len) {\n  // On Chrome, the arguments in a function call that are allowed is `65534`.\n  // If the length of the buffer is smaller than that, we can use this optimization,\n  // otherwise we will take a slower path.\n  if (len < 65534) {\n    if ((buf.subarray && STR_APPLY_UIA_OK) || (!buf.subarray && STR_APPLY_OK)) {\n      return String.fromCharCode.apply(null, utils.shrinkBuf(buf, len));\n    }\n  }\n\n  var result = '';\n  for (var i = 0; i < len; i++) {\n    result += String.fromCharCode(buf[i]);\n  }\n  return result;\n}\n\n\n// Convert byte array to binary string\nexports.buf2binstring = function (buf) {\n  return buf2binstring(buf, buf.length);\n};\n\n\n// Convert binary string (typed, when possible)\nexports.binstring2buf = function (str) {\n  var buf = new utils.Buf8(str.length);\n  for (var i = 0, len = buf.length; i < len; i++) {\n    buf[i] = str.charCodeAt(i);\n  }\n  return buf;\n};\n\n\n// convert array to string\nexports.buf2string = function (buf, max) {\n  var i, out, c, c_len;\n  var len = max || buf.length;\n\n  // Reserve max possible length (2 words per char)\n  // NB: by unknown reasons, Array is significantly faster for\n  //     String.fromCharCode.apply than Uint16Array.\n  var utf16buf = new Array(len * 2);\n\n  for (out = 0, i = 0; i < len;) {\n    c = buf[i++];\n    // quick process ascii\n    if (c < 0x80) { utf16buf[out++] = c; continue; }\n\n    c_len = _utf8len[c];\n    // skip 5 & 6 byte codes\n    if (c_len > 4) { utf16buf[out++] = 0xfffd; i += c_len - 1; continue; }\n\n    // apply mask on first byte\n    c &= c_len === 2 ? 0x1f : c_len === 3 ? 0x0f : 0x07;\n    // join the rest\n    while (c_len > 1 && i < len) {\n      c = (c << 6) | (buf[i++] & 0x3f);\n      c_len--;\n    }\n\n    // terminated by end of string?\n    if (c_len > 1) { utf16buf[out++] = 0xfffd; continue; }\n\n    if (c < 0x10000) {\n      utf16buf[out++] = c;\n    } else {\n      c -= 0x10000;\n      utf16buf[out++] = 0xd800 | ((c >> 10) & 0x3ff);\n      utf16buf[out++] = 0xdc00 | (c & 0x3ff);\n    }\n  }\n\n  return buf2binstring(utf16buf, out);\n};\n\n\n// Calculate max possible position in utf8 buffer,\n// that will not break sequence. If that's not possible\n// - (very small limits) return max size as is.\n//\n// buf[] - utf8 bytes array\n// max   - length limit (mandatory);\nexports.utf8border = function (buf, max) {\n  var pos;\n\n  max = max || buf.length;\n  if (max > buf.length) { max = buf.length; }\n\n  // go back from last position, until start of sequence found\n  pos = max - 1;\n  while (pos >= 0 && (buf[pos] & 0xC0) === 0x80) { pos--; }\n\n  // Very small and broken sequence,\n  // return max, because we should return something anyway.\n  if (pos < 0) { return max; }\n\n  // If we came to start of buffer - that means buffer is too small,\n  // return max too.\n  if (pos === 0) { return max; }\n\n  return (pos + _utf8len[buf[pos]] > max) ? pos : max;\n};\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n// Note: adler32 takes 12% for level 0 and 2% for level 6.\n// It isn't worth it to make additional optimizations as in original.\n// Small size is preferable.\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction adler32(adler, buf, len, pos) {\n  var s1 = (adler & 0xffff) |0,\n      s2 = ((adler >>> 16) & 0xffff) |0,\n      n = 0;\n\n  while (len !== 0) {\n    // Set limit ~ twice less than 5552, to keep\n    // s2 in 31-bits, because we force signed ints.\n    // in other case %= will fail.\n    n = len > 2000 ? 2000 : len;\n    len -= n;\n\n    do {\n      s1 = (s1 + buf[pos++]) |0;\n      s2 = (s2 + s1) |0;\n    } while (--n);\n\n    s1 %= 65521;\n    s2 %= 65521;\n  }\n\n  return (s1 | (s2 << 16)) |0;\n}\n\n\nmodule.exports = adler32;\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nmodule.exports = {\n\n  /* Allowed flush values; see deflate() and inflate() below for details */\n  Z_NO_FLUSH:         0,\n  Z_PARTIAL_FLUSH:    1,\n  Z_SYNC_FLUSH:       2,\n  Z_FULL_FLUSH:       3,\n  Z_FINISH:           4,\n  Z_BLOCK:            5,\n  Z_TREES:            6,\n\n  /* Return codes for the compression/decompression functions. Negative values\n  * are errors, positive values are used for special but normal events.\n  */\n  Z_OK:               0,\n  Z_STREAM_END:       1,\n  Z_NEED_DICT:        2,\n  Z_ERRNO:           -1,\n  Z_STREAM_ERROR:    -2,\n  Z_DATA_ERROR:      -3,\n  //Z_MEM_ERROR:     -4,\n  Z_BUF_ERROR:       -5,\n  //Z_VERSION_ERROR: -6,\n\n  /* compression levels */\n  Z_NO_COMPRESSION:         0,\n  Z_BEST_SPEED:             1,\n  Z_BEST_COMPRESSION:       9,\n  Z_DEFAULT_COMPRESSION:   -1,\n\n\n  Z_FILTERED:               1,\n  Z_HUFFMAN_ONLY:           2,\n  Z_RLE:                    3,\n  Z_FIXED:                  4,\n  Z_DEFAULT_STRATEGY:       0,\n\n  /* Possible values of the data_type field (though see inflate()) */\n  Z_BINARY:                 0,\n  Z_TEXT:                   1,\n  //Z_ASCII:                1, // = Z_TEXT (deprecated)\n  Z_UNKNOWN:                2,\n\n  /* The deflate compression method */\n  Z_DEFLATED:               8\n  //Z_NULL:                 null // Use -1 or null inline, depending on var type\n};\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n// Note: we can't get significant speed boost here.\n// So write code to minimize size - no pregenerated tables\n// and array tools dependencies.\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n// Use ordinary array, since untyped makes no boost here\nfunction makeTable() {\n  var c, table = [];\n\n  for (var n = 0; n < 256; n++) {\n    c = n;\n    for (var k = 0; k < 8; k++) {\n      c = ((c & 1) ? (0xEDB88320 ^ (c >>> 1)) : (c >>> 1));\n    }\n    table[n] = c;\n  }\n\n  return table;\n}\n\n// Create table on load. Just 255 signed longs. Not a problem.\nvar crcTable = makeTable();\n\n\nfunction crc32(crc, buf, len, pos) {\n  var t = crcTable,\n      end = pos + len;\n\n  crc ^= -1;\n\n  for (var i = pos; i < end; i++) {\n    crc = (crc >>> 8) ^ t[(crc ^ buf[i]) & 0xFF];\n  }\n\n  return (crc ^ (-1)); // >>> 0;\n}\n\n\nmodule.exports = crc32;\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction ZStream() {\n  /* next input byte */\n  this.input = null; // JS specific, because we have no pointers\n  this.next_in = 0;\n  /* number of bytes available at input */\n  this.avail_in = 0;\n  /* total number of input bytes read so far */\n  this.total_in = 0;\n  /* next output byte should be put there */\n  this.output = null; // JS specific, because we have no pointers\n  this.next_out = 0;\n  /* remaining free space at output */\n  this.avail_out = 0;\n  /* total number of bytes output so far */\n  this.total_out = 0;\n  /* last error message, NULL if no error */\n  this.msg = ''/*Z_NULL*/;\n  /* not visible by applications */\n  this.state = null;\n  /* best guess about the data type: binary or text */\n  this.data_type = 2/*Z_UNKNOWN*/;\n  /* adler32 value of the uncompressed data */\n  this.adler = 0;\n}\n\nmodule.exports = ZStream;\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(43);\nif(typeof content === 'string') content = [[module.i, content, '']];\n// add the styles to the DOM\nvar update = __webpack_require__(6)(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/src/index.js??postcss!./core.css\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/src/index.js??postcss!./core.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports) {\n\nfunction deface(s) {\r\n    return s.replace(/Tiramisù(\\s+Emstrangen)?/g, 'Cortona3D Solo core');\r\n}\r\nmodule.exports = deface;\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports) {\n\n/**\r\n * Construct a new Vec3f object.<br><br>\r\n * \r\n * #### new Vec3f(x, y, z)\r\n * #### new Vec3f([x, y, z])\r\n * \r\n * where x, y, and z are the components of the vector.\r\n * \r\n * @class The Vec3f object corresponds to a VRML SFVec3f field. Each component of the vector can be accessed using the x, y, and z properties.\r\n */\r\nfunction Vec3f(/*x, y, z*/) {\r\n    if (arguments.length == 3 && typeof arguments[0] == 'number') {\r\n        /**\r\n         * First value of the vector.\r\n         * @type number\r\n         * @default 0\r\n         */\r\n        this.x = arguments[0];\r\n        /**\r\n         * Second value of the vector.\r\n         * @type number\r\n         * @default 0\r\n         */\r\n        this.y = arguments[1];\r\n        /**\r\n         * Third value of the vector.\r\n         * @type number\r\n         * @default 0\r\n         */\r\n        this.z = arguments[2];\r\n    } else if (arguments.length == 1 && typeof arguments[0] == 'object' && arguments[0] !== null  && arguments[0].length == 3) {\r\n        this.x = arguments[0][0];\r\n        this.y = arguments[0][1];\r\n        this.z = arguments[0][2];\r\n    } else {\r\n        this.x = 0;\r\n        this.y = 0;\r\n        this.z = 0;\r\n    }\r\n}\r\n\r\n/**\r\n * Returns array represents vectors fields [x, y, z]\r\n * @returns {number[]} Array of three float\r\n */\r\nVec3f.prototype.toArray =\r\n    function () {\r\n        return [this.x, this.y, this.z];\r\n    };\r\n\r\n /**\r\n * Returns a string containing the value of x, y, z separated by spaces.\r\n * @returns {string} \r\n */\r\nVec3f.prototype.toString =\r\n    function () {\r\n        return this.toArray().join(' ');\r\n    };\r\n\r\n/**\r\n * Returns the value of the passed value added, component-wise, to the object.\r\n * @param {Vec3f} oVec3f The Vec3f object\r\n * @returns {Vec3f}\r\n */\r\nVec3f.prototype.add =\r\n    function (oVec3f) {\r\n        return new Vec3f(oVec3f.x + this.x, oVec3f.y + this.y, oVec3f.z + this.z);\r\n    };\r\n\r\n/**\r\n * Returns the value of the passed value subtracted, component-wise, from the object.\r\n * @param {Vec3f} oVec3f The Vec3f object\r\n * @returns {Vec3f}\r\n */\r\nVec3f.prototype.subtract =\r\n    function (oVec3f) {\r\n        return new Vec3f(this.x - oVec3f.x, this.y - oVec3f.y, this.z - oVec3f.z);\r\n    };\r\n\r\n/**\r\n * Returns the dot product of this vector and the passed value.\r\n * @param {Vec3f} oVec3f The Vec3f object\r\n * @returns {number}\r\n */\r\nVec3f.prototype.dot =\r\n    function (oVec3f) {\r\n        return (oVec3f.x * this.x + oVec3f.y * this.y + oVec3f.z * this.z);\r\n    };\r\n\r\n/**\r\n * Returns the cross product of the object and the passed value.\r\n * @param {Vec3f} oVec3f The Vec3f object\r\n * @returns {Vec3f}\r\n */\r\nVec3f.prototype.cross =\r\n    function (oVec3f) {\r\n        return new Vec3f(this.y * oVec3f.z - oVec3f.y * this.z, this.z * oVec3f.x - oVec3f.z * this.x, this.x * oVec3f.y - oVec3f.x * this.y);\r\n    };\r\n\r\n/**\r\n * Returns the value of the object divided by the passed value.\r\n * @param {number} fValue\r\n * @returns {Vec3f}\r\n */\r\nVec3f.prototype.divide =\r\n    function (fValue) {\r\n        return new Vec3f(this.x / fValue, this.y / fValue, this.z / fValue);\r\n    };\r\n\r\n/**\r\n * Returns the value of the object multiplied by the passed value.\r\n * @param {number} fValue\r\n * @returns {Vec3f}\r\n */\r\nVec3f.prototype.multiply =\r\n    function (fValue) {\r\n        return new Vec3f(this.x * fValue, this.y * fValue, this.z * fValue);\r\n    };\r\n\r\n/**\r\n * Returns the geometric length of this vector.\r\n * @returns {number}\r\n */\r\nVec3f.prototype.length =\r\n    function () {\r\n        return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\r\n    };\r\n\r\n/**\r\n * Returns the object converted to unit length .\r\n * @returns {Vec3f}\r\n */\r\nVec3f.prototype.normalize =\r\n    function () {\r\n        var m = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\r\n        return m === 0 ? this : this.divide(m);\r\n    };\r\n\r\n/**\r\n * Returns the value of the component-wise negation of the object.\r\n * @returns {Vec3f}\r\n */\r\nVec3f.prototype.negate =\r\n    function () {\r\n        return new Vec3f(-this.x, -this.y, -this.z);\r\n    };\r\n\r\nmodule.exports = Vec3f;\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Cortona3DSolo = __webpack_require__(2);\r\nvar checkConfigureOptions = __webpack_require__(1).checkConfigureOptions;\r\nvar expand = __webpack_require__(0).expand;\r\n\r\nwindow.Module = expand(window.Module || {}, Cortona3DSolo.core || {});\r\nif (typeof Module.Tiramisu !== 'object') Module.Tiramisu = {};\r\n\r\nvar Arguments = {\r\n    toModule: function () {\r\n        Module.arguments = [];\r\n        for (var key in this) {\r\n            if (this.hasOwnProperty(key) && typeof this[key] !== 'function') {\r\n                Module.arguments.push(key);\r\n                Module.arguments.push(String(this[key]));\r\n            }\r\n        }\r\n    },\r\n    features: 0\r\n};\r\n\r\nfunction TiramisuLoadingError(message) {\r\n    this.name = 'TiramisuLoadingError';\r\n    this.message = message || '';\r\n}\r\nTiramisuLoadingError.prototype = Object.create(Error.prototype);\r\nTiramisuLoadingError.prototype.constructor = TiramisuLoadingError;\r\n\r\nfunction load() {\r\n    try {\r\n        var xhr = new window.XMLHttpRequest();\r\n\r\n        if (xhr.overrideMimeType) {\r\n            xhr.overrideMimeType('text/javascript');\r\n        }\r\n\r\n        var coreURL = checkConfigureOptions(Cortona3DSolo.app.ENABLE_VRML_TEXT_NODE) ? 'Cortona3DSoloCoreText.js' : 'Cortona3DSoloCore.js';\r\n\r\n        if (typeof Module.locateFile === 'function') {\r\n            coreURL = Module.locateFile(coreURL);\r\n        } else if (Module.memoryInitializerPrefixURL) {\r\n            coreURL = Module.memoryInitializerPrefixURL + coreURL;\r\n        } else {\r\n            console.log('No memory initializer prefix URL!');\r\n        }\r\n\r\n        xhr.open(\"GET\", coreURL, true);\r\n        xhr.onerror = function (e) {\r\n            if (Module.onprogress) {\r\n                Module.onprogress({\r\n                    loaded: 0,\r\n                    total: -1,\r\n                    type: e.type\r\n                });\r\n            }\r\n            Cortona3DSolo.emit('core.onError', new Error(coreURL + ' ' + xhr.statusText));\r\n        };\r\n        xhr.onprogress = function (e) {\r\n            if(Module.onprogress) {\r\n                Module.onprogress(e);\r\n            }\r\n        };\r\n        xhr.onload = function (e) {\r\n            if (Module.onprogress) {\r\n                Module.onprogress({\r\n                    loaded: 0,\r\n                    total: -1,\r\n                    type: e.type\r\n                });\r\n            }\r\n\r\n            if (xhr.status === 200 || xhr.status === 0) {\r\n                var script = document.createElement('script');\r\n                var DOMURL = window.URL || window.webkitURL || window;\r\n                var url = DOMURL.createObjectURL(new Blob([xhr.response]));\r\n                script.onload = function () {\r\n                    DOMURL.revokeObjectURL(url);\r\n                    Cortona3DSolo.emit('core.onLoad');\r\n                    window.addEventListener('error', function (messageOrEvent, source, lineno, colno, error) {\r\n                        if (source == url || messageOrEvent.filename == url) {\r\n                            Cortona3DSolo.emit('core.onError', error || messageOrEvent);\r\n                        }\r\n                    });\r\n                };\r\n                script.onerror = function (e) {\r\n                    DOMURL.revokeObjectURL(url);\r\n                    Cortona3DSolo.emit('core.onError', new Error(coreURL + ' ' + e));\r\n                };\r\n                script.src = url;\r\n                document.body.appendChild(script);\r\n            } else {\r\n                Cortona3DSolo.emit('core.onError', new Error(coreURL + ' ' + xhr.statusText));\r\n            }\r\n        };\r\n        xhr.send(null);\r\n    } catch (e) {\r\n        throw new TiramisuLoadingError(e.message || e);\r\n    }\r\n}\r\n\r\nmodule.exports = {\r\n    Arguments: Arguments,\r\n    load: load\r\n};\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n// This file can be required in Browserify and Node.js for automatic polyfill\n// To use it:  require('es6-promise/auto');\n\nmodule.exports = __webpack_require__(47).polyfill();\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports) {\n\n/**\r\n * Convert base64 encoded data into the Blob object\r\n * \r\n * @param {string} b64Data Base 64 encoded data or data URL\r\n * @param {string} contentType \r\n * @param {number} [sliceSize=1048576]\r\n * @returns Promise\r\n */\r\nvar defaultSliceSize = 1048576;\r\n\r\nvar atobStrict = false;\r\n\r\ntry {\r\n    void atob(' ');\r\n} catch (e) {\r\n    atobStrict = true;\r\n}\r\n\r\nfunction b64toBlob(b64Data, contentType, sliceSize) {\r\n    var s = b64Data,\r\n        type = '',\r\n        start = 0;\r\n    if (b64Data.substr(0, 5) === 'data:') {\r\n        start = 5;\r\n        while (b64Data.charAt(start++) !== ',') {\r\n            if (b64Data.charAt(start) !== ';') {\r\n                if (!type) {\r\n                    type = b64Data.substring(5, start);\r\n                }\r\n            }\r\n        }\r\n        s = b64Data.substring(start);\r\n        if (b64Data.substring(5, start).indexOf(';base64') === -1) {\r\n            return Promise.resolve(new Blob([s], {\r\n                type: contentType || type\r\n            }));\r\n        }\r\n    }\r\n    return new Promise(function (resolve, reject) {\r\n        function callback(result) {\r\n            resolve(new Blob(result, {\r\n                type: contentType || type\r\n            }));\r\n        }\r\n        function workerCode() {\r\n            var self = this;\r\n            self.onmessage = function (e) {\r\n                var byteCharacters = e.data[0],\r\n                    sliceSize = e.data[1],\r\n                    byteArrays = [];\r\n                for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\r\n                    var slice = byteCharacters.slice(offset, offset + sliceSize),\r\n                        byteNumbers = new Array(slice.length);\r\n                    for (var i = 0; i < slice.length; i++) {\r\n                        byteNumbers[i] = slice.charCodeAt(i);\r\n                    }\r\n                    byteArrays.push(new Uint8Array(byteNumbers));\r\n                }\r\n                self.postMessage(byteArrays);\r\n            };\r\n        }\r\n\r\n        var param;\r\n                \r\n        try {\r\n            param = [atob(atobStrict ? s.replace(/\\s/g, '') : s), sliceSize || defaultSliceSize];\r\n        } catch (e) {\r\n            reject(e);\r\n            return;\r\n        }\r\n    \r\n        try {\r\n            var code = ('(' + workerCode + ')();').replace('\"use strict\";', ''),\r\n                src = URL.createObjectURL(new Blob([code], {\r\n                    type: 'application/javascript'\r\n                })),\r\n                worker = new Worker(src);\r\n            worker.onmessage = function (e) {\r\n                URL.revokeObjectURL(src);\r\n                callback(e.data);\r\n            };\r\n            worker.postMessage(param);\r\n        } catch (e) {\r\n            try {\r\n                var self = {\r\n                    postMessage: callback\r\n                };\r\n                workerCode.call(self);\r\n                self.onmessage({\r\n                    data: param\r\n                });\r\n            } catch (e) {\r\n                reject(e);\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nmodule.exports = b64toBlob;\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Cortona3DSolo = __webpack_require__(2);\nvar Tiramisu = Module.Tiramisu;\nvar app = __webpack_require__(1).app;\nvar checkConfigureOptions = __webpack_require__(1).checkConfigureOptions;\nvar util = __webpack_require__(0);\nvar expand = util.expand;\nvar getBaseURL = __webpack_require__(9).getBaseURL;\nvar deface = __webpack_require__(23);\n\nvar SUPPORT_TOUCH = ('ontouchstart' in window);\nvar SUPPORT_ONLY_TOUCH = SUPPORT_TOUCH && /mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent);\n\nvar Hammer = __webpack_require__(16);\n\nvar PRESS_TIME = 750;\nvar DOUBLE_TAP_TIME = 250;\nvar m_isPressed = false;\n\nvar m_didFinishLoadDocument = false;\nvar m_firstFrameDidArrive = false;\nvar m_doc;\nvar m_hiddenObjects = {};\n\nfunction beforeFirstFrameRender() {\n    var didDrawScene = Module.PanelService.didDrawScene;\n    Module.PanelService.didDrawScene = function () {\n        Cortona3DSolo.dispatch(\"core.didDrawAnimationFrame\");\n        didDrawScene();\n    };\n    app.ui.showCanvas(true);\n    Cortona3DSolo.dispatch(\"core.didChangeLayout\");\n    app.ui.setBannerImage(app.util.fetchBannerImage());\n}\n\n// Tiramisu hooks\nexpand(Tiramisu, {\n    didFinishLoadDocument: function (doc) {\n        m_doc = doc;\n        attachCanvasListeners();\n\n        doc.baseURL = \"\";\n        if (!doc.bundleURL) {\n            doc.baseURL = getBaseURL(doc.companionFile || __webpack_require__(1).getDocumentURL());\n        }\n        attachInteractivityXML(doc).then(function () {\n            var type = doc.type;\n            m_didFinishLoadDocument = true;\n            Cortona3DSolo.dispatch('app.didFinishLoadDocument', doc);\n            Cortona3DSolo.dispatch('app.didAttachDocument', doc);\n            if (m_firstFrameDidArrive) {\n                beforeFirstFrameRender();\n                setTimeout(function () {\n                    Cortona3DSolo.dispatch('app.firstFrameDidArrive');\n                }, 0);\n            }\n        }).catch(function (error) {\n            Cortona3DSolo.dispatch('app.didFailLoadDocument', error);\n            console.error(error);\n        });\n    },\n    firstFrameDidArrive: function (timestamp) {\n        m_firstFrameDidArrive = true;\n        if (m_didFinishLoadDocument) {\n            beforeFirstFrameRender();\n            Cortona3DSolo.dispatch('app.firstFrameDidArrive', timestamp);\n        }\n    },\n    didFailLoadDocument: function (message) {\n        Cortona3DSolo.dispatch('app.didFailLoadDocument', deface(message));\n    },\n    didClickHyperlink: function (urls) {\n        Cortona3DSolo.dispatch('app.didClickHyperlink', urls);\n    },\n    willStartNavigateInScene: function () {\n        Cortona3DSolo.dispatch('app.willStartNavigateInScene');\n    }\n});\n\n// Tiramisu util\nexpand(Tiramisu, {\n    util: {\n        /*\n        unmarshalItemList: function (data) {\n            var count, items, item, i, list = data;\n            if (!data) return;\n            count = Module.getValue(list, \"i32\");\n            list += 4;\n            items = [];\n            for (i = 0; i < count; ++i, list += 44) {\n                item = {\n                    id: Module.getValue(list, \"i32\"),\n                    refPartId: Module.getValue(list + 4, \"i32\"),\n                    quantity: Module.getValue(list + 8, \"i32\"),\n                    item: Module.Pointer_stringify(getValue(list + 12, \"*\")),\n                    variant: Module.Pointer_stringify(getValue(list + 16, \"*\")),\n                    hotspotId: Module.Pointer_stringify(getValue(list + 20, \"*\")),\n                    indent: Module.getValue(list + 24, \"i32\"),\n                    visualIndent: Module.getValue(list + 28, \"i32\"),\n                    attach: Module.getValue(list + 32, \"i32\"),\n                    revised: Module.getValue(list + 36, \"i32\") !== 0,\n                    notIllustrated: Module.getValue(list + 40, \"i32\") !== 0\n                };\n                items.push(item);\n            }\n            Module._free(data);\n            return items;\n        },\n        */\n\n        /**\n         * Wrap string array\n         * \n         * @private\n         * @param {number} data - Emscripten pointer to data buffer\n         * @param {number} size - sets the total number of elements of data buffer \n         * @returns {string[]} Array of string\n         */\n        wrapStringArray: function (data, size) {\n            var strings = new Array(size);\n            for (var i = 0; i < size; ++i)\n                strings[i] = Module.Pointer_stringify(Module.getValue(data + i * 4, 'i32'));\n            return strings;\n        },\n        /**\n         * Wrap sheet array\n         * \n         * @private\n         * @param {number} data - Emscripten pointer\n         * @param {number} size - Array length\n         * @returns {object[]} Array of object\n         * ```\n         * {\n         *     id: <string>,\n         *     description: <string>,\n         *     indentationLevel: <number>\n         * }\n         * ```\n         */\n        wrapSheetArray: function (data, size) {\n            if (!size) return [];\n\n            var sheets = new Array(size);\n            for (var i = 0; i < size; ++i, data += 12) {\n                sheets[i] = {\n                    id: Module.Pointer_stringify(Module.getValue(data, 'i32')),\n                    description: Module.Pointer_stringify(Module.getValue(data + 4, 'i32')),\n                    indentationLevel: Module.getValue(data + 8, 'i32')\n                };\n            }\n            return sheets;\n        },\n\n        /**\n         * Unmarshal array of the 3D object.\n         * \n         * @private\n         * @param {Handle[]} handles - an array of 3D object handles\n         * @returns {Handle[]} an array of 3D objects\n         */\n        unmarshalObjectArray: function (handles) {\n            if (!handles) return [];\n            var i, handle,\n                objects = [];\n            for (i = 0;\n                (handle = Module.getValue(handles + i * 4, 'i32')); ++i)\n                objects[i] = handle;\n            return objects;\n        },\n\n        /**\n         * Unmarshal array of the floats.\n         * \n         * @private\n         * @param {number} floats - Emscripten pointer\n         * @param {number} count - Array length\n         * @returns {number|number[]} \n         */\n        unmarshalFloatArray: function (floats, count) {\n            switch (count) {\n                case 1:\n                    return getValue(floats, 'float');\n                case 2:\n                    return [getValue(floats, 'float'), getValue(floats + 4, 'float')];\n                case 3:\n                    return [getValue(floats, 'float'), getValue(floats + 4, 'float'), getValue(floats + 8, 'float')];\n                case 4:\n                    return [getValue(floats, 'float'), getValue(floats + 4, 'float'), getValue(floats + 8, 'float'), getValue(floats + 12, 'float')];\n                default:\n                    console.error(count);\n                    return null;\n            }\n        }\n    }\n});\n\n/**\n * \n * @private\n * @param {any} doc\n * @returns {Promise}\n * @see external:Promise\n */\nfunction attachInteractivityXML(doc) {\n    var src = doc.companionFile;\n    var isInteractivityXmlEmissionEnabled = !checkConfigureOptions(app.DISABLE_INTERACTIVITY_XML_EMISSION);\n    isInteractivityXmlEmissionEnabled = isInteractivityXmlEmissionEnabled && !!src;\n    isInteractivityXmlEmissionEnabled = isInteractivityXmlEmissionEnabled && (doc.type == 'ipc' || doc.type == 'procedure');\n\n    if (isInteractivityXmlEmissionEnabled) {\n        var url = app.util.createResourceURL(src) || src;\n        if (url) {\n            return app.loadCompanionFile(url).then(function (data) {\n                if (data && data.type) {\n                    var add = {};\n                    add[data.type] = {\n                        interactivity: data.interactivity\n                    };\n                    expand(app, add);\n                }\n            });\n        }\n    }\n    return Promise.resolve();\n}\n\n/**\n * Parse an HTML color from string.\n * \n * @private\n * @param {HexColorString} color HTML color string\n * @returns {number} \n */\nfunction parseHTMLColor(color) {\n    var m = color.match(/^#([0-9a-f]{6})$/i);\n    if (m) {\n        m = m[1];\n        return (parseInt(m.substr(0, 2), 16) << 16) | (parseInt(m.substr(2, 2), 16) << 8) | parseInt(m.substr(4, 2), 16);\n    }\n    m = color.match(/^#([0-9a-f]{3})$/i);\n    if (m) {\n        m = m[1];\n        return (parseInt(m.charAt(0), 16) * 0x11) << 16 | (parseInt(m.charAt(1), 16) * 0x11) << 8 | (parseInt(m.charAt(2), 16) * 0x11);\n    }\n    return -1;\n}\n\n/**\n * Convert color to the HTML color string.\n * \n * @private\n * @param {number} color 0x00RRGGBB\n * @returns {HexColorString} HTML color string\n */\nfunction toHTMLColor(color) {\n    return '#' + (color & 0x00FFFFFF).toString(16).toUpperCase();\n}\n\n/**\n * @private\n * @param {any} p \n */\nfunction getVec3fValue(p) {\n    return [Module.getValue(p, 'float'), Module.getValue(p + 4, 'float'), Module.getValue(p + 8, 'float')];\n}\n\n\n/**\n * (description)\n * \n * @private\n * @param {string} cname - Emscripten ccall name\n * @param {Handle[]} handles - an array of 3D object handles\n * @param {AnimatedMode} animated\n */\nfunction ccallWithObjectHandles(cname, handles, animated) {\n    var count = 0,\n        objects = 0;\n    if (handles) {\n        if (typeof handles === 'number')\n            handles = [handles];\n        objects = Module.allocate(handles.length * 4, 'i32', Module.ALLOC_STACK);\n        count = handles.length;\n        for (var i = 0; i < count; ++i)\n            Module.setValue(objects + i * 4, handles[i], 'i32');\n    }\n    var args = [objects, count].concat(Array.prototype.slice.call(arguments, 2).filter(function (item) {\n        return typeof item !== 'undefined';\n    }));\n    var typs = new Array(args.length).map(function () {\n        return 'number';\n    });\n    Module.ccall(cname, 'null', typs, args);\n}\n\n/**\n * Attaching some additional `<canvas>` listeners. \n * \n * @private\n */\nvar _t;\n\nfunction attachCanvasListeners() {\n    function eventStopper(event) {\n        event.stopPropagation();\n    }\n\n    Array.prototype.slice.call(document.getElementsByClassName('cortona3dsolo-popover')).forEach(function (popover) {\n        popover.addEventListener('contextmenu', function (event) {\n            event.preventDefault();\n        }, false);\n        popover.addEventListener('pointerdown', eventStopper, false);\n        popover.addEventListener('pointerup', eventStopper, false);\n    });\n\n    function contextmenu(e) {\n        if (m_isPressed) return;\n        var target = e.target,\n            rect = target.getBoundingClientRect(),\n            offsetX = e.clientX - rect.left,\n            offsetY = e.clientY - rect.top;\n\n        Cortona3DSolo.dispatch('app.didCallContextMenu', offsetX, offsetY, target);\n        if (e.preventDefault) e.preventDefault();\n        if (e.stopPropagation) e.stopPropagation();\n    }\n\n    function pressHandler(e) {\n        if (e.pointerType === 'mouse') return;\n        contextmenu(e);\n    }\n\n    function doubleTapHandler(e) {\n        var target = e.target,\n            rect = target.getBoundingClientRect(),\n            offsetX = e.clientX - rect.left,\n            offsetY = e.clientY - rect.top;\n        obj = app.pickObject(offsetX, offsetY);\n        clearTimeout(_t);\n        if (obj) {\n            app.fitObjectsInView([obj.handle], true);\n        } else {\n            app.fitSceneInView(true);\n        }\n        if (e.preventDefault) e.preventDefault();\n        if (e.stopPropagation) e.stopPropagation();\n    }\n\n    var isMSGestureEnabled = livingOnTheEdge();\n\n    Module.canvas.addEventListener('contextmenu', contextmenu);\n\n    if (checkConfigureOptions(app.ENABLE_NAVIGATION_FIT_TO_OBJECT)) {\n\n        Module.canvas.addEventListener('click', function (event) {\n            var keys = +(event.shiftKey && 1) | +(event.ctrlKey && 2) | +(event.altKey && 4);\n            if (keys === 4) {\n                var target = event.target || event.srcElement,\n                    rect = target.getBoundingClientRect(),\n                    offsetX = event.clientX - rect.left,\n                    offsetY = event.clientY - rect.top,\n                    obj = app.pickObject(offsetX, offsetY);\n\n                if (obj) {\n                    clearTimeout(_t);\n                    _t = setTimeout(function () {\n                        app.setRotationCenterToObjects([obj.handle], true);\n                    }, 100);\n                }\n            }\n        }, false);\n\n        var lastTapTime = 0,\n            lastTapPoint = {};\n\n        var distance = function (p1, p2) {\n            return Math.sqrt((p1.x - p2.x) * (p1.x - p2.x) + (p1.y - p2.y) * (p1.y - p2.y));\n        };\n\n        if (isMSGestureEnabled) {\n            Module.canvas.addEventListener('dblclick', doubleTapHandler);\n            Module.canvas.addEventListener('MSGestureTap', function (e) {\n                if (e.detail === (e.MSGESTURE_FLAG_BEGIN + e.MSGESTURE_FLAG_END)) {\n                    if (!lastTapTime) {\n                        lastTapTime = new Date().valueOf();\n                        lastTapPoint.x = e.screenX;\n                        lastTapPoint.y = e.screenY;\n                    } else if ((new Date().valueOf() - lastTapTime) <= DOUBLE_TAP_TIME) {\n                        lastTapTime = 0;\n                        if (distance(lastTapPoint, {\n                                x: e.screenX,\n                                y: e.screenY\n                            }) < 100) { // posThreshold\n                            doubleTapHandler(e);\n                        }\n                    } else {\n                        lastTapTime = 0;\n                    }\n                }\n            });\n            Module.canvas.addEventListener('MSGestureHold', function (e) {\n                if (e.detail & e.MSGESTURE_FLAG_BEGIN) {\n                    pressHandler(e);\n                    m_isPressed = true;\n                } else if (e.detail & e.MSGESTURE_FLAG_END) {\n                    setTimeout(function () {\n                        m_isPressed = false;\n                    }, 250);\n                }\n            });\n\n        } else {\n            var mcOptions = {};\n            if (navigator.pointerEnabled === false) {\n                if (SUPPORT_ONLY_TOUCH) {\n                    mcOptions.inputClass = Hammer.TouchInput;\n                } else if (!SUPPORT_TOUCH) {\n                    mcOptions.inputClass = Hammer.MouseInput;\n                } else {\n                    mcOptions.inputClass = Hammer.TouchMouseInput;\n                }\n            }\n            var mc = new Hammer.Manager(Module.canvas, mcOptions);\n            var press = new Hammer.Press({\n                time: PRESS_TIME\n            });\n            var doubletap = new Hammer.Tap({\n                event: 'doubletap',\n                taps: 2,\n                threshold: 5,\n                posThreshold: 100,\n                interval: DOUBLE_TAP_TIME\n            });\n            doubletap.recognizeWith(press);\n            press.requireFailure(doubletap);\n            mc.add(press);\n            mc.add(doubletap);\n            mc.set({\n                touchAction: 'none'\n            });\n            mc.on('press', function (e) {\n                pressHandler({\n                    target: e.target,\n                    clientX: e.center.x,\n                    clientY: e.center.y\n                });\n                m_isPressed = true;\n            });\n            mc.on('pressup', function () {\n                setTimeout(function () {\n                    m_isPressed = false;\n                }, 250);\n            });\n            mc.on('doubletap', function (e) {\n                doubleTapHandler({\n                    target: e.target,\n                    clientX: e.center.x,\n                    clientY: e.center.y\n                });\n            });\n        }\n    }\n}\n\n/**\n * Adapting to survive in Microsoft's neighbourhood. \n * \n * @private\n */\nfunction livingOnTheEdge() {\n    if (typeof window.MSGesture !== 'function')\n        return false;\n\n    console.log(\"Adapting to survive in Microsoft's neighbourhood.\");\n\n    var canvas = Module.canvas,\n        recognizer = new MSGesture();\n\n    recognizer.target = canvas;\n\n    function gestureHandler(event) {\n        microsoftGesture(event.translationX, event.translationY, event.scale, event.rotation, event.detail);\n    }\n\n    function microsoftGesture(x, y, scale, rotation, detail) {\n        Module.ccall('tiramisu_microsoftGesture', 'null', ['number', 'number', 'number', 'number', 'number'], arguments);\n    }\n\n    function microsoftPointerUp(pointerId, offsetX, offsetY) {\n        return Module.ccall('tiramisu_microsoftPointerUp', 'number', ['number'], arguments);\n    }\n\n    function microsoftPointerDown(pointerId, offsetX, offsetY) {\n        return Module.ccall('tiramisu_microsoftPointerDown', 'number', ['number', 'number', 'number'], arguments);\n    }\n\n    canvas.addEventListener('MSHoldVisual', function (event) {\n        event.preventDefault();\n    }, false);\n    canvas.addEventListener('MSGestureStart', gestureHandler, false);\n    canvas.addEventListener('MSGestureEnd', gestureHandler, false);\n    canvas.addEventListener('MSGestureChange', gestureHandler, false);\n    canvas.addEventListener('MSInertiaStart', gestureHandler, false);\n    canvas.addEventListener('MSGestureTap', gestureHandler, false);\n    canvas.addEventListener('MSGestureHold', gestureHandler, false);\n    canvas.addEventListener('pointerdown', function (event) {\n        if (event.pointerType == 'mouse') {\n            canvas.setPointerCapture(event.pointerId);\n            return;\n        }\n        if (microsoftPointerDown(event.pointerId, event.offsetX, event.offsetY)) {\n            canvas.setPointerCapture(event.pointerId);\n            if (!recognizer.target) {\n                recognizer.target = canvas;\n            }\n            recognizer.addPointer(event.pointerId);\n        }\n    }, false);\n    canvas.addEventListener('pointerup', function (event) {\n        if (event.pointerType == 'mouse') return;\n        event.stopPropagation();\n        microsoftPointerUp(event.pointerId, event.offsetX, event.offsetY);\n    }, false);\n    window.addEventListener('pointerup', function (event) {\n        if (event.pointerType == 'mouse') return;\n        var box = canvas.getBoundingClientRect(),\n            left = box.left + window.pageXOffset - document.body.clientLeft,\n            top = box.top + window.pageYOffset - document.body.clientTop;\n        microsoftPointerUp(event.pointerId, event.pageX - left, event.pageY - top);\n    }, false);\n\n    return true;\n}\n\nvar appExports = {\n    /**\n     * Returns Cortona3D Solo version string.\n     * \n     * @memberof module:solo.app\n     * @returns {string} Version string \n     */\n    version: function () {\n        var major = (Tiramisu.VERSION >> 24),\n            minor = (Tiramisu.VERSION >> 16) & 0xFF,\n            build = Tiramisu.VERSION & 0xFFFF,\n            buildTime = new Date(Tiramisu.BUILD_TIME * 1000);\n        return \"1.6.6\" + \" (core: \" + [major, minor, build].join('.') + \")\";\n    },\n\n    /**\n     * Changes the `<canvas>` element size. This function must be called to resize 3D window.\n     * \n     * @memberof module:solo.app\n     * @param {number} width - pixels\n     * @param {number} height - pixels\n     * @see {@link module:solo.core.canvas core.canvas}\n     */\n    resize: function (width, height) {\n        Module.ccall('tiramisu_resize', 'null', ['number', 'number'], arguments);\n    },\n\n    /**\n     * Returns name of 3D object by its handle.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} handle - Handle of 3D object \n     * @returns {string} Name of 3D object \n     */\n    getObjectName: function (handle) {\n        return Module.ccall('tiramisu_getObjectName', 'string', ['number'], arguments);\n    },\n\n    /**\n     * Returns type of 3D object by its handle.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} handle - Handle of 3D object \n     * @returns {string} Type of 3D object \n     * @since 1.4.0\n     */\n    getObjectTypeName: function (handle) {\n        return Module.ccall('tiramisu_getObjectTypeName', 'string', ['number'], arguments);\n    },\n\n    /**\n     * Returns handle of 3D object by its name.\n     * \n     * @memberof module:solo.app\n     * @param {string} name - Name of 3D object\n     * @returns {Handle} Handle of 3D object\n     */\n    getObjectWithName: function (name) {\n        return Module.ccall('tiramisu_getObjectWithName', 'number', ['string'], arguments);\n    },\n\n    /**\n     * Checks whether a 3D object is ignored by the picker. \n     * \n     * @memberof module:solo.app\n     * @param {Handle} handle - Handle of 3D object\n     * @returns {boolean}\n     */\n    isObjectIgnorableByPicker: function (handle) {\n        return Module.ccall('tiramisu_isObjectIgnorableByPicker', 'number', ['number'], arguments) !== 0;\n    },\n\n    /**\n     * Sets whether a 3D object is ignored by picker.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} handle - Handle of 3D object\n     * @param {boolean} ignorable\n     */\n    setObjectIgnorableByPicker: function (handle, ignorable) {\n        Module.ccall('tiramisu_setObjectIgnorableByPicker', 'null', ['number', 'number'], arguments);\n    },\n\n    /**\n     * Sends a ray from the picked point in the 3D window and returns 3D object that was hit by the ray.\n     * \n     * @memberof module:solo.app\n     * @param {number} x - The X coordinate relative to the element `<canvas>`\n     * @param {number} y - The Y coordinate relative to the element `<canvas>`\n     * @param {boolean} [needsTopLevelParent] - \n     * - true - returns the topmost element in a picked chain of 3D objects\n     * - false - returns a 3D object that was hit by the ray\n     * @returns {PickedObjectInfo|null} Information about the picked 3D object or null if there are no picked 3D objects\n     */\n    pickObject: function (x, y, needsTopLevelParent) {\n        var mode = typeof needsTopLevelParent == 'undefined' ? 0 : needsTopLevelParent ? 2 : 1;\n        node = Module.ccall('tiramisu_pickObject', 'number', ['number', 'number', 'number'], [x, y, mode]);\n        return node ? {\n            handle: node,\n            name: Module.ccall('tiramisu_getObjectName', 'string', ['number'], [node])\n        } : null;\n    },\n\n    /**\n     * Sends a ray from the picked point in the 3D window and returns information about picked point and a chain of 3D objects.\n     * The method works with generic VRML file.\n     * \n     * > #### __NOTE__\n     * >\n     * > Required use of the {@link module:solo.app DISABLE_DISCARDABLE_GEOMETRY_DATA} flag when initializing the library.\n     * >```\n     * >    Cortona3DSolo.use('core', { \n     * >        features: Cortona3DSolo.app.DISABLE_DISCARDABLE_GEOMETRY_DATA\n     * >    });\n     * >```\n     * \n     * @memberof module:solo.app\n     * @param {number} x - The X coordinate relative to the element `<canvas>`\n     * @param {number} y - The Y coordinate relative to the element `<canvas>`\n     * @returns {PickedObjectChain|null} The object with result structure or null if there are no picked 3D objects\n     * @see {@link module:solo.use use()}\n     * @since 1.4.0\n     */\n    pickObjectChain: function (x, y) {\n        var result = Module._tiramisu_pickObjectChain(x, y),\n            obj = null;\n\n        if (result) {\n            // Fields of the result structure\n            //     Vec3f coord;\n            //     Vec3f normal;\n            //     Vec3f sceneCoord;\n            //     Vec3f sceneNormal;\n            //     Node* chain[];\n\n            obj = {\n                coord: getVec3fValue(result),\n                normal: getVec3fValue(result + 12),\n                sceneCoord: getVec3fValue(result + 24),\n                sceneNormal: getVec3fValue(result + 36),\n                chain: Tiramisu.util.unmarshalObjectArray(result + 48)\n            };\n\n            Module._free(result);\n        }\n\n        return obj;\n    },\n\n    /**\n     * Returns the transparency threshold used by picker.\n     * \n     * @memberof module:solo.app\n     * @returns {number} The transparency threshold\n     * @deprecated since version 1.5.0, use {@link module:solo.app.pickerTransparencyThreshold app.pickerTransparencyThreshold} instead\n     */\n    getPickerTransparencyThreshold: function () {\n        return Module.ccall('tiramisu_getPickerTransparencyThreshold', 'number');\n    },\n\n    /**\n     * Sets transparency threshold used by picker.\n     * \n     * @memberof module:solo.app\n     * @param {number} threshold - [0..1]\n     * @deprecated since version 1.5.0, use {@link module:solo.app.pickerTransparencyThreshold app.pickerTransparencyThreshold} instead\n     */\n    setPickerTransparencyThreshold: function (threshold) {\n        return Module.ccall('tiramisu_setPickerTransparencyThreshold', 'null', ['number'], arguments);\n    },\n\n    /**\n     * Adds 3D objects to selected objects.\n     * \n     * @memberof module:solo.app\n     * @param {Handle[]} handles - Array of 3D object handles\n     * @param {AnimatedMode} animated\n     * @fires \"app.didChangeSelection\"\n     */\n    addSelectedObjects: function (handles, animated) {\n        ccallWithObjectHandles('tiramisu_addSelectedObjects', handles, animated);\n        Cortona3DSolo.dispatch('app.didChangeSelection');\n    },\n\n    /**\n     * Sets 3D objects to selected state.\n     * \n     * @memberof module:solo.app\n     * @param {Handle[]} handles - Array of 3D object handles\n     * @param {AnimatedMode} animated\n     * @fires \"app.didChangeSelection\"\n     */\n    setSelectedObjects: function (handles, animated) {\n        ccallWithObjectHandles('tiramisu_setSelectedObjects', handles, animated);\n        Cortona3DSolo.dispatch('app.didChangeSelection');\n    },\n\n    /**\n     * Returns an array of selected 3D objects.\n     * \n     * @memberof module:solo.app\n     * @returns {Handle[]} An array of 3D object handles\n     */\n    getSelectedObjects: function () {\n        var handles = Module.ccall('tiramisu_getSelectedObjects', 'number'),\n            objects = Tiramisu.util.unmarshalObjectArray(handles);\n        Module._free(handles);\n        return objects;\n    },\n\n    /**\n     * Sets the default background color in the 3D scene.\n     * An array of color defines the gradient fill. \n     * \n     * @memberof module:solo.app\n     * @param {HexColorString|HexColorString[]} colors - A string representing the color or an array of colors\n     */\n    setDefaultBackgroundColors: function (colors) {\n        var count = 0,\n            colorArray = 0,\n            i,\n            sp = Module.Runtime.stackSave();\n        if (colors) {\n            if (typeof colors === 'string') {\n                colors = [colors];\n            }\n            count = colors.length;\n            colorArray = Module.allocate(count * 4, 'i32', Module.ALLOC_STACK);\n            for (i = 0; i < count; ++i) {\n                Module.setValue(colorArray + i * 4, parseHTMLColor(colors[i]), 'i32');\n            }\n        }\n        Module.ccall('tiramisu_setDefaultBackgroundColors', 'null', ['number', 'number'], [colorArray, count]);\n        Module.Runtime.stackRestore(sp);\n    },\n\n    /**\n     * Sets the mouse navigation mode.\n     * \n     * @memberof module:solo.app\n     * @param {MouseDragMode} mode - Mouse drag mode \n     */\n    setMouseDragMode: function (mode) {\n        Module.ccall('tiramisu_setMouseDragMode', 'null', ['number'], arguments);\n    },\n\n    /**\n     * Sets property for the 3D object.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} handle - Handle of the 3D object\n     * @param {ObjectProperty} property - Property code\n     * @param {AnimatedMode} animated\n     * @param {number} v0 - Parameter depending on the property\n     * @param {number} [v1] - Parameter depending on the property\n     * @param {number} [v2] - Parameter depending on the property\n     * @param {number} [v3] - Parameter depending on the property\n     * @returns {boolean} Return true if changed\n     * @see {@link module:solo.app.restoreObjectProperty app.restoreObjectProperty()}\n     */\n    setObjectPropertyf: function (handle, property, animated, v0, v1, v2, v3) {\n        if (property === app.PROPERTY_VISIBILITY && m_doc.type === 'generic') {\n            var visible = Module._tiramisu_isObjectVisibile(handle) !== 0,\n                render = !!v0;\n            if (!(handle in m_hiddenObjects)) {\n                m_hiddenObjects[handle] = visible;\n            }\n            if (visible !== render) {\n                Module._tiramisu_setObjectVisibility(handle, render);\n                return true;\n            }\n            return false;\n        }\n        return Module.ccall('tiramisu_setObjectPropertyf', 'number', ['number', 'number', 'number', 'number', 'number', 'number', 'number'], arguments) !== 0;\n    },\n\n    /**\n     * Gets property for the 3D object.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} handle - Handle of the 3D object\n     * @param {ObjectProperty} property - Property code\n     * @returns {number|number[]} Value of the requested property\n     * @see {@link module:solo.app.setObjectProperty app.setObjectProperty()}\n     * @since 1.6.3\n     */\n    getObjectPropertyf: function (handle, property) {\n        var sp = Runtime.stackSave(),\n            buffer = Module.allocate(4 * 4, 'float', Module.ALLOC_STACK),\n            count = Module._tiramisu_getObjectPropertyf(handle, property, buffer),\n            value = Tiramisu.util.unmarshalFloatArray(buffer, count);\n        Runtime.stackRestore(sp);\n        return value;\n    },\n\n    /**\n     * Restores property value for the 3D object.\n     * Pass handle = 0 to restore property of all dirty objects.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} handle - Handle of 3D object\n     * @param {ObjectProperty} property - Property\n     * @param {AnimatedMode} animated\n     * @returns {boolean} Returns true if changed\n     * @see {@link module:solo.app.setObjectPropertyf app.setObjectPropertyf()}\n     */\n    restoreObjectProperty: function (handle, property, animated) {\n        if (property === app.PROPERTY_VISIBILITY) {\n            if (m_doc.type === 'generic') {\n                if (handle) {\n                    if (handle in m_hiddenObjects) {\n                        var visible = Module._tiramisu_isObjectVisibile(handle) !== 0,\n                            render = m_hiddenObjects[handle];\n                        delete m_hiddenObjects[handle];\n                        if (visible !== render) {\n                            Module._tiramisu_setObjectVisibility(handle, render);\n                            return true;\n                        }\n                    }\n                    return false;\n                }\n                for (var h in m_hiddenObjects) {\n                    Module._tiramisu_setObjectVisibility(h, m_hiddenObjects[h]);\n                }\n                m_hiddenObjects = {};\n            }\n        }\n        return Module.ccall('tiramisu_restoreObjectProperty', 'number', ['number', 'number', 'number'], [handle || 0, property, animated]) !== 0;\n    },\n\n    /**\n     * Returns array of 3D objects with dirty property. \n     * \n     * @memberof module:solo.app\n     * @param {ObjectProperty} property - Property\n     * @returns {Handle[]} Array of 3D objects\n     * @see {@link module:solo.app.setObjectPropertyf app.setObjectPropertyf()}\n     */\n    getObjectsWithDirtyProperty: function (property) {\n        if (property === app.PROPERTY_VISIBILITY) {\n            if (m_doc.type === 'generic') {\n                var res = [];\n                for (var h in m_hiddenObjects) {\n                    res.push(h);\n                }\n                return res;\n            }\n        }\n        var handles = Module.ccall('tiramisu_getObjectsWithDirtyProperty', 'number', ['number'], arguments),\n            objects = Tiramisu.util.unmarshalObjectArray(handles);\n        Module._free(handles);\n        return objects;\n    },\n\n    /**\n     * Checks if the center of rotation is visible.\n     * \n     * @memberof module:solo.app\n     * @returns {boolean} \n     */\n    isRotationCenterVisible: function () {\n        return Module.ccall('tiramisu_isRotationCenterVisible', 'number') !== 0;\n    },\n\n    /**\n     * Toggles the visibility of the center of rotation.\n     * \n     * @memberof module:solo.app\n     * @param {boolean} visible - Flag\n     */\n    setRotationCenterVisibility: function (visible) {\n        Module.ccall('tiramisu_setRotationCenterVisibility', 'null', ['number'], arguments);\n    },\n\n    /**\n     * Restores the default camera position.\n     * \n     * @memberof module:solo.app\n     * @param {AnimatedMode} [animated]\n     */\n    setDefaultView: function (animated) {\n        Module.ccall('tiramisu_setDefaultView', 'null', ['number'], arguments);\n    },\n\n    /**\n     * Aligns the camera horizon.\n     * \n     * @memberof module:solo.app\n     * @param {AnimatedMode} [animated]\n     * @since 1.6.2\n     */\n    alignHorizon: function (animated) {\n        Module.ccall('tiramisu_alignHorizon', 'null', ['number'], arguments);\n    },\n\n    /**\n     * Sets standard view by name.\n     * \n     * @memberof module:solo.app\n     * @param {StandardViewName} viewName Name of standard view\n     * @param {AnimatedMode} animated\n     * @param {number} [factor=0.95]\n     */\n    jumpToStandardView: function (viewName, animated, factor) {\n        Module.ccall('tiramisu_jumpToStandardView', 'null', ['string', 'number', 'number'], [viewName, animated, factor || 0]);\n    },\n\n    /**\n     * Fit to visible part of the 3D scene.\n     * \n     * @memberof module:solo.app\n     * @param {AnimatedMode} animated\n     * @param {number} [factor=0.95]\n     */\n    fitSceneInView: function (animated, factor) {\n        Module.ccall('tiramisu_fitObjectsInView', 'null', ['number', 'number', 'number', 'number'], [0, -1, animated, factor || 0]);\n    },\n\n    /**\n     * Fit to selected 3D objects in the 3D scene.\n     * \n     * @memberof module:solo.app\n     * @param {AnimatedMode} animated\n     * @param {number} [factor=0.95]\n     */\n    fitSelectedObjectsInView: function (animated, factor) {\n        Module.ccall('tiramisu_fitObjectsInView', 'null', ['number', 'number', 'number', 'number'], [0, -2, animated, factor || 0]);\n    },\n\n    /**\n     * Fit to multiple 3D objects assigned in the array.\n     * \n     * @memberof module:solo.app\n     * @param {Handle[]} handles - Array of 3D object handles\n     * @param {AnimatedMode} animated\n     * @param {number} [factor=0.95]\n     */\n    fitObjectsInView: function (handles, animated, factor) {\n        ccallWithObjectHandles('tiramisu_fitObjectsInView', handles, animated, factor);\n    },\n\n    /**\n     * Sets the center of rotation in the center of the bounding box of visible part of the 3D scene.\n     * \n     * @memberof module:solo.app\n     */\n    setRotationCenterToScene: function () {\n        Module.ccall('tiramisu_setRotationCenterToObjects', 'null', ['number', 'number', 'number'], [0, -1, 0]);\n    },\n\n    /**\n     * Sets the center of rotation in the center of the bounding box of selected 3D objects.\n     * \n     * @memberof module:solo.app\n     */\n    setRotationCenterToSelectedObjects: function () {\n        Module.ccall('tiramisu_setRotationCenterToObjects', 'null', ['number', 'number', 'number'], [0, -2, 0]);\n    },\n\n    /**\n     * Sets the center of rotation in the center of the bounding box of 3D objects assigned in the array.\n     * \n     * @memberof module:solo.app\n     * @param {Handle[]} handles - Array of 3D object handles\n     * @param {AnimatedMode} animated\n     */\n    setRotationCenterToObjects: function (handles, animated) {\n        ccallWithObjectHandles('tiramisu_setRotationCenterToObjects', handles, animated);\n        if (animated) {\n            Module.ccall('tiramisu_centerRotationCenterInView', 'null', ['number'], [animated]);\n        }\n    },\n\n    /**\n     * Sets the center of rotation in the center of the screen.\n     * \n     * @memberof module:solo.app\n     * @param {AnimatedMode} animated\n     */\n    centerRotationCenterInView: function (animated) {\n        Module.ccall('tiramisu_centerRotationCenterInView', 'null', ['number'], arguments);\n    },\n\n    /**\n     * Sets the center of rotation to default position.\n     * \n     * @memberof module:solo.app\n     */\n    resetRotationCenter: function () {\n        Module.ccall('tiramisu_resetRotationCenter', 'null');\n    },\n\n    /**\n     * Gets a description of the loaded interactive model.\n     * Returns an object depending on the type of interactive model.\n     * \n     * @memberof module:solo.app\n     * @returns {DocumentInfo}\n     * @deprecated since version 1.5.0, use {@link module:solo.app.modelInfo app.modelInfo} instead\n     */\n    getDocumentInfo: function () {\n        return m_doc && expand({}, m_doc);\n    },\n\n    /**\n     * Returns options of the interactive model from the companion file *.interactivity.xml* in the form of an object with key/value pairs.\n     * \n     * @memberof module:solo.app\n     * @returns {KeyValuePairs}\n     * @since 1.4.0\n     */\n    getOptions: function () {\n        var pairs = Module.ccall('tiramisu_getOptions', 'number'),\n            dict,\n            name,\n            i = 0;\n        if (!pairs)\n            return;\n        dict = {};\n        for (i = 0;\n            (name = Module.getValue(pairs + i, 'i32')); i += 8)\n            dict[Module.Pointer_stringify(name)] = Module.Pointer_stringify(Module.getValue(pairs + i + 4, 'i32'));\n        Module._free(pairs);\n        return dict;\n    },\n\n    /**\n     * Returns the value of the option of the interactive model.\n     * \n     * @memberof module:solo.app\n     * @param {string} name - The name of the option\n     * @returns {string} The value of the option\n     * @since 1.4.0\n     */\n    getOption: function (name) {\n        var value = Module.ccall('tiramisu_getOption', 'number', ['string'], [name]);\n        if (!value)\n            return;\n        return Module.Pointer_stringify(value);\n    },\n\n    /**\n     * Sets the name of the 3D object.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} handle - A handle of 3D object \n     * @param {string} name - A name of 3D object\n     * @since 1.4.0\n     */\n    setObjectName: function (handle, name) {\n        Module.ccall('tiramisu_setObjectName', 'null', ['number', 'string'], arguments);\n    },\n\n    /**\n     * Returns the current color of the hovered 3D object in the interactive model.\n     * \n     * @memberof module:solo.app\n     * @returns {HexColorString}\n     * @since 1.4.0\n     * @deprecated since version 1.5.0, use {@link module:solo.app.hoverColor app.hoverColor} instead\n     */\n    getHoverColor: function () {\n        return toHTMLColor(Module._tiramisu_getHoverColor());\n    },\n\n    /**\n     * Sets the color of the hovered 3D object in the interactive model.\n     * \n     * @memberof module:solo.app\n     * @param {HexColorString}\n     * @since 1.4.0\n     * @deprecated since version 1.5.0, use {@link module:solo.app.hoverColor app.hoverColor} instead\n     */\n    setHoverColor: function (color) {\n        return Module._tiramisu_setHoverColor(parseHTMLColor(color));\n    },\n\n    /**\n     * Returns the current color of the selected 3D object in the interactive model.\n     * \n     * @memberof module:solo.app\n     * @returns {HexColorString}\n     * @since 1.4.0\n     * @deprecated since version 1.5.0, use {@link module:solo.app.selectionColor app.selectionColor} instead\n     */\n    getSelectionColor: function () {\n        return toHTMLColor(Module._tiramisu_getSelectionColor());\n    },\n\n    /**\n     * Sets the color of the selected 3D object in the interactive model.\n     * \n     * @memberof module:solo.app\n     * @param {HexColorString}\n     * @since 1.4.0\n     * @deprecated since version 1.5.0, use {@link module:solo.app.selectionColor app.selectionColor} instead\n     */\n    setSelectionColor: function (color) {\n        return Module._tiramisu_setSelectionColor(parseHTMLColor(color));\n    },\n\n    /**\n     * Gets list of the viewpoints in the VRML scene.\n     * \n     * @memberof module:solo.app\n     * @returns {ViewpointInfo[]} An array of viewpoints\n     * @since 1.4.0\n     */\n    getViewpoints: function () {\n        var bulk = Module._tiramisu_getViewpoints(),\n            viewpoints = [],\n            handle,\n            i;\n        if (bulk) {\n            for (i = 0;\n                (handle = Module.getValue(bulk + i, 'i32')); i += 12) {\n                viewpoints.push({\n                    handle: handle,\n                    name: Module.Pointer_stringify(Module.getValue(bulk + i + 4, 'i32')),\n                    description: Module.Pointer_stringify(Module.getValue(bulk + i + 8, 'i32'))\n                });\n            }\n            Module._free(bulk);\n        }\n        return viewpoints;\n    },\n\n    /**\n     * Returns active viewpoint.\n     * \n     * @memberof module:solo.app\n     * @returns {Handle} A handle of the 3D object \"viewpoint\"\n     * @since 1.4.0\n     * @deprecated since version 1.5.0, use {@link module:solo.app.activeViewpoint app.activeViewpoint} instead\n     */\n    getActiveViewpoint: function () {\n        return Module._tiramisu_getActiveViewpoint();\n    },\n\n    /**\n     * Sets active viewpoint.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} handle - A handle of the 3D object \"viewpoint\"\n     * @since 1.4.0\n     * @deprecated since version 1.5.0, use {@link module:solo.app.activeViewpoint app.activeViewpoint} instead\n     */\n    setActiveViewpoint: function (handle) {\n        Module._tiramisu_setActiveViewpoint(handle);\n    },\n\n    /**\n     * Adds new objects in the 3D scene.\n     * \n     * @memberof module:solo.app\n     * @param {Handle|Handle[]} handles - A handle of the 3D object or an array of 3D object handles \n     * @param {Handle} [parentHandle] - A handle of the parent 3D object\n     * @since 1.4.0\n     */\n    addObjects: function (handles, parentHandle) {\n        if (!util.isObject(handles) || !handles.forEach) {\n            handles = [handles];\n        }\n        handles.forEach(function (handle) {\n            Module.ccall('tiramisu_addObject', 'null', ['number', 'number'], [handle, parentHandle]);\n        });\n    },\n\n    /**\n     * Removes objects from the 3D scene.\n     * \n     * @memberof module:solo.app\n     * @param {Handle|Handle[]} handles - A handle of the 3D object or an array of 3D object handles \n     * @param {Handle} [parentHandle] - A handle of the parent 3D object\n     * @since 1.4.0\n     */\n    removeObjects: function (handles, parentHandle) {\n        if (!util.isObject(handles) || !handles.forEach) {\n            handles = [handles];\n        }\n        handles.forEach(function (handle) {\n            Module.ccall('tiramisu_removeObject', 'null', ['number', 'number'], [handle, parentHandle]);\n        });\n    },\n\n    /**\n     * Remove all objects from the 3D scene.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} [parentHandle] - Parent handle\n     * @since 1.4.0\n     */\n    removeAllObjects: function (parentHandle) {\n        Module.ccall('tiramisu_removeAllObjects', 'null', ['number'], arguments);\n    },\n\n    /**\n     * Gets child objects for the parent object.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} [parentHandle] - Parent handle\n     * @returns {Handle[]} An array of 3D object handles\n     * @since 1.5.0\n     */\n    getChildObjects: function (parentHandle) {\n        var handles = Module._tiramisu_getChildObjects(parentHandle),\n            objects = Tiramisu.util.unmarshalObjectArray(handles);\n        Module._free(handles);\n        return objects;\n    },\n\n    /**\n     * Sets child objects for the parent object.\n     * \n     * @memberof module:solo.app\n     * @param {Handle[]} children - An array of 3D object handles\n     * @param {Handle} [parentHandle] - Parent handle\n     * @returns {boolean}\n     * @since 1.5.0\n     */\n    setChildObjects: function (children, parentHandle) {\n        var count = 0,\n            objects = 0;\n        if (children) {\n            if (typeof children === 'number')\n                children = [children];\n            objectArray = Module.allocate(children.length * 4, 'i32', Module.ALLOC_STACK);\n            count = children.length;\n            for (var i = 0; i < count; ++i)\n                Module.setValue(objectArray + i * 4, children[i], 'i32');\n        }\n        return Module._tiramisu_setChildObjects(parentHandle, objectArray, count) !== 0;\n    },\n\n    /**\n     * Returns handle of the parent object.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} [handle] - Parent handle\n     * @returns {Handle} Handle of 3D object\n     * @since 1.5.1\n     */\n    getParentObject: function (handle) {\n        return Module._tiramisu_getParentObject(handle);\n    },\n\n    /**\n     * Returns the object visibility code.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} handle - Handle of 3D object\n     * @param {number} [flags=0] -\n     * @returns {ObjectVisibilityEnum} The object visibility code\n     * @since 1.5.2\n     */\n    getObjectVisibility: function (handle, flags) {\n        return Module._tiramisu_getObjectVisibility(handle, flags);\n    },\n\n    /**\n     * Returns flags of the 3D object.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} handle - Handle of 3D object\n     * @returns {number} Flags of 3D object\n     * @since 1.5.2\n     */\n    getObjectFlags: function (handle) {\n        return Module._tiramisu_getObjectFlags(handle);\n    },\n\n    /**\n     * Creates 3D objects from the string.\n     * \n     * @memberof module:solo.app\n     * @param {string} syntax - VRML syntax string\n     * @param {string} [baseUrl] - Base URL to load external resources\n     * @returns {Handle[]} An array of 3D object handles\n     * @since 1.4.0\n     */\n    createObjectsFromString: function (syntax, baseUrl) {\n        var nodes = Module.ccall('tiramisu_createObjects', 'number', ['string', 'number', 'string'], [syntax, 0, baseUrl || null]),\n            handles = Tiramisu.util.unmarshalObjectArray(nodes);\n        if (nodes) {\n            Module._free(nodes);\n        } else {\n            Module.printErr('createObjectsFromString() failed: \"' + syntax + '\"');\n        }\n        return handles;\n    },\n\n    /**\n     * _Asynchronous method_. Creates 3D objects from url.\n     * \n     * @async\n     * @memberof module:solo.app\n     * @param {string} url - URl to load VRML file\n     * @returns {Promise<Handle[]>} `Promise` whose fulfillment handler receives an array of 3D object handles\n     * @see external:Promise\n     * @since 1.4.0\n     */\n    createObjectsFromURL: function (url) {\n        return util.loadResource(url, '', 'arraybuffer').then(function (xhr) {\n            var arrayBuffer = xhr.response,\n                byteArray,\n                buffer,\n                nodes;\n            if (arrayBuffer) {\n                byteArray = new Uint8Array(arrayBuffer);\n                buffer = Module._malloc(byteArray.byteLength);\n                Module.writeArrayToMemory(byteArray, buffer);\n                nodes = Module.ccall('tiramisu_createObjects', 'number', ['number', 'number', 'string'], [buffer, byteArray.byteLength, url]);\n                handles = Tiramisu.util.unmarshalObjectArray(nodes);\n                Module._free(buffer);\n                if (nodes) {\n                    Module._free(nodes);\n                    return Promise.resolve(handles);\n                }\n            }\n            return Promise.reject(new Error('createObjectsFromURL() failed: \"' + url + '\"'));\n        });\n    },\n\n    /**\n     * Creates 3D objects from the VRML file in the *.cortona3d* bundle.\n     * \n     * @memberof module:solo.app\n     * @param {string} itemName - The name of the VRML file in the document bundle\n     * @returns {Handle[]} An array of 3D object handles\n     * @since 1.4.0\n     */\n    createObjectsFromDocumentBundle: function (fileName) {\n        var nodes = Module.ccall('tiramisu_createObjectsFromBundleItem', 'number', ['string'], [fileName]),\n            handles = Tiramisu.util.unmarshalObjectArray(nodes);\n        if (nodes) {\n            Module._free(nodes);\n        } else {\n            Module.printErr('createObjectsFromDocumentBundle() failed: \"' + fileName + '\"');\n        }\n        return handles;\n    },\n\n    /**\n     * Sets camera position, orientation, field of view and center of rotation.\n     * \n     * @param {number[]} position Array of 3 float \n     * @param {number[]} orientation Array of 4 float\n     * @param {number} scalarParam Field of view. If <0 preserve current value\n     * @param {number[]|null} rotationCenter Array of 3 float\n     * @param {boolean} animated\n     * @memberof module:solo.app\n     * @private\n     * @since 1.5.3\n     */\n    setCameraPosition: function (position, orientation, scalarParam, rotationCenter, animated) {\n        var sp = Module.Runtime.stackSave(),\n            _location = Module.allocate(3, 'float', Module.ALLOC_STACK),\n            _orientation = Module.allocate(4, 'float', Module.ALLOC_STACK),\n            _rotationCenter = rotationCenter ? Module.allocate(3, 'float', Module.ALLOC_STACK) : 0;\n\n        Module.setValue(_location, position[0], 'float');\n        Module.setValue(_location + 4, position[1], 'float');\n        Module.setValue(_location + 8, position[2], 'float');\n        Module.setValue(_orientation, orientation[0], 'float');\n        Module.setValue(_orientation + 4, orientation[1], 'float');\n        Module.setValue(_orientation + 8, orientation[2], 'float');\n        Module.setValue(_orientation + 12, orientation[3], 'float');\n        if (rotationCenter) {\n            Module.setValue(_rotationCenter, rotationCenter[0], 'float');\n            Module.setValue(_rotationCenter + 4, rotationCenter[1], 'float');\n            Module.setValue(_rotationCenter + 8, rotationCenter[2], 'float');\n        }\n        Module._tiramisu_setCameraPosition(_location, _orientation, scalarParam, _rotationCenter, animated);\n        Module.Runtime.stackRestore(sp);\n    },\n\n    /**\n     * Sets the transparency for objects.\n     * \n     * @memberof module:solo.app\n     * @param {Handle[]} handles - Array of 3D object handles\n     * @param {number} value \n     * @param {AnimatedMode} [animated=false]\n     * @since 1.6.4\n     */\n    setObjectsTransparency: function (handles, value, animated) {\n        var objs = handles || [];\n        if (typeof objs === 'number') {\n            objs = [objs];\n        }\n        objs.forEach(function (handle) {\n            app.setObjectPropertyf(handle, app.PROPERTY_TRANSPARENCY, animated, value);\n        });\n    },\n    \n    /**\n     * Gets the transparency value for objects.\n     * \n     * @memberof module:solo.app\n     * @param {Handle[]} handles - Array of 3D object handles\n     * @returns {number}\n     * @since 1.6.4\n     */\n    getObjectsTransparency: function (handles) {\n        var objs = handles || [];\n        if (typeof objs === 'number') {\n            objs = [objs];\n        }\n        return objs.reduce(function (acc, handle) {\n            return Math.max(app.getObjectPropertyf(handle, app.PROPERTY_TRANSPARENCY), acc);\n        }, 0);\n    },\n\n    /**\n     * Toggles the visibility state for objects.\n     * \n     * @memberof module:solo.app\n     * @param {boolean} [force]\n     * @returns {boolean}\n     * @since 1.6.4\n     */\n    toggleObjectsVisibility: function (handles, force) {\n        var objs = handles || [],\n            isVisible = !force;\n        if (typeof objs === 'number') {\n            objs = [objs];\n        }\n\n        if (typeof force === 'undefined') {\n            isVisible = !handles.some(function (handle) {\n                return !!app.getObjectVisibility(handle);\n            });\n        }\n        \n        handles.forEach(function (handle) {\n            if (isVisible) {\n                app.setObjectPropertyf(handle, app.PROPERTY_VISIBILITY, false, -1);\n            } else {\n                app.restoreObjectProperty(handle, app.PROPERTY_VISIBILITY, false);\n            }\n        });\n\n        return !isVisible;\n    }\n};\n\n/**\n * Enables or disables the use of the ambient occlusion in the scene.\n * \n * > #### __NOTE__\n * >\n * > To use the ambient occlusion, you must set the {@link module:solo.app ENABLE_GLES3} and {@link module:solo.app DISABLE_ANTIALIASING_GLES3} flags before the library is initialized.\n * >```\n * >    Cortona3DSolo.use('core', { \n * >        features: Cortona3DSolo.app.ENABLE_GLES3 | Cortona3DSolo.app.DISABLE_ANTIALIASING_GLES3\n * >    });\n * >    Cortona3DSolo.app.initialize('scene.wrl');\n * >```\n *\n * @static\n * @member {boolean} ambientOcclusionEnabled\n * @memberof module:solo.app\n * @since 1.5.0\n */\n\n/**\n * Checks if the ambient occlusion available for use.\n * \n * @static\n * @member {boolean} ambientOcclusionSupported\n * @memberof module:solo.app\n * @since 1.5.0\n */\n\n/**\n * Gets or sets the global color for drawing edges.\n * \n * @static\n * @member {HexColorString} globalEdgeColor\n * @memberof module:solo.app\n * @since 1.5.7\n */\n\n/**\n * Gets or sets the weights for the drawing edges as an array of three float numbers. Default value is `[0, 0, 0]`.\n * \n * The color is calculated by the formula:\n * \n * `edgeColor = globalEdgeColor * weights[0] + material.diffuseColor * weights[1] + material.emissiveColor * weights[2]`\n * \n * If the value is `[0, 0, 0]` then edge drawing will be disabled.\n * \n * @static\n * @member {number[]} edgeColorWeights\n * @memberof module:solo.app\n * @since 1.5.7\n * @see {@link module:solo.app.globalEdgeColor app.globalEdgeColor}\n */\n\n/**\n * Gets or sets the color of the hovered 3D object in the interactive model.\n * \n * @static\n * @member {HexColorString} hoverColor\n * @memberof module:solo.app\n * @since 1.5.0\n */\n\n/**\n * Gets or sets the color of the selected 3D object in the interactive model.\n * \n * @static\n * @member {HexColorString} selectionColor\n * @memberof module:solo.app\n * @since 1.5.0\n */\n\n/**\n * Gets or sets the transparency threshold used by the picker. The value is [0..1].\n * \n * @static\n * @member {number} pickerTransparencyThreshold\n * @memberof module:solo.app\n * @since 1.5.0\n */\n\n/**\n * Gets a description of the loaded interactive model.\n * \n * @static\n * @member {DocumentInfo} modelInfo\n * @memberof module:solo.app\n * @since 1.5.0\n */\n\n/**\n * Gets or sets the active viewpoint in the 3D scene.\n * \n * @static\n * @member {Handle} activeViewpoint\n * @memberof module:solo.app\n * @since 1.5.0\n */\n\n/**\n * Gets or sets a flag for recursive object lookup. \n * It must be set to `true` if the hierarchy of 3D objects is kept in VRML.\n * Default value is `false` for the catalog and `true` for the procedure.\n * \n * @static\n * @member {boolean} recursiveObjectLookup\n * @memberof module:solo.app\n * @since 1.6.0\n */\n\nObject.defineProperties(app, {\n    'globalEdgeColor': {\n        get: function () {\n            return toHTMLColor(Module._tiramisu_getGlobalEdgeColor());\n        },\n        set: function (color) {\n            Module._tiramisu_setGlobalEdgeColor(parseHTMLColor(color));\n        },\n        enumerable: true\n    },\n    'edgeColorWeights': {\n        get: function () {\n            return getVec3fValue(Module._tiramisu_getEdgeColorWeights());\n        },\n        set: function (weights) {\n            var sp = Module.Runtime.stackSave(),\n                weightArray = Module.allocate(3 * 4, 'float', Module.ALLOC_STACK),\n                i;\n            for (i = 0; i < 3; ++i)\n                Module.setValue(weightArray + i * 4, weights[i], 'float');\n            Module._tiramisu_setEdgeColorWeights(weightArray);\n            Module.Runtime.stackRestore(sp);\n        },\n        enumerable: true\n    },\n    'ambientOcclusionEnabled': {\n        get: function () {\n            return !!Module._tiramisu_isAmbientOcclusionEnabled();\n        },\n        set: function (enabled) {\n            Module._tiramisu_enableAmbientOcclusion(enabled);\n        },\n        enumerable: true\n    },\n    'ambientOcclusionSupported': {\n        get: function () {\n            return !!Module._tiramisu_isAmbientOcclusionSupported();\n        },\n        enumerable: true\n    },\n    'hoverColor': {\n        get: function () {\n            return toHTMLColor(Module._tiramisu_getHoverColor());\n        },\n        set: function (color) {\n            Module._tiramisu_setHoverColor(parseHTMLColor(color));\n        },\n        enumerable: true\n    },\n    'selectionColor': {\n        get: function () {\n            return toHTMLColor(Module._tiramisu_getSelectionColor());\n        },\n        set: function (color) {\n            Module._tiramisu_setSelectionColor(parseHTMLColor(color));\n        },\n        enumerable: true\n    },\n    'pickerTransparencyThreshold': {\n        get: function () {\n            return Module.ccall('tiramisu_getPickerTransparencyThreshold', 'number');\n        },\n        set: function (value) {\n            Module.ccall('tiramisu_setPickerTransparencyThreshold', 'null', ['number'], arguments);\n        },\n        enumerable: true\n    },\n    'modelInfo': {\n        get: function () {\n            return m_doc && expand({}, m_doc);\n        },\n        enumerable: true\n    },\n    'activeViewpoint': {\n        get: function () {\n            return Module._tiramisu_getActiveViewpoint();\n        },\n        set: function (handle) {\n            Module._tiramisu_setActiveViewpoint(handle);\n        },\n        enumerable: true\n    },\n    'recursiveObjectLookup': {\n        get: function () {\n            return !!Module._tiramisu_isRecursiveObjectLookupEnabled();\n        },\n        set: function (enabled) {\n            Module._tiramisu_enableRecursiveObjectLookup(enabled);\n        },\n        enumerable: true\n    }\n});\n\nObject.defineProperty(app, 'MOUSE_DRAG_MODE_SPIN', {\n    value: 0,\n    writable: false\n});\nObject.defineProperty(app, 'MOUSE_DRAG_MODE_PAN', {\n    value: 1,\n    writable: false\n});\nObject.defineProperty(app, 'MOUSE_DRAG_MODE_ZOOM', {\n    value: 2,\n    writable: false\n});\nObject.defineProperty(app, 'MOUSE_DRAG_MODE_DEFAULT', {\n    value: 0,\n    writable: false\n});\n\nObject.defineProperty(app, 'PROPERTY_DIFFUSE_COLOR', {\n    value: 0,\n    writable: false\n});\nObject.defineProperty(app, 'PROPERTY_EMISSIVE_COLOR', {\n    value: 1,\n    writable: false\n});\nObject.defineProperty(app, 'PROPERTY_TRANSPARENCY', {\n    value: 2,\n    writable: false\n});\nObject.defineProperty(app, 'PROPERTY_VISIBILITY', {\n    value: 3,\n    writable: false\n});\nObject.defineProperty(app, 'PROPERTY_TRANSLATION', {\n    value: 4,\n    writable: false\n});\nObject.defineProperty(app, 'PROPERTY_ROTATION', {\n    value: 5,\n    writable: false\n});\nObject.defineProperty(app, 'PROPERTY_SCALE', {\n    value: 6,\n    writable: false\n});\n\nObject.defineProperty(app, 'MR_PARTNUMBER', {\n    value: 1,\n    writable: false\n});\nObject.defineProperty(app, 'MR_PARTDESC', {\n    value: 2,\n    writable: false\n});\nObject.defineProperty(app, 'MR_ITEM', {\n    value: 3,\n    writable: false\n});\nObject.defineProperty(app, 'MR_ITEMVAR', {\n    value: 4,\n    writable: false\n});\nObject.defineProperty(app, 'MR_INDENT', {\n    value: 5,\n    writable: false\n});\nObject.defineProperty(app, 'MR_UPA', {\n    value: 6,\n    writable: false\n});\nObject.defineProperty(app, 'MR_TOTALQTY', {\n    value: 7,\n    writable: false\n});\n\nObject.defineProperty(app, 'OBJECT_VISIBILITY_VISIBLE', {\n    value: 0,\n    writable: false\n});\nObject.defineProperty(app, 'OBJECT_VISIBILITY_HIDDEN', {\n    value: 1,\n    writable: false\n});\nObject.defineProperty(app, 'OBJECT_VISIBILITY_TRANSPARENT', {\n    value: 2,\n    writable: false\n});\nObject.defineProperty(app, 'OBJECT_VISIBILITY_IMPLICITLY_HIDDEN', {\n    value: 3,\n    writable: false\n});\n\n\nmodule.exports = {\n    app: appExports\n};\n\n/**\n * Unique identifier of the 3D object in the core.\n * @typedef {number} Handle\n */\n\n/**\n * Object property code.\n * @prop {number} app.PROPERTY_DIFFUSE_COLOR=0\n * @prop {number} app.PROPERTY_EMISSIVE_COLOR=1\n * @prop {number} app.PROPERTY_TRANSPARENCY=2\n * @prop {number} app.PROPERTY_VISIBILITY=3\n * @prop {number} app.PROPERTY_TRANSLATION=4\n * @prop {number} app.PROPERTY_ROTATION=5\n * @prop {number} app.PROPERTY_SCALE=6\n * @typedef {number} ObjectProperty\n * @see {@link module:solo.app.setObjectPropertyf app.setObjectPropertyf()}\n */\n\n/**\n * Metadata role code.\n * @prop {number} app.MR_PARTNUMBER=1\n * @prop {number} app.MR_PARTDESC=2\n * @prop {number} app.MR_ITEM=3\n * @prop {number} app.MR_ITEMVAR=4\n * @prop {number} app.MR_INDENT=5\n * @prop {number} app.MR_UPA=6\n * @prop {number} app.MR_TOTALQTY=7\n * @typedef {number} MetadataRoleCode\n * @see CatalogItemInfo\n */\n\n/**\n * Mouse drag mode.\n * @prop {number} app.MOUSE_DRAG_MODE_SPIN=0\n * @prop {number} app.MOUSE_DRAG_MODE_PAN=1\n * @prop {number} app.MOUSE_DRAG_MODE_ZOOM=2\n * @prop {number} app.MOUSE_DRAG_MODE_DEFAULT=0 MOUSE_DRAG_MODE_SPIN\n * @typedef {number} MouseDragMode\n * @see {@link module:solo.app.setMouseDragMode app.setMouseDragMode()}\n */\n\n/**\n * A hexadecimal html-color string \"#RRGGBB\".\n * @typedef {string} HexColorString\n */\n\n/**\n * A method parameter that sets the Animated transition mode.\n * - `true` - transition effect is on\n * - `false` - transition effect is off\n * @typedef {boolean} AnimatedMode\n */\n\n/**\n * Name of standard view:\n * - `\"front\"`\n * - `\"back\"`\n * - `\"left\"`\n * - `\"right\"`\n * - `\"top\"`\n * - `\"bottom\"`\n * - `\"isometric\"`\n * @typedef {string} StandardViewName\n * @see {@link module:solo.app.jumpToStandardView app.jumpToStandardView()}\n */\n\n/**\n * Information about the picked 3D object, for example:\n * ```\n * { \n *     handle: 7210488, \n *     name: \"PPM005350_46\" \n * }\n * ```\n * @typedef {object} PickedObjectInfo\n * @prop {Handle} handle A handle of the picked 3D object.\n * @prop {string} name DEF name of the picked 3D object.\n * @see {@link module:solo.app.pickObject app.pickObject()}\n */\n\n/**\n * Information about the picked chain of 3D objects, for example:\n * ```\n * { \n *     coord: [-0.027441510930657387,-0.7154514789581299,-0.03601783514022827], \n *     normal: [-0.21847587823867798,-0.000531829718966037,-0.09742648154497146],\n *     sceneCoord: [1.715429425239563,-0.028011199086904526,-0.03601783514022827],\n *     sceneNormal: [0.0014959870604798197,-0.9133041501045227,-0.4072754681110382],\n *     chain: [5698800,6100248,6100664,6101200,6101848]\n * }\n * ```\n * @typedef {object} PickedObjectChain\n * @prop {number[]} coord The point on the surface of the picked geometry. An array of three numbers [x, y, z].\n * @prop {number[]} normal The vector of the normal to the surface of the picked geometry. An array of three numbers [x, y, z].\n * @prop {number[]} sceneCoord The point on the surface of the picked geometry in the gloabl coordinates. An array of three numbers [x, y, z].\n * @prop {number[]} sceneNormal The vector of the normal to the surface of the picked geometry in the gloabl coordinates. An array of three numbers [x, y, z].\n * @prop {Handle[]} chain An array of picked 3D objects. Starting with the root element of the scene.\n * @see {@link module:solo.app.pickObjectChain app.pickObjectChain()}\n */\n\n/**\n * Information about the 3D object \"viewpoint\", for example:\n * ```\n * { \n *     handle: 5670488, \n *     name: \"\",\n *     description: \"Top\"\n * }\n * ```\n * @typedef {object} ViewpointInfo\n * @prop {Handle} handle A handle of the 3D object \"viewpoint\".\n * @prop {string} name DEF name of the 3D object \"viewpoint\".\n * @prop {string} description Description string from the 3D object \"viewpoint\".\n * @see {@link module:solo.app.getViewpoints app.getViewpoints()}\n */\n\n/**\n * Information about loaded document, for example:\n * ```\n * { \n *      type: \"ipc\", \n *      baseURL\t\"\",\n *      companionFile: \"pump-catalog.interactivity.xml\",\n *      bundleURL: \"http://.../pump-catalog.cortona3d\",\n *      specificationName: \"GENERIC_IPC\",\n *      ...\n * }\n * ```\n * @typedef {DocumentCatalogInfo|DocumentProcedureInfo|DocumentGenericInfo|DocumentDrawingInfo} DocumentInfo\n * @prop {string} type - The type of the 3D model: \n * - `\"procedure\"`\n * - `\"ipc\"`\n * - `\"generic\"`\n * - `\"drawing\"`\n * @prop {string} baseURL - A base path to the loaded file or the empty string if the model loaded from the bundle file.\n * @prop {string|null} bundleURL - The URL to the loaded bundle file *.cortona3d* or __null__ if the model is loaded not from the bundle. \n * @prop {string} companionFile - The filename of the companion file *.interactivity.xml* in the loaded bundle or the URL if the model is loaded not from the bundle.\n * @prop {string} specificationName - Identifier of the specification component.\n * @see {@link module:solo.app.didFinishLoadDocument app.didFinishLoadDocument()}\n * @see {@link module:solo.app.modelInfo app.modelInfo}\n */\n\n/**\n * Catalog information object, for example:\n * ```\n * {\n *      type: \"ipc\",\n *      baseURL: \"http://.../\",\n *      bundleURL: null,\n *      companionFile: \"http://.../pump-catalog.interactivity.xml\"\n *      specificationName: \"GENERIC_IPC\",\n *      sheet: {\n *          description: \"Assembled View\",\n *          dplTable: \"<table id=\\\"dpl-table\\\" class=\\\"dpl-table\\\">..</table>\",\n *          dplTableWidth: 69,\n *          drawing: \"http://.../pump-catalog-1.svg\",\n *          id: \"view_0\"\n *      },\n *      sheets: [\n *          {\n *              description: \"Assembled View\",\n *              drawing: \"http://.../pump-catalog-1.svg\"\n *              id: \"view_0\",\n *              indentationLevel: 0\n *          },\n *          ...\n *      ]\n * }\n * ```\n * @prop {string} type=ipc - See {@link DocumentInfo}\n * @prop {string} baseURL - See {@link DocumentInfo}\n * @prop {string|null} bundleURL - See {@link DocumentInfo}\n * @prop {string} companionFile - See {@link DocumentInfo}\n * @prop {string} specificationName - See {@link DocumentInfo}\n * @prop {CatalogCurrentSheetInfo} sheet - The object represents information about the first IPC sheet.\n * @prop {CatalogSheetInfo[]} sheets - An array of objects represents information about IPC sheets.\n * @typedef {object} DocumentCatalogInfo\n * @see DocumentInfo\n */\n\n/**\n * Drawing information object, for example:\n * ```\n * {\n *      type:\t\"drawing\",\n *      baseURL: \"http://.../\"\n * }\n * ```\n * @prop {string} type=drawing - See {@link DocumentInfo}\n * @prop {string} baseURL - A base path to the loaded image file. See {@link DocumentInfo}.\n * @typedef {object} DocumentDrawingInfo\n * @see DocumentInfo\n */\n\n/**\n * Generic VRML information object, for example:\n * ```\n * {\n *      type:\t\"generic\"\n *      baseURL: \"http://.../\",\n * }\n * ```\n * @prop {string} type=generic - See {@link DocumentInfo}.\n * @prop {string} baseURL - A base path to the loaded VRML file. See {@link DocumentInfo}.\n * @typedef {object} DocumentGenericInfo\n * @see DocumentInfo\n */\n\n/**\n * Procedure information object, for example:\n * ```\n * doc = {\n *      type: \"procedure\",\n *      baseURL: \"\",\n *      bundleURL\t\"http://.../pump-catalog.cortona3d\",\n *      companionFile: \"pump-procedure.interactivity.xml\",\n *      specificationName: \"GENERIC_PRC\",\n *      duration: 71.45999908447265,\n *      autoStartPlayback: 0,\n *      comments: \"<div class=\\\"tiramisu-proc-title\\\">...</div>\"\n * }\n * ```\n * @prop {string} type=procedure - See {@link DocumentInfo}.\n * @prop {string} baseURL - See {@link DocumentInfo}.\n * @prop {string|null} bundleURL - See {@link DocumentInfo}.\n * @prop {string} companionFile - See {@link DocumentInfo}.\n * @prop {string} specificationName - See {@link DocumentInfo}.\n * @prop {number} duration - The duration of the interactive procedure in seconds.\n * @prop {number} autoStartPlayback - Automatic start of the procedure playback:\n * - `0` - auto start is off\n * - `1` - auto start is on\n * @prop {string} comments - The HTML string represents a textual description of the procedure steps.\n * @typedef {object} DocumentProcedureInfo\n * @see DocumentInfo\n */\n\n/**\n * The hook method is invoked when the Cortona3D Solo core will be loaded and initialized.\n * \n * @memberof module:solo.app\n * @abstract \n * @function onReady\n * @see The corresponding event {@link event:\"app.onReady\" \"app.onReady\"}\n */\n/**\n * @event \"app.onReady\"\n * @see The corresponding hook method {@link module:solo.app.onReady app.onReady()}\n */\n\n/**\n *  The hook method is invoked when the 3D scene is loaded.\n *  \n * @memberof module:solo.app\n * @abstract \n * @function didFinishLoadDocument\n * @param {DocumentInfo} doc - Information object depending on the type of loaded interactive scene. \n * @see The corresponding event {@link event:\"app.didFinishLoadDocument\" \"app.didFinishLoadDocument\"}\n */\n/**\n * @event \"app.didFinishLoadDocument\"\n * @see The corresponding hook method {@link module:solo.app.didFinishLoadDocument app.didFinishLoadDocument()}\n */\n\n/**\n *  The hook method is invoked when 3D scene is ready for rendering the first frame.\n * \n * @memberof module:solo.app\n * @abstract \n * @function firstFrameDidArrive\n * @param {number} timestamp\n * @see The corresponding event {@link event:\"app.firstFrameDidArrive\" \"app.firstFrameDidArrive\"}\n */\n/**\n * @event \"app.firstFrameDidArrive\"\n * @see The corresponding hook method {@link module:solo.app.firstFrameDidArrive app.firstFrameDidArrive()}\n */\n\n/**\n *  The hook method is invoked when 3D scene is failed to load.\n * \n * @memberof module:solo.app\n * @abstract \n * @function didFailLoadDocument\n * @param {string} message Reason\n * @see The corresponding event {@link event:\"app.didFailLoadDocument\" \"app.didFailLoadDocument\"}\n */\n/**\n * @event \"app.didFailLoadDocument\"\n * @see The corresponding hook method {@link module:solo.app.didFailLoadDocument app.didFailLoadDocument()}\n */\n\n/**\n * The hook method is invoked when anchor in the 3D scene is clicked.\n * \n * @memberof module:solo.app\n * @abstract \n * @function didClickHyperlink\n * @param {string[]} urls - Array of strings \n * @see The corresponding event {@link event:\"app.didClickHyperlink\" \"app.didClickHyperlink\"}\n */\n/**\n * @event \"app.didClickHyperlink\"\n * @see The corresponding hook method {@link module:solo.app.didClickHyperlink app.didClickHyperlink()}\n */\n\n/**\n * The hook method is invoked when the navigation in the 3D window is started.\n * \n * @memberof module:solo.app\n * @abstract \n * @function willStartNavigateInScene\n * @see The corresponding event {@link event:\"app.willStartNavigateInScene\" \"app.willStartNavigateInScene\"}\n */\n/**\n * @event \"app.willStartNavigateInScene\"\n * @see The corresponding hook method {@link module:solo.app.willStartNavigateInScene app.willStartNavigateInScene()}\n */\n\n/**\n * The hook method is invoked to indicate that loading operation is in progress.\n * When the download is complete, the parameter `total` is -1.\n * \n * @memberof module:solo.app\n * @abstract \n * @function onProgress \n * @param {number} position The amount of data currently transferred\n * @param {number} total The total amount of data to be transferred\n * @param {string} type The event's type:\n * - \"progress\"\n * - \"load\"\n * - \"error\"\n * - \"abort\"\n * @see The corresponding event {@link event:\"app.onProgress\" \"app.onProgress\"}\n */\n/**\n * @event \"app.onProgress\"\n * @see The corresponding hook method {@link module:solo.app.onProgress app.onProgress()}\n */\n\n/**\n * The hook method is invoked when context menu is called in the 3D window. \n * The mouse uses secondary button click. The touch device uses long tap.\n * \n * @memberof module:solo.app\n * @abstract \n * @function didCallContextMenu\n * @param {number} offsetX The X coordinate relative to the target element \n * @param {number} offsetY The Y coordinate relative to the target element \n * @param {HTMLElement} target  Target element (`<canvas>`)\n * @see {@link module:solo.core.canvas core.canvas}\n * @see The corresponding event {@link event:\"app.didCallContextMenu\" \"app.didCallContextMenu\"}\n */\n/**\n * @event \"app.didCallContextMenu\"\n * @see The corresponding hook method {@link module:solo.app.didCallContextMenu app.didCallContextMenu()}\n */\n\n/**\n * The hook method is invoked when selection of 3D objects is changed in the 3D window. \n * \n * @memberof module:solo.app\n * @abstract \n * @function didChangeSelection\n * @see {@link module:solo.core.app.setSelectedObjects app.setSelectedObjects()}\n * @see {@link module:solo.core.app.addSelectedObjects app.addSelectedObjects()}\n * @see The corresponding event {@link event:\"app.didChangeSelection\" \"app.didChangeSelection\"}\n * @since 1.6.4\n */\n/**\n * @event \"app.didChangeSelection\"\n * @see The corresponding hook method {@link module:solo.app.didChangeSelection app.didChangeSelection()}\n */\n\n/**\n * The object with key/value pairs, for example:\n * ```\n * {\n *     C3DCOLLECTION: \"Generic IPC\",\n *     TITLE: \"Pump IPC - Complete\"\n * }\n * ```\n * @typedef {object} KeyValuePairs\n */\n\n/**\n * The object visibility code.\n * @prop {number} app.OBJECT_VISIBILITY_VISIBLE=0\n * @prop {number} app.OBJECT_VISIBILITY_HIDDEN=1\n * @prop {number} app.OBJECT_VISIBILITY_TRANSPARENT=2\n * @prop {number} app.OBJECT_VISIBILITY_IMPLICITLY_HIDDEN=3\n * @typedef {number} ObjectVisibilityEnum\n * @see {@link module:solo.app.getObjectVisibility app.getObjectVisibility()}\n */\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Cortona3DSolo = __webpack_require__(2);\nvar Tiramisu = Module.Tiramisu;\nvar app = __webpack_require__(1).app;\nvar expand = __webpack_require__(0).expand;\nvar checkConfigureOptions = __webpack_require__(1).checkConfigureOptions;\nvar usedModules = __webpack_require__(1).usedModules;\n\nvar m_currentSheet = {};\nvar m_sheets = [];\n\nfunction unmarshalIndexArray(indexArray) {\n    var itemCount = Module.getValue(indexArray, 'i32'),\n        i,\n        res = new Array(itemCount);\n    for (i = 1; i <= itemCount; ++i) {\n        res[i - 1] = Module.getValue(indexArray + i * 4, 'i32');\n    }\n    return res;\n}\n\n// Cortona3DSolo hooks\nCortona3DSolo.once(\"app.didAttachDocument\", function (doc) {\n    if (doc.type == 'ipc') {\n        m_sheets = doc.sheets;\n        m_currentSheet = expand({}, doc.sheet);\n        delete m_currentSheet.drawing;\n        Cortona3DSolo.once(\"app.firstFrameDidArrive\", function () {\n            Tiramisu.ipc.didSelectSheet(m_currentSheet);\n        });\n        if (usedModules.core.config.ipcHoverColor) {\n            app.setHoverColor(usedModules.core.config.ipcHoverColor);\n        }\n        if (usedModules.core.config.ipcSelectionColor) {\n            app.setSelectionColor(usedModules.core.config.ipcSelectionColor);\n        }\n    }\n});\n\n// Tiramisu hooks\nexpand(Tiramisu, {\n    ipc: {\n        didSelectSheet: function (sheet) {\n            if (app.ipc.interactivity) {\n                sheet.drawing = app.ipc.interactivity.getDrawingForIPCView(sheet.id);\n            }\n            if (app.drawing) {\n                app.drawing.load(sheet.drawing)\n                    .catch(function () {\n                        if (checkConfigureOptions(app.ENABLE_AUTO_SWITCHING_DISPLAY_MODE)) {\n                            if (app.ui.isDrawingDisplayMode()) {\n                                app.ipc.toggleDrawingDisplayMode();\n                            }\n                        }\n                    });\n            }\n            m_currentSheet = sheet;\n            Cortona3DSolo.dispatch('app.ipc.didSelectSheet', sheet);\n        },\n        didHoverItem: function (index, items) {\n            Cortona3DSolo.dispatch('app.ipc.didHoverItem', index, unmarshalIndexArray(items));\n        },\n        didSelectItem: function (index, items) {\n            Cortona3DSolo.dispatch('app.ipc.didSelectItem', index, unmarshalIndexArray(items));\n        },\n        didChangeItemVisibility: function (isHidden, items, itemCount) {\n            var rows = new Array(itemCount),\n                row, i;\n            for (i = 0; i < itemCount; ++i) {\n                rows[i] = Module.getValue(items + i * 4, 'i32');\n            }\n            Cortona3DSolo.dispatch('app.ipc.didChangeItemVisibility', isHidden, rows);\n        },\n        willStartSheetTransitionAnimation: function (sheet) {\n            Cortona3DSolo.dispatch('app.ipc.willStartSheetTransitionAnimation', sheet.id);\n        },\n        didStopSheetTransitionAnimation: function (sheet) {\n            Cortona3DSolo.dispatch('app.ipc.didStopSheetTransitionAnimation', sheet.id);\n        }\n    },\n});\n\nvar appExports = {\n    /**\n     * The namespace represents an application interface to manage the interactive parts catalog (IPC).\n     * \n     * @namespace\n     * @memberof module:solo.app\n     * @prop {number} DEFAULT_TRANSITION_STEP_DURATION=1 Default value of transition rate between of IPC sheets.\n     */\n    ipc: {\n        /**\n         * Activates IPC sheet by ID.\n         * \n         * @param {string} sheetId - IPC sheet ID\n         * @param {AnimatedMode} animated\n         */\n        setCurrentSheet: function (sheetId, animated) {\n            Module.ccall('ipc_setCurrentSheet', 'null', ['string', 'number'], [sheetId, app.ui.isDrawingDisplayMode() ? false : animated]);\n        },\n\n        /**\n         * Toggles 3D IPC item visibility.\n         * \n         * @param {number} index - The row number on the current IPC sheet\n         */\n        toggleItemVisibility: function (index) {\n            Module.ccall('ipc_toggleItemVisibility', 'null', ['number'], arguments);\n        },\n\n        /**\n         * Select 3D IPC item.\n         * \n         * @param {number} index - The row number on the current IPC sheet\n         * @param {AnimatedMode} [animated=true]\n         * @returns {number[]} indices - An array of selected row numbers excluding attaching parts\n         */\n        selectItem: function (index, animated) {\n            return unmarshalIndexArray(Module.ccall('ipc_selectItem', 'number', ['number'], [index, typeof animated === 'undefined' ? true : animated]));\n        },\n\n        /**\n         * Highlight 3D IPC item.\n         * \n         * @param {number} index - The row number on the current IPC sheet\n         * @param {AnimatedMode} [animated=true]\n         * @returns {number[]} indices - An array of highlighted row numbers excluding attaching parts\n         */\n        hoverItem: function (index, animated) {\n            return unmarshalIndexArray(Module.ccall('ipc_hoverItem', 'null', ['number'], [index, typeof animated === 'undefined' ? true : animated]));\n        },\n\n        /**\n         * Restore view of the current IPC sheet by default.\n         * \n         * @param {AnimatedMode} animated\n         */\n        resetCurrentSheet: function (animated) {\n            if (app.drawing) {\n                __webpack_require__(7).getSVGViewer().reset(animated);\n            }\n            Module.ccall('ipc_resetCurrentSheet', 'null', ['number'], arguments);\n        },\n\n        /**\n         * Get current IPC sheet items.\n         * @private\n         * @returns {object[]} An array of items\n         */\n        /*\n        getCurrentSheetItems: function () {\n            var items = Module.ccall('ipc_getCurrentSheetItems', 'number');\n            return Tiramisu.util.unmarshalItemList(items);\n        },\n        */\n\n        /**\n         * Get an item with the hotspot name.\n         * \n         * @param {string} hotspotName - The name of the hospot\n         * @returns {number} The row number on the current IPC sheet\n         */\n        getItemWithHotspot: function (hotspotName) {\n            return Module.ccall('ipc_getItemWithHotspot', 'number', ['string'], arguments);\n        },\n\n        /**\n         * Returns an object that represents information about the current IPC sheet.\n         * \n         * @returns {CatalogCurrentSheetInfo} The object represents IPC sheet information\n         * @deprecated since version 1.5.0, use {@link module:solo.app.ipc.currentSheetInfo app.currentSheetInfo} instead\n         */\n        getCurrentSheet: function () {\n            return m_currentSheet;\n        },\n\n        /**\n         * Toggles display between 2D and 3D views.\n         * \n         * @param {boolean} [forceVisible2D] - Forced display of the 2D window\n         * @returns {boolean} \n         * @fires \"app.ipc.didDrawingDisplayMode\"\n         */\n        toggleDrawingDisplayMode: function (drawingMode) {\n            if (!app.drawing) return false;\n            drawingMode = (typeof drawingMode === 'undefined') ? !app.drawing.isVisible() : drawingMode;\n            app.drawing.show(drawingMode);\n            app.ui.showCanvas(!drawingMode);\n            Cortona3DSolo.dispatch(\"app.ipc.didDrawingDisplayMode\", drawingMode);\n            return drawingMode;\n        },\n    }\n};\n\n\n/**\n * Gets a description of the current IPC sheet.\n * \n * @static\n * @member {CatalogCurrentSheetInfo} currentSheetInfo\n * @memberof module:solo.app.ipc\n * @since 1.5.0\n */\n\nObject.defineProperty(appExports.ipc, 'currentSheetInfo', {\n    get: function () {\n        return m_currentSheet;\n    },\n    enumerable: true\n});\n\n/**\n * Gets or sets transition rate between of IPC sheets.\n * \n * @static\n * @member {number} sheetTransitionRate\n * @memberof module:solo.app.ipc\n * @since 1.5.9\n */\n\nObject.defineProperties(appExports.ipc, {\n    'sheetTransitionRate': {\n        get: function () {\n            return 1 / Module.getValue(Module._ipc_getSheetTransitionAnimationDurations() + 4, 'float');\n        },\n        set: function (value) {\n            if (value > 0) Module._ipc_setSheetTransitionAnimationDurations(1 / value, 1 / value);\n        },\n        enumerable: true\n    },\n    'DEFAULT_TRANSITION_STEP_DURATION': {\n        value: 1,\n        enumerable: true\n    },\n});\n\nappExports.ipc.dpl = __webpack_require__(67);\n\nmodule.exports = {\n    app: appExports\n};\n\n/**\n * The hook method is invoked when the IPC sheet is activated.\n * \n * @memberof module:solo.app.ipc\n * @abstract \n * @function didSelectSheet\n * @param {CatalogCurrentSheetInfo} sheet - The object represents the IPC sheet information\n * @see The corresponding event {@link event:\"app.ipc.didSelectSheet\" \"app.ipc.didSelectSheet\"}\n */\n/**\n * @event \"app.ipc.didSelectSheet\"\n * @see The corresponding hook method {@link module:solo.app.ipc.didSelectSheet app.ipc.didSelectSheet()}\n */\n\n/**\n * The hook method is invoked when the 3D IPC item is hovered.\n * \n * @memberof module:solo.app.ipc\n * @abstract \n * @function didHoverItem\n * @param {number} index The row number on the current IPC sheet \n * @param {number[]} indices An array of highlighted row numbers excluding attaching parts\n * @see The corresponding event {@link event:\"app.ipc.didHoverItem\" \"app.ipc.didHoverItem\"}\n */\n/**\n * @event \"app.ipc.didHoverItem\"\n * @see The corresponding hook method {@link module:solo.app.ipc.didHoverItem app.ipc.didHoverItem()}\n */\n\n/**\n * The hook method is invoked when the 3D IPC item is selected.\n * \n * @memberof module:solo.app.ipc\n * @abstract \n * @function didSelectItem\n * @param {number} index The row number on the current IPC sheet\n * @param {number[]} indices An array of highlighted row numbers excluding attaching parts\n * @see The corresponding event {@link event:\"app.ipc.didSelectItem\" \"app.ipc.didSelectItem\"}\n */\n/**\n * @event \"app.ipc.didSelectItem\"\n * @see The corresponding hook method {@link module:solo.app.ipc.didSelectItem app.ipc.didSelectItem()}\n */\n\n/**\n * The hook method is invoked when the visibility state of the 3D IPC item is toggled.\n * \n * @memberof module:solo.app.ipc\n * @abstract \n * @function didChangeItemVisibility\n * @param {boolean} isHidden - \n * - true - hidden\n * - false - visible\n * @param {number[]} indices - Array of index numbers on the current IPC sheet\n * @see The corresponding event {@link event:\"app.ipc.didChangeItemVisibility\" \"app.ipc.didChangeItemVisibility\"}\n */\n/**\n * @event \"app.ipc.didChangeItemVisibility\"\n * @see The corresponding hook method {@link module:solo.app.ipc.didChangeItemVisibility app.ipc.didChangeItemVisibility()}\n */\n\n/**\n * The hook method is invoked when the display mode of the catalog is changed.\n * \n * @memberof module:solo.app.ipc\n * @abstract \n * @function didDrawingDisplayMode\n * @param {boolean} drawingMode - \n * - true - 2D display mode\n * - false - 3D display mode\n * @see The corresponding event {@link event:\"app.ipc.didDrawingDisplayMode\" \"app.ipc.didDrawingDisplayMode\"}\n * @since 1.4.0\n */\n/**\n * @event \"app.ipc.didDrawingDisplayMode\"\n * @see The corresponding hook method {@link module:solo.app.ipc.didDrawingDisplayMode app.ipc.didDrawingDisplayMode()}\n */\n\n/**\n * The hook method is invoked when the transition animation to the IPC sheet is started.\n * \n * @memberof module:solo.app.ipc\n * @abstract \n * @function willStartSheetTransitionAnimation\n * @param {string} sheetId - IPC sheet ID\n * @see The corresponding event {@link event:\"app.ipc.willStartSheetTransitionAnimation\" \"app.ipc.willStartSheetTransitionAnimation\"}\n * @since 1.6.4\n */\n/**\n * @event \"app.ipc.willStartSheetTransitionAnimation\"\n * @see The corresponding hook method {@link module:solo.app.ipc.willStartSheetTransitionAnimation app.ipc.willStartSheetTransitionAnimation()}\n */\n\n/**\n * The hook method is invoked when the transition animation to the IPC sheet is finished.\n * \n * @memberof module:solo.app.ipc\n * @abstract \n * @function didStopSheetTransitionAnimation\n * @param {string} sheetId - IPC sheet ID\n * @see The corresponding event {@link event:\"app.ipc.didStopSheetTransitionAnimation\" \"app.ipc.didStopSheetTransitionAnimation\"}\n * @since 1.6.4\n */\n/**\n * @event \"app.ipc.didStopSheetTransitionAnimation\"\n * @see The corresponding hook method {@link module:solo.app.ipc.didStopSheetTransitionAnimation app.ipc.didStopSheetTransitionAnimation()}\n */\n\n/**\n * The object represents information about the current IPC sheet, for example:\n * ```\n * {\n *      id: \"view_2\",\n *      description: \"Backplate Assy View\",\n *      drawing: \"http://.../pump-catalog-2.svg\",\n *      dplTableWidth: 69,\n *      dplTable: \"<table id=\\\"dpl-table\\\" class=\\\"dpl-table\\\">...</table>\"\n * }\n * ```\n * @prop {string} id - IPC sheet ID. \n * @prop {string} description - IPC sheet description.\n * @prop {string} drawing - The name of the file for 2D illustration.\n * @prop {number} dplTableWidth - DPL table width.\n * @prop {string} dplTable - The HTML string is a detailed parts list (DPL) in the form of an HTML table.\n * @typedef {object} CatalogCurrentSheetInfo\n * @see {@link module:solo.app.ipc.didSelectSheet app.ipc.didSelectSheet()}\n * @see {@link module:solo.app.ipc.getCurrentSheet app.ipc.getCurrentSheet()}\n */\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Cortona3DSolo = __webpack_require__(2);\nvar Tiramisu = Module.Tiramisu;\nvar app = __webpack_require__(1).app;\nvar expand = __webpack_require__(0).expand;\n\n// Tiramisu hooks\nexpand(Tiramisu, {\n    procedure: {\n        didFireEvent: function (type, id, title, info) {\n            Cortona3DSolo.dispatch('app.procedure.didFireEvent', type, id, title, info);\n        },\n        didChangePlayerState: function (position, state) {\n            Cortona3DSolo.dispatch('app.procedure.didChangePlayerState', position, state);\n        },\n        didEnterSubstep: function (substepPath) {\n            Cortona3DSolo.dispatch('app.procedure.didEnterSubstep', substepPath);\n        },\n        didEnterSubstepWithName: function (substepId) {\n            Cortona3DSolo.dispatch('app.procedure.didEnterSubstepWithName', substepId);\n        }\n    },\n});\n\nvar appExports = {\n    /**\n     * The namespace represents an application interface to manage interactive procedure.\n     *  \n     * @namespace\n     * @memberof module:solo.app\n     */\n    procedure: {\n        /**\n         * The duration of the interactive procedure in seconds.\n         * \n         * @static\n         * @member {number} duration\n         * @memberof module:solo.app.procedure\n         * @since 1.4.3\n         */\n\n        /**\n         * Gets or sets default seek mode.\n         * \n         * @static\n         * @member {ProcedureSeekMode} defaultSeekMode\n         * @memberof module:solo.app.procedure\n         * @since 1.5.3\n         */\n\n        /**\n         * Moves the playback marker of the procedure to the start of the specified step/substep.\n         * \n         * @param {string} id - Step/Substep ID\n         * @param {ProcedureSeekMode} [seekMode=SEEK_DEFAULT]\n         */\n        seekToSubstep: function (id, seekMode) {\n            Module.ccall('procedure_seekToSubstep', 'null', ['string', 'number'], [id, typeof(seekMode) === 'number' ? seekMode : -1]);\n        },\n\n        /**\n         * Sets the playback speed ratio.\n         * \n         * @param {number} playbackSpeed - The playback speed ratio\n         */\n        setPlaybackSpeed: function (playbackSpeed) {\n            Module.ccall('procedure_setPlaybackSpeed', 'null', ['number'], arguments);\n        },\n\n        /**\n         * Specifies whether the camera position is changed during the playback of the procedure. \n         * \n         * @param {boolean} freezeCamera\n         * - `true` - the camera does not change\n         * - `false` - the camera position is changed in accordance with the procedure \n         */\n        freezeCamera: function (freezeCamera) {\n            Module.ccall('procedure_freezeCamera', 'null', ['number'], arguments);\n        },\n\n        /**\n         * Sets a new playback position of the procedure.\n         * \n         * @param {number} playPosition - The playback marker position, in seconds\n         * @param {boolean} requestState - \n         * - `true` - request {@link module:solo.app.procedure.didEnterSubstep didEnterSubstep()} callbak after position is changed\n         * - `false` - a callback is not required\n         */\n        setPlayPosition: function (playPosition, requestState) {\n            Module.ccall('procedure_setPlayPosition', 'null', ['number', 'number'], arguments);\n        },\n\n        /**\n         * Move the playback marker position to the previous step.\n         * @param {ProcedureSeekMode} [seekMode=SEEK_DEFAULT]\n         */\n        backward: function (seekMode) {\n            Module.ccall('procedure_backward', 'null', ['number'], [typeof(seekMode) === 'number' ? seekMode : -1]);\n        },\n\n        /**\n         * Move the playback marker position to the next step.\n         * @param {ProcedureSeekMode} [seekMode=SEEK_DEFAULT]\n         */\n        forward: function (seekMode) {\n            Module.ccall('procedure_forward', 'null', ['number'], [typeof(seekMode) === 'number' ? seekMode : -1]);\n        },\n\n        /**\n         * Stops the playback of the procedure.\n         */\n        stop: function () {\n            Module.ccall('procedure_stop', 'null');\n        },\n\n        /**\n         * Starts the playback of the procedure.\n         * \n         * @param {boolean} [doNotAutoRewind=false] -\n         * - `true` - do not set the playback marker at the beginning of the procedure when the procedure is finished running\n         * - `false` - reset the playback to the beginning\n         */\n        play: function (doNotAutoRewind) {\n            Module.ccall('procedure_play', 'null', ['number'], arguments);\n        },\n\n        /**\n         * Pauses the playback of the procedure.\n         */\n        pause: function () {\n            Module.ccall('procedure_pause', 'null');\n        },\n\n        /**\n         * Sets the playback range of the procedure on the timeline.\n         * \n         * @param {string|ProcedureRangeKeyword} firstPlayable - Step/substep ID or the keyword of the range\n         * @param {string|ProcedureRangeKeyword} lastPlayable - Step/substep ID or the keyword of the range\n         * @param {ProcedureRangeFlags} [flags=0] - Flags bitmask\n         * @see Properties in the {@link module:solo.app.procedure app.procedure} namespace\n         */\n        setPlayRange: function (firstPlayable, lastPlayable, flags) {\n            Module.ccall('procedure_setPlayRange', 'null', ['string', 'string', 'number'], [firstPlayable, lastPlayable || firstPlayable, flags || 0]);\n        },\n\n        /**\n         * Returns the playable range start time. \n         * \n         * @returns {number} seconds  \n         */\n        getPlayableRangeStartTime: function () {\n            return Module.ccall('procedure_getPlayableRangeStartTime', 'number');\n        },\n\n        /**\n         * Returns the playable range stop time. \n         * \n         * @returns {number} seconds  \n         */\n        getPlayableRangeStopTime: function () {\n            return Module.ccall('procedure_getPlayableRangeStopTime', 'number');\n        },\n\n        /**\n         * Query the state of the procedure playback and its current step.\n         */\n        requestPlayerState: function () {\n            Module.ccall('procedure_requestPlayerState', 'null');\n        },\n\n        /**\n         * Returns the procedure options from the companion file *.interactivity.xml* in the form of an object with key/value pairs.\n         * \n         * @deprecated Use {@link module:solo.app.getOptions app.getOptions()} istead.\n         * @returns {KeyValuePairs}\n         */\n        getOptions: function () {\n            return app.getOptions();\n        },\n\n        /**\n         * Returns the value of the procedure option.\n         * \n         * @deprecated Use {@link module:solo.app.getOption app.getOption()} istead.\n         * @param {string} name - Option name\n         * @returns {string} Option value\n         */\n        getOption: function (name) {\n            return app.getOption(name);\n        },\n\n        /**\n         * Sets the new animation sequence (procedure) from the array of identifiers step/substep.\n         * \n         * @param {string[]} [items] Array of identifiers step/substep. Leave empty to restore the procedure to its original sequence.\n         * @returns {boolean} Success flag\n         * @since 1.4.3\n         */\n        setPlayableItemList: function (items) {\n            var count = items ? items.length : 0,\n                itemArray = 0,\n                i,\n                sp = Module.Runtime.stackSave(),\n                res;\n            if (count) {\n                itemArray = Module.allocate(count * 4, '*', Module.ALLOC_STACK);\n                for (i = 0; i < count; ++i)\n                    Module.setValue(itemArray + i * 4, Module.allocate(Module.intArrayFromString(items[i]), 'i8', Module.ALLOC_STACK), '*');\n            }\n            res = Module._procedure_setPlayableItemList(itemArray, count);\n            Module.Runtime.stackRestore(sp);\n            return res !== 0;\n        }\n    }\n};\n\nObject.defineProperty(appExports.procedure, 'defaultSeekMode', {\n    get: function () {\n        return Module._procedure_getDefaultSeekMode();\n    },\n    set: function (mode) {\n        Module._procedure_setDefaultSeekMode(mode);\n    },\n    enumerable: true,\n    configurable: true\n});\n\nObject.defineProperty(appExports.procedure, 'duration', {\n    get: function () {\n        return Module._procedure_getDuration();\n    },\n    enumerable: true,\n    configurable: true\n});\n\nObject.defineProperty(appExports.procedure, 'RANGE_FLAGS_SEEK_TO_START', {\n    value: 1,\n    writable: false\n});\nObject.defineProperty(appExports.procedure, 'RANGE_FLAGS_SEEK_TO_END', {\n    value: 2,\n    writable: false\n});\nObject.defineProperty(appExports.procedure, 'RANGE_FLAGS_REQUEST_NOTIFICATION', {\n    value: 4,\n    writable: false\n});\nObject.defineProperty(appExports.procedure, 'RANGE_FLAGS_DO_NOT_RECALCULATE_POSITION', {\n    value: 8,\n    writable: false\n});\n\nObject.defineProperty(appExports.procedure, 'SEEK_DEFAULT', {\n    value: -1,\n    writable: false\n});\nObject.defineProperty(appExports.procedure, 'SEEK_TO_BEGIN', {\n    value: 0,\n    writable: false\n});\nObject.defineProperty(appExports.procedure, 'SEEK_TO_CUE_POINT', {\n    value: 1,\n    writable: false\n});\nObject.defineProperty(appExports.procedure, 'SEEK_TO_END', {\n    value: 2,\n    writable: false\n});\n\n\nObject.defineProperty(appExports.procedure, 'RANGE_VALUE_CURRENT_STEP', {\n    value: '%%CURRENT_STEP%%',\n    writable: false\n});\nObject.defineProperty(appExports.procedure, 'RANGE_VALUE_CURRENT_SUBSTEP', {\n    value: '%%CURRENT_SUBSTEP%%',\n    writable: false\n});\n\nmodule.exports = {\n    app: appExports\n};\n\n/**\n * The hook method is invoked when the alert message is fired in the procedure.\n * \n * @memberof module:solo.app.procedure\n * @abstract \n * @function didFireEvent\n * @param {string} type - Type of alert:\n * - `\"WARNING\"` \n * - `\"CAUTION\"`\n * - `\"NOTE\"`\n * - custom alert type\n * @param {string} id - Alert mesage ID from intercativity.xml\n * @param {string} title - Alert message title\n * @param {string} info - Alert message text\n * @see The corresponding event {@link event:\"app.procedure.didFireEvent\" \"app.procedure.didFireEvent\"}\n */\n/**\n * @event \"app.procedure.didFireEvent\"\n * @see The corresponding hook method {@link module:solo.app.procedure.didFireEvent app.procedure.didFireEvent()}\n */\n\n/**\n * The hook method is invoked when the alert message is fired in the procedure.\n * \n * @memberof module:solo.app.procedure\n * @abstract \n * @function willShowNotification\n * @param {string} type - Type of alert:\n * - `\"WARNING\"` \n * - `\"CAUTION\"`\n * - `\"NOTE\"`\n * - custom alert type\n * @param {string} text - Alert message text\n * @see The corresponding event {@link event:\"app.procedure.willShowNotification\" \"app.procedure.willShowNotification\"}\n */\n/**\n * @event \"app.procedure.willShowNotification\"\n * @see The corresponding hook method {@link module:solo.app.procedure.willShowNotification app.procedure.willShowNotification()}\n */\n\n/**\n * The hook method is invoked when the state of the procedure is changed.\n * \n * @memberof module:solo.app.procedure\n * @abstract \n * @function didChangePlayerState\n * @param {number} position - Current playback position on the timeline (seconds)\n * @param {number} state - Current procedure state as a bitmask\n * \n * Flags bitmask:\n * - `0x001` - procedure is played\n * - `0x100` - fastforward is available\n * - `0x200` - rewind is available\n * - `0x400` - sound is played in the 3D procedure\n * @see The corresponding event {@link event:\"app.procedure.didChangePlayerState\" \"app.procedure.didChangePlayerState\"}\n */\n/**\n * @event \"app.procedure.didChangePlayerState\"\n * @see The corresponding hook method {@link module:solo.app.procedure.didChangePlayerState app.procedure.didChangePlayerState()}\n */\n\n/**\n * The hook method is invoked when the playback of the next substep starts.\n * \n * > #### __NOTE__\n * >\n * > This method is called only for the steps/substeps with a non-empty comment field.\n * \n * @memberof module:solo.app.procedure\n * @abstract \n * @function didEnterSubstep\n * @param {string[]} substepPath - An array of step/substep ID contains current substep and its ancestors\n * @see The corresponding event {@link event:\"app.procedure.didEnterSubstep\" \"app.procedure.didEnterSubstep\"}\n */\n/**\n * @event \"app.procedure.didEnterSubstep\"\n * @see The corresponding hook method {@link module:solo.app.procedure.didEnterSubstep app.procedure.didEnterSubstep()}\n */\n\n/**\n * The hook method is invoked when the playback of the substep with substepId is starting.    \n * \n * @memberof module:solo.app.procedure\n * @abstract \n * @function didEnterSubstepWithName\n * @param {string} substepId - Substep ID\n * @see The corresponding event {@link event:\"app.procedure.didEnterSubstepWithName\" \"app.procedure.didEnterSubstepWithName\"}\n */\n/**\n * @event \"app.procedure.didEnterSubstepWithName\"\n * @see The corresponding hook method {@link module:solo.app.procedure.didEnterSubstepWithName app.procedure.didEnterSubstepWithName()}\n */\n\n/**\n * Procedure playback range flags.\n * @prop {number} app.procedure.RANGE_FLAGS_SEEK_TO_START=1\n * @prop {number} app.procedure.RANGE_FLAGS_SEEK_TO_END=2\n * @prop {number} app.procedure.RANGE_FLAGS_REQUEST_NOTIFICATION=4\n * @prop {number} app.procedure.RANGE_FLAGS_DO_NOT_RECALCULATE_POSITION=8\n * @typedef {number} ProcedureRangeFlags\n * @see {@link module:solo.app.procedure.setPlayRange app.procedure.setPlayRange()}\n */\n\n/**\n * Procedure playback range constants.\n * @prop {string} app.procedure.RANGE_VALUE_CURRENT_STEP=%%CURRENT_STEP%%\n * @prop {string} app.procedure.RANGE_VALUE_CURRENT_SUBSTEP=%%CURRENT_SUBSTEP%%\n * @typedef {number} ProcedureRangeKeyword\n * @see {@link module:solo.app.procedure.setPlayRange app.procedure.setPlayRange()}\n */\n\n/**\n * Seek mode constants.\n * @prop {number} app.procedure.SEEK_DEFAULT=-1\n * @prop {number} app.procedure.SEEK_TO_BEGIN=0\n * @prop {number} app.procedure.SEEK_TO_CUE_POINT=1 The __setViewpoint__ command is skipped (if any) at the beginning of the substep when calculating seek position.\n * @prop {number} app.procedure.SEEK_TO_END=2\n * @typedef {number} ProcedureSeekMode\n * @see {@link module:solo.app.procedure.forward app.procedure.forward()}\n * @see {@link module:solo.app.procedure.backward app.procedure.backward()}\n * @see {@link module:solo.app.procedure.seekToSubstep app.procedure.seekToSubstep()}\n * @since 1.5.3\n */\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar m_speakerIcon = null;\nvar app = __webpack_require__(1).app;\n\nvar m_isCanvasVisible = false;\n\nvar appExports = {\n    /**\n     * The namespace represents an auxilary interface.\n     * \n     * @namespace\n     * @memberof module:solo.app\n     */\n    ui: {\n        /**\n         * Set banner image over the 3D window.\n         * \n         * @param {BannerImageInfo|HTMLImageElement} image - Banner image data (see {@link module:solo.app.util.fetchBannerImage app.util.fetchBannerImage()}) or Image object\n         * @see {@link module:solo.app.util.fetchBannerImage app.util.fetchBannerImage()}\n         * @see external:HTMLImageElement\n         */\n        setBannerImage: function (image) {\n            if (!Module.PanelService) return;\n            if (image) Module.PanelService.setBannerImage(image);\n        },\n\n        /**\n         * Shows or hides the 3D window.\n         * \n         * @param {boolean} [visible=true]\n         */\n        showCanvas: function (visible) {\n            if (!Module.canvas) return;\n            visible = (typeof visible == 'undefined') ? true : !!visible;\n            Module.canvas.style.display = visible ? 'block' : 'none';\n            var group = Module.canvas.parentNode.querySelector('#tiramisu-panel-group');\n            if (group) {\n                group.style.display = visible ? '' : 'none';\n            }\n            app.ui.showPanels(visible);\n            m_isCanvasVisible = visible;\n            if (visible) Cortona3DSolo.dispatch(\"core.didChangeLayout\");\n        },\n\n        /**\n         * Shows or hides the HTML panels in the 3D window.\n         * \n         * @param {boolean} [visible=true]\n         */\n        showPanels: function (visible) {\n            if (!Module.PanelService) return;\n            visible = (typeof visible == 'undefined') ? true : !!visible;\n            Module.PanelService.showPanels(visible);\n        },\n\n        /**\n         * Checks the 2D illustration display mode.\n         * \n         * @returns {boolean}\n         */\n        isDrawingDisplayMode: function () {\n            var result = false;\n            if (app.drawing) {\n                result = app.drawing.isVisible() && !m_isCanvasVisible;\n            }\n            return result;\n        },\n\n        /**\n         * Checks if the 3D window visible.\n         * \n         * @returns {boolean}\n         */\n        isCanvasVisible: function () {\n            return m_isCanvasVisible;\n        },\n\n        /**\n         * Shows or hides the speaker icon.\n         * \n         * @param {boolean} [visible]\n         * @returns {boolean}\n         */\n        toggleSpeakerIcon: function (visible) {\n            if (!Module.PanelService) return;\n            var div;\n            visible = (typeof visible === 'undefined') ? !m_speakerIcon : visible;\n            if (visible) {\n                if (m_speakerIcon) return;\n                div = document.createElement('div');\n                div.className = 'tiramisu-speaker';\n                div.appendChild(document.createElement('div'));\n                div.appendChild(document.createElement('span'));\n                div.appendChild(document.createElement('span'));\n                div.appendChild(document.createElement('span'));\n                Module.PanelService.appendChild(div);\n                m_speakerIcon = div;\n                window.setTimeout(function () {\n                    div.style.opacity = 1;\n                }, 300);\n            } else {\n                div = m_speakerIcon;\n                if (div) {\n                    div.style.opacity = 0;\n                    window.setTimeout(function () {\n                        div.parentNode.removeChild(div);\n                    }, 300);\n                }\n                m_speakerIcon = null;\n            }\n            return visible;\n        }\n    }\n};\n\nmodule.exports = {\n    app: appExports\n};\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* global unescape */\n\nvar baseURL = __webpack_require__(9).getBaseURL();\n\n/**\n * (description)\n * \n * @private\n * @param {number} chunk - Emscripten pointer\n * @param {Image} image - Image object\n * @param {object} options\n * @param {number} [autoRevokeTimeout=0]\n * @returns {HTMLImageElement} Image object\n */\nfunction createImageFromData(chunk, image, options, autoRevokeTimeout) {\n    if (chunk === 0) return;\n\n    if (typeof autoRevokeTimeout === 'undefined') {\n        autoRevokeTimeout = !image ? -1 : 0;\n    }\n\n    var size = Module.getValue(chunk, 'i32'),\n        data = Module.HEAPU8.subarray(chunk + 4, chunk + size + 4),\n        DOMURL = window.URL || window.webkitURL || window,\n        options = options || {},\n        url = DOMURL.createObjectURL(new Blob([data], options));\n\n    Module._free(chunk);\n\n    if (!image) image = new Image();\n\n    if (autoRevokeTimeout >= 0) {\n        function completeHandler() {\n            if (!autoRevokeTimeout) {\n                DOMURL.revokeObjectURL(url);\n            } else {\n                setTimeout(function () {\n                    try {\n                        DOMURL.revokeObjectURL(url);\n                    } catch (e) {}\n                }, autoRevokeTimeout);\n            }\n            image.removeEventListener('load', completeHandler, false);\n            image.removeEventListener('error', completeHandler, false);\n        }\n        image.addEventListener('load', completeHandler, false);\n        image.addEventListener('error', completeHandler, false);\n    }\n\n    image.src = url;\n    return image;\n}\n\n/**\n * @private\n * @param {*} typedArray\n * @returns TypedArray\n */\nfunction marshallTypedArray(typedArray)\n{\n    var dataSize = typedArray.BYTES_PER_ELEMENT * typedArray.length,\n        dataOffset = Module._malloc(dataSize),\n        result = new Uint8Array(Module.HEAPU8.buffer, dataOffset, dataSize);\n    result.set(new Uint8Array(typedArray.buffer));\n    return result;\n}\n\nvar appExports = {\n    /**\n     * The namespace represents an auxilary interface.\n     * \n     * @namespace\n     * @memberof module:solo.app\n     */\n    util: {\n        /**\n         * Fetches resource from the *.cortona3d* bundle using {@link https://developer.mozilla.org/en-US/docs/Web/API/URL URL API} and returns a string containing an object URL representing given resource.\n         * You must explicitly release the object URL after its use by calling {@link module:solo.app.util.revokeResourceURL app.util.revokeResourceURL()}.\n         * \n         * @param {string} name - Name of resource in the *.cortona3d* bundle\n         * @returns {string} An object URL\n         * @see external:URL\n         * @see {@link module:solo.app.util.revokeResourceURL app.util.revokeResourceURL()}\n         */\n        createResourceURL: function (name) {\n            if (!Module.ccall) return;\n\n            var chunk = Module.ccall('tiramisu_copyResourceFromBundle', 'number', ['string'], arguments);\n\n            if (chunk === 0) return;\n\n            var size = Module.getValue(chunk, 'i32'),\n                data = Module.HEAPU8.subarray(chunk + 4, chunk + size + 4),\n                DOMURL = window.URL || window.webkitURL || window,\n                options = /\\.svg$/i.test(name) ? {\n                    type: 'image/svg+xml'\n                } : {},\n                url = DOMURL.createObjectURL(new Blob([data], options));\n\n            Module._free(chunk);\n\n            return url;\n        },\n\n        /**\n         * Releases the existing object URL, which was previously created by calling {@link module:solo.app.util.createResourceURL}.\n         * \n         * @param {URL} url - The object URL\n         * @see external:URL\n         * @see {@link module:solo.app.util.createResourceURL app.util.createResourceURL()}\n         */\n        revokeResourceURL: function (url) {\n            if (!url || !/^blob:/i.test(url)) return;\n            var DOMURL = window.URL || window.webkitURL || window;\n            DOMURL.revokeObjectURL(url);\n        },\n\n        /**\n         * Fetches an image from the *.cortona3d* bundle and returns an Image object.\n         * \n         * @param {HTMLImageElement|string} image - The HTML image element with 'src' attribute equals to the name of the image in the bundle or the name of the image itself\n         * @param {number} [autoRevokeTimeout=0] - The lifetime of an object URL in milliseconds. A value less than zero disables auto revoke\n         * @returns {HTMLImageElement} Image object\n         */\n        fetchImageFromDocumentBundle: function (image, autoRevokeTimeout) {\n            var img,\n                name,\n                options;\n\n            if (typeof image === 'string') {\n                img = new Image();\n                name = image;\n            } else {\n                img = image;\n                name = img.getAttribute('src');\n                if (name.lastIndexOf(baseURL, 0) === 0) {\n                    name = name.slice(baseURL.length);\n                }\n            }\n\n            name = decodeURI(name).replace(/\\.cgm$/i, '.svg');\n            options = /\\.svg$/i.test(name) ? {\n                type: 'image/svg+xml'\n            } : {};\n\n            return createImageFromData(Module.ccall('tiramisu_copyResourceFromBundle', 'number', ['string'], [name]), img, options, autoRevokeTimeout);\n        },\n\n        /**\n         * Fetch banner image from the VRML file.\n         *\n         * @returns {BannerImageInfo} An object that represents the information for the banner image\n         */\n        fetchBannerImage: function () {\n            var sp = Module.Runtime.stackSave(),\n                params = Module.allocate(8, 'i32', Module.ALLOC_STACK),\n                image = createImageFromData(Module.ccall('tiramisu_copyBannerImage', 'number', ['number'], [params])),\n                result;\n            if (image) {\n                result = {\n                    image: image,\n                    frameCount: Module.getValue(params, 'i32'),\n                    frameDuration: Module.getValue(params + 4, 'i32') / 1000\n                };\n            }\n            Module.Runtime.stackRestore(sp);\n            return result;\n        },\n        /**\n         * @class The constructor creates an instance of {@link Vec3f} object corresponds to a VRML SFVec3f field.\n         * @see Vec3f\n         * @since 1.4.0\n         */\n        Vec3f: __webpack_require__(24),\n        /**\n         * @class The constructor creates an instance of {@link Rotation} object corresponds to a VRML SFRotation field.\n         * @see Rotation\n         * @since 1.4.0\n         */\n        Rotation: __webpack_require__(65),\n        /**\n         * Decompress typedArray with inflate/ungzip.\n         * \n         * @param {Uint8Array} typedArray\n         * @returns {Uint8Array|null} Decompressed data or null\n         * @see {@link module:solo.app.util.freeTypedArray app.util.freeTypedArray()}\n         * @since 1.6.6\n         */\n        inflate: function (typedArray) {\n            var data = marshallTypedArray(typedArray),\n                chunk = Module._tiramisu_utility_inflate(data.byteOffset, data.length);\n            Module._free(data.byteOffset);\n            return chunk ? HEAPU8.subarray(chunk + 4, chunk + 4 + getValue(chunk, 'i32')) : null;\n        },\n        /**\n         * Free the existing TypedArray data, which was previously created by calling {@link module:solo.app.util.inflate app.util.inflate()}.\n         * \n         * @param {Uint8Array} typedArray\n         * @see {@link module:solo.app.util.inflate app.util.inflate()}\n         * @since 1.6.6\n         */\n        freeTypedArray: function (typedArray) {\n            if (typedArray) {\n                Module._free(typedArray.byteOffset - 4);\n            }\n        }\n    },\n};\n\nmodule.exports = {\n    app: appExports\n};\n\n/**\n * The object represents a banner image from a VRML file, for example:\n * ```\n * {\n *      image: <Image object>,\n *      frameCount: 0,\n *      frameDuration: 0\n * }\n * ```\n * @prop {HTMLImageElement} image - An image object. \n * @prop {number} frameCount - Number of frames for animation. \n * @prop {number} frameDuration - Duration of animation of one frame.\n * @typedef {object} BannerImageInfo\n * @see {@link module:solo.app.util.fetchBannerImage app.util.fetchBannerImage()}\n */\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Cortona3DSolo = __webpack_require__(2);\r\n\r\nvar app = __webpack_require__(1).app;\r\nvar expand = __webpack_require__(0).expand;\r\nvar b64toBlob = Cortona3DSolo.app.util.b64toBlob;\r\nvar deface = __webpack_require__(23);\r\n\r\n__webpack_require__(62);\r\n__webpack_require__(61);\r\n\r\nvar m_runtimeReady = false;\r\n\r\nCortona3DSolo.core = expand(Cortona3DSolo.core || {}, Cortona3DSolo.config || {});\r\n\r\n/**\r\n * The namespace corresponds to the Emscripten {@link external:Module Module object} of core application.\r\n * \r\n * Requires the use of the internal module `\"core\"`.\r\n * \r\n * @namespace\r\n * @memberof module:solo\r\n * @see {@link external:Module Module object}\r\n * @example\r\nCortona3DSolo.use('core', {\r\n    totalMemory: 64,\r\n    features: Cortona3DSolo.app.DISABLE_DISCARDABLE_GEOMETRY_DATA,\r\n    src: 'sample.wrl'\r\n});\r\nCortona3DSolo.app.initialize();\r\n */\r\nvar core = Cortona3DSolo.core = expand({\r\n    /**\r\n     * The hook method is called when core application prints to standard error.\r\n     * \r\n     * @memberof module:solo.core\r\n     * @param {string} text\r\n     * @see {@link http://kripken.github.io/emscripten-site/docs/api_reference/module.html#Module.printErr Module.printErr()}\r\n     */\r\n    printErr: function (text) {\r\n        text = deface(Array.prototype.slice.call(arguments).join(' '));\r\n        console.error(text);\r\n        Cortona3DSolo.core.lastErrorText = text;\r\n    },\r\n\r\n    /**\r\n     * The hook method is called when core application prints to standard output.\r\n     * \r\n     * @memberof module:solo.core\r\n     * @param {string} text\r\n     * @see {@link http://kripken.github.io/emscripten-site/docs/api_reference/module.html#Module.print Module.print()}\r\n     */\r\n    print: function () {\r\n        text = deface(Array.prototype.slice.call(arguments).join(' '));\r\n        console.log(text);\r\n    },\r\n\r\n    /**\r\n     * The HTML `<canvas>` element.\r\n     * \r\n     * @static\r\n     * @member {HTMLCanvasElement} canvas\r\n     * @memberof module:solo.core\r\n     * @see external:HTMLCanvasElement\r\n     */\r\n\r\n    /**\r\n     * The property is true when the Emscripten Module is initialized.\r\n     * \r\n     * @static\r\n     * @member {boolean} runtimeReady\r\n     * @memberof module:solo.core\r\n     * @since 1.5.6\r\n     */\r\n\r\n    /**\r\n     * The hook method is called when core application sets a message in the status bar.\r\n     * \r\n     * @memberof module:solo.core\r\n     * @method\r\n     * @param {string} text - Message text\r\n     */\r\n    setStatus: function (text) {},\r\n\r\n    /**\r\n     * The hook method is invoked when layout is changed to resize the 3D window (the `<canvas>` element).\r\n     * \r\n     * *This method can be overridden if necessary.*\r\n     * \r\n     * @memberof module:solo.core\r\n     * @function didChangeLayout\r\n     * @see {@link module:solo.app.resize app.resize()}\r\n     * @see The corresponding event {@link event:\"core.didChangeLayout\" \"core.didChangeLayout\"}\r\n     */\r\n    /**\r\n     * @event \"core.didChangeLayout\"\r\n     * @see The corresponding hook method {@link module:solo.core.didChangeLayout core.didChangeLayout()}\r\n     */\r\n    didChangeLayout: function () {\r\n        if (m_runtimeReady) {\r\n            var pane = Cortona3DSolo.core.canvas,\r\n                w = pane.clientWidth,\r\n                h = pane.clientHeight;\r\n            Cortona3DSolo.app.resize(w, h);\r\n        }\r\n    }\r\n}, Cortona3DSolo.core);\r\n\r\nexpand(Cortona3DSolo.core, {\r\n    /**\r\n     * The hook method is invoked to indicate that loading operation is in progress.\r\n     * \r\n     * @private \r\n     * @param {ProgressEvent} e XMLHttpRequest onprogress event\r\n     */\r\n    onprogress: function (e) {\r\n        var total = e.lengthComputable || e.lengthComputable === undefined ? e.total : 0;\r\n        var loaded = e.loaded;\r\n        Cortona3DSolo.dispatch(\"app.onProgress\", loaded, total, e.type);\r\n    },\r\n\r\n    /**\r\n     * Check if the Emscripten Module is initialized.\r\n     * \r\n     * @memberof module:solo.core\r\n     * @returns {boolean}\r\n     * @deprecated since version 1.5.6, use {@link module:solo.core.runtimeReady core.runtimeReady} instead\r\n     */\r\n    isRuntimeReady: function () {\r\n        return m_runtimeReady;\r\n    },\r\n    /**\r\n     * @private\r\n     */\r\n    onRuntimeInitialized: function () {\r\n        setTimeout(function () {\r\n            var Tiramisu = Module.Tiramisu;\r\n            var major = (Tiramisu.VERSION >> 24),\r\n                minor = (Tiramisu.VERSION >> 16) & 0xFF,\r\n                build = Tiramisu.VERSION & 0xFFFF,\r\n                buildTime = new Date(Tiramisu.BUILD_TIME * 1000);\r\n        }, 10);\r\n\r\n        m_runtimeReady = true;\r\n        if (typeof core.didChangeLayout == 'function') {\r\n            window.addEventListener('resize', function () {\r\n                Cortona3DSolo.dispatch(\"core.didChangeLayout\");\r\n            }, false);\r\n            core.didChangeLayout();\r\n            Cortona3DSolo.dispatch(\"core.didChangeLayout\");\r\n        }\r\n        if (app.ui) {\r\n            app.ui.showCanvas(false);\r\n        }\r\n        Cortona3DSolo.emit(\"core.onRuntimeInitialized\");\r\n        Cortona3DSolo.dispatch(\"app.onReady\");\r\n    }\r\n});\r\n\r\nvar DEFAULT_TOTAL_MEMORY = 64;\r\n\r\nfunction resolveSceneURL(options) {\r\n    options = options || {};\r\n    options.features = options.features || 0;\r\n\r\n    var DOMURL = window.URL || window.webkitURL || window,\r\n        syntax,\r\n        src = options.src,\r\n        dataScript;\r\n\r\n    if (!src) {\r\n        dataScript = document.querySelector(\"script[type^='application/solo']\");\r\n        if (dataScript) {\r\n            options.totalMemory = options.totalMemory || +dataScript.getAttribute('data-total-memory') || DEFAULT_TOTAL_MEMORY;\r\n            options.features = options.features | +dataScript.getAttribute('data-features');\r\n            src = dataScript.getAttribute('src');\r\n            if (src) {\r\n                options.src = src;\r\n                dataScript.parentNode.removeChild(dataScript);\r\n            } else {\r\n                return b64toBlob(dataScript.textContent, 'application/zip')\r\n                    .then(function (blob) {\r\n                        options.src = DOMURL.createObjectURL(blob);\r\n                        dataScript.parentNode.removeChild(dataScript);\r\n                        return options;\r\n                    });\r\n            }\r\n        } else {\r\n            dataScript = document.querySelector(\"script[type='model/vrml']\");\r\n            if (dataScript) {\r\n                src = dataScript.getAttribute('src');\r\n                if (src) {\r\n                    options.src = src;\r\n                } else {\r\n                    syntax = dataScript.textContent.replace(/^\\s+/, '');\r\n                    if (syntax.indexOf('#VRML V2.0 utf8') !== 0) {\r\n                        syntax = '#VRML V2.0 utf8\\n' + syntax;\r\n                    }\r\n                    options.isRAContent = /PROTO\\s+ObjectVM/.test(syntax);\r\n                    options.isViewpointInScene = /Viewpoint\\s*{/.test(syntax);\r\n                    options.isTextInScene = /Text\\s*{/.test(syntax);\r\n                    options.src = DOMURL.createObjectURL(new Blob([syntax], {\r\n                        type: \"model/vrml\"\r\n                    }));\r\n                }\r\n                options.totalMemory = options.totalMemory || +dataScript.getAttribute('data-total-memory') || DEFAULT_TOTAL_MEMORY;\r\n                options.features = options.features | +dataScript.getAttribute('data-features');\r\n                if (!options.isRAContent) {\r\n                    options.features |= +Cortona3DSolo.app.DISABLE_DISCARDABLE_GEOMETRY_DATA;\r\n                }\r\n                if (options.isTextInScene) {\r\n                    options.features |= +Cortona3DSolo.app.ENABLE_VRML_TEXT_NODE;\r\n                }\r\n                dataScript.parentNode.removeChild(dataScript);\r\n            }\r\n        }\r\n    }\r\n    return Promise.resolve(options);\r\n}\r\n\r\nmodule.exports = {\r\n    configure: function (options) {\r\n        // Module configutration\r\n        options = options || {};\r\n        var config = {},\r\n            canvasElement;\r\n\r\n        if (Cortona3DSolo.baseURL) {\r\n            config.memoryInitializerPrefixURL = Cortona3DSolo.baseURL;\r\n            config.filePackagePrefixURL = Cortona3DSolo.baseURL;\r\n        }\r\n\r\n        canvasElement = options.element || options.canvas || (function () {\r\n            var canvas = document.createElement('canvas');\r\n            __webpack_require__(22);\r\n            document.body.insertBefore(canvas, document.body.firstChild);\r\n            return canvas;\r\n        })();\r\n\r\n        canvasElement.classList.add('cortona3dsolo-canvas');\r\n\r\n        var coreSolo = __webpack_require__(25),\r\n            moduleArguments = coreSolo.Arguments;\r\n\r\n        Object.defineProperty(Module, 'canvas', {\r\n            value: canvasElement,\r\n            enumerable: true\r\n        });\r\n\r\n        Object.defineProperty(Module, 'runtimeReady', {\r\n            get: function () {\r\n                return m_runtimeReady;\r\n            },\r\n            enumerable: true\r\n        });\r\n\r\n        resolveSceneURL(options)\r\n            .then(function (options) {\r\n                if (options.prefixURL) {\r\n                    config.memoryInitializerPrefixURL = options.prefixURL;\r\n                    config.filePackagePrefixURL = options.prefixURL;\r\n                }\r\n                if (typeof options.totalMemory == 'number') {\r\n                    config.TOTAL_MEMORY = options.totalMemory * 1024 * 1024;\r\n                }\r\n                if (options.features) {\r\n                    app.configureInstance(options.features);\r\n                }\r\n\r\n                expand(Cortona3DSolo.core, config);\r\n\r\n                if (options.src) {\r\n                    moduleArguments.document = Cortona3DSolo.app.util.toUrl(options.src);\r\n                }\r\n                if (options.features) {\r\n                    moduleArguments.features = options.features & 32767;\r\n                }\r\n\r\n                moduleArguments.toModule();\r\n\r\n                coreSolo.load();\r\n            })\r\n            .catch(function (e) {\r\n                Cortona3DSolo.emit('core.onError', e);\r\n            });\r\n\r\n        return Module;\r\n    }\r\n};\r\n\r\n/**\r\n *  The hook method is invoked when animation frame is drawn on the canvas.\r\n * \r\n * @memberof module:solo.core\r\n * @abstract \r\n * @function didDrawAnimationFrame\r\n * @since 1.4.0\r\n * @see The corresponding event {@link event:\"core.didDrawAnimationFrame\" \"core.didDrawAnimationFrame\"}\r\n */\r\n/**\r\n * @event \"core.didDrawAnimationFrame\"\r\n * @see The corresponding hook method {@link module:solo.core.didDrawAnimationFrame core.didDrawAnimationFrame()}\r\n */\r\n//didDrawAnimationFrame: nop, // ()\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar deepmerge = __webpack_require__(64);\r\nvar isFunction = __webpack_require__(0).isFunction;\r\n\r\n// https://github.com/just-boris/require-mini\r\n\r\nfunction safeGet(global, value) {\r\n    return value.split('.').reduce(function (obj, prop) {\r\n        return obj && obj[prop];\r\n    }, global);\r\n}\r\n\r\nfunction defer() {\r\n    var result = {};\r\n    result.promise = new Promise(function (resolve, reject) {\r\n        result.resolve = resolve;\r\n        result.reject = reject;\r\n    });\r\n    return result;\r\n}\r\n\r\nfunction invokeLater(context, fn) {\r\n    lastTask = lastTask.then(function () {\r\n        pendingModule = context;\r\n        return fn();\r\n    }).then(cleanup, cleanup);\r\n\r\n    function cleanup() {\r\n        pendingModule = null;\r\n    }\r\n}\r\n\r\nfunction appendJs(name) {\r\n    return /^\\/|:|\\?|\\.js$/.test(name) ? name : name + '.js';\r\n}\r\n\r\nfunction pathName(name, path) {\r\n    var pathname = name,\r\n        re = /^\\.+\\//,\r\n        a = path.slice(0, path.length - 1),\r\n        component;\r\n    while (a.length && re.test(pathname)) {\r\n        component = a.pop();\r\n        component = component.substr(component.indexOf('!') + 1);\r\n        pathname = component.substr(0, component.lastIndexOf('/') + 1) + pathname;\r\n    }\r\n    return pathname;\r\n}\r\n\r\nvar contexts = {},\r\n    lastTask = Promise.resolve(),\r\n    pendingModule = null;\r\n\r\nfunction createContext(contextName, contextOptions) {\r\n\r\n    contextOptions = contextOptions || {};\r\n\r\n    if (!contexts[contextName]) {\r\n\r\n        function loadDep(name, path) {\r\n            if (config.shim[name]) {\r\n                return loadByShim(name, path);\r\n            } else {\r\n                var deferred = defer();\r\n                deferred.name = name;\r\n                deferred.path = path;\r\n                deferred.context = contextName;\r\n                invokeLater(deferred, function () {\r\n                    return loadScript(name, path).catch(function () {\r\n                        deferred.reject(new Error('Error while loading module \"' + name + '\"'));\r\n                    });\r\n                });\r\n                return deferred.promise;\r\n            }\r\n        }\r\n\r\n        function loadByShim(name, path) {\r\n            var shim = config.shim[name];\r\n            return _require(shim.deps || [], function () {\r\n                return loadScript(name, path).then(shim.exportsFn || function () {\r\n                    return (shim.init && shim.init()) || safeGet(window, shim.exports);\r\n                });\r\n            }, null, path);\r\n        }\r\n\r\n        function loadScript(name, path) {\r\n            return new Promise(function (resolve, reject) {\r\n                var el = requirejs.load(null, name, toUrl(name, path, true));\r\n                el.onerror = reject;\r\n                el.onload = resolve;\r\n            });\r\n        }\r\n\r\n        function loadWithPlugin(dependency, path) {\r\n            var index = dependency.indexOf('!'),\r\n                plugin = dependency.substr(0, index),\r\n                context = createContext(null).getContext();\r\n            dependency = dependency.substr(index + 1);\r\n            return context._require([plugin], function (plugin) {\r\n                return new Promise(function (resolve, reject) {\r\n                    function localRequire() {\r\n                        if (!resolved) {\r\n                            return requirejs.apply(null, arguments);\r\n                        }\r\n                    }\r\n                    Object.keys(requirejs).forEach(function (key) {\r\n                        localRequire[key] = requirejs[key];\r\n                    });\r\n                    var resolved = false;\r\n                    resolve.error = reject;\r\n                    resolve.fromText = function (name, text) {\r\n                        if (!text) {\r\n                            text = name;\r\n                        }\r\n                        var previousModule = pendingModule;\r\n                        pendingModule = {\r\n                            name: name,\r\n                            resolve: resolve,\r\n                            reject: reject,\r\n                            path: path\r\n                        };\r\n                        /* jshint -W054 */\r\n                        (new Function(text))();\r\n                        /* jshint +W054 */\r\n                        pendingModule = previousModule;\r\n                        resolved = true;\r\n                    };\r\n                    plugin.load(pathName(dependency, path), localRequire, resolve, config);\r\n                });\r\n            }, null, path);\r\n        }\r\n\r\n        var commentRegExp = /(\\/\\*([\\s\\S]*?)\\*\\/|([^:]|^)\\/\\/(.*)$)/mg,\r\n            cjsRequireRegExp = /[^.]\\s*require\\s*\\(\\s*[\"']([^!'\"\\s][^'\"\\s]*)[\"']\\s*\\)/g;\r\n\r\n        function wrapCommonJS(name, factory, path) {\r\n            var deps = [];\r\n            factory.toString()\r\n                .replace(commentRegExp, '')\r\n                .replace(cjsRequireRegExp, function (match, dep) {\r\n                    deps.push(dep);\r\n                });\r\n\r\n            return {\r\n                deps: deps,\r\n                factory: function () {\r\n                    var args = arguments,\r\n                        modules = deps.reduce(function (modules, name, index) {\r\n                            modules[name] = args[index];\r\n                            return modules;\r\n                        }, {});\r\n\r\n                    function localRequire(name) {\r\n                        if (!modules[name]) {\r\n                            throw new Error('Module \"' + deps + '\" has not been loaded yet');\r\n                        }\r\n                        return modules[name];\r\n                    }\r\n\r\n                    localRequire.toUrl = function (name) {\r\n                        return toUrl(name, path);\r\n                    };\r\n\r\n                    return factory(\r\n                        localRequire,\r\n                        locals.exports(name),\r\n                        locals.module(name)\r\n                    );\r\n                }\r\n            };\r\n        }\r\n\r\n\r\n        function _require(deps, factory, errback, path) {\r\n            var currentModule = path.slice(-1)[0];\r\n            return new Promise(function (resolve, reject) {\r\n                Promise.all(deps.map(function (dependency) {\r\n                    if (path.indexOf(dependency) > -1) {\r\n                        return Promise.reject(new Error('Circular dependency: ' + path.concat(dependency).join(' -> ')));\r\n                    }\r\n                    var newPath = path.concat(dependency);\r\n                    if (locals[dependency]) {\r\n                        return locals[dependency](currentModule);\r\n                    }\r\n                    if (dependency.indexOf('!') > -1) {\r\n                        modules[dependency] = loadWithPlugin(dependency, newPath);\r\n                    }\r\n                    if (predefines[dependency]) {\r\n                        modules[dependency] = Promise.resolve().then(function () {\r\n                            return _require.apply(null, predefines[dependency].concat([newPath]));\r\n                        });\r\n                    } else if (!modules[dependency]) {\r\n                        modules[dependency] = loadDep(dependency, newPath);\r\n                    }\r\n                    return modules[dependency];\r\n                })).then(resolve, reject);\r\n            }).then(function (instances) {\r\n                if (isFunction(factory)) {\r\n                    var result = factory.apply(null, instances);\r\n                    return currentModule && safeGet(modules[currentModule], 'module.exports') || result;\r\n                } else {\r\n                    return factory;\r\n                }\r\n            }, function (reason) {\r\n                if (isFunction(errback)) {\r\n                    errback(reason);\r\n                }\r\n                requirejs.onError(reason);\r\n                return Promise.reject(reason);\r\n            });\r\n        }\r\n\r\n        function requirejs(deps, factory, errback) {\r\n            return _require(deps, factory, errback, []);\r\n        }\r\n\r\n        var modules,\r\n            predefines,\r\n            config,\r\n            locals = {\r\n                require: function (moduleName) {\r\n                    return requirejs;\r\n                },\r\n                module: function (moduleName) {\r\n                    var module = modules[moduleName];\r\n                    if (!module) {\r\n                        throw new Error('Module \"module\" should be required only by modules');\r\n                    }\r\n                    return (module.module = module.module || {\r\n                        id: moduleName,\r\n                        config: function () {\r\n                            return config.config[moduleName] || {};\r\n                        }\r\n                    });\r\n                },\r\n                exports: function (moduleName) {\r\n                    return (locals.module(moduleName).exports = {});\r\n                }\r\n            };\r\n\r\n        requirejs.resetContext = function () {\r\n            config = {\r\n                urlArgs: '',\r\n                baseUrl: './',\r\n                paths: {},\r\n                shim: {},\r\n                bundles: {},\r\n                config: {}\r\n            };\r\n            modules = {};\r\n            predefines = {};\r\n        };\r\n\r\n        requirejs.config = function (options) {\r\n            if (!options.context) {\r\n                config = deepmerge(config, options);\r\n            } else {\r\n                return createContext(options.context, options);\r\n            }\r\n        };\r\n\r\n        requirejs.load = function (context, name, url) {\r\n            var el = document.createElement(\"script\");\r\n            el.src = url;\r\n            el.async = true;\r\n            document.getElementsByTagName('body')[0].appendChild(el);\r\n            return el;\r\n        };\r\n\r\n        function toUrl(name, path, appendJS) {\r\n            var bundle = Object.keys(config.bundles).filter(function (bundle) {\r\n                return config.bundles[bundle].indexOf(name) > -1;\r\n            })[0];\r\n            if (bundle) {\r\n                return requirejs.toUrl(bundle);\r\n            }\r\n            if (config.paths[name]) {\r\n                name = config.paths[name];\r\n                if (appendJS) {\r\n                    name += '.js';\r\n                }\r\n            } else {\r\n                if (appendJS) {\r\n                    name = appendJs(name);\r\n                }\r\n                if (path) {\r\n                    name = pathName(name, path);\r\n                }\r\n            }\r\n            if (!/^([\\w\\+\\.\\-]+:)?\\//.test(name)) {\r\n                name = config.baseUrl + name;\r\n            }\r\n            if (config.urlArgs) {\r\n                name += '?' + config.urlArgs;\r\n            }\r\n            return name;\r\n        }\r\n\r\n        requirejs.toUrl = function (name) {\r\n            return toUrl(name);\r\n        };\r\n\r\n        requirejs.specified = function (name) {\r\n            return modules.hasOwnProperty(name);\r\n        };\r\n\r\n        requirejs.onError = function (reason) {\r\n            console.error(reason);\r\n        };\r\n\r\n        requirejs.resetContext();\r\n\r\n        requirejs.getContext = function () {\r\n            return {\r\n                config: config,\r\n                modules: modules,\r\n                predefines: predefines,\r\n                wrapCommonJS: wrapCommonJS,\r\n                _require: _require\r\n            };\r\n\r\n        };\r\n\r\n        contexts[contextName] = requirejs;\r\n    }\r\n\r\n    var options = deepmerge({}, contextOptions);\r\n    delete options.context;\r\n    contexts[contextName].config(options);\r\n\r\n    return contexts[contextName];\r\n}\r\n\r\nfunction define(name, deps, factory) {\r\n    if (typeof name !== 'string') {\r\n        factory = deps;\r\n        deps = name;\r\n        name = null;\r\n    }\r\n    if (!Array.isArray(deps)) {\r\n        factory = deps;\r\n        deps = [];\r\n    }\r\n\r\n    var deferred = pendingModule,\r\n        context = createContext(name ? null : (deferred && deferred.context)).getContext();\r\n\r\n    if (name === null && !deferred) {\r\n        throw new Error('Unexpected define!');\r\n    }\r\n\r\n    if (deps.length === 0 && factory.length > 0) {\r\n        var wrapped = context.wrapCommonJS(name || deferred.name, factory, [].concat(deferred.path, ''));\r\n        deps = wrapped.deps;\r\n        factory = wrapped.factory;\r\n    }\r\n\r\n    if (name === null || deferred && deferred.name === name) {\r\n        var module = context._require(deps, factory, deferred.reject, deferred.path);\r\n        deferred.resolve(module);\r\n    } else {\r\n        context.predefines[name] = [deps, factory, null];\r\n    }\r\n}\r\n\r\ndefine.amd = {};\r\n\r\nvar requirejs = createContext(null);\r\n\r\nmodule.exports = {\r\n    define: define,\r\n    require: requirejs,\r\n    requirejs: requirejs\r\n};\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports) {\n\ndefine('css', function () {\r\n    return {\r\n        load: function (name, require, onload, config) {\r\n            var linkElement = document.createElement('link');\r\n            linkElement.href = require.toUrl(name);\r\n\r\n            var isLoaded = Array.prototype.slice.call(\r\n                document.getElementsByTagName('head')[0].querySelectorAll('link[rel=stylesheet]')\r\n            ).some(function (link) {\r\n                return link.href === linkElement.href;\r\n            });\r\n\r\n            if (!isLoaded) {\r\n                linkElement.rel = 'stylesheet';\r\n                linkElement.type = 'text/css';\r\n                linkElement.onload = onload;\r\n                linkElement.onerror = onload.error;\r\n                document.getElementsByTagName('head')[0].appendChild(linkElement);\r\n            } else {\r\n                onload({});\r\n            }\r\n        }\r\n    };\r\n});\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports) {\n\ndefine('file', function () {\r\n    return {\r\n        load: function (name, require, onload, config) {\r\n            onload(require.toUrl(name));\r\n        }\r\n    };\r\n});\r\n\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports) {\n\ndefine('json', function () {\r\n    return {\r\n        load: function (name, require, onload, config) {\r\n            Cortona3DSolo.app.util.loadResource(require.toUrl(name), 'application/json', 'json')\r\n                .then(function (xhr) {\r\n                    if (xhr.response === null) {\r\n                        throw new Error('Failed parsing JSON file \"' + name + '\"');\r\n                    } else if (typeof xhr.response === 'string') {\r\n                        var json = JSON.parse(xhr.response);\r\n                        if (json) {\r\n                            onload(json);\r\n                        } else {\r\n                            throw new Error('Failed parsing JSON file \"' + name + '\"');\r\n                        }\r\n                    } else {\r\n                        onload(xhr.response);\r\n                    }\r\n                })\r\n                .catch(onload.error);\r\n        }\r\n    };\r\n});\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports) {\n\ndefine('res', function () {\r\n    return {\r\n        load: function (name, require, onload, config) {\r\n            onload(require.toUrl(name));\r\n        }\r\n    };\r\n});\r\n\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports) {\n\ndefine('xml', function () {\r\n    return {\r\n        load: function (name, require, onload, config) {\r\n            Cortona3DSolo.app.util.loadResource(require.toUrl(name), 'text/xml')\r\n                .then(function (xhr) {\r\n                    if (xhr.responseXML) {\r\n                        onload(Cortona3DSolo.app.util.xmlToJSON(xhr.responseXML));\r\n                    } else {\r\n                        throw new Error(url + \" empty content\");\r\n                    }\r\n                })\r\n                .catch(onload.error);\r\n        }\r\n    };\r\n});\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(59);\n\nvar Cortona3DSolo = __webpack_require__(2);\n\nvar usedSkins = {},\n    UISkinController = __webpack_require__(72),\n    util = __webpack_require__(0);\n\nvar m_options = {};\n\n\n/**\n * A simple User Interface (UI) helper object.\n * \n * Requires the use of the internal module `\"skin\"`.\n * \n * @namespace\n * @memberof module:solo\n * @since 1.6.0\n * @example\nCortona3DSolo.use('skin', {\n    baseUrl: 'uniview/'\n});\nCortona3DSolo.skin.create('app').use('solo-uniview', {\n    src: 'procedure.interactivity.xml'\n});\n */\nvar skin = {\n    /**\n     * @class The constructor creates an instance of {@link UISkinController} object.\n     * @see UISkinController\n     */\n    UISkinController: UISkinController,\n\n    /**\n     * Creates a new skin area with given name in the coordinates of the base element.\n     * \n     * @param {string} name\n     * @param {HTMLElement|CSSSelector} [baseElement=document.body] HTML node or CSS selector\n     * @returns {UISkinController}\n     */\n    create: function (name, baseElement) {\n        if (!usedSkins[name]) {\n            usedSkins[name] = new skin.UISkinController(name, (typeof baseElement === 'string' ? document.querySelector(baseElement) : baseElement));\n        }\n        return usedSkins[name];\n    },\n\n    /**\n     * Removes the skin area with the given name.\n     * \n     * @param {string} name\n     */\n    remove: function (name) {\n        if (usedSkins[name]) {\n            // detach?\n            delete usedSkins[name];\n        }\n    },\n\n    /**\n     * Gets the skin area controller with the given name.\n     * \n     * @param {string} name\n     * @returns {UISkinController}\n     */\n    get: function (name) {\n        return usedSkins[name];\n    },\n\n    /**\n     * Loads the component module using `requirejs` configured with the `\"skin\"` module options and returns the factory function of the component.\n     * \n     * @async\n     * @param {string} name\n     * @returns {Promise.<UISkinComponentFactory>} The Promise object whose fulfillment handler receives the factory function when the requested external component file has successfully been loaded.\n     */\n    require: function (name) {\n        return Cortona3DSolo.app.util.requirePromise(name, window.requirejs.config(m_options));\n    }\n};\n\nmodule.exports = {\n    configure: function (options) {\n        m_options = util.expand({}, options || {});\n        return {\n            skin: skin\n        };\n    }\n};\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// Require pointer events polifill\r\n__webpack_require__(57);\r\n\r\nvar Cortona3DSolo = __webpack_require__(2);\r\nvar util = __webpack_require__(0);\r\n\r\nvar options = {\r\n    MOUSE_CLICK_THRESHOLD: 3,\r\n    FEATURE_PICK_TOPMOST: true\r\n};\r\n\r\nvar DOUBLE_TAP_TIME = 250;\r\n\r\nvar debounceTimeout = {};\r\n\r\nvar whichToButtons = [0, 1, 4, 2];\r\nvar buttonToButtons = [1, 4, 2, 8, 16];\r\n\r\nvar getMouseEventArguments = function (event, isMove) {\r\n    var keys = +(event.shiftKey && 1) | +(event.ctrlKey && 2) | +(event.altKey && 4);\r\n    //var buttons = (event.which !== undefined) ? whichToButton[event.which] : event.button;\r\n    var buttons;\r\n    if (isMove) {\r\n        buttons = (event.buttons !== undefined) ? event.buttons : ((event.which !== undefined) ? whichToButtons[event.which] : buttonToButtons[event.button]);\r\n    } else {\r\n        buttons = (event.which !== undefined) ? whichToButtons[event.which] : buttonToButtons[event.button];\r\n    }\r\n\r\n    var target = event.target || event.srcElement,\r\n        rect = target.getBoundingClientRect(),\r\n        offsetX = event.clientX - rect.left,\r\n        offsetY = event.clientY - rect.top;\r\n\r\n    return [offsetX, offsetY, buttons, keys, event];\r\n};\r\n\r\nvar distance = function (aVec1, aVec2) {\r\n    var dx = aVec1[0] - aVec2[0],\r\n        dy = aVec1[1] - aVec2[1];\r\n    return Math.sqrt(dx * dx + dy * dy);\r\n};\r\n\r\nvar args;\r\n\r\nvar isMouseMoved = function (mouseArgs1, mouseArgs2) {\r\n    if (!mouseArgs1 || !mouseArgs2) return false;\r\n    return distance(mouseArgs1, mouseArgs2) > options.MOUSE_CLICK_THRESHOLD;\r\n};\r\n\r\nvar overObject = null;\r\nvar lastMouseArguments = null;\r\nvar lastMouseMove = null;\r\n\r\nvar FEATURE_PICK_TOPMOST = true;\r\n\r\n/* Firefox title changes issue */\r\nvar stealthyLayer = null;\r\nvar isFF = navigator.userAgent.lastIndexOf(\"Firefox\") > 0;\r\nvar createStealthyLayer = function () {\r\n    if (isFF) {\r\n        stealthyLayer = document.createElement('div');\r\n        stealthyLayer.style.position = 'absolute';\r\n        stealthyLayer.style.top = '0';\r\n        stealthyLayer.style.bottom = '0';\r\n        stealthyLayer.style.left = '0';\r\n        stealthyLayer.style.right = '0';\r\n        stealthyLayer.style.zIndex = 10000;\r\n        stealthyLayer.onmousemove = function (e) {\r\n            e = e || window.event;\r\n            document.body.removeChild(e.target);\r\n            stealthyLayer = null;\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            return false;\r\n        };\r\n        setTimeout(function () {\r\n            if (stealthyLayer) {\r\n                document.body.removeChild(stealthyLayer);\r\n                stealthyLayer = null;\r\n            }\r\n        }, 100);\r\n        document.body.appendChild(stealthyLayer);\r\n    }\r\n};\r\n\r\nvar m_lastPickInfo;\r\n\r\nvar eventHandlers = {\r\n    pointermove: function (event) {\r\n        var target = event.target || event.srcElement,\r\n            rect = target.getBoundingClientRect(),\r\n            offsetX = event.clientX - rect.left,\r\n            offsetY = event.clientY - rect.top,\r\n            mouseArguments = getMouseEventArguments(event, true);\r\n\r\n        var handleOld = overObject ? overObject.handle : null;\r\n\r\n        if (lastMouseMove && !isMouseMoved(lastMouseMove, mouseArguments)) return;\r\n\r\n        lastMouseMove = mouseArguments;\r\n\r\n        if (!mouseArguments[2]) { // buttons === 0\r\n\r\n            m_lastPickInfo = pickObjectChain(offsetX, offsetY, options.FEATURE_PICK_TOPMOST);\r\n\r\n            var obj = m_lastPickInfo.picked;\r\n\r\n            if (obj) {\r\n                Cortona3DSolo.dispatch('touch.didObjectMove', obj.handle, obj.name);\r\n            }\r\n\r\n            var handleNew = obj ? obj.handle : null;\r\n\r\n            if (handleOld !== handleNew) {\r\n                if (overObject) {\r\n                    createStealthyLayer();\r\n                    Cortona3DSolo.dispatch('touch.didObjectOut', handleOld, overObject.name);\r\n                }\r\n                if (obj) {\r\n                    Cortona3DSolo.dispatch('touch.didObjectEnter', handleNew, obj.name);\r\n                }\r\n            }\r\n\r\n            overObject = obj;\r\n        } else {\r\n            if (overObject) {\r\n                createStealthyLayer();\r\n                Cortona3DSolo.dispatch('touch.didObjectOut', handleOld, overObject.name);\r\n                overObject = null;\r\n            }\r\n        }\r\n        args = ['touch.didPointerMove'].concat(mouseArguments);\r\n        Cortona3DSolo.dispatch.apply(Cortona3DSolo, args);\r\n    },\r\n    pointerenter: function (event) {\r\n        if (stealthyLayer) return;\r\n        Cortona3DSolo.dispatch('touch.didPointerEnter');\r\n        lastMouseMove = null;\r\n    },\r\n    pointerout: function (event) {\r\n        if (stealthyLayer) return;\r\n        if (overObject) {\r\n            Cortona3DSolo.dispatch('touch.didObjectOut', overObject.handle, overObject.name);\r\n            overObject = null;\r\n            createStealthyLayer();\r\n        }\r\n        Cortona3DSolo.dispatch('touch.didPointerOut');\r\n        lastMouseMove = null;\r\n    },\r\n    pointerdown: function (event) {\r\n        lastMouseArguments = getMouseEventArguments(event);\r\n        args = ['touch.didPointerDown'].concat(lastMouseArguments);\r\n        Cortona3DSolo.dispatch.apply(Cortona3DSolo, args);\r\n    },\r\n    pointerup: function (event) {\r\n        var target = event.target || event.srcElement,\r\n            rect = target.getBoundingClientRect(),\r\n            offsetX = event.clientX - rect.left,\r\n            offsetY = event.clientY - rect.top,\r\n            mouseArguments = getMouseEventArguments(event);\r\n\r\n        m_lastPickInfo = pickObjectChain(offsetX, offsetY, options.FEATURE_PICK_TOPMOST);\r\n\r\n        var obj = m_lastPickInfo.picked;\r\n\r\n        if (!isMouseMoved(lastMouseArguments, mouseArguments)) {\r\n            if (!obj) obj = {\r\n                handle: 0,\r\n                name: ''\r\n            };\r\n            if (!debounceTimeout[obj.name]) {\r\n                debounceTimeout[obj.name] = {\r\n                    lpi: m_lastPickInfo,\r\n                    t: setTimeout(function () {\r\n                        var currentLastPickInfo = m_lastPickInfo;\r\n                        m_lastPickInfo = debounceTimeout[obj.name].lpi;\r\n                        delete debounceTimeout[obj.name];\r\n                        args = ['touch.didObjectClick', obj.handle, obj.name].concat(mouseArguments);\r\n                        Cortona3DSolo.dispatch.apply(Cortona3DSolo, args);\r\n                        m_lastPickInfo = currentLastPickInfo;\r\n                    }, DOUBLE_TAP_TIME)\r\n                };\r\n            } else {\r\n                clearTimeout(debounceTimeout[obj.name].t);\r\n                delete debounceTimeout[obj.name];\r\n            }\r\n        }\r\n\r\n        var handleOld = overObject ? overObject.handle : null,\r\n            handleNew = obj ? obj.handle : null;\r\n\r\n        if (handleOld !== handleNew) {\r\n            if (overObject) {\r\n                createStealthyLayer();\r\n                Cortona3DSolo.dispatch('touch.didObjectOut', handleOld, overObject.name);\r\n            }\r\n            if (obj) {\r\n                Cortona3DSolo.dispatch('touch.didObjectEnter', handleNew, obj.name);\r\n            }\r\n        }\r\n\r\n        overObject = obj;\r\n\r\n        args = ['touch.didPointerUp'].concat(mouseArguments);\r\n        Cortona3DSolo.dispatch.apply(Cortona3DSolo, args);\r\n\r\n        lastMouseArguments = null;\r\n    }\r\n};\r\n\r\nif (navigator.pointerEnabled === false) {\r\n    for (var eventName in eventHandlers) {\r\n        if (eventName.indexOf('pointer') === 0) {\r\n            eventHandlers[eventName.replace(/^pointer/, 'mouse')] = eventHandlers[eventName];\r\n            delete eventHandlers[eventName];\r\n        }\r\n    }\r\n}\r\n\r\nfunction attach() {\r\n    if (Cortona3DSolo.core && Cortona3DSolo.core.runtimeReady && Cortona3DSolo.core.canvas) {\r\n        var canvas = Cortona3DSolo.core.canvas;\r\n        for (eventName in eventHandlers) {\r\n            canvas.addEventListener(eventName, eventHandlers[eventName], false);\r\n        }\r\n    } else {\r\n        Cortona3DSolo.on('app.firstFrameDidArrive', attach);\r\n    }\r\n}\r\n\r\nattach();\r\n\r\n/**\r\n * Search for all 3D objects through which the beam passes from a given point on the 3D window in the direction of the camera.\r\n * \r\n * @function pickObjectsRightThrough\r\n * @memberof module:solo.touch\r\n * @param {number} x - The X coordinate relative to the element `<canvas>`\r\n * @param {number} y - The Y coordinate relative to the element `<canvas>`\r\n * @returns {Handle[]} An array of all found 3D objects\r\n */\r\nfunction pickObjectsRightThrough(x, y) {\r\n    var chain = [],\r\n        obj;\r\n\r\n    obj = Cortona3DSolo.app.pickObject(x, y, false);\r\n\r\n    while (obj) {\r\n        chain.push(obj.handle);\r\n        Cortona3DSolo.app.setObjectIgnorableByPicker(obj.handle, true);\r\n        obj = Cortona3DSolo.app.pickObject(x, y, false);\r\n    }\r\n\r\n    chain.forEach(function (handle) {\r\n        Cortona3DSolo.app.setObjectIgnorableByPicker(handle, false);\r\n    });\r\n\r\n    return chain;\r\n}\r\n\r\nfunction pickObjectChain(x, y, topMost) {\r\n    var chain = [],\r\n        handle,\r\n        obj = Cortona3DSolo.app.pickObject(x, y, !!topMost);\r\n\r\n    if (obj) {\r\n        for (handle = obj.handle; handle; handle = Cortona3DSolo.app.getParentObject(handle)) {\r\n            chain.push(handle);\r\n        }\r\n    }\r\n    return {\r\n        x: x,\r\n        y: y,\r\n        picked: obj,\r\n        chain: chain\r\n    };\r\n}\r\n\r\n\r\nvar soloExports = {\r\n    /**\r\n     * The namespace to work with pointer-events in the 3D window.\r\n     * \r\n     * Requires the use of internal modules `\"touch\"` and `\"core\"`.\r\n     * \r\n     * @requires touch\r\n     * @requires core\r\n     * @namespace\r\n     * @memberof module:solo\r\n     * @since 1.5.6\r\n     * @example\r\nCortona3DSolo.use('core');\r\nCortona3DSolo.use('touch');\r\nCortona3DSolo.on('touch.didObjectClick', function () {\r\n    Cortona3DSolo.app.procedure.play();\r\n});\r\nCortona3DSolo.initialize('procedure.wrl');\r\n     */\r\n    touch: {\r\n        /**\r\n         * @static\r\n         * @member {object} options\r\n         * @property {number} options.MOUSE_CLICK_THRESHOLD=3 \r\n         * @property {boolean} options.FEATURE_PICK_TOPMOST=true You must use `false` in case of an interactive procedure.\r\n         * @memberof module:solo.touch\r\n         */\r\n        options: options,\r\n        pickObjectsRightThrough: pickObjectsRightThrough,\r\n        pickObjectChain: pickObjectChain\r\n\r\n        //didObjectEnter\r\n        //didObjectOut\r\n        //didObjectMove\r\n        //didObjectClick\r\n\r\n        //didPointerMove\r\n        //didPointerEnter\r\n        //didPointerDown\r\n        //didPointerUp\r\n    }\r\n};\r\n\r\n/**\r\n * Gets the information about the process of the last selection of a 3D object when pointer-events occur.\r\n * \r\n * @static\r\n * @member {PickInfo} lastPickInfo\r\n * @memberof module:solo.touch\r\n */\r\n\r\nObject.defineProperty(soloExports.touch, 'lastPickInfo', {\r\n    get: function () {\r\n        return m_lastPickInfo;\r\n    },\r\n    enumerable: true\r\n});\r\n\r\nmodule.exports = {\r\n    configure: function (options) {\r\n        util.expand(soloExports.touch.options, options);\r\n        return soloExports;\r\n    }\r\n};\r\n\r\n/**\r\n * The hook method is invoked when a pointer is moved over the object in the 3D window.\r\n * \r\n * @function didObjectEnter\r\n * @abstract \r\n * @memberof module:solo.touch\r\n * @param {Handle} handle - Handle of the object in the 3D window\r\n * @param {string} name - Name of the object in the 3D window\r\n * @see The corresponding event {@link event:\"touch.didObjectEnter\" \"touch.didObjectEnter\"}\r\n */\r\n/**\r\n * @event \"touch.didObjectEnter\"\r\n * @see The corresponding hook method {@link module:solo.touch.didObjectEnter touch.didObjectEnter()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked when a pointer is moved off the object in the 3D window.\r\n * \r\n * @function didObjectOut\r\n * @abstract \r\n * @memberof module:solo.touch\r\n * @param {Handle} handle - Handle of the object in the 3D window\r\n * @param {string} name - Name of the object in the 3D window\r\n * @see The corresponding event {@link event:\"touch.didObjectOut\" \"touch.didObjectOut\"}\r\n */\r\n/**\r\n * @event \"touch.didObjectOut\"\r\n * @see The corresponding hook method {@link module:solo.touch.didObjectOut touch.didObjectOut()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked when a pointer is moved while over an object in the 3D window.\r\n * \r\n * @function didObjectMove\r\n * @abstract \r\n * @memberof module:solo.touch\r\n * @param {Handle} handle - Handle of the object in the 3D window\r\n * @param {string} name - Name of the object in the 3D window\r\n * @see The corresponding event {@link event:\"touch.didObjectMove\" \"touch.didObjectMove\"}\r\n */\r\n/**\r\n * @event \"touch.didObjectMove\"\r\n * @see The corresponding hook method {@link module:solo.touch.didObjectMove touch.didObjectMove()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked when the pointer was in a “pressed” and then “released” state on an object in the 3D window.\r\n * \r\n * @function didObjectClick\r\n * @abstract \r\n * @memberof module:solo.touch\r\n * @param {Handle} handle - Handle of the object in the 3D window\r\n * @param {string} name - Name of the object in the 3D window\r\n * @param {number} x - The X coordinate of the pointer in local (canvas) coordinates\r\n * @param {number} y - The Y coordinate of the pointer in local (canvas) coordinates\r\n * @param {number} buttons - Bitwise flags of the buttons depressed when the event was fired: \r\n * - Left=1 \r\n * - Right=2 \r\n * - Middle (wheel)=4 \r\n * @param {number} keys - Bitwise control key flags that were pressed when the event was fired: \r\n * - Shift=1\r\n * - Ctrl=2\r\n * - Alt=4\r\n * @param {object} event - Source PointerEvent or MouseEvent object\r\n * @see The corresponding event {@link event:\"touch.didObjectClick\" \"touch.didObjectClick\"}\r\n */\r\n/**\r\n * @event \"touch.didObjectClick\"\r\n * @see The corresponding hook method {@link module:solo.touch.didObjectClick touch.didObjectClick()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked when a pointer is moved in the 3D window.\r\n * \r\n * @function didPointerMove\r\n * @abstract \r\n * @memberof module:solo.touch\r\n * @param {number} x - The X coordinate of the pointer in local (canvas) coordinates\r\n * @param {number} y - The Y coordinate of the pointer in local (canvas) coordinates\r\n * @param {number} buttons - Bitwise flags of the buttons depressed when the event was fired:\r\n * - Left=1\r\n * - Right=2\r\n * - Middle (wheel)=4 \r\n * @param {number} keys - Bitwise control key flags that were pressed when the event was fired: \r\n * - Shift=1\r\n * - Ctrl=2\r\n * - Alt=4\r\n * @param {object} event - Source PointerEvent or MouseEvent object\r\n * @see The corresponding event {@link event:\"touch.didPointerMove\" \"touch.didPointerMove\"}\r\n */\r\n/**\r\n * @event \"touch.didPointerMove\"\r\n * @see The corresponding hook method {@link module:solo.touch.didPointerMove touch.didPointerMove()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked when a pointer is moved over the 3D window.\r\n * \r\n * @function didPointerEnter\r\n * @abstract \r\n * @memberof module:solo.touch\r\n * @see The corresponding event {@link event:\"touch.didPointerEnter\" \"touch.didPointerEnter\"}\r\n */\r\n/**\r\n * @event \"touch.didPointerEnter\"\r\n * @see The corresponding hook method {@link module:solo.touch.didPointerEnter touch.didPointerEnter()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked when a pointer is moved off the 3D window.\r\n * \r\n * @function didPointerOut\r\n * @abstract \r\n * @memberof module:solo.touch\r\n * @see The corresponding event {@link event:\"touch.didPointerOut\" \"touch.didPointerOut\"}\r\n */\r\n/**\r\n * @event \"touch.didPointerOut\"\r\n * @see The corresponding hook method {@link module:solo.touch.didPointerOut touch.didPointerOut()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked when a pointing device button is pressed on the 3D window.\r\n * \r\n * @function didPointerDown\r\n * @abstract \r\n * @memberof module:solo.touch\r\n * @param {number} x - The X coordinate of the pointer in local (canvas) coordinates\r\n * @param {number} y - The Y coordinate of the pointer in local (canvas) coordinates\r\n * @param {number} buttons - The button number that was pressed when the event was fired: \r\n * - Left=1\r\n * - Right=2\r\n * - Middle (wheel)=4\r\n * @param {number} keys - Bitwise control key flags that were pressed when the event was fired:\r\n * - Shift=1\r\n * - Ctrl=2\r\n * - Alt=4\r\n * @param {object} event - Source PointerEvent or MouseEvent object\r\n * @see The corresponding event {@link event:\"touch.didPointerDown\" \"touch.didPointerDown\"}\r\n */\r\n/**\r\n * @event \"touch.didPointerDown\"\r\n * @see The corresponding hook method {@link module:solo.touch.didPointerDown touch.didPointerDown()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked when a pointing device button is released over the 3D window.\r\n * \r\n * @function didPointerUp\r\n * @abstract \r\n * @memberof module:solo.touch\r\n * @param {number} x - The X coordinate of the pointer in local (canvas) coordinates\r\n * @param {number} y - The Y coordinate of the pointer in local (canvas) coordinates\r\n * @param {number} buttons - Bitwise flags of the buttons depressed when the event was fired:\r\n * - Left=1\r\n * - Right=2\r\n * - Middle (wheel)=4 \r\n * @param {number} keys - Bitwise control key flags that were pressed when the event was fired:\r\n * - Shift=1\r\n * - Ctrl=2\r\n * - Alt=4\r\n * @param {object} event - Source PointerEvent or MouseEvent object\r\n * @see The corresponding event {@link event:\"touch.didPointerUp\" \"touch.didPointerUp\"}\r\n */\r\n/**\r\n * @event \"touch.didPointerUp\"\r\n * @see The corresponding hook method {@link module:solo.touch.didPointerUp touch.didPointerUp()}\r\n */\r\n\r\n/**\r\n * Information about the pick process of a 3D object, for example:\r\n * ```\r\n * { \r\n *     x: 153,\r\n *     y: 27,\r\n *     picked: 5698800,\r\n *     chain: [5698800,6100248,6100664,6101200,6101848]\r\n * }\r\n * ```\r\n * @typedef {object} PickInfo\r\n * @param {number} x - The X coordinate of 3D window\r\n * @param {number} y - The Y coordinate of 3D window\r\n * @prop {Handle} picked A handle of the picked 3D object\r\n * @prop {Handle[]} chain The picked 3D object and its ancestors. The ancestors of the picked 3D object consist of the parent of the picked 3D object and the parent's parent and so on. The root element is last.\r\n * @see {@link module:solo.touch.lastPickInfo touch.lastPickInfo}\r\n */\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(5)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".skin-holder{position:absolute;height:100%;width:100%;overflow:hidden;pointer-events:none;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-touch-action:none;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.skin-holder>*{pointer-events:auto}.skin-holder button,.skin-holder input[type=button],.skin-holder input[type=checkbox],.skin-holder select{display:inline-block;border:none;padding:.4em;cursor:pointer;font-family:inherit;font-size:inherit;color:inherit}.skin-holder button,.skin-holder input[type=button]{min-width:4em}.skin-holder input[type=range]{width:100%;margin:0;padding:0}.skin-holder label{font-weight:700;margin-right:.5em}.skin-holder label>*{margin-left:.5em}.skin-holder .skin-container{display:-ms-flexbox;display:flex}.skin-holder .skin-container.row{-ms-flex-direction:row;flex-direction:row}.skin-holder .skin-container.col{-ms-flex-direction:column;flex-direction:column}.skin-holder .skin-toolbar{z-index:100;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center;white-space:nowrap;padding:0 .5em;height:3em;min-height:3em;-ms-flex:0 0 auto;flex:0 0 auto}.skin-holder .skin-toolbar .skin-container{-ms-flex-align:center;align-items:center;-ms-flex-positive:1;flex-grow:1;margin:0 .5em}.skin-holder .skin-toolbar .skin-container.left{-ms-flex-pack:start;justify-content:flex-start;-ms-flex-order:-1;order:-1;-ms-flex-positive:0;flex-grow:0;margin-left:0}.skin-holder .skin-toolbar .skin-container.right{-ms-flex-pack:end;justify-content:flex-end;-ms-flex-order:1;order:1;-ms-flex-positive:0;flex-grow:0;margin-right:0}.skin-holder .skin-toolbar .skin-control{margin-right:.5em}.skin-holder .skin-panel{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;padding:0 1em}.skin-holder .skin-img-button{background-repeat:no-repeat;margin:0;display:inline-block;vertical-align:top}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(5)(false);\n// imports\n\n\n// module\nexports.push([module.i, \"body,html{margin:0;height:100%}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(5)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".cortona3dsolo-svg{width:100%;height:100%;display:block;position:absolute}.cortona3dsolo-svg a:hover{cursor:pointer;text-decoration:none}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(5)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".cortona3dsolo-canvas{position:absolute;width:100%;height:100%;display:block}.cortona3dsolo-popover{-ms-touch-action:none;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.tiramisu-speaker{display:inline-block;box-sizing:content-box}.tiramisu-panel{white-space:normal;word-wrap:break-word}.dpl-table{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:100%;padding:0;border-spacing:0;border-collapse:collapse;cursor:default;border:1px solid grey}.dpl-table td{padding:4px;vertical-align:top;border-right:1px solid grey}.dpl-table thead{font-size:10pt}.dpl-table tbody{margin:0;padding:0;font-size:10pt}.dpl-table thead td{border-bottom:1px solid grey;background:linear-gradient(180deg,#fff 0,#f8f8f8)}.dpl-table tbody tr.selected{background:linear-gradient(180deg,#abd3ee 0,#89c3eb)}.dpl-table tbody td.hover{background-color:#c8e8ff}.dpl-table tbody tr.hidden{display:none}.dpl-table thead pre{font-family:sans;padding:0;margin:0}.dpl-table td.strut{padding:0 4px}.dpl-table td.strut div{height:1px;overflow:hidden;white-space:nowrap}.dpl-table tr{transition:all .3s}.dpl-table tr.hover,.dpl-table tr:hover{background-color:#c8e8ff}.dpl-table td:last-of-type{border-right:0}.dpl-table tr:last-child td{border-bottom:1px solid grey}.dpl-table pre,pre.dpl-table-measure{margin-top:0;margin-bottom:0}.dpl-checkbox{padding:0;margin:0 .4em 0 0;display:inline}.dpl-checkbox:hover{color:#367ebd}.tiramisu-proc-title{font-weight:700}.tiramisu-proc-item,.tiramisu-proc-title{display:block;padding:4px;margin-bottom:2px;cursor:default}.tiramisu-proc-item{border-radius:10px;border:1px solid transparent;transition:background-color .3s ease-out,border-color .3s ease-out}.tiramisu-proc-item.highlighted{background-color:#e5f4ff;border:1px solid #c8e8ff}.tiramisu-proc-item.selected{background-color:#c8e8ff;border:1px solid #80a2bc}.tiramisu-proc-item:hover{background-color:#e5f4ff;border:1px solid #c8e8ff}.tiramisu-proc-item.selected:hover{background-color:#a3daff;border:1px solid #80a2bc}.tiramisu-proc-item-number{display:table-cell;width:24px;padding-right:6pt;cursor:default}.tiramisu-proc-item-content{display:table-cell;width:100%;cursor:default}.thumbnail{max-width:100%;max-height:100%;margin-top:3pt}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(5)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".tiramisu-panel-group{position:absolute;left:0;top:0;width:100%;height:100%;overflow:hidden;visibility:hidden}.tiramisu-panel{position:absolute;box-sizing:border-box;overflow:hidden;pointer-events:none;font-family:serif;font-size:10pt;padding:0;margin:0;border-style:solid;transform-style:preserve-3d}.tiramisu-panel>div{position:relative;top:50%;transform:translateY(-50%)}.tiramisu-panel>div>img{height:auto;transform:translateY(-50%)}.tiramisu-panel>div>canvas,.tiramisu-panel>div>img{display:block;max-height:100%;max-width:100%;margin:auto;position:relative;top:50%}.tiramisu-panel>div>canvas{transform:translateY(-50%) scaleY(-1)}.tiramisu-panel p{margin:0;padding:0}.tiramisu-panel-measure{position:absolute;font-family:serif;font-size:10pt;visibility:hidden;padding:0;margin:0;left:0;top:0}.tiramisu-banner{right:8px;overflow:hidden;padding:0;margin:0;z-index:10}.tiramisu-banner,.tiramisu-speaker{position:absolute;bottom:8px;visibility:visible;pointer-events:none}.tiramisu-speaker{display:block-inline;z-index:100;background-color:hsla(0,0%,94%,.5);border-radius:50%;padding:6px;left:8px;width:26px;height:26px;opacity:0;transition:opacity .3s ease-in-out}.tiramisu-speaker div{width:0;height:0;border:6px solid transparent;border-right-color:inherit;border-left:none;box-shadow:inset 10px 0;display:inline-block;padding:5px 3px;margin:2px}.tiramisu-speaker span{position:absolute;display:inline-block;border:1px solid transparent;border-right:1px solid #444;border-radius:50%;margin:auto;top:0;bottom:0;right:0;animation:tiramisu-wave-animation 1s linear 0s infinite alternate}.tiramisu-speaker span:nth-child(2){width:13px;height:13px;left:1px}.tiramisu-speaker span:nth-child(3){width:19px;height:19px;left:1px;animation-delay:.3s}.tiramisu-speaker span:last-child{width:25px;height:25px;left:0;animation-delay:.6s}@keyframes tiramisu-wave-animation{0%{opacity:1}to{opacity:.1}}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(process, global) {/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE\n * @version   v4.2.8+1e68dce6\n */\n\n(function (global, factory) {\n\t true ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.ES6Promise = factory());\n}(this, (function () { 'use strict';\n\nfunction objectOrFunction(x) {\n  var type = typeof x;\n  return x !== null && (type === 'object' || type === 'function');\n}\n\nfunction isFunction(x) {\n  return typeof x === 'function';\n}\n\n\n\nvar _isArray = void 0;\nif (Array.isArray) {\n  _isArray = Array.isArray;\n} else {\n  _isArray = function (x) {\n    return Object.prototype.toString.call(x) === '[object Array]';\n  };\n}\n\nvar isArray = _isArray;\n\nvar len = 0;\nvar vertxNext = void 0;\nvar customSchedulerFn = void 0;\n\nvar asap = function asap(callback, arg) {\n  queue[len] = callback;\n  queue[len + 1] = arg;\n  len += 2;\n  if (len === 2) {\n    // If len is 2, that means that we need to schedule an async flush.\n    // If additional callbacks are queued before the queue is flushed, they\n    // will be processed by this flush that we are scheduling.\n    if (customSchedulerFn) {\n      customSchedulerFn(flush);\n    } else {\n      scheduleFlush();\n    }\n  }\n};\n\nfunction setScheduler(scheduleFn) {\n  customSchedulerFn = scheduleFn;\n}\n\nfunction setAsap(asapFn) {\n  asap = asapFn;\n}\n\nvar browserWindow = typeof window !== 'undefined' ? window : undefined;\nvar browserGlobal = browserWindow || {};\nvar BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;\nvar isNode = typeof self === 'undefined' && typeof process !== 'undefined' && {}.toString.call(process) === '[object process]';\n\n// test for web worker but not in IE10\nvar isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';\n\n// node\nfunction useNextTick() {\n  // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n  // see https://github.com/cujojs/when/issues/410 for details\n  return function () {\n    return process.nextTick(flush);\n  };\n}\n\n// vertx\nfunction useVertxTimer() {\n  if (typeof vertxNext !== 'undefined') {\n    return function () {\n      vertxNext(flush);\n    };\n  }\n\n  return useSetTimeout();\n}\n\nfunction useMutationObserver() {\n  var iterations = 0;\n  var observer = new BrowserMutationObserver(flush);\n  var node = document.createTextNode('');\n  observer.observe(node, { characterData: true });\n\n  return function () {\n    node.data = iterations = ++iterations % 2;\n  };\n}\n\n// web worker\nfunction useMessageChannel() {\n  var channel = new MessageChannel();\n  channel.port1.onmessage = flush;\n  return function () {\n    return channel.port2.postMessage(0);\n  };\n}\n\nfunction useSetTimeout() {\n  // Store setTimeout reference so es6-promise will be unaffected by\n  // other code modifying setTimeout (like sinon.useFakeTimers())\n  var globalSetTimeout = setTimeout;\n  return function () {\n    return globalSetTimeout(flush, 1);\n  };\n}\n\nvar queue = new Array(1000);\nfunction flush() {\n  for (var i = 0; i < len; i += 2) {\n    var callback = queue[i];\n    var arg = queue[i + 1];\n\n    callback(arg);\n\n    queue[i] = undefined;\n    queue[i + 1] = undefined;\n  }\n\n  len = 0;\n}\n\nfunction attemptVertx() {\n  try {\n    var vertx = Function('return this')().require('vertx');\n    vertxNext = vertx.runOnLoop || vertx.runOnContext;\n    return useVertxTimer();\n  } catch (e) {\n    return useSetTimeout();\n  }\n}\n\nvar scheduleFlush = void 0;\n// Decide what async method to use to triggering processing of queued callbacks:\nif (isNode) {\n  scheduleFlush = useNextTick();\n} else if (BrowserMutationObserver) {\n  scheduleFlush = useMutationObserver();\n} else if (isWorker) {\n  scheduleFlush = useMessageChannel();\n} else if (browserWindow === undefined && \"function\" === 'function') {\n  scheduleFlush = attemptVertx();\n} else {\n  scheduleFlush = useSetTimeout();\n}\n\nfunction then(onFulfillment, onRejection) {\n  var parent = this;\n\n  var child = new this.constructor(noop);\n\n  if (child[PROMISE_ID] === undefined) {\n    makePromise(child);\n  }\n\n  var _state = parent._state;\n\n\n  if (_state) {\n    var callback = arguments[_state - 1];\n    asap(function () {\n      return invokeCallback(_state, child, callback, parent._result);\n    });\n  } else {\n    subscribe(parent, child, onFulfillment, onRejection);\n  }\n\n  return child;\n}\n\n/**\n  `Promise.resolve` returns a promise that will become resolved with the\n  passed `value`. It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    resolve(1);\n  });\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.resolve(1);\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  @method resolve\n  @static\n  @param {Any} value value that the returned promise will be resolved with\n  Useful for tooling.\n  @return {Promise} a promise that will become fulfilled with the given\n  `value`\n*/\nfunction resolve$1(object) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (object && typeof object === 'object' && object.constructor === Constructor) {\n    return object;\n  }\n\n  var promise = new Constructor(noop);\n  resolve(promise, object);\n  return promise;\n}\n\nvar PROMISE_ID = Math.random().toString(36).substring(2);\n\nfunction noop() {}\n\nvar PENDING = void 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\n\nfunction selfFulfillment() {\n  return new TypeError(\"You cannot resolve a promise with itself\");\n}\n\nfunction cannotReturnOwn() {\n  return new TypeError('A promises callback cannot return that same promise.');\n}\n\nfunction tryThen(then$$1, value, fulfillmentHandler, rejectionHandler) {\n  try {\n    then$$1.call(value, fulfillmentHandler, rejectionHandler);\n  } catch (e) {\n    return e;\n  }\n}\n\nfunction handleForeignThenable(promise, thenable, then$$1) {\n  asap(function (promise) {\n    var sealed = false;\n    var error = tryThen(then$$1, thenable, function (value) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n      if (thenable !== value) {\n        resolve(promise, value);\n      } else {\n        fulfill(promise, value);\n      }\n    }, function (reason) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n\n      reject(promise, reason);\n    }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n    if (!sealed && error) {\n      sealed = true;\n      reject(promise, error);\n    }\n  }, promise);\n}\n\nfunction handleOwnThenable(promise, thenable) {\n  if (thenable._state === FULFILLED) {\n    fulfill(promise, thenable._result);\n  } else if (thenable._state === REJECTED) {\n    reject(promise, thenable._result);\n  } else {\n    subscribe(thenable, undefined, function (value) {\n      return resolve(promise, value);\n    }, function (reason) {\n      return reject(promise, reason);\n    });\n  }\n}\n\nfunction handleMaybeThenable(promise, maybeThenable, then$$1) {\n  if (maybeThenable.constructor === promise.constructor && then$$1 === then && maybeThenable.constructor.resolve === resolve$1) {\n    handleOwnThenable(promise, maybeThenable);\n  } else {\n    if (then$$1 === undefined) {\n      fulfill(promise, maybeThenable);\n    } else if (isFunction(then$$1)) {\n      handleForeignThenable(promise, maybeThenable, then$$1);\n    } else {\n      fulfill(promise, maybeThenable);\n    }\n  }\n}\n\nfunction resolve(promise, value) {\n  if (promise === value) {\n    reject(promise, selfFulfillment());\n  } else if (objectOrFunction(value)) {\n    var then$$1 = void 0;\n    try {\n      then$$1 = value.then;\n    } catch (error) {\n      reject(promise, error);\n      return;\n    }\n    handleMaybeThenable(promise, value, then$$1);\n  } else {\n    fulfill(promise, value);\n  }\n}\n\nfunction publishRejection(promise) {\n  if (promise._onerror) {\n    promise._onerror(promise._result);\n  }\n\n  publish(promise);\n}\n\nfunction fulfill(promise, value) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n\n  promise._result = value;\n  promise._state = FULFILLED;\n\n  if (promise._subscribers.length !== 0) {\n    asap(publish, promise);\n  }\n}\n\nfunction reject(promise, reason) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n  promise._state = REJECTED;\n  promise._result = reason;\n\n  asap(publishRejection, promise);\n}\n\nfunction subscribe(parent, child, onFulfillment, onRejection) {\n  var _subscribers = parent._subscribers;\n  var length = _subscribers.length;\n\n\n  parent._onerror = null;\n\n  _subscribers[length] = child;\n  _subscribers[length + FULFILLED] = onFulfillment;\n  _subscribers[length + REJECTED] = onRejection;\n\n  if (length === 0 && parent._state) {\n    asap(publish, parent);\n  }\n}\n\nfunction publish(promise) {\n  var subscribers = promise._subscribers;\n  var settled = promise._state;\n\n  if (subscribers.length === 0) {\n    return;\n  }\n\n  var child = void 0,\n      callback = void 0,\n      detail = promise._result;\n\n  for (var i = 0; i < subscribers.length; i += 3) {\n    child = subscribers[i];\n    callback = subscribers[i + settled];\n\n    if (child) {\n      invokeCallback(settled, child, callback, detail);\n    } else {\n      callback(detail);\n    }\n  }\n\n  promise._subscribers.length = 0;\n}\n\nfunction invokeCallback(settled, promise, callback, detail) {\n  var hasCallback = isFunction(callback),\n      value = void 0,\n      error = void 0,\n      succeeded = true;\n\n  if (hasCallback) {\n    try {\n      value = callback(detail);\n    } catch (e) {\n      succeeded = false;\n      error = e;\n    }\n\n    if (promise === value) {\n      reject(promise, cannotReturnOwn());\n      return;\n    }\n  } else {\n    value = detail;\n  }\n\n  if (promise._state !== PENDING) {\n    // noop\n  } else if (hasCallback && succeeded) {\n    resolve(promise, value);\n  } else if (succeeded === false) {\n    reject(promise, error);\n  } else if (settled === FULFILLED) {\n    fulfill(promise, value);\n  } else if (settled === REJECTED) {\n    reject(promise, value);\n  }\n}\n\nfunction initializePromise(promise, resolver) {\n  try {\n    resolver(function resolvePromise(value) {\n      resolve(promise, value);\n    }, function rejectPromise(reason) {\n      reject(promise, reason);\n    });\n  } catch (e) {\n    reject(promise, e);\n  }\n}\n\nvar id = 0;\nfunction nextId() {\n  return id++;\n}\n\nfunction makePromise(promise) {\n  promise[PROMISE_ID] = id++;\n  promise._state = undefined;\n  promise._result = undefined;\n  promise._subscribers = [];\n}\n\nfunction validationError() {\n  return new Error('Array Methods must be provided an Array');\n}\n\nvar Enumerator = function () {\n  function Enumerator(Constructor, input) {\n    this._instanceConstructor = Constructor;\n    this.promise = new Constructor(noop);\n\n    if (!this.promise[PROMISE_ID]) {\n      makePromise(this.promise);\n    }\n\n    if (isArray(input)) {\n      this.length = input.length;\n      this._remaining = input.length;\n\n      this._result = new Array(this.length);\n\n      if (this.length === 0) {\n        fulfill(this.promise, this._result);\n      } else {\n        this.length = this.length || 0;\n        this._enumerate(input);\n        if (this._remaining === 0) {\n          fulfill(this.promise, this._result);\n        }\n      }\n    } else {\n      reject(this.promise, validationError());\n    }\n  }\n\n  Enumerator.prototype._enumerate = function _enumerate(input) {\n    for (var i = 0; this._state === PENDING && i < input.length; i++) {\n      this._eachEntry(input[i], i);\n    }\n  };\n\n  Enumerator.prototype._eachEntry = function _eachEntry(entry, i) {\n    var c = this._instanceConstructor;\n    var resolve$$1 = c.resolve;\n\n\n    if (resolve$$1 === resolve$1) {\n      var _then = void 0;\n      var error = void 0;\n      var didError = false;\n      try {\n        _then = entry.then;\n      } catch (e) {\n        didError = true;\n        error = e;\n      }\n\n      if (_then === then && entry._state !== PENDING) {\n        this._settledAt(entry._state, i, entry._result);\n      } else if (typeof _then !== 'function') {\n        this._remaining--;\n        this._result[i] = entry;\n      } else if (c === Promise$1) {\n        var promise = new c(noop);\n        if (didError) {\n          reject(promise, error);\n        } else {\n          handleMaybeThenable(promise, entry, _then);\n        }\n        this._willSettleAt(promise, i);\n      } else {\n        this._willSettleAt(new c(function (resolve$$1) {\n          return resolve$$1(entry);\n        }), i);\n      }\n    } else {\n      this._willSettleAt(resolve$$1(entry), i);\n    }\n  };\n\n  Enumerator.prototype._settledAt = function _settledAt(state, i, value) {\n    var promise = this.promise;\n\n\n    if (promise._state === PENDING) {\n      this._remaining--;\n\n      if (state === REJECTED) {\n        reject(promise, value);\n      } else {\n        this._result[i] = value;\n      }\n    }\n\n    if (this._remaining === 0) {\n      fulfill(promise, this._result);\n    }\n  };\n\n  Enumerator.prototype._willSettleAt = function _willSettleAt(promise, i) {\n    var enumerator = this;\n\n    subscribe(promise, undefined, function (value) {\n      return enumerator._settledAt(FULFILLED, i, value);\n    }, function (reason) {\n      return enumerator._settledAt(REJECTED, i, reason);\n    });\n  };\n\n  return Enumerator;\n}();\n\n/**\n  `Promise.all` accepts an array of promises, and returns a new promise which\n  is fulfilled with an array of fulfillment values for the passed promises, or\n  rejected with the reason of the first passed promise to be rejected. It casts all\n  elements of the passed iterable to promises as it runs this algorithm.\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = resolve(2);\n  let promise3 = resolve(3);\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // The array here would be [ 1, 2, 3 ];\n  });\n  ```\n\n  If any of the `promises` given to `all` are rejected, the first promise\n  that is rejected will be given as an argument to the returned promises's\n  rejection handler. For example:\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = reject(new Error(\"2\"));\n  let promise3 = reject(new Error(\"3\"));\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // Code here never runs because there are rejected promises!\n  }, function(error) {\n    // error.message === \"2\"\n  });\n  ```\n\n  @method all\n  @static\n  @param {Array} entries array of promises\n  @param {String} label optional string for labeling the promise.\n  Useful for tooling.\n  @return {Promise} promise that is fulfilled when all `promises` have been\n  fulfilled, or rejected if any of them become rejected.\n  @static\n*/\nfunction all(entries) {\n  return new Enumerator(this, entries).promise;\n}\n\n/**\n  `Promise.race` returns a new promise which is settled in the same way as the\n  first passed promise to settle.\n\n  Example:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 2');\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // result === 'promise 2' because it was resolved before promise1\n    // was resolved.\n  });\n  ```\n\n  `Promise.race` is deterministic in that only the state of the first\n  settled promise matters. For example, even if other promises given to the\n  `promises` array argument are resolved, but the first settled promise has\n  become rejected before the other promises became fulfilled, the returned\n  promise will become rejected:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      reject(new Error('promise 2'));\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // Code here never runs\n  }, function(reason){\n    // reason.message === 'promise 2' because promise 2 became rejected before\n    // promise 1 became fulfilled\n  });\n  ```\n\n  An example real-world use case is implementing timeouts:\n\n  ```javascript\n  Promise.race([ajax('foo.json'), timeout(5000)])\n  ```\n\n  @method race\n  @static\n  @param {Array} promises array of promises to observe\n  Useful for tooling.\n  @return {Promise} a promise which settles in the same way as the first passed\n  promise to settle.\n*/\nfunction race(entries) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (!isArray(entries)) {\n    return new Constructor(function (_, reject) {\n      return reject(new TypeError('You must pass an array to race.'));\n    });\n  } else {\n    return new Constructor(function (resolve, reject) {\n      var length = entries.length;\n      for (var i = 0; i < length; i++) {\n        Constructor.resolve(entries[i]).then(resolve, reject);\n      }\n    });\n  }\n}\n\n/**\n  `Promise.reject` returns a promise rejected with the passed `reason`.\n  It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    reject(new Error('WHOOPS'));\n  });\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.reject(new Error('WHOOPS'));\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  @method reject\n  @static\n  @param {Any} reason value that the returned promise will be rejected with.\n  Useful for tooling.\n  @return {Promise} a promise rejected with the given `reason`.\n*/\nfunction reject$1(reason) {\n  /*jshint validthis:true */\n  var Constructor = this;\n  var promise = new Constructor(noop);\n  reject(promise, reason);\n  return promise;\n}\n\nfunction needsResolver() {\n  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n}\n\nfunction needsNew() {\n  throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n}\n\n/**\n  Promise objects represent the eventual result of an asynchronous operation. The\n  primary way of interacting with a promise is through its `then` method, which\n  registers callbacks to receive either a promise's eventual value or the reason\n  why the promise cannot be fulfilled.\n\n  Terminology\n  -----------\n\n  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n  - `thenable` is an object or function that defines a `then` method.\n  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n  - `exception` is a value that is thrown using the throw statement.\n  - `reason` is a value that indicates why a promise was rejected.\n  - `settled` the final resting state of a promise, fulfilled or rejected.\n\n  A promise can be in one of three states: pending, fulfilled, or rejected.\n\n  Promises that are fulfilled have a fulfillment value and are in the fulfilled\n  state.  Promises that are rejected have a rejection reason and are in the\n  rejected state.  A fulfillment value is never a thenable.\n\n  Promises can also be said to *resolve* a value.  If this value is also a\n  promise, then the original promise's settled state will match the value's\n  settled state.  So a promise that *resolves* a promise that rejects will\n  itself reject, and a promise that *resolves* a promise that fulfills will\n  itself fulfill.\n\n\n  Basic Usage:\n  ------------\n\n  ```js\n  let promise = new Promise(function(resolve, reject) {\n    // on success\n    resolve(value);\n\n    // on failure\n    reject(reason);\n  });\n\n  promise.then(function(value) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Advanced Usage:\n  ---------------\n\n  Promises shine when abstracting away asynchronous interactions such as\n  `XMLHttpRequest`s.\n\n  ```js\n  function getJSON(url) {\n    return new Promise(function(resolve, reject){\n      let xhr = new XMLHttpRequest();\n\n      xhr.open('GET', url);\n      xhr.onreadystatechange = handler;\n      xhr.responseType = 'json';\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send();\n\n      function handler() {\n        if (this.readyState === this.DONE) {\n          if (this.status === 200) {\n            resolve(this.response);\n          } else {\n            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n          }\n        }\n      };\n    });\n  }\n\n  getJSON('/posts.json').then(function(json) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Unlike callbacks, promises are great composable primitives.\n\n  ```js\n  Promise.all([\n    getJSON('/posts'),\n    getJSON('/comments')\n  ]).then(function(values){\n    values[0] // => postsJSON\n    values[1] // => commentsJSON\n\n    return values;\n  });\n  ```\n\n  @class Promise\n  @param {Function} resolver\n  Useful for tooling.\n  @constructor\n*/\n\nvar Promise$1 = function () {\n  function Promise(resolver) {\n    this[PROMISE_ID] = nextId();\n    this._result = this._state = undefined;\n    this._subscribers = [];\n\n    if (noop !== resolver) {\n      typeof resolver !== 'function' && needsResolver();\n      this instanceof Promise ? initializePromise(this, resolver) : needsNew();\n    }\n  }\n\n  /**\n  The primary way of interacting with a promise is through its `then` method,\n  which registers callbacks to receive either a promise's eventual value or the\n  reason why the promise cannot be fulfilled.\n   ```js\n  findUser().then(function(user){\n    // user is available\n  }, function(reason){\n    // user is unavailable, and you are given the reason why\n  });\n  ```\n   Chaining\n  --------\n   The return value of `then` is itself a promise.  This second, 'downstream'\n  promise is resolved with the return value of the first promise's fulfillment\n  or rejection handler, or rejected if the handler throws an exception.\n   ```js\n  findUser().then(function (user) {\n    return user.name;\n  }, function (reason) {\n    return 'default name';\n  }).then(function (userName) {\n    // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n    // will be `'default name'`\n  });\n   findUser().then(function (user) {\n    throw new Error('Found user, but still unhappy');\n  }, function (reason) {\n    throw new Error('`findUser` rejected and we're unhappy');\n  }).then(function (value) {\n    // never reached\n  }, function (reason) {\n    // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n    // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n  });\n  ```\n  If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n   ```js\n  findUser().then(function (user) {\n    throw new PedagogicalException('Upstream error');\n  }).then(function (value) {\n    // never reached\n  }).then(function (value) {\n    // never reached\n  }, function (reason) {\n    // The `PedgagocialException` is propagated all the way down to here\n  });\n  ```\n   Assimilation\n  ------------\n   Sometimes the value you want to propagate to a downstream promise can only be\n  retrieved asynchronously. This can be achieved by returning a promise in the\n  fulfillment or rejection handler. The downstream promise will then be pending\n  until the returned promise is settled. This is called *assimilation*.\n   ```js\n  findUser().then(function (user) {\n    return findCommentsByAuthor(user);\n  }).then(function (comments) {\n    // The user's comments are now available\n  });\n  ```\n   If the assimliated promise rejects, then the downstream promise will also reject.\n   ```js\n  findUser().then(function (user) {\n    return findCommentsByAuthor(user);\n  }).then(function (comments) {\n    // If `findCommentsByAuthor` fulfills, we'll have the value here\n  }, function (reason) {\n    // If `findCommentsByAuthor` rejects, we'll have the reason here\n  });\n  ```\n   Simple Example\n  --------------\n   Synchronous Example\n   ```javascript\n  let result;\n   try {\n    result = findResult();\n    // success\n  } catch(reason) {\n    // failure\n  }\n  ```\n   Errback Example\n   ```js\n  findResult(function(result, err){\n    if (err) {\n      // failure\n    } else {\n      // success\n    }\n  });\n  ```\n   Promise Example;\n   ```javascript\n  findResult().then(function(result){\n    // success\n  }, function(reason){\n    // failure\n  });\n  ```\n   Advanced Example\n  --------------\n   Synchronous Example\n   ```javascript\n  let author, books;\n   try {\n    author = findAuthor();\n    books  = findBooksByAuthor(author);\n    // success\n  } catch(reason) {\n    // failure\n  }\n  ```\n   Errback Example\n   ```js\n   function foundBooks(books) {\n   }\n   function failure(reason) {\n   }\n   findAuthor(function(author, err){\n    if (err) {\n      failure(err);\n      // failure\n    } else {\n      try {\n        findBoooksByAuthor(author, function(books, err) {\n          if (err) {\n            failure(err);\n          } else {\n            try {\n              foundBooks(books);\n            } catch(reason) {\n              failure(reason);\n            }\n          }\n        });\n      } catch(error) {\n        failure(err);\n      }\n      // success\n    }\n  });\n  ```\n   Promise Example;\n   ```javascript\n  findAuthor().\n    then(findBooksByAuthor).\n    then(function(books){\n      // found books\n  }).catch(function(reason){\n    // something went wrong\n  });\n  ```\n   @method then\n  @param {Function} onFulfilled\n  @param {Function} onRejected\n  Useful for tooling.\n  @return {Promise}\n  */\n\n  /**\n  `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n  as the catch block of a try/catch statement.\n  ```js\n  function findAuthor(){\n  throw new Error('couldn't find that author');\n  }\n  // synchronous\n  try {\n  findAuthor();\n  } catch(reason) {\n  // something went wrong\n  }\n  // async with promises\n  findAuthor().catch(function(reason){\n  // something went wrong\n  });\n  ```\n  @method catch\n  @param {Function} onRejection\n  Useful for tooling.\n  @return {Promise}\n  */\n\n\n  Promise.prototype.catch = function _catch(onRejection) {\n    return this.then(null, onRejection);\n  };\n\n  /**\n    `finally` will be invoked regardless of the promise's fate just as native\n    try/catch/finally behaves\n  \n    Synchronous example:\n  \n    ```js\n    findAuthor() {\n      if (Math.random() > 0.5) {\n        throw new Error();\n      }\n      return new Author();\n    }\n  \n    try {\n      return findAuthor(); // succeed or fail\n    } catch(error) {\n      return findOtherAuther();\n    } finally {\n      // always runs\n      // doesn't affect the return value\n    }\n    ```\n  \n    Asynchronous example:\n  \n    ```js\n    findAuthor().catch(function(reason){\n      return findOtherAuther();\n    }).finally(function(){\n      // author was either found, or not\n    });\n    ```\n  \n    @method finally\n    @param {Function} callback\n    @return {Promise}\n  */\n\n\n  Promise.prototype.finally = function _finally(callback) {\n    var promise = this;\n    var constructor = promise.constructor;\n\n    if (isFunction(callback)) {\n      return promise.then(function (value) {\n        return constructor.resolve(callback()).then(function () {\n          return value;\n        });\n      }, function (reason) {\n        return constructor.resolve(callback()).then(function () {\n          throw reason;\n        });\n      });\n    }\n\n    return promise.then(callback, callback);\n  };\n\n  return Promise;\n}();\n\nPromise$1.prototype.then = then;\nPromise$1.all = all;\nPromise$1.race = race;\nPromise$1.resolve = resolve$1;\nPromise$1.reject = reject$1;\nPromise$1._setScheduler = setScheduler;\nPromise$1._setAsap = setAsap;\nPromise$1._asap = asap;\n\n/*global self*/\nfunction polyfill() {\n  var local = void 0;\n\n  if (typeof global !== 'undefined') {\n    local = global;\n  } else if (typeof self !== 'undefined') {\n    local = self;\n  } else {\n    try {\n      local = Function('return this')();\n    } catch (e) {\n      throw new Error('polyfill failed because global object is unavailable in this environment');\n    }\n  }\n\n  var P = local.Promise;\n\n  if (P) {\n    var promiseToString = null;\n    try {\n      promiseToString = Object.prototype.toString.call(P.resolve());\n    } catch (e) {\n      // silently ignored\n    }\n\n    if (promiseToString === '[object Promise]' && !P.cast) {\n      return;\n    }\n  }\n\n  local.Promise = Promise$1;\n}\n\n// Strange compat..\nPromise$1.polyfill = polyfill;\nPromise$1.Promise = Promise$1;\n\nreturn Promise$1;\n\n})));\n\n\n\n//# sourceMappingURL=es6-promise.map\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(58), __webpack_require__(63)))\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n// Top level file is just a mixin of submodules & constants\n\n\nvar assign    = __webpack_require__(3).assign;\n\nvar deflate   = __webpack_require__(49);\nvar inflate   = __webpack_require__(50);\nvar constants = __webpack_require__(19);\n\nvar pako = {};\n\nassign(pako, deflate, inflate, constants);\n\nmodule.exports = pako;\n\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n\nvar zlib_deflate = __webpack_require__(51);\nvar utils        = __webpack_require__(3);\nvar strings      = __webpack_require__(17);\nvar msg          = __webpack_require__(11);\nvar ZStream      = __webpack_require__(21);\n\nvar toString = Object.prototype.toString;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nvar Z_NO_FLUSH      = 0;\nvar Z_FINISH        = 4;\n\nvar Z_OK            = 0;\nvar Z_STREAM_END    = 1;\nvar Z_SYNC_FLUSH    = 2;\n\nvar Z_DEFAULT_COMPRESSION = -1;\n\nvar Z_DEFAULT_STRATEGY    = 0;\n\nvar Z_DEFLATED  = 8;\n\n/* ===========================================================================*/\n\n\n/**\n * class Deflate\n *\n * Generic JS-style wrapper for zlib calls. If you don't need\n * streaming behaviour - use more simple functions: [[deflate]],\n * [[deflateRaw]] and [[gzip]].\n **/\n\n/* internal\n * Deflate.chunks -> Array\n *\n * Chunks of output data, if [[Deflate#onData]] not overridden.\n **/\n\n/**\n * Deflate.result -> Uint8Array|Array\n *\n * Compressed result, generated by default [[Deflate#onData]]\n * and [[Deflate#onEnd]] handlers. Filled after you push last chunk\n * (call [[Deflate#push]] with `Z_FINISH` / `true` param)  or if you\n * push a chunk with explicit flush (call [[Deflate#push]] with\n * `Z_SYNC_FLUSH` param).\n **/\n\n/**\n * Deflate.err -> Number\n *\n * Error code after deflate finished. 0 (Z_OK) on success.\n * You will not need it in real life, because deflate errors\n * are possible only on wrong options or bad `onData` / `onEnd`\n * custom handlers.\n **/\n\n/**\n * Deflate.msg -> String\n *\n * Error message, if [[Deflate.err]] != 0\n **/\n\n\n/**\n * new Deflate(options)\n * - options (Object): zlib deflate options.\n *\n * Creates new deflator instance with specified params. Throws exception\n * on bad params. Supported options:\n *\n * - `level`\n * - `windowBits`\n * - `memLevel`\n * - `strategy`\n * - `dictionary`\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Additional options, for internal needs:\n *\n * - `chunkSize` - size of generated data chunks (16K by default)\n * - `raw` (Boolean) - do raw deflate\n * - `gzip` (Boolean) - create gzip wrapper\n * - `to` (String) - if equal to 'string', then result will be \"binary string\"\n *    (each char code [0..255])\n * - `header` (Object) - custom header for gzip\n *   - `text` (Boolean) - true if compressed data believed to be text\n *   - `time` (Number) - modification time, unix timestamp\n *   - `os` (Number) - operation system code\n *   - `extra` (Array) - array of bytes with extra data (max 65536)\n *   - `name` (String) - file name (binary string)\n *   - `comment` (String) - comment (binary string)\n *   - `hcrc` (Boolean) - true if header crc should be added\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , chunk1 = Uint8Array([1,2,3,4,5,6,7,8,9])\n *   , chunk2 = Uint8Array([10,11,12,13,14,15,16,17,18,19]);\n *\n * var deflate = new pako.Deflate({ level: 3});\n *\n * deflate.push(chunk1, false);\n * deflate.push(chunk2, true);  // true -> last chunk\n *\n * if (deflate.err) { throw new Error(deflate.err); }\n *\n * console.log(deflate.result);\n * ```\n **/\nfunction Deflate(options) {\n  if (!(this instanceof Deflate)) return new Deflate(options);\n\n  this.options = utils.assign({\n    level: Z_DEFAULT_COMPRESSION,\n    method: Z_DEFLATED,\n    chunkSize: 16384,\n    windowBits: 15,\n    memLevel: 8,\n    strategy: Z_DEFAULT_STRATEGY,\n    to: ''\n  }, options || {});\n\n  var opt = this.options;\n\n  if (opt.raw && (opt.windowBits > 0)) {\n    opt.windowBits = -opt.windowBits;\n  }\n\n  else if (opt.gzip && (opt.windowBits > 0) && (opt.windowBits < 16)) {\n    opt.windowBits += 16;\n  }\n\n  this.err    = 0;      // error code, if happens (0 = Z_OK)\n  this.msg    = '';     // error message\n  this.ended  = false;  // used to avoid multiple onEnd() calls\n  this.chunks = [];     // chunks of compressed data\n\n  this.strm = new ZStream();\n  this.strm.avail_out = 0;\n\n  var status = zlib_deflate.deflateInit2(\n    this.strm,\n    opt.level,\n    opt.method,\n    opt.windowBits,\n    opt.memLevel,\n    opt.strategy\n  );\n\n  if (status !== Z_OK) {\n    throw new Error(msg[status]);\n  }\n\n  if (opt.header) {\n    zlib_deflate.deflateSetHeader(this.strm, opt.header);\n  }\n\n  if (opt.dictionary) {\n    var dict;\n    // Convert data if needed\n    if (typeof opt.dictionary === 'string') {\n      // If we need to compress text, change encoding to utf8.\n      dict = strings.string2buf(opt.dictionary);\n    } else if (toString.call(opt.dictionary) === '[object ArrayBuffer]') {\n      dict = new Uint8Array(opt.dictionary);\n    } else {\n      dict = opt.dictionary;\n    }\n\n    status = zlib_deflate.deflateSetDictionary(this.strm, dict);\n\n    if (status !== Z_OK) {\n      throw new Error(msg[status]);\n    }\n\n    this._dict_set = true;\n  }\n}\n\n/**\n * Deflate#push(data[, mode]) -> Boolean\n * - data (Uint8Array|Array|ArrayBuffer|String): input data. Strings will be\n *   converted to utf8 byte sequence.\n * - mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE modes.\n *   See constants. Skipped or `false` means Z_NO_FLUSH, `true` means Z_FINISH.\n *\n * Sends input data to deflate pipe, generating [[Deflate#onData]] calls with\n * new compressed chunks. Returns `true` on success. The last data block must have\n * mode Z_FINISH (or `true`). That will flush internal pending buffers and call\n * [[Deflate#onEnd]]. For interim explicit flushes (without ending the stream) you\n * can use mode Z_SYNC_FLUSH, keeping the compression context.\n *\n * On fail call [[Deflate#onEnd]] with error code and return false.\n *\n * We strongly recommend to use `Uint8Array` on input for best speed (output\n * array format is detected automatically). Also, don't skip last param and always\n * use the same type in your code (boolean or number). That will improve JS speed.\n *\n * For regular `Array`-s make sure all elements are [0..255].\n *\n * ##### Example\n *\n * ```javascript\n * push(chunk, false); // push one of data chunks\n * ...\n * push(chunk, true);  // push last chunk\n * ```\n **/\nDeflate.prototype.push = function (data, mode) {\n  var strm = this.strm;\n  var chunkSize = this.options.chunkSize;\n  var status, _mode;\n\n  if (this.ended) { return false; }\n\n  _mode = (mode === ~~mode) ? mode : ((mode === true) ? Z_FINISH : Z_NO_FLUSH);\n\n  // Convert data if needed\n  if (typeof data === 'string') {\n    // If we need to compress text, change encoding to utf8.\n    strm.input = strings.string2buf(data);\n  } else if (toString.call(data) === '[object ArrayBuffer]') {\n    strm.input = new Uint8Array(data);\n  } else {\n    strm.input = data;\n  }\n\n  strm.next_in = 0;\n  strm.avail_in = strm.input.length;\n\n  do {\n    if (strm.avail_out === 0) {\n      strm.output = new utils.Buf8(chunkSize);\n      strm.next_out = 0;\n      strm.avail_out = chunkSize;\n    }\n    status = zlib_deflate.deflate(strm, _mode);    /* no bad return value */\n\n    if (status !== Z_STREAM_END && status !== Z_OK) {\n      this.onEnd(status);\n      this.ended = true;\n      return false;\n    }\n    if (strm.avail_out === 0 || (strm.avail_in === 0 && (_mode === Z_FINISH || _mode === Z_SYNC_FLUSH))) {\n      if (this.options.to === 'string') {\n        this.onData(strings.buf2binstring(utils.shrinkBuf(strm.output, strm.next_out)));\n      } else {\n        this.onData(utils.shrinkBuf(strm.output, strm.next_out));\n      }\n    }\n  } while ((strm.avail_in > 0 || strm.avail_out === 0) && status !== Z_STREAM_END);\n\n  // Finalize on the last chunk.\n  if (_mode === Z_FINISH) {\n    status = zlib_deflate.deflateEnd(this.strm);\n    this.onEnd(status);\n    this.ended = true;\n    return status === Z_OK;\n  }\n\n  // callback interim results if Z_SYNC_FLUSH.\n  if (_mode === Z_SYNC_FLUSH) {\n    this.onEnd(Z_OK);\n    strm.avail_out = 0;\n    return true;\n  }\n\n  return true;\n};\n\n\n/**\n * Deflate#onData(chunk) -> Void\n * - chunk (Uint8Array|Array|String): output data. Type of array depends\n *   on js engine support. When string output requested, each chunk\n *   will be string.\n *\n * By default, stores data blocks in `chunks[]` property and glue\n * those in `onEnd`. Override this handler, if you need another behaviour.\n **/\nDeflate.prototype.onData = function (chunk) {\n  this.chunks.push(chunk);\n};\n\n\n/**\n * Deflate#onEnd(status) -> Void\n * - status (Number): deflate status. 0 (Z_OK) on success,\n *   other if not.\n *\n * Called once after you tell deflate that the input stream is\n * complete (Z_FINISH) or should be flushed (Z_SYNC_FLUSH)\n * or if an error happened. By default - join collected chunks,\n * free memory and fill `results` / `err` properties.\n **/\nDeflate.prototype.onEnd = function (status) {\n  // On success - join\n  if (status === Z_OK) {\n    if (this.options.to === 'string') {\n      this.result = this.chunks.join('');\n    } else {\n      this.result = utils.flattenChunks(this.chunks);\n    }\n  }\n  this.chunks = [];\n  this.err = status;\n  this.msg = this.strm.msg;\n};\n\n\n/**\n * deflate(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * Compress `data` with deflate algorithm and `options`.\n *\n * Supported options are:\n *\n * - level\n * - windowBits\n * - memLevel\n * - strategy\n * - dictionary\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Sugar (options):\n *\n * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify\n *   negative windowBits implicitly.\n * - `to` (String) - if equal to 'string', then result will be \"binary string\"\n *    (each char code [0..255])\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , data = Uint8Array([1,2,3,4,5,6,7,8,9]);\n *\n * console.log(pako.deflate(data));\n * ```\n **/\nfunction deflate(input, options) {\n  var deflator = new Deflate(options);\n\n  deflator.push(input, true);\n\n  // That will never happens, if you don't cheat with options :)\n  if (deflator.err) { throw deflator.msg || msg[deflator.err]; }\n\n  return deflator.result;\n}\n\n\n/**\n * deflateRaw(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * The same as [[deflate]], but creates raw data, without wrapper\n * (header and adler32 crc).\n **/\nfunction deflateRaw(input, options) {\n  options = options || {};\n  options.raw = true;\n  return deflate(input, options);\n}\n\n\n/**\n * gzip(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * The same as [[deflate]], but create gzip wrapper instead of\n * deflate one.\n **/\nfunction gzip(input, options) {\n  options = options || {};\n  options.gzip = true;\n  return deflate(input, options);\n}\n\n\nexports.Deflate = Deflate;\nexports.deflate = deflate;\nexports.deflateRaw = deflateRaw;\nexports.gzip = gzip;\n\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n\nvar zlib_inflate = __webpack_require__(54);\nvar utils        = __webpack_require__(3);\nvar strings      = __webpack_require__(17);\nvar c            = __webpack_require__(19);\nvar msg          = __webpack_require__(11);\nvar ZStream      = __webpack_require__(21);\nvar GZheader     = __webpack_require__(52);\n\nvar toString = Object.prototype.toString;\n\n/**\n * class Inflate\n *\n * Generic JS-style wrapper for zlib calls. If you don't need\n * streaming behaviour - use more simple functions: [[inflate]]\n * and [[inflateRaw]].\n **/\n\n/* internal\n * inflate.chunks -> Array\n *\n * Chunks of output data, if [[Inflate#onData]] not overridden.\n **/\n\n/**\n * Inflate.result -> Uint8Array|Array|String\n *\n * Uncompressed result, generated by default [[Inflate#onData]]\n * and [[Inflate#onEnd]] handlers. Filled after you push last chunk\n * (call [[Inflate#push]] with `Z_FINISH` / `true` param) or if you\n * push a chunk with explicit flush (call [[Inflate#push]] with\n * `Z_SYNC_FLUSH` param).\n **/\n\n/**\n * Inflate.err -> Number\n *\n * Error code after inflate finished. 0 (Z_OK) on success.\n * Should be checked if broken data possible.\n **/\n\n/**\n * Inflate.msg -> String\n *\n * Error message, if [[Inflate.err]] != 0\n **/\n\n\n/**\n * new Inflate(options)\n * - options (Object): zlib inflate options.\n *\n * Creates new inflator instance with specified params. Throws exception\n * on bad params. Supported options:\n *\n * - `windowBits`\n * - `dictionary`\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Additional options, for internal needs:\n *\n * - `chunkSize` - size of generated data chunks (16K by default)\n * - `raw` (Boolean) - do raw inflate\n * - `to` (String) - if equal to 'string', then result will be converted\n *   from utf8 to utf16 (javascript) string. When string output requested,\n *   chunk length can differ from `chunkSize`, depending on content.\n *\n * By default, when no options set, autodetect deflate/gzip data format via\n * wrapper header.\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , chunk1 = Uint8Array([1,2,3,4,5,6,7,8,9])\n *   , chunk2 = Uint8Array([10,11,12,13,14,15,16,17,18,19]);\n *\n * var inflate = new pako.Inflate({ level: 3});\n *\n * inflate.push(chunk1, false);\n * inflate.push(chunk2, true);  // true -> last chunk\n *\n * if (inflate.err) { throw new Error(inflate.err); }\n *\n * console.log(inflate.result);\n * ```\n **/\nfunction Inflate(options) {\n  if (!(this instanceof Inflate)) return new Inflate(options);\n\n  this.options = utils.assign({\n    chunkSize: 16384,\n    windowBits: 0,\n    to: ''\n  }, options || {});\n\n  var opt = this.options;\n\n  // Force window size for `raw` data, if not set directly,\n  // because we have no header for autodetect.\n  if (opt.raw && (opt.windowBits >= 0) && (opt.windowBits < 16)) {\n    opt.windowBits = -opt.windowBits;\n    if (opt.windowBits === 0) { opt.windowBits = -15; }\n  }\n\n  // If `windowBits` not defined (and mode not raw) - set autodetect flag for gzip/deflate\n  if ((opt.windowBits >= 0) && (opt.windowBits < 16) &&\n      !(options && options.windowBits)) {\n    opt.windowBits += 32;\n  }\n\n  // Gzip header has no info about windows size, we can do autodetect only\n  // for deflate. So, if window size not set, force it to max when gzip possible\n  if ((opt.windowBits > 15) && (opt.windowBits < 48)) {\n    // bit 3 (16) -> gzipped data\n    // bit 4 (32) -> autodetect gzip/deflate\n    if ((opt.windowBits & 15) === 0) {\n      opt.windowBits |= 15;\n    }\n  }\n\n  this.err    = 0;      // error code, if happens (0 = Z_OK)\n  this.msg    = '';     // error message\n  this.ended  = false;  // used to avoid multiple onEnd() calls\n  this.chunks = [];     // chunks of compressed data\n\n  this.strm   = new ZStream();\n  this.strm.avail_out = 0;\n\n  var status  = zlib_inflate.inflateInit2(\n    this.strm,\n    opt.windowBits\n  );\n\n  if (status !== c.Z_OK) {\n    throw new Error(msg[status]);\n  }\n\n  this.header = new GZheader();\n\n  zlib_inflate.inflateGetHeader(this.strm, this.header);\n\n  // Setup dictionary\n  if (opt.dictionary) {\n    // Convert data if needed\n    if (typeof opt.dictionary === 'string') {\n      opt.dictionary = strings.string2buf(opt.dictionary);\n    } else if (toString.call(opt.dictionary) === '[object ArrayBuffer]') {\n      opt.dictionary = new Uint8Array(opt.dictionary);\n    }\n    if (opt.raw) { //In raw mode we need to set the dictionary early\n      status = zlib_inflate.inflateSetDictionary(this.strm, opt.dictionary);\n      if (status !== c.Z_OK) {\n        throw new Error(msg[status]);\n      }\n    }\n  }\n}\n\n/**\n * Inflate#push(data[, mode]) -> Boolean\n * - data (Uint8Array|Array|ArrayBuffer|String): input data\n * - mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE modes.\n *   See constants. Skipped or `false` means Z_NO_FLUSH, `true` means Z_FINISH.\n *\n * Sends input data to inflate pipe, generating [[Inflate#onData]] calls with\n * new output chunks. Returns `true` on success. The last data block must have\n * mode Z_FINISH (or `true`). That will flush internal pending buffers and call\n * [[Inflate#onEnd]]. For interim explicit flushes (without ending the stream) you\n * can use mode Z_SYNC_FLUSH, keeping the decompression context.\n *\n * On fail call [[Inflate#onEnd]] with error code and return false.\n *\n * We strongly recommend to use `Uint8Array` on input for best speed (output\n * format is detected automatically). Also, don't skip last param and always\n * use the same type in your code (boolean or number). That will improve JS speed.\n *\n * For regular `Array`-s make sure all elements are [0..255].\n *\n * ##### Example\n *\n * ```javascript\n * push(chunk, false); // push one of data chunks\n * ...\n * push(chunk, true);  // push last chunk\n * ```\n **/\nInflate.prototype.push = function (data, mode) {\n  var strm = this.strm;\n  var chunkSize = this.options.chunkSize;\n  var dictionary = this.options.dictionary;\n  var status, _mode;\n  var next_out_utf8, tail, utf8str;\n\n  // Flag to properly process Z_BUF_ERROR on testing inflate call\n  // when we check that all output data was flushed.\n  var allowBufError = false;\n\n  if (this.ended) { return false; }\n  _mode = (mode === ~~mode) ? mode : ((mode === true) ? c.Z_FINISH : c.Z_NO_FLUSH);\n\n  // Convert data if needed\n  if (typeof data === 'string') {\n    // Only binary strings can be decompressed on practice\n    strm.input = strings.binstring2buf(data);\n  } else if (toString.call(data) === '[object ArrayBuffer]') {\n    strm.input = new Uint8Array(data);\n  } else {\n    strm.input = data;\n  }\n\n  strm.next_in = 0;\n  strm.avail_in = strm.input.length;\n\n  do {\n    if (strm.avail_out === 0) {\n      strm.output = new utils.Buf8(chunkSize);\n      strm.next_out = 0;\n      strm.avail_out = chunkSize;\n    }\n\n    status = zlib_inflate.inflate(strm, c.Z_NO_FLUSH);    /* no bad return value */\n\n    if (status === c.Z_NEED_DICT && dictionary) {\n      status = zlib_inflate.inflateSetDictionary(this.strm, dictionary);\n    }\n\n    if (status === c.Z_BUF_ERROR && allowBufError === true) {\n      status = c.Z_OK;\n      allowBufError = false;\n    }\n\n    if (status !== c.Z_STREAM_END && status !== c.Z_OK) {\n      this.onEnd(status);\n      this.ended = true;\n      return false;\n    }\n\n    if (strm.next_out) {\n      if (strm.avail_out === 0 || status === c.Z_STREAM_END || (strm.avail_in === 0 && (_mode === c.Z_FINISH || _mode === c.Z_SYNC_FLUSH))) {\n\n        if (this.options.to === 'string') {\n\n          next_out_utf8 = strings.utf8border(strm.output, strm.next_out);\n\n          tail = strm.next_out - next_out_utf8;\n          utf8str = strings.buf2string(strm.output, next_out_utf8);\n\n          // move tail\n          strm.next_out = tail;\n          strm.avail_out = chunkSize - tail;\n          if (tail) { utils.arraySet(strm.output, strm.output, next_out_utf8, tail, 0); }\n\n          this.onData(utf8str);\n\n        } else {\n          this.onData(utils.shrinkBuf(strm.output, strm.next_out));\n        }\n      }\n    }\n\n    // When no more input data, we should check that internal inflate buffers\n    // are flushed. The only way to do it when avail_out = 0 - run one more\n    // inflate pass. But if output data not exists, inflate return Z_BUF_ERROR.\n    // Here we set flag to process this error properly.\n    //\n    // NOTE. Deflate does not return error in this case and does not needs such\n    // logic.\n    if (strm.avail_in === 0 && strm.avail_out === 0) {\n      allowBufError = true;\n    }\n\n  } while ((strm.avail_in > 0 || strm.avail_out === 0) && status !== c.Z_STREAM_END);\n\n  if (status === c.Z_STREAM_END) {\n    _mode = c.Z_FINISH;\n  }\n\n  // Finalize on the last chunk.\n  if (_mode === c.Z_FINISH) {\n    status = zlib_inflate.inflateEnd(this.strm);\n    this.onEnd(status);\n    this.ended = true;\n    return status === c.Z_OK;\n  }\n\n  // callback interim results if Z_SYNC_FLUSH.\n  if (_mode === c.Z_SYNC_FLUSH) {\n    this.onEnd(c.Z_OK);\n    strm.avail_out = 0;\n    return true;\n  }\n\n  return true;\n};\n\n\n/**\n * Inflate#onData(chunk) -> Void\n * - chunk (Uint8Array|Array|String): output data. Type of array depends\n *   on js engine support. When string output requested, each chunk\n *   will be string.\n *\n * By default, stores data blocks in `chunks[]` property and glue\n * those in `onEnd`. Override this handler, if you need another behaviour.\n **/\nInflate.prototype.onData = function (chunk) {\n  this.chunks.push(chunk);\n};\n\n\n/**\n * Inflate#onEnd(status) -> Void\n * - status (Number): inflate status. 0 (Z_OK) on success,\n *   other if not.\n *\n * Called either after you tell inflate that the input stream is\n * complete (Z_FINISH) or should be flushed (Z_SYNC_FLUSH)\n * or if an error happened. By default - join collected chunks,\n * free memory and fill `results` / `err` properties.\n **/\nInflate.prototype.onEnd = function (status) {\n  // On success - join\n  if (status === c.Z_OK) {\n    if (this.options.to === 'string') {\n      // Glue & convert here, until we teach pako to send\n      // utf8 aligned strings to onData\n      this.result = this.chunks.join('');\n    } else {\n      this.result = utils.flattenChunks(this.chunks);\n    }\n  }\n  this.chunks = [];\n  this.err = status;\n  this.msg = this.strm.msg;\n};\n\n\n/**\n * inflate(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * Decompress `data` with inflate/ungzip and `options`. Autodetect\n * format via wrapper header by default. That's why we don't provide\n * separate `ungzip` method.\n *\n * Supported options are:\n *\n * - windowBits\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information.\n *\n * Sugar (options):\n *\n * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify\n *   negative windowBits implicitly.\n * - `to` (String) - if equal to 'string', then result will be converted\n *   from utf8 to utf16 (javascript) string. When string output requested,\n *   chunk length can differ from `chunkSize`, depending on content.\n *\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , input = pako.deflate([1,2,3,4,5,6,7,8,9])\n *   , output;\n *\n * try {\n *   output = pako.inflate(input);\n * } catch (err)\n *   console.log(err);\n * }\n * ```\n **/\nfunction inflate(input, options) {\n  var inflator = new Inflate(options);\n\n  inflator.push(input, true);\n\n  // That will never happens, if you don't cheat with options :)\n  if (inflator.err) { throw inflator.msg || msg[inflator.err]; }\n\n  return inflator.result;\n}\n\n\n/**\n * inflateRaw(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * The same as [[inflate]], but creates raw data, without wrapper\n * (header and adler32 crc).\n **/\nfunction inflateRaw(input, options) {\n  options = options || {};\n  options.raw = true;\n  return inflate(input, options);\n}\n\n\n/**\n * ungzip(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * Just shortcut to [[inflate]], because it autodetects format\n * by header.content. Done for convenience.\n **/\n\n\nexports.Inflate = Inflate;\nexports.inflate = inflate;\nexports.inflateRaw = inflateRaw;\nexports.ungzip  = inflate;\n\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar utils   = __webpack_require__(3);\nvar trees   = __webpack_require__(56);\nvar adler32 = __webpack_require__(18);\nvar crc32   = __webpack_require__(20);\nvar msg     = __webpack_require__(11);\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\n\n/* Allowed flush values; see deflate() and inflate() below for details */\nvar Z_NO_FLUSH      = 0;\nvar Z_PARTIAL_FLUSH = 1;\n//var Z_SYNC_FLUSH    = 2;\nvar Z_FULL_FLUSH    = 3;\nvar Z_FINISH        = 4;\nvar Z_BLOCK         = 5;\n//var Z_TREES         = 6;\n\n\n/* Return codes for the compression/decompression functions. Negative values\n * are errors, positive values are used for special but normal events.\n */\nvar Z_OK            = 0;\nvar Z_STREAM_END    = 1;\n//var Z_NEED_DICT     = 2;\n//var Z_ERRNO         = -1;\nvar Z_STREAM_ERROR  = -2;\nvar Z_DATA_ERROR    = -3;\n//var Z_MEM_ERROR     = -4;\nvar Z_BUF_ERROR     = -5;\n//var Z_VERSION_ERROR = -6;\n\n\n/* compression levels */\n//var Z_NO_COMPRESSION      = 0;\n//var Z_BEST_SPEED          = 1;\n//var Z_BEST_COMPRESSION    = 9;\nvar Z_DEFAULT_COMPRESSION = -1;\n\n\nvar Z_FILTERED            = 1;\nvar Z_HUFFMAN_ONLY        = 2;\nvar Z_RLE                 = 3;\nvar Z_FIXED               = 4;\nvar Z_DEFAULT_STRATEGY    = 0;\n\n/* Possible values of the data_type field (though see inflate()) */\n//var Z_BINARY              = 0;\n//var Z_TEXT                = 1;\n//var Z_ASCII               = 1; // = Z_TEXT\nvar Z_UNKNOWN             = 2;\n\n\n/* The deflate compression method */\nvar Z_DEFLATED  = 8;\n\n/*============================================================================*/\n\n\nvar MAX_MEM_LEVEL = 9;\n/* Maximum value for memLevel in deflateInit2 */\nvar MAX_WBITS = 15;\n/* 32K LZ77 window */\nvar DEF_MEM_LEVEL = 8;\n\n\nvar LENGTH_CODES  = 29;\n/* number of length codes, not counting the special END_BLOCK code */\nvar LITERALS      = 256;\n/* number of literal bytes 0..255 */\nvar L_CODES       = LITERALS + 1 + LENGTH_CODES;\n/* number of Literal or Length codes, including the END_BLOCK code */\nvar D_CODES       = 30;\n/* number of distance codes */\nvar BL_CODES      = 19;\n/* number of codes used to transfer the bit lengths */\nvar HEAP_SIZE     = 2 * L_CODES + 1;\n/* maximum heap size */\nvar MAX_BITS  = 15;\n/* All codes must not exceed MAX_BITS bits */\n\nvar MIN_MATCH = 3;\nvar MAX_MATCH = 258;\nvar MIN_LOOKAHEAD = (MAX_MATCH + MIN_MATCH + 1);\n\nvar PRESET_DICT = 0x20;\n\nvar INIT_STATE = 42;\nvar EXTRA_STATE = 69;\nvar NAME_STATE = 73;\nvar COMMENT_STATE = 91;\nvar HCRC_STATE = 103;\nvar BUSY_STATE = 113;\nvar FINISH_STATE = 666;\n\nvar BS_NEED_MORE      = 1; /* block not completed, need more input or more output */\nvar BS_BLOCK_DONE     = 2; /* block flush performed */\nvar BS_FINISH_STARTED = 3; /* finish started, need only more output at next deflate */\nvar BS_FINISH_DONE    = 4; /* finish done, accept no more input or output */\n\nvar OS_CODE = 0x03; // Unix :) . Don't detect, use this default.\n\nfunction err(strm, errorCode) {\n  strm.msg = msg[errorCode];\n  return errorCode;\n}\n\nfunction rank(f) {\n  return ((f) << 1) - ((f) > 4 ? 9 : 0);\n}\n\nfunction zero(buf) { var len = buf.length; while (--len >= 0) { buf[len] = 0; } }\n\n\n/* =========================================================================\n * Flush as much pending output as possible. All deflate() output goes\n * through this function so some applications may wish to modify it\n * to avoid allocating a large strm->output buffer and copying into it.\n * (See also read_buf()).\n */\nfunction flush_pending(strm) {\n  var s = strm.state;\n\n  //_tr_flush_bits(s);\n  var len = s.pending;\n  if (len > strm.avail_out) {\n    len = strm.avail_out;\n  }\n  if (len === 0) { return; }\n\n  utils.arraySet(strm.output, s.pending_buf, s.pending_out, len, strm.next_out);\n  strm.next_out += len;\n  s.pending_out += len;\n  strm.total_out += len;\n  strm.avail_out -= len;\n  s.pending -= len;\n  if (s.pending === 0) {\n    s.pending_out = 0;\n  }\n}\n\n\nfunction flush_block_only(s, last) {\n  trees._tr_flush_block(s, (s.block_start >= 0 ? s.block_start : -1), s.strstart - s.block_start, last);\n  s.block_start = s.strstart;\n  flush_pending(s.strm);\n}\n\n\nfunction put_byte(s, b) {\n  s.pending_buf[s.pending++] = b;\n}\n\n\n/* =========================================================================\n * Put a short in the pending buffer. The 16-bit value is put in MSB order.\n * IN assertion: the stream state is correct and there is enough room in\n * pending_buf.\n */\nfunction putShortMSB(s, b) {\n//  put_byte(s, (Byte)(b >> 8));\n//  put_byte(s, (Byte)(b & 0xff));\n  s.pending_buf[s.pending++] = (b >>> 8) & 0xff;\n  s.pending_buf[s.pending++] = b & 0xff;\n}\n\n\n/* ===========================================================================\n * Read a new buffer from the current input stream, update the adler32\n * and total number of bytes read.  All deflate() input goes through\n * this function so some applications may wish to modify it to avoid\n * allocating a large strm->input buffer and copying from it.\n * (See also flush_pending()).\n */\nfunction read_buf(strm, buf, start, size) {\n  var len = strm.avail_in;\n\n  if (len > size) { len = size; }\n  if (len === 0) { return 0; }\n\n  strm.avail_in -= len;\n\n  // zmemcpy(buf, strm->next_in, len);\n  utils.arraySet(buf, strm.input, strm.next_in, len, start);\n  if (strm.state.wrap === 1) {\n    strm.adler = adler32(strm.adler, buf, len, start);\n  }\n\n  else if (strm.state.wrap === 2) {\n    strm.adler = crc32(strm.adler, buf, len, start);\n  }\n\n  strm.next_in += len;\n  strm.total_in += len;\n\n  return len;\n}\n\n\n/* ===========================================================================\n * Set match_start to the longest match starting at the given string and\n * return its length. Matches shorter or equal to prev_length are discarded,\n * in which case the result is equal to prev_length and match_start is\n * garbage.\n * IN assertions: cur_match is the head of the hash chain for the current\n *   string (strstart) and its distance is <= MAX_DIST, and prev_length >= 1\n * OUT assertion: the match length is not greater than s->lookahead.\n */\nfunction longest_match(s, cur_match) {\n  var chain_length = s.max_chain_length;      /* max hash chain length */\n  var scan = s.strstart; /* current string */\n  var match;                       /* matched string */\n  var len;                           /* length of current match */\n  var best_len = s.prev_length;              /* best match length so far */\n  var nice_match = s.nice_match;             /* stop if match long enough */\n  var limit = (s.strstart > (s.w_size - MIN_LOOKAHEAD)) ?\n      s.strstart - (s.w_size - MIN_LOOKAHEAD) : 0/*NIL*/;\n\n  var _win = s.window; // shortcut\n\n  var wmask = s.w_mask;\n  var prev  = s.prev;\n\n  /* Stop when cur_match becomes <= limit. To simplify the code,\n   * we prevent matches with the string of window index 0.\n   */\n\n  var strend = s.strstart + MAX_MATCH;\n  var scan_end1  = _win[scan + best_len - 1];\n  var scan_end   = _win[scan + best_len];\n\n  /* The code is optimized for HASH_BITS >= 8 and MAX_MATCH-2 multiple of 16.\n   * It is easy to get rid of this optimization if necessary.\n   */\n  // Assert(s->hash_bits >= 8 && MAX_MATCH == 258, \"Code too clever\");\n\n  /* Do not waste too much time if we already have a good match: */\n  if (s.prev_length >= s.good_match) {\n    chain_length >>= 2;\n  }\n  /* Do not look for matches beyond the end of the input. This is necessary\n   * to make deflate deterministic.\n   */\n  if (nice_match > s.lookahead) { nice_match = s.lookahead; }\n\n  // Assert((ulg)s->strstart <= s->window_size-MIN_LOOKAHEAD, \"need lookahead\");\n\n  do {\n    // Assert(cur_match < s->strstart, \"no future\");\n    match = cur_match;\n\n    /* Skip to next match if the match length cannot increase\n     * or if the match length is less than 2.  Note that the checks below\n     * for insufficient lookahead only occur occasionally for performance\n     * reasons.  Therefore uninitialized memory will be accessed, and\n     * conditional jumps will be made that depend on those values.\n     * However the length of the match is limited to the lookahead, so\n     * the output of deflate is not affected by the uninitialized values.\n     */\n\n    if (_win[match + best_len]     !== scan_end  ||\n        _win[match + best_len - 1] !== scan_end1 ||\n        _win[match]                !== _win[scan] ||\n        _win[++match]              !== _win[scan + 1]) {\n      continue;\n    }\n\n    /* The check at best_len-1 can be removed because it will be made\n     * again later. (This heuristic is not always a win.)\n     * It is not necessary to compare scan[2] and match[2] since they\n     * are always equal when the other bytes match, given that\n     * the hash keys are equal and that HASH_BITS >= 8.\n     */\n    scan += 2;\n    match++;\n    // Assert(*scan == *match, \"match[2]?\");\n\n    /* We check for insufficient lookahead only every 8th comparison;\n     * the 256th check will be made at strstart+258.\n     */\n    do {\n      /*jshint noempty:false*/\n    } while (_win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             scan < strend);\n\n    // Assert(scan <= s->window+(unsigned)(s->window_size-1), \"wild scan\");\n\n    len = MAX_MATCH - (strend - scan);\n    scan = strend - MAX_MATCH;\n\n    if (len > best_len) {\n      s.match_start = cur_match;\n      best_len = len;\n      if (len >= nice_match) {\n        break;\n      }\n      scan_end1  = _win[scan + best_len - 1];\n      scan_end   = _win[scan + best_len];\n    }\n  } while ((cur_match = prev[cur_match & wmask]) > limit && --chain_length !== 0);\n\n  if (best_len <= s.lookahead) {\n    return best_len;\n  }\n  return s.lookahead;\n}\n\n\n/* ===========================================================================\n * Fill the window when the lookahead becomes insufficient.\n * Updates strstart and lookahead.\n *\n * IN assertion: lookahead < MIN_LOOKAHEAD\n * OUT assertions: strstart <= window_size-MIN_LOOKAHEAD\n *    At least one byte has been read, or avail_in == 0; reads are\n *    performed for at least two bytes (required for the zip translate_eol\n *    option -- not supported here).\n */\nfunction fill_window(s) {\n  var _w_size = s.w_size;\n  var p, n, m, more, str;\n\n  //Assert(s->lookahead < MIN_LOOKAHEAD, \"already enough lookahead\");\n\n  do {\n    more = s.window_size - s.lookahead - s.strstart;\n\n    // JS ints have 32 bit, block below not needed\n    /* Deal with !@#$% 64K limit: */\n    //if (sizeof(int) <= 2) {\n    //    if (more == 0 && s->strstart == 0 && s->lookahead == 0) {\n    //        more = wsize;\n    //\n    //  } else if (more == (unsigned)(-1)) {\n    //        /* Very unlikely, but possible on 16 bit machine if\n    //         * strstart == 0 && lookahead == 1 (input done a byte at time)\n    //         */\n    //        more--;\n    //    }\n    //}\n\n\n    /* If the window is almost full and there is insufficient lookahead,\n     * move the upper half to the lower one to make room in the upper half.\n     */\n    if (s.strstart >= _w_size + (_w_size - MIN_LOOKAHEAD)) {\n\n      utils.arraySet(s.window, s.window, _w_size, _w_size, 0);\n      s.match_start -= _w_size;\n      s.strstart -= _w_size;\n      /* we now have strstart >= MAX_DIST */\n      s.block_start -= _w_size;\n\n      /* Slide the hash table (could be avoided with 32 bit values\n       at the expense of memory usage). We slide even when level == 0\n       to keep the hash table consistent if we switch back to level > 0\n       later. (Using level 0 permanently is not an optimal usage of\n       zlib, so we don't care about this pathological case.)\n       */\n\n      n = s.hash_size;\n      p = n;\n      do {\n        m = s.head[--p];\n        s.head[p] = (m >= _w_size ? m - _w_size : 0);\n      } while (--n);\n\n      n = _w_size;\n      p = n;\n      do {\n        m = s.prev[--p];\n        s.prev[p] = (m >= _w_size ? m - _w_size : 0);\n        /* If n is not on any hash chain, prev[n] is garbage but\n         * its value will never be used.\n         */\n      } while (--n);\n\n      more += _w_size;\n    }\n    if (s.strm.avail_in === 0) {\n      break;\n    }\n\n    /* If there was no sliding:\n     *    strstart <= WSIZE+MAX_DIST-1 && lookahead <= MIN_LOOKAHEAD - 1 &&\n     *    more == window_size - lookahead - strstart\n     * => more >= window_size - (MIN_LOOKAHEAD-1 + WSIZE + MAX_DIST-1)\n     * => more >= window_size - 2*WSIZE + 2\n     * In the BIG_MEM or MMAP case (not yet supported),\n     *   window_size == input_size + MIN_LOOKAHEAD  &&\n     *   strstart + s->lookahead <= input_size => more >= MIN_LOOKAHEAD.\n     * Otherwise, window_size == 2*WSIZE so more >= 2.\n     * If there was sliding, more >= WSIZE. So in all cases, more >= 2.\n     */\n    //Assert(more >= 2, \"more < 2\");\n    n = read_buf(s.strm, s.window, s.strstart + s.lookahead, more);\n    s.lookahead += n;\n\n    /* Initialize the hash value now that we have some input: */\n    if (s.lookahead + s.insert >= MIN_MATCH) {\n      str = s.strstart - s.insert;\n      s.ins_h = s.window[str];\n\n      /* UPDATE_HASH(s, s->ins_h, s->window[str + 1]); */\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[str + 1]) & s.hash_mask;\n//#if MIN_MATCH != 3\n//        Call update_hash() MIN_MATCH-3 more times\n//#endif\n      while (s.insert) {\n        /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n        s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[str + MIN_MATCH - 1]) & s.hash_mask;\n\n        s.prev[str & s.w_mask] = s.head[s.ins_h];\n        s.head[s.ins_h] = str;\n        str++;\n        s.insert--;\n        if (s.lookahead + s.insert < MIN_MATCH) {\n          break;\n        }\n      }\n    }\n    /* If the whole input has less than MIN_MATCH bytes, ins_h is garbage,\n     * but this is not important since only literal bytes will be emitted.\n     */\n\n  } while (s.lookahead < MIN_LOOKAHEAD && s.strm.avail_in !== 0);\n\n  /* If the WIN_INIT bytes after the end of the current data have never been\n   * written, then zero those bytes in order to avoid memory check reports of\n   * the use of uninitialized (or uninitialised as Julian writes) bytes by\n   * the longest match routines.  Update the high water mark for the next\n   * time through here.  WIN_INIT is set to MAX_MATCH since the longest match\n   * routines allow scanning to strstart + MAX_MATCH, ignoring lookahead.\n   */\n//  if (s.high_water < s.window_size) {\n//    var curr = s.strstart + s.lookahead;\n//    var init = 0;\n//\n//    if (s.high_water < curr) {\n//      /* Previous high water mark below current data -- zero WIN_INIT\n//       * bytes or up to end of window, whichever is less.\n//       */\n//      init = s.window_size - curr;\n//      if (init > WIN_INIT)\n//        init = WIN_INIT;\n//      zmemzero(s->window + curr, (unsigned)init);\n//      s->high_water = curr + init;\n//    }\n//    else if (s->high_water < (ulg)curr + WIN_INIT) {\n//      /* High water mark at or above current data, but below current data\n//       * plus WIN_INIT -- zero out to current data plus WIN_INIT, or up\n//       * to end of window, whichever is less.\n//       */\n//      init = (ulg)curr + WIN_INIT - s->high_water;\n//      if (init > s->window_size - s->high_water)\n//        init = s->window_size - s->high_water;\n//      zmemzero(s->window + s->high_water, (unsigned)init);\n//      s->high_water += init;\n//    }\n//  }\n//\n//  Assert((ulg)s->strstart <= s->window_size - MIN_LOOKAHEAD,\n//    \"not enough room for search\");\n}\n\n/* ===========================================================================\n * Copy without compression as much as possible from the input stream, return\n * the current block state.\n * This function does not insert new strings in the dictionary since\n * uncompressible data is probably not useful. This function is used\n * only for the level=0 compression option.\n * NOTE: this function should be optimized to avoid extra copying from\n * window to pending_buf.\n */\nfunction deflate_stored(s, flush) {\n  /* Stored blocks are limited to 0xffff bytes, pending_buf is limited\n   * to pending_buf_size, and each stored block has a 5 byte header:\n   */\n  var max_block_size = 0xffff;\n\n  if (max_block_size > s.pending_buf_size - 5) {\n    max_block_size = s.pending_buf_size - 5;\n  }\n\n  /* Copy as much as possible from input to output: */\n  for (;;) {\n    /* Fill the window as much as possible: */\n    if (s.lookahead <= 1) {\n\n      //Assert(s->strstart < s->w_size+MAX_DIST(s) ||\n      //  s->block_start >= (long)s->w_size, \"slide too late\");\n//      if (!(s.strstart < s.w_size + (s.w_size - MIN_LOOKAHEAD) ||\n//        s.block_start >= s.w_size)) {\n//        throw  new Error(\"slide too late\");\n//      }\n\n      fill_window(s);\n      if (s.lookahead === 0 && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n\n      if (s.lookahead === 0) {\n        break;\n      }\n      /* flush the current block */\n    }\n    //Assert(s->block_start >= 0L, \"block gone\");\n//    if (s.block_start < 0) throw new Error(\"block gone\");\n\n    s.strstart += s.lookahead;\n    s.lookahead = 0;\n\n    /* Emit a stored block if pending_buf will be full: */\n    var max_start = s.block_start + max_block_size;\n\n    if (s.strstart === 0 || s.strstart >= max_start) {\n      /* strstart == 0 is possible when wraparound on 16-bit machine */\n      s.lookahead = s.strstart - max_start;\n      s.strstart = max_start;\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n\n\n    }\n    /* Flush if we may have to slide, otherwise block_start may become\n     * negative and the data will be gone:\n     */\n    if (s.strstart - s.block_start >= (s.w_size - MIN_LOOKAHEAD)) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n\n  s.insert = 0;\n\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n\n  if (s.strstart > s.block_start) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n\n  return BS_NEED_MORE;\n}\n\n/* ===========================================================================\n * Compress as much as possible from the input stream, return the current\n * block state.\n * This function does not perform lazy evaluation of matches and inserts\n * new strings in the dictionary only for unmatched strings or for short\n * matches. It is used only for the fast compression options.\n */\nfunction deflate_fast(s, flush) {\n  var hash_head;        /* head of the hash chain */\n  var bflush;           /* set if current block must be flushed */\n\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the next match, plus MIN_MATCH bytes to insert the\n     * string following the next match.\n     */\n    if (s.lookahead < MIN_LOOKAHEAD) {\n      fill_window(s);\n      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) {\n        break; /* flush the current block */\n      }\n    }\n\n    /* Insert the string window[strstart .. strstart+2] in the\n     * dictionary, and set hash_head to the head of the hash chain:\n     */\n    hash_head = 0/*NIL*/;\n    if (s.lookahead >= MIN_MATCH) {\n      /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n      s.head[s.ins_h] = s.strstart;\n      /***/\n    }\n\n    /* Find the longest match, discarding those <= prev_length.\n     * At this point we have always match_length < MIN_MATCH\n     */\n    if (hash_head !== 0/*NIL*/ && ((s.strstart - hash_head) <= (s.w_size - MIN_LOOKAHEAD))) {\n      /* To simplify the code, we prevent matches with the string\n       * of window index 0 (in particular we have to avoid a match\n       * of the string with itself at the start of the input file).\n       */\n      s.match_length = longest_match(s, hash_head);\n      /* longest_match() sets match_start */\n    }\n    if (s.match_length >= MIN_MATCH) {\n      // check_match(s, s.strstart, s.match_start, s.match_length); // for debug only\n\n      /*** _tr_tally_dist(s, s.strstart - s.match_start,\n                     s.match_length - MIN_MATCH, bflush); ***/\n      bflush = trees._tr_tally(s, s.strstart - s.match_start, s.match_length - MIN_MATCH);\n\n      s.lookahead -= s.match_length;\n\n      /* Insert new strings in the hash table only if the match length\n       * is not too large. This saves time but degrades compression.\n       */\n      if (s.match_length <= s.max_lazy_match/*max_insert_length*/ && s.lookahead >= MIN_MATCH) {\n        s.match_length--; /* string at strstart already in table */\n        do {\n          s.strstart++;\n          /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n          s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n          s.head[s.ins_h] = s.strstart;\n          /***/\n          /* strstart never exceeds WSIZE-MAX_MATCH, so there are\n           * always MIN_MATCH bytes ahead.\n           */\n        } while (--s.match_length !== 0);\n        s.strstart++;\n      } else\n      {\n        s.strstart += s.match_length;\n        s.match_length = 0;\n        s.ins_h = s.window[s.strstart];\n        /* UPDATE_HASH(s, s.ins_h, s.window[s.strstart+1]); */\n        s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + 1]) & s.hash_mask;\n\n//#if MIN_MATCH != 3\n//                Call UPDATE_HASH() MIN_MATCH-3 more times\n//#endif\n        /* If lookahead < MIN_MATCH, ins_h is garbage, but it does not\n         * matter since it will be recomputed at next deflate call.\n         */\n      }\n    } else {\n      /* No match, output a literal byte */\n      //Tracevv((stderr,\"%c\", s.window[s.strstart]));\n      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n      bflush = trees._tr_tally(s, 0, s.window[s.strstart]);\n\n      s.lookahead--;\n      s.strstart++;\n    }\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = ((s.strstart < (MIN_MATCH - 1)) ? s.strstart : MIN_MATCH - 1);\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n}\n\n/* ===========================================================================\n * Same as above, but achieves better compression. We use a lazy\n * evaluation for matches: a match is finally adopted only if there is\n * no better match at the next window position.\n */\nfunction deflate_slow(s, flush) {\n  var hash_head;          /* head of hash chain */\n  var bflush;              /* set if current block must be flushed */\n\n  var max_insert;\n\n  /* Process the input block. */\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the next match, plus MIN_MATCH bytes to insert the\n     * string following the next match.\n     */\n    if (s.lookahead < MIN_LOOKAHEAD) {\n      fill_window(s);\n      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) { break; } /* flush the current block */\n    }\n\n    /* Insert the string window[strstart .. strstart+2] in the\n     * dictionary, and set hash_head to the head of the hash chain:\n     */\n    hash_head = 0/*NIL*/;\n    if (s.lookahead >= MIN_MATCH) {\n      /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n      s.head[s.ins_h] = s.strstart;\n      /***/\n    }\n\n    /* Find the longest match, discarding those <= prev_length.\n     */\n    s.prev_length = s.match_length;\n    s.prev_match = s.match_start;\n    s.match_length = MIN_MATCH - 1;\n\n    if (hash_head !== 0/*NIL*/ && s.prev_length < s.max_lazy_match &&\n        s.strstart - hash_head <= (s.w_size - MIN_LOOKAHEAD)/*MAX_DIST(s)*/) {\n      /* To simplify the code, we prevent matches with the string\n       * of window index 0 (in particular we have to avoid a match\n       * of the string with itself at the start of the input file).\n       */\n      s.match_length = longest_match(s, hash_head);\n      /* longest_match() sets match_start */\n\n      if (s.match_length <= 5 &&\n         (s.strategy === Z_FILTERED || (s.match_length === MIN_MATCH && s.strstart - s.match_start > 4096/*TOO_FAR*/))) {\n\n        /* If prev_match is also MIN_MATCH, match_start is garbage\n         * but we will ignore the current match anyway.\n         */\n        s.match_length = MIN_MATCH - 1;\n      }\n    }\n    /* If there was a match at the previous step and the current\n     * match is not better, output the previous match:\n     */\n    if (s.prev_length >= MIN_MATCH && s.match_length <= s.prev_length) {\n      max_insert = s.strstart + s.lookahead - MIN_MATCH;\n      /* Do not insert strings in hash table beyond this. */\n\n      //check_match(s, s.strstart-1, s.prev_match, s.prev_length);\n\n      /***_tr_tally_dist(s, s.strstart - 1 - s.prev_match,\n                     s.prev_length - MIN_MATCH, bflush);***/\n      bflush = trees._tr_tally(s, s.strstart - 1 - s.prev_match, s.prev_length - MIN_MATCH);\n      /* Insert in hash table all strings up to the end of the match.\n       * strstart-1 and strstart are already inserted. If there is not\n       * enough lookahead, the last two strings are not inserted in\n       * the hash table.\n       */\n      s.lookahead -= s.prev_length - 1;\n      s.prev_length -= 2;\n      do {\n        if (++s.strstart <= max_insert) {\n          /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n          s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n          s.head[s.ins_h] = s.strstart;\n          /***/\n        }\n      } while (--s.prev_length !== 0);\n      s.match_available = 0;\n      s.match_length = MIN_MATCH - 1;\n      s.strstart++;\n\n      if (bflush) {\n        /*** FLUSH_BLOCK(s, 0); ***/\n        flush_block_only(s, false);\n        if (s.strm.avail_out === 0) {\n          return BS_NEED_MORE;\n        }\n        /***/\n      }\n\n    } else if (s.match_available) {\n      /* If there was no match at the previous position, output a\n       * single literal. If there was a match but the current match\n       * is longer, truncate the previous match to a single literal.\n       */\n      //Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n      /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/\n      bflush = trees._tr_tally(s, 0, s.window[s.strstart - 1]);\n\n      if (bflush) {\n        /*** FLUSH_BLOCK_ONLY(s, 0) ***/\n        flush_block_only(s, false);\n        /***/\n      }\n      s.strstart++;\n      s.lookahead--;\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n    } else {\n      /* There is no previous match to compare with, wait for\n       * the next step to decide.\n       */\n      s.match_available = 1;\n      s.strstart++;\n      s.lookahead--;\n    }\n  }\n  //Assert (flush != Z_NO_FLUSH, \"no flush?\");\n  if (s.match_available) {\n    //Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n    /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/\n    bflush = trees._tr_tally(s, 0, s.window[s.strstart - 1]);\n\n    s.match_available = 0;\n  }\n  s.insert = s.strstart < MIN_MATCH - 1 ? s.strstart : MIN_MATCH - 1;\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n\n  return BS_BLOCK_DONE;\n}\n\n\n/* ===========================================================================\n * For Z_RLE, simply look for runs of bytes, generate matches only of distance\n * one.  Do not maintain a hash table.  (It will be regenerated if this run of\n * deflate switches away from Z_RLE.)\n */\nfunction deflate_rle(s, flush) {\n  var bflush;            /* set if current block must be flushed */\n  var prev;              /* byte at distance one to match */\n  var scan, strend;      /* scan goes up to strend for length of run */\n\n  var _win = s.window;\n\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the longest run, plus one for the unrolled loop.\n     */\n    if (s.lookahead <= MAX_MATCH) {\n      fill_window(s);\n      if (s.lookahead <= MAX_MATCH && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) { break; } /* flush the current block */\n    }\n\n    /* See how many times the previous byte repeats */\n    s.match_length = 0;\n    if (s.lookahead >= MIN_MATCH && s.strstart > 0) {\n      scan = s.strstart - 1;\n      prev = _win[scan];\n      if (prev === _win[++scan] && prev === _win[++scan] && prev === _win[++scan]) {\n        strend = s.strstart + MAX_MATCH;\n        do {\n          /*jshint noempty:false*/\n        } while (prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 scan < strend);\n        s.match_length = MAX_MATCH - (strend - scan);\n        if (s.match_length > s.lookahead) {\n          s.match_length = s.lookahead;\n        }\n      }\n      //Assert(scan <= s->window+(uInt)(s->window_size-1), \"wild scan\");\n    }\n\n    /* Emit match if have run of MIN_MATCH or longer, else emit literal */\n    if (s.match_length >= MIN_MATCH) {\n      //check_match(s, s.strstart, s.strstart - 1, s.match_length);\n\n      /*** _tr_tally_dist(s, 1, s.match_length - MIN_MATCH, bflush); ***/\n      bflush = trees._tr_tally(s, 1, s.match_length - MIN_MATCH);\n\n      s.lookahead -= s.match_length;\n      s.strstart += s.match_length;\n      s.match_length = 0;\n    } else {\n      /* No match, output a literal byte */\n      //Tracevv((stderr,\"%c\", s->window[s->strstart]));\n      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n      bflush = trees._tr_tally(s, 0, s.window[s.strstart]);\n\n      s.lookahead--;\n      s.strstart++;\n    }\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = 0;\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n}\n\n/* ===========================================================================\n * For Z_HUFFMAN_ONLY, do not look for matches.  Do not maintain a hash table.\n * (It will be regenerated if this run of deflate switches away from Huffman.)\n */\nfunction deflate_huff(s, flush) {\n  var bflush;             /* set if current block must be flushed */\n\n  for (;;) {\n    /* Make sure that we have a literal to write. */\n    if (s.lookahead === 0) {\n      fill_window(s);\n      if (s.lookahead === 0) {\n        if (flush === Z_NO_FLUSH) {\n          return BS_NEED_MORE;\n        }\n        break;      /* flush the current block */\n      }\n    }\n\n    /* Output a literal byte */\n    s.match_length = 0;\n    //Tracevv((stderr,\"%c\", s->window[s->strstart]));\n    /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n    bflush = trees._tr_tally(s, 0, s.window[s.strstart]);\n    s.lookahead--;\n    s.strstart++;\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = 0;\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n}\n\n/* Values for max_lazy_match, good_match and max_chain_length, depending on\n * the desired pack level (0..9). The values given below have been tuned to\n * exclude worst case performance for pathological files. Better values may be\n * found for specific files.\n */\nfunction Config(good_length, max_lazy, nice_length, max_chain, func) {\n  this.good_length = good_length;\n  this.max_lazy = max_lazy;\n  this.nice_length = nice_length;\n  this.max_chain = max_chain;\n  this.func = func;\n}\n\nvar configuration_table;\n\nconfiguration_table = [\n  /*      good lazy nice chain */\n  new Config(0, 0, 0, 0, deflate_stored),          /* 0 store only */\n  new Config(4, 4, 8, 4, deflate_fast),            /* 1 max speed, no lazy matches */\n  new Config(4, 5, 16, 8, deflate_fast),           /* 2 */\n  new Config(4, 6, 32, 32, deflate_fast),          /* 3 */\n\n  new Config(4, 4, 16, 16, deflate_slow),          /* 4 lazy matches */\n  new Config(8, 16, 32, 32, deflate_slow),         /* 5 */\n  new Config(8, 16, 128, 128, deflate_slow),       /* 6 */\n  new Config(8, 32, 128, 256, deflate_slow),       /* 7 */\n  new Config(32, 128, 258, 1024, deflate_slow),    /* 8 */\n  new Config(32, 258, 258, 4096, deflate_slow)     /* 9 max compression */\n];\n\n\n/* ===========================================================================\n * Initialize the \"longest match\" routines for a new zlib stream\n */\nfunction lm_init(s) {\n  s.window_size = 2 * s.w_size;\n\n  /*** CLEAR_HASH(s); ***/\n  zero(s.head); // Fill with NIL (= 0);\n\n  /* Set the default configuration parameters:\n   */\n  s.max_lazy_match = configuration_table[s.level].max_lazy;\n  s.good_match = configuration_table[s.level].good_length;\n  s.nice_match = configuration_table[s.level].nice_length;\n  s.max_chain_length = configuration_table[s.level].max_chain;\n\n  s.strstart = 0;\n  s.block_start = 0;\n  s.lookahead = 0;\n  s.insert = 0;\n  s.match_length = s.prev_length = MIN_MATCH - 1;\n  s.match_available = 0;\n  s.ins_h = 0;\n}\n\n\nfunction DeflateState() {\n  this.strm = null;            /* pointer back to this zlib stream */\n  this.status = 0;            /* as the name implies */\n  this.pending_buf = null;      /* output still pending */\n  this.pending_buf_size = 0;  /* size of pending_buf */\n  this.pending_out = 0;       /* next pending byte to output to the stream */\n  this.pending = 0;           /* nb of bytes in the pending buffer */\n  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip */\n  this.gzhead = null;         /* gzip header information to write */\n  this.gzindex = 0;           /* where in extra, name, or comment */\n  this.method = Z_DEFLATED; /* can only be DEFLATED */\n  this.last_flush = -1;   /* value of flush param for previous deflate call */\n\n  this.w_size = 0;  /* LZ77 window size (32K by default) */\n  this.w_bits = 0;  /* log2(w_size)  (8..16) */\n  this.w_mask = 0;  /* w_size - 1 */\n\n  this.window = null;\n  /* Sliding window. Input bytes are read into the second half of the window,\n   * and move to the first half later to keep a dictionary of at least wSize\n   * bytes. With this organization, matches are limited to a distance of\n   * wSize-MAX_MATCH bytes, but this ensures that IO is always\n   * performed with a length multiple of the block size.\n   */\n\n  this.window_size = 0;\n  /* Actual size of window: 2*wSize, except when the user input buffer\n   * is directly used as sliding window.\n   */\n\n  this.prev = null;\n  /* Link to older string with same hash index. To limit the size of this\n   * array to 64K, this link is maintained only for the last 32K strings.\n   * An index in this array is thus a window index modulo 32K.\n   */\n\n  this.head = null;   /* Heads of the hash chains or NIL. */\n\n  this.ins_h = 0;       /* hash index of string to be inserted */\n  this.hash_size = 0;   /* number of elements in hash table */\n  this.hash_bits = 0;   /* log2(hash_size) */\n  this.hash_mask = 0;   /* hash_size-1 */\n\n  this.hash_shift = 0;\n  /* Number of bits by which ins_h must be shifted at each input\n   * step. It must be such that after MIN_MATCH steps, the oldest\n   * byte no longer takes part in the hash key, that is:\n   *   hash_shift * MIN_MATCH >= hash_bits\n   */\n\n  this.block_start = 0;\n  /* Window position at the beginning of the current output block. Gets\n   * negative when the window is moved backwards.\n   */\n\n  this.match_length = 0;      /* length of best match */\n  this.prev_match = 0;        /* previous match */\n  this.match_available = 0;   /* set if previous match exists */\n  this.strstart = 0;          /* start of string to insert */\n  this.match_start = 0;       /* start of matching string */\n  this.lookahead = 0;         /* number of valid bytes ahead in window */\n\n  this.prev_length = 0;\n  /* Length of the best match at previous step. Matches not greater than this\n   * are discarded. This is used in the lazy match evaluation.\n   */\n\n  this.max_chain_length = 0;\n  /* To speed up deflation, hash chains are never searched beyond this\n   * length.  A higher limit improves compression ratio but degrades the\n   * speed.\n   */\n\n  this.max_lazy_match = 0;\n  /* Attempt to find a better match only when the current match is strictly\n   * smaller than this value. This mechanism is used only for compression\n   * levels >= 4.\n   */\n  // That's alias to max_lazy_match, don't use directly\n  //this.max_insert_length = 0;\n  /* Insert new strings in the hash table only if the match length is not\n   * greater than this length. This saves time but degrades compression.\n   * max_insert_length is used only for compression levels <= 3.\n   */\n\n  this.level = 0;     /* compression level (1..9) */\n  this.strategy = 0;  /* favor or force Huffman coding*/\n\n  this.good_match = 0;\n  /* Use a faster search when the previous match is longer than this */\n\n  this.nice_match = 0; /* Stop searching when current match exceeds this */\n\n              /* used by trees.c: */\n\n  /* Didn't use ct_data typedef below to suppress compiler warning */\n\n  // struct ct_data_s dyn_ltree[HEAP_SIZE];   /* literal and length tree */\n  // struct ct_data_s dyn_dtree[2*D_CODES+1]; /* distance tree */\n  // struct ct_data_s bl_tree[2*BL_CODES+1];  /* Huffman tree for bit lengths */\n\n  // Use flat array of DOUBLE size, with interleaved fata,\n  // because JS does not support effective\n  this.dyn_ltree  = new utils.Buf16(HEAP_SIZE * 2);\n  this.dyn_dtree  = new utils.Buf16((2 * D_CODES + 1) * 2);\n  this.bl_tree    = new utils.Buf16((2 * BL_CODES + 1) * 2);\n  zero(this.dyn_ltree);\n  zero(this.dyn_dtree);\n  zero(this.bl_tree);\n\n  this.l_desc   = null;         /* desc. for literal tree */\n  this.d_desc   = null;         /* desc. for distance tree */\n  this.bl_desc  = null;         /* desc. for bit length tree */\n\n  //ush bl_count[MAX_BITS+1];\n  this.bl_count = new utils.Buf16(MAX_BITS + 1);\n  /* number of codes at each bit length for an optimal tree */\n\n  //int heap[2*L_CODES+1];      /* heap used to build the Huffman trees */\n  this.heap = new utils.Buf16(2 * L_CODES + 1);  /* heap used to build the Huffman trees */\n  zero(this.heap);\n\n  this.heap_len = 0;               /* number of elements in the heap */\n  this.heap_max = 0;               /* element of largest frequency */\n  /* The sons of heap[n] are heap[2*n] and heap[2*n+1]. heap[0] is not used.\n   * The same heap array is used to build all trees.\n   */\n\n  this.depth = new utils.Buf16(2 * L_CODES + 1); //uch depth[2*L_CODES+1];\n  zero(this.depth);\n  /* Depth of each subtree used as tie breaker for trees of equal frequency\n   */\n\n  this.l_buf = 0;          /* buffer index for literals or lengths */\n\n  this.lit_bufsize = 0;\n  /* Size of match buffer for literals/lengths.  There are 4 reasons for\n   * limiting lit_bufsize to 64K:\n   *   - frequencies can be kept in 16 bit counters\n   *   - if compression is not successful for the first block, all input\n   *     data is still in the window so we can still emit a stored block even\n   *     when input comes from standard input.  (This can also be done for\n   *     all blocks if lit_bufsize is not greater than 32K.)\n   *   - if compression is not successful for a file smaller than 64K, we can\n   *     even emit a stored file instead of a stored block (saving 5 bytes).\n   *     This is applicable only for zip (not gzip or zlib).\n   *   - creating new Huffman trees less frequently may not provide fast\n   *     adaptation to changes in the input data statistics. (Take for\n   *     example a binary file with poorly compressible code followed by\n   *     a highly compressible string table.) Smaller buffer sizes give\n   *     fast adaptation but have of course the overhead of transmitting\n   *     trees more frequently.\n   *   - I can't count above 4\n   */\n\n  this.last_lit = 0;      /* running index in l_buf */\n\n  this.d_buf = 0;\n  /* Buffer index for distances. To simplify the code, d_buf and l_buf have\n   * the same number of elements. To use different lengths, an extra flag\n   * array would be necessary.\n   */\n\n  this.opt_len = 0;       /* bit length of current block with optimal trees */\n  this.static_len = 0;    /* bit length of current block with static trees */\n  this.matches = 0;       /* number of string matches in current block */\n  this.insert = 0;        /* bytes at end of window left to insert */\n\n\n  this.bi_buf = 0;\n  /* Output buffer. bits are inserted starting at the bottom (least\n   * significant bits).\n   */\n  this.bi_valid = 0;\n  /* Number of valid bits in bi_buf.  All bits above the last valid bit\n   * are always zero.\n   */\n\n  // Used for window memory init. We safely ignore it for JS. That makes\n  // sense only for pointers and memory check tools.\n  //this.high_water = 0;\n  /* High water mark offset in window for initialized bytes -- bytes above\n   * this are set to zero in order to avoid memory check warnings when\n   * longest match routines access bytes past the input.  This is then\n   * updated to the new high water mark.\n   */\n}\n\n\nfunction deflateResetKeep(strm) {\n  var s;\n\n  if (!strm || !strm.state) {\n    return err(strm, Z_STREAM_ERROR);\n  }\n\n  strm.total_in = strm.total_out = 0;\n  strm.data_type = Z_UNKNOWN;\n\n  s = strm.state;\n  s.pending = 0;\n  s.pending_out = 0;\n\n  if (s.wrap < 0) {\n    s.wrap = -s.wrap;\n    /* was made negative by deflate(..., Z_FINISH); */\n  }\n  s.status = (s.wrap ? INIT_STATE : BUSY_STATE);\n  strm.adler = (s.wrap === 2) ?\n    0  // crc32(0, Z_NULL, 0)\n  :\n    1; // adler32(0, Z_NULL, 0)\n  s.last_flush = Z_NO_FLUSH;\n  trees._tr_init(s);\n  return Z_OK;\n}\n\n\nfunction deflateReset(strm) {\n  var ret = deflateResetKeep(strm);\n  if (ret === Z_OK) {\n    lm_init(strm.state);\n  }\n  return ret;\n}\n\n\nfunction deflateSetHeader(strm, head) {\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  if (strm.state.wrap !== 2) { return Z_STREAM_ERROR; }\n  strm.state.gzhead = head;\n  return Z_OK;\n}\n\n\nfunction deflateInit2(strm, level, method, windowBits, memLevel, strategy) {\n  if (!strm) { // === Z_NULL\n    return Z_STREAM_ERROR;\n  }\n  var wrap = 1;\n\n  if (level === Z_DEFAULT_COMPRESSION) {\n    level = 6;\n  }\n\n  if (windowBits < 0) { /* suppress zlib wrapper */\n    wrap = 0;\n    windowBits = -windowBits;\n  }\n\n  else if (windowBits > 15) {\n    wrap = 2;           /* write gzip wrapper instead */\n    windowBits -= 16;\n  }\n\n\n  if (memLevel < 1 || memLevel > MAX_MEM_LEVEL || method !== Z_DEFLATED ||\n    windowBits < 8 || windowBits > 15 || level < 0 || level > 9 ||\n    strategy < 0 || strategy > Z_FIXED) {\n    return err(strm, Z_STREAM_ERROR);\n  }\n\n\n  if (windowBits === 8) {\n    windowBits = 9;\n  }\n  /* until 256-byte window bug fixed */\n\n  var s = new DeflateState();\n\n  strm.state = s;\n  s.strm = strm;\n\n  s.wrap = wrap;\n  s.gzhead = null;\n  s.w_bits = windowBits;\n  s.w_size = 1 << s.w_bits;\n  s.w_mask = s.w_size - 1;\n\n  s.hash_bits = memLevel + 7;\n  s.hash_size = 1 << s.hash_bits;\n  s.hash_mask = s.hash_size - 1;\n  s.hash_shift = ~~((s.hash_bits + MIN_MATCH - 1) / MIN_MATCH);\n\n  s.window = new utils.Buf8(s.w_size * 2);\n  s.head = new utils.Buf16(s.hash_size);\n  s.prev = new utils.Buf16(s.w_size);\n\n  // Don't need mem init magic for JS.\n  //s.high_water = 0;  /* nothing written to s->window yet */\n\n  s.lit_bufsize = 1 << (memLevel + 6); /* 16K elements by default */\n\n  s.pending_buf_size = s.lit_bufsize * 4;\n\n  //overlay = (ushf *) ZALLOC(strm, s->lit_bufsize, sizeof(ush)+2);\n  //s->pending_buf = (uchf *) overlay;\n  s.pending_buf = new utils.Buf8(s.pending_buf_size);\n\n  // It is offset from `s.pending_buf` (size is `s.lit_bufsize * 2`)\n  //s->d_buf = overlay + s->lit_bufsize/sizeof(ush);\n  s.d_buf = 1 * s.lit_bufsize;\n\n  //s->l_buf = s->pending_buf + (1+sizeof(ush))*s->lit_bufsize;\n  s.l_buf = (1 + 2) * s.lit_bufsize;\n\n  s.level = level;\n  s.strategy = strategy;\n  s.method = method;\n\n  return deflateReset(strm);\n}\n\nfunction deflateInit(strm, level) {\n  return deflateInit2(strm, level, Z_DEFLATED, MAX_WBITS, DEF_MEM_LEVEL, Z_DEFAULT_STRATEGY);\n}\n\n\nfunction deflate(strm, flush) {\n  var old_flush, s;\n  var beg, val; // for gzip header write only\n\n  if (!strm || !strm.state ||\n    flush > Z_BLOCK || flush < 0) {\n    return strm ? err(strm, Z_STREAM_ERROR) : Z_STREAM_ERROR;\n  }\n\n  s = strm.state;\n\n  if (!strm.output ||\n      (!strm.input && strm.avail_in !== 0) ||\n      (s.status === FINISH_STATE && flush !== Z_FINISH)) {\n    return err(strm, (strm.avail_out === 0) ? Z_BUF_ERROR : Z_STREAM_ERROR);\n  }\n\n  s.strm = strm; /* just in case */\n  old_flush = s.last_flush;\n  s.last_flush = flush;\n\n  /* Write the header */\n  if (s.status === INIT_STATE) {\n\n    if (s.wrap === 2) { // GZIP header\n      strm.adler = 0;  //crc32(0L, Z_NULL, 0);\n      put_byte(s, 31);\n      put_byte(s, 139);\n      put_byte(s, 8);\n      if (!s.gzhead) { // s->gzhead == Z_NULL\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, s.level === 9 ? 2 :\n                    (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?\n                     4 : 0));\n        put_byte(s, OS_CODE);\n        s.status = BUSY_STATE;\n      }\n      else {\n        put_byte(s, (s.gzhead.text ? 1 : 0) +\n                    (s.gzhead.hcrc ? 2 : 0) +\n                    (!s.gzhead.extra ? 0 : 4) +\n                    (!s.gzhead.name ? 0 : 8) +\n                    (!s.gzhead.comment ? 0 : 16)\n        );\n        put_byte(s, s.gzhead.time & 0xff);\n        put_byte(s, (s.gzhead.time >> 8) & 0xff);\n        put_byte(s, (s.gzhead.time >> 16) & 0xff);\n        put_byte(s, (s.gzhead.time >> 24) & 0xff);\n        put_byte(s, s.level === 9 ? 2 :\n                    (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?\n                     4 : 0));\n        put_byte(s, s.gzhead.os & 0xff);\n        if (s.gzhead.extra && s.gzhead.extra.length) {\n          put_byte(s, s.gzhead.extra.length & 0xff);\n          put_byte(s, (s.gzhead.extra.length >> 8) & 0xff);\n        }\n        if (s.gzhead.hcrc) {\n          strm.adler = crc32(strm.adler, s.pending_buf, s.pending, 0);\n        }\n        s.gzindex = 0;\n        s.status = EXTRA_STATE;\n      }\n    }\n    else // DEFLATE header\n    {\n      var header = (Z_DEFLATED + ((s.w_bits - 8) << 4)) << 8;\n      var level_flags = -1;\n\n      if (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2) {\n        level_flags = 0;\n      } else if (s.level < 6) {\n        level_flags = 1;\n      } else if (s.level === 6) {\n        level_flags = 2;\n      } else {\n        level_flags = 3;\n      }\n      header |= (level_flags << 6);\n      if (s.strstart !== 0) { header |= PRESET_DICT; }\n      header += 31 - (header % 31);\n\n      s.status = BUSY_STATE;\n      putShortMSB(s, header);\n\n      /* Save the adler32 of the preset dictionary: */\n      if (s.strstart !== 0) {\n        putShortMSB(s, strm.adler >>> 16);\n        putShortMSB(s, strm.adler & 0xffff);\n      }\n      strm.adler = 1; // adler32(0L, Z_NULL, 0);\n    }\n  }\n\n//#ifdef GZIP\n  if (s.status === EXTRA_STATE) {\n    if (s.gzhead.extra/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n\n      while (s.gzindex < (s.gzhead.extra.length & 0xffff)) {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            break;\n          }\n        }\n        put_byte(s, s.gzhead.extra[s.gzindex] & 0xff);\n        s.gzindex++;\n      }\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (s.gzindex === s.gzhead.extra.length) {\n        s.gzindex = 0;\n        s.status = NAME_STATE;\n      }\n    }\n    else {\n      s.status = NAME_STATE;\n    }\n  }\n  if (s.status === NAME_STATE) {\n    if (s.gzhead.name/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n      //int val;\n\n      do {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            val = 1;\n            break;\n          }\n        }\n        // JS specific: little magic to add zero terminator to end of string\n        if (s.gzindex < s.gzhead.name.length) {\n          val = s.gzhead.name.charCodeAt(s.gzindex++) & 0xff;\n        } else {\n          val = 0;\n        }\n        put_byte(s, val);\n      } while (val !== 0);\n\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (val === 0) {\n        s.gzindex = 0;\n        s.status = COMMENT_STATE;\n      }\n    }\n    else {\n      s.status = COMMENT_STATE;\n    }\n  }\n  if (s.status === COMMENT_STATE) {\n    if (s.gzhead.comment/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n      //int val;\n\n      do {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            val = 1;\n            break;\n          }\n        }\n        // JS specific: little magic to add zero terminator to end of string\n        if (s.gzindex < s.gzhead.comment.length) {\n          val = s.gzhead.comment.charCodeAt(s.gzindex++) & 0xff;\n        } else {\n          val = 0;\n        }\n        put_byte(s, val);\n      } while (val !== 0);\n\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (val === 0) {\n        s.status = HCRC_STATE;\n      }\n    }\n    else {\n      s.status = HCRC_STATE;\n    }\n  }\n  if (s.status === HCRC_STATE) {\n    if (s.gzhead.hcrc) {\n      if (s.pending + 2 > s.pending_buf_size) {\n        flush_pending(strm);\n      }\n      if (s.pending + 2 <= s.pending_buf_size) {\n        put_byte(s, strm.adler & 0xff);\n        put_byte(s, (strm.adler >> 8) & 0xff);\n        strm.adler = 0; //crc32(0L, Z_NULL, 0);\n        s.status = BUSY_STATE;\n      }\n    }\n    else {\n      s.status = BUSY_STATE;\n    }\n  }\n//#endif\n\n  /* Flush as much pending output as possible */\n  if (s.pending !== 0) {\n    flush_pending(strm);\n    if (strm.avail_out === 0) {\n      /* Since avail_out is 0, deflate will be called again with\n       * more output space, but possibly with both pending and\n       * avail_in equal to zero. There won't be anything to do,\n       * but this is not an error situation so make sure we\n       * return OK instead of BUF_ERROR at next call of deflate:\n       */\n      s.last_flush = -1;\n      return Z_OK;\n    }\n\n    /* Make sure there is something to do and avoid duplicate consecutive\n     * flushes. For repeated and useless calls with Z_FINISH, we keep\n     * returning Z_STREAM_END instead of Z_BUF_ERROR.\n     */\n  } else if (strm.avail_in === 0 && rank(flush) <= rank(old_flush) &&\n    flush !== Z_FINISH) {\n    return err(strm, Z_BUF_ERROR);\n  }\n\n  /* User must not provide more input after the first FINISH: */\n  if (s.status === FINISH_STATE && strm.avail_in !== 0) {\n    return err(strm, Z_BUF_ERROR);\n  }\n\n  /* Start a new block or continue the current one.\n   */\n  if (strm.avail_in !== 0 || s.lookahead !== 0 ||\n    (flush !== Z_NO_FLUSH && s.status !== FINISH_STATE)) {\n    var bstate = (s.strategy === Z_HUFFMAN_ONLY) ? deflate_huff(s, flush) :\n      (s.strategy === Z_RLE ? deflate_rle(s, flush) :\n        configuration_table[s.level].func(s, flush));\n\n    if (bstate === BS_FINISH_STARTED || bstate === BS_FINISH_DONE) {\n      s.status = FINISH_STATE;\n    }\n    if (bstate === BS_NEED_MORE || bstate === BS_FINISH_STARTED) {\n      if (strm.avail_out === 0) {\n        s.last_flush = -1;\n        /* avoid BUF_ERROR next call, see above */\n      }\n      return Z_OK;\n      /* If flush != Z_NO_FLUSH && avail_out == 0, the next call\n       * of deflate should use the same flush parameter to make sure\n       * that the flush is complete. So we don't have to output an\n       * empty block here, this will be done at next call. This also\n       * ensures that for a very small output buffer, we emit at most\n       * one empty block.\n       */\n    }\n    if (bstate === BS_BLOCK_DONE) {\n      if (flush === Z_PARTIAL_FLUSH) {\n        trees._tr_align(s);\n      }\n      else if (flush !== Z_BLOCK) { /* FULL_FLUSH or SYNC_FLUSH */\n\n        trees._tr_stored_block(s, 0, 0, false);\n        /* For a full flush, this empty block will be recognized\n         * as a special marker by inflate_sync().\n         */\n        if (flush === Z_FULL_FLUSH) {\n          /*** CLEAR_HASH(s); ***/             /* forget history */\n          zero(s.head); // Fill with NIL (= 0);\n\n          if (s.lookahead === 0) {\n            s.strstart = 0;\n            s.block_start = 0;\n            s.insert = 0;\n          }\n        }\n      }\n      flush_pending(strm);\n      if (strm.avail_out === 0) {\n        s.last_flush = -1; /* avoid BUF_ERROR at next call, see above */\n        return Z_OK;\n      }\n    }\n  }\n  //Assert(strm->avail_out > 0, \"bug2\");\n  //if (strm.avail_out <= 0) { throw new Error(\"bug2\");}\n\n  if (flush !== Z_FINISH) { return Z_OK; }\n  if (s.wrap <= 0) { return Z_STREAM_END; }\n\n  /* Write the trailer */\n  if (s.wrap === 2) {\n    put_byte(s, strm.adler & 0xff);\n    put_byte(s, (strm.adler >> 8) & 0xff);\n    put_byte(s, (strm.adler >> 16) & 0xff);\n    put_byte(s, (strm.adler >> 24) & 0xff);\n    put_byte(s, strm.total_in & 0xff);\n    put_byte(s, (strm.total_in >> 8) & 0xff);\n    put_byte(s, (strm.total_in >> 16) & 0xff);\n    put_byte(s, (strm.total_in >> 24) & 0xff);\n  }\n  else\n  {\n    putShortMSB(s, strm.adler >>> 16);\n    putShortMSB(s, strm.adler & 0xffff);\n  }\n\n  flush_pending(strm);\n  /* If avail_out is zero, the application will call deflate again\n   * to flush the rest.\n   */\n  if (s.wrap > 0) { s.wrap = -s.wrap; }\n  /* write the trailer only once! */\n  return s.pending !== 0 ? Z_OK : Z_STREAM_END;\n}\n\nfunction deflateEnd(strm) {\n  var status;\n\n  if (!strm/*== Z_NULL*/ || !strm.state/*== Z_NULL*/) {\n    return Z_STREAM_ERROR;\n  }\n\n  status = strm.state.status;\n  if (status !== INIT_STATE &&\n    status !== EXTRA_STATE &&\n    status !== NAME_STATE &&\n    status !== COMMENT_STATE &&\n    status !== HCRC_STATE &&\n    status !== BUSY_STATE &&\n    status !== FINISH_STATE\n  ) {\n    return err(strm, Z_STREAM_ERROR);\n  }\n\n  strm.state = null;\n\n  return status === BUSY_STATE ? err(strm, Z_DATA_ERROR) : Z_OK;\n}\n\n\n/* =========================================================================\n * Initializes the compression dictionary from the given byte\n * sequence without producing any compressed output.\n */\nfunction deflateSetDictionary(strm, dictionary) {\n  var dictLength = dictionary.length;\n\n  var s;\n  var str, n;\n  var wrap;\n  var avail;\n  var next;\n  var input;\n  var tmpDict;\n\n  if (!strm/*== Z_NULL*/ || !strm.state/*== Z_NULL*/) {\n    return Z_STREAM_ERROR;\n  }\n\n  s = strm.state;\n  wrap = s.wrap;\n\n  if (wrap === 2 || (wrap === 1 && s.status !== INIT_STATE) || s.lookahead) {\n    return Z_STREAM_ERROR;\n  }\n\n  /* when using zlib wrappers, compute Adler-32 for provided dictionary */\n  if (wrap === 1) {\n    /* adler32(strm->adler, dictionary, dictLength); */\n    strm.adler = adler32(strm.adler, dictionary, dictLength, 0);\n  }\n\n  s.wrap = 0;   /* avoid computing Adler-32 in read_buf */\n\n  /* if dictionary would fill window, just replace the history */\n  if (dictLength >= s.w_size) {\n    if (wrap === 0) {            /* already empty otherwise */\n      /*** CLEAR_HASH(s); ***/\n      zero(s.head); // Fill with NIL (= 0);\n      s.strstart = 0;\n      s.block_start = 0;\n      s.insert = 0;\n    }\n    /* use the tail */\n    // dictionary = dictionary.slice(dictLength - s.w_size);\n    tmpDict = new utils.Buf8(s.w_size);\n    utils.arraySet(tmpDict, dictionary, dictLength - s.w_size, s.w_size, 0);\n    dictionary = tmpDict;\n    dictLength = s.w_size;\n  }\n  /* insert dictionary into window and hash */\n  avail = strm.avail_in;\n  next = strm.next_in;\n  input = strm.input;\n  strm.avail_in = dictLength;\n  strm.next_in = 0;\n  strm.input = dictionary;\n  fill_window(s);\n  while (s.lookahead >= MIN_MATCH) {\n    str = s.strstart;\n    n = s.lookahead - (MIN_MATCH - 1);\n    do {\n      /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[str + MIN_MATCH - 1]) & s.hash_mask;\n\n      s.prev[str & s.w_mask] = s.head[s.ins_h];\n\n      s.head[s.ins_h] = str;\n      str++;\n    } while (--n);\n    s.strstart = str;\n    s.lookahead = MIN_MATCH - 1;\n    fill_window(s);\n  }\n  s.strstart += s.lookahead;\n  s.block_start = s.strstart;\n  s.insert = s.lookahead;\n  s.lookahead = 0;\n  s.match_length = s.prev_length = MIN_MATCH - 1;\n  s.match_available = 0;\n  strm.next_in = next;\n  strm.input = input;\n  strm.avail_in = avail;\n  s.wrap = wrap;\n  return Z_OK;\n}\n\n\nexports.deflateInit = deflateInit;\nexports.deflateInit2 = deflateInit2;\nexports.deflateReset = deflateReset;\nexports.deflateResetKeep = deflateResetKeep;\nexports.deflateSetHeader = deflateSetHeader;\nexports.deflate = deflate;\nexports.deflateEnd = deflateEnd;\nexports.deflateSetDictionary = deflateSetDictionary;\nexports.deflateInfo = 'pako deflate (from Nodeca project)';\n\n/* Not implemented\nexports.deflateBound = deflateBound;\nexports.deflateCopy = deflateCopy;\nexports.deflateParams = deflateParams;\nexports.deflatePending = deflatePending;\nexports.deflatePrime = deflatePrime;\nexports.deflateTune = deflateTune;\n*/\n\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction GZheader() {\n  /* true if compressed data believed to be text */\n  this.text       = 0;\n  /* modification time */\n  this.time       = 0;\n  /* extra flags (not used when writing a gzip file) */\n  this.xflags     = 0;\n  /* operating system */\n  this.os         = 0;\n  /* pointer to extra field or Z_NULL if none */\n  this.extra      = null;\n  /* extra field length (valid if extra != Z_NULL) */\n  this.extra_len  = 0; // Actually, we don't need it in JS,\n                       // but leave for few code modifications\n\n  //\n  // Setup limits is not necessary because in js we should not preallocate memory\n  // for inflate use constant limit in 65536 bytes\n  //\n\n  /* space at extra (only when reading header) */\n  // this.extra_max  = 0;\n  /* pointer to zero-terminated file name or Z_NULL */\n  this.name       = '';\n  /* space at name (only when reading header) */\n  // this.name_max   = 0;\n  /* pointer to zero-terminated comment or Z_NULL */\n  this.comment    = '';\n  /* space at comment (only when reading header) */\n  // this.comm_max   = 0;\n  /* true if there was or will be a header crc */\n  this.hcrc       = 0;\n  /* true when done reading gzip header (not used when writing a gzip file) */\n  this.done       = false;\n}\n\nmodule.exports = GZheader;\n\n\n/***/ }),\n/* 53 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n// See state defs from inflate.js\nvar BAD = 30;       /* got a data error -- remain here until reset */\nvar TYPE = 12;      /* i: waiting for type bits, including last-flag bit */\n\n/*\n   Decode literal, length, and distance codes and write out the resulting\n   literal and match bytes until either not enough input or output is\n   available, an end-of-block is encountered, or a data error is encountered.\n   When large enough input and output buffers are supplied to inflate(), for\n   example, a 16K input buffer and a 64K output buffer, more than 95% of the\n   inflate execution time is spent in this routine.\n\n   Entry assumptions:\n\n        state.mode === LEN\n        strm.avail_in >= 6\n        strm.avail_out >= 258\n        start >= strm.avail_out\n        state.bits < 8\n\n   On return, state.mode is one of:\n\n        LEN -- ran out of enough output space or enough available input\n        TYPE -- reached end of block code, inflate() to interpret next block\n        BAD -- error in block data\n\n   Notes:\n\n    - The maximum input bits used by a length/distance pair is 15 bits for the\n      length code, 5 bits for the length extra, 15 bits for the distance code,\n      and 13 bits for the distance extra.  This totals 48 bits, or six bytes.\n      Therefore if strm.avail_in >= 6, then there is enough input to avoid\n      checking for available input while decoding.\n\n    - The maximum bytes that a single length/distance pair can output is 258\n      bytes, which is the maximum length that can be coded.  inflate_fast()\n      requires strm.avail_out >= 258 for each loop to avoid checking for\n      output space.\n */\nmodule.exports = function inflate_fast(strm, start) {\n  var state;\n  var _in;                    /* local strm.input */\n  var last;                   /* have enough input while in < last */\n  var _out;                   /* local strm.output */\n  var beg;                    /* inflate()'s initial strm.output */\n  var end;                    /* while out < end, enough space available */\n//#ifdef INFLATE_STRICT\n  var dmax;                   /* maximum distance from zlib header */\n//#endif\n  var wsize;                  /* window size or zero if not using window */\n  var whave;                  /* valid bytes in the window */\n  var wnext;                  /* window write index */\n  // Use `s_window` instead `window`, avoid conflict with instrumentation tools\n  var s_window;               /* allocated sliding window, if wsize != 0 */\n  var hold;                   /* local strm.hold */\n  var bits;                   /* local strm.bits */\n  var lcode;                  /* local strm.lencode */\n  var dcode;                  /* local strm.distcode */\n  var lmask;                  /* mask for first level of length codes */\n  var dmask;                  /* mask for first level of distance codes */\n  var here;                   /* retrieved table entry */\n  var op;                     /* code bits, operation, extra bits, or */\n                              /*  window position, window bytes to copy */\n  var len;                    /* match length, unused bytes */\n  var dist;                   /* match distance */\n  var from;                   /* where to copy match from */\n  var from_source;\n\n\n  var input, output; // JS specific, because we have no pointers\n\n  /* copy state to local variables */\n  state = strm.state;\n  //here = state.here;\n  _in = strm.next_in;\n  input = strm.input;\n  last = _in + (strm.avail_in - 5);\n  _out = strm.next_out;\n  output = strm.output;\n  beg = _out - (start - strm.avail_out);\n  end = _out + (strm.avail_out - 257);\n//#ifdef INFLATE_STRICT\n  dmax = state.dmax;\n//#endif\n  wsize = state.wsize;\n  whave = state.whave;\n  wnext = state.wnext;\n  s_window = state.window;\n  hold = state.hold;\n  bits = state.bits;\n  lcode = state.lencode;\n  dcode = state.distcode;\n  lmask = (1 << state.lenbits) - 1;\n  dmask = (1 << state.distbits) - 1;\n\n\n  /* decode literals and length/distances until end-of-block or not enough\n     input data or output space */\n\n  top:\n  do {\n    if (bits < 15) {\n      hold += input[_in++] << bits;\n      bits += 8;\n      hold += input[_in++] << bits;\n      bits += 8;\n    }\n\n    here = lcode[hold & lmask];\n\n    dolen:\n    for (;;) { // Goto emulation\n      op = here >>> 24/*here.bits*/;\n      hold >>>= op;\n      bits -= op;\n      op = (here >>> 16) & 0xff/*here.op*/;\n      if (op === 0) {                          /* literal */\n        //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?\n        //        \"inflate:         literal '%c'\\n\" :\n        //        \"inflate:         literal 0x%02x\\n\", here.val));\n        output[_out++] = here & 0xffff/*here.val*/;\n      }\n      else if (op & 16) {                     /* length base */\n        len = here & 0xffff/*here.val*/;\n        op &= 15;                           /* number of extra bits */\n        if (op) {\n          if (bits < op) {\n            hold += input[_in++] << bits;\n            bits += 8;\n          }\n          len += hold & ((1 << op) - 1);\n          hold >>>= op;\n          bits -= op;\n        }\n        //Tracevv((stderr, \"inflate:         length %u\\n\", len));\n        if (bits < 15) {\n          hold += input[_in++] << bits;\n          bits += 8;\n          hold += input[_in++] << bits;\n          bits += 8;\n        }\n        here = dcode[hold & dmask];\n\n        dodist:\n        for (;;) { // goto emulation\n          op = here >>> 24/*here.bits*/;\n          hold >>>= op;\n          bits -= op;\n          op = (here >>> 16) & 0xff/*here.op*/;\n\n          if (op & 16) {                      /* distance base */\n            dist = here & 0xffff/*here.val*/;\n            op &= 15;                       /* number of extra bits */\n            if (bits < op) {\n              hold += input[_in++] << bits;\n              bits += 8;\n              if (bits < op) {\n                hold += input[_in++] << bits;\n                bits += 8;\n              }\n            }\n            dist += hold & ((1 << op) - 1);\n//#ifdef INFLATE_STRICT\n            if (dist > dmax) {\n              strm.msg = 'invalid distance too far back';\n              state.mode = BAD;\n              break top;\n            }\n//#endif\n            hold >>>= op;\n            bits -= op;\n            //Tracevv((stderr, \"inflate:         distance %u\\n\", dist));\n            op = _out - beg;                /* max distance in output */\n            if (dist > op) {                /* see if copy from window */\n              op = dist - op;               /* distance back in window */\n              if (op > whave) {\n                if (state.sane) {\n                  strm.msg = 'invalid distance too far back';\n                  state.mode = BAD;\n                  break top;\n                }\n\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR\n//                if (len <= op - whave) {\n//                  do {\n//                    output[_out++] = 0;\n//                  } while (--len);\n//                  continue top;\n//                }\n//                len -= op - whave;\n//                do {\n//                  output[_out++] = 0;\n//                } while (--op > whave);\n//                if (op === 0) {\n//                  from = _out - dist;\n//                  do {\n//                    output[_out++] = output[from++];\n//                  } while (--len);\n//                  continue top;\n//                }\n//#endif\n              }\n              from = 0; // window index\n              from_source = s_window;\n              if (wnext === 0) {           /* very common case */\n                from += wsize - op;\n                if (op < len) {         /* some from window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = _out - dist;  /* rest from output */\n                  from_source = output;\n                }\n              }\n              else if (wnext < op) {      /* wrap around window */\n                from += wsize + wnext - op;\n                op -= wnext;\n                if (op < len) {         /* some from end of window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = 0;\n                  if (wnext < len) {  /* some from start of window */\n                    op = wnext;\n                    len -= op;\n                    do {\n                      output[_out++] = s_window[from++];\n                    } while (--op);\n                    from = _out - dist;      /* rest from output */\n                    from_source = output;\n                  }\n                }\n              }\n              else {                      /* contiguous in window */\n                from += wnext - op;\n                if (op < len) {         /* some from window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = _out - dist;  /* rest from output */\n                  from_source = output;\n                }\n              }\n              while (len > 2) {\n                output[_out++] = from_source[from++];\n                output[_out++] = from_source[from++];\n                output[_out++] = from_source[from++];\n                len -= 3;\n              }\n              if (len) {\n                output[_out++] = from_source[from++];\n                if (len > 1) {\n                  output[_out++] = from_source[from++];\n                }\n              }\n            }\n            else {\n              from = _out - dist;          /* copy direct from output */\n              do {                        /* minimum length is three */\n                output[_out++] = output[from++];\n                output[_out++] = output[from++];\n                output[_out++] = output[from++];\n                len -= 3;\n              } while (len > 2);\n              if (len) {\n                output[_out++] = output[from++];\n                if (len > 1) {\n                  output[_out++] = output[from++];\n                }\n              }\n            }\n          }\n          else if ((op & 64) === 0) {          /* 2nd level distance code */\n            here = dcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];\n            continue dodist;\n          }\n          else {\n            strm.msg = 'invalid distance code';\n            state.mode = BAD;\n            break top;\n          }\n\n          break; // need to emulate goto via \"continue\"\n        }\n      }\n      else if ((op & 64) === 0) {              /* 2nd level length code */\n        here = lcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];\n        continue dolen;\n      }\n      else if (op & 32) {                     /* end-of-block */\n        //Tracevv((stderr, \"inflate:         end of block\\n\"));\n        state.mode = TYPE;\n        break top;\n      }\n      else {\n        strm.msg = 'invalid literal/length code';\n        state.mode = BAD;\n        break top;\n      }\n\n      break; // need to emulate goto via \"continue\"\n    }\n  } while (_in < last && _out < end);\n\n  /* return unused bytes (on entry, bits < 8, so in won't go too far back) */\n  len = bits >> 3;\n  _in -= len;\n  bits -= len << 3;\n  hold &= (1 << bits) - 1;\n\n  /* update state and return */\n  strm.next_in = _in;\n  strm.next_out = _out;\n  strm.avail_in = (_in < last ? 5 + (last - _in) : 5 - (_in - last));\n  strm.avail_out = (_out < end ? 257 + (end - _out) : 257 - (_out - end));\n  state.hold = hold;\n  state.bits = bits;\n  return;\n};\n\n\n/***/ }),\n/* 54 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar utils         = __webpack_require__(3);\nvar adler32       = __webpack_require__(18);\nvar crc32         = __webpack_require__(20);\nvar inflate_fast  = __webpack_require__(53);\nvar inflate_table = __webpack_require__(55);\n\nvar CODES = 0;\nvar LENS = 1;\nvar DISTS = 2;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\n\n/* Allowed flush values; see deflate() and inflate() below for details */\n//var Z_NO_FLUSH      = 0;\n//var Z_PARTIAL_FLUSH = 1;\n//var Z_SYNC_FLUSH    = 2;\n//var Z_FULL_FLUSH    = 3;\nvar Z_FINISH        = 4;\nvar Z_BLOCK         = 5;\nvar Z_TREES         = 6;\n\n\n/* Return codes for the compression/decompression functions. Negative values\n * are errors, positive values are used for special but normal events.\n */\nvar Z_OK            = 0;\nvar Z_STREAM_END    = 1;\nvar Z_NEED_DICT     = 2;\n//var Z_ERRNO         = -1;\nvar Z_STREAM_ERROR  = -2;\nvar Z_DATA_ERROR    = -3;\nvar Z_MEM_ERROR     = -4;\nvar Z_BUF_ERROR     = -5;\n//var Z_VERSION_ERROR = -6;\n\n/* The deflate compression method */\nvar Z_DEFLATED  = 8;\n\n\n/* STATES ====================================================================*/\n/* ===========================================================================*/\n\n\nvar    HEAD = 1;       /* i: waiting for magic header */\nvar    FLAGS = 2;      /* i: waiting for method and flags (gzip) */\nvar    TIME = 3;       /* i: waiting for modification time (gzip) */\nvar    OS = 4;         /* i: waiting for extra flags and operating system (gzip) */\nvar    EXLEN = 5;      /* i: waiting for extra length (gzip) */\nvar    EXTRA = 6;      /* i: waiting for extra bytes (gzip) */\nvar    NAME = 7;       /* i: waiting for end of file name (gzip) */\nvar    COMMENT = 8;    /* i: waiting for end of comment (gzip) */\nvar    HCRC = 9;       /* i: waiting for header crc (gzip) */\nvar    DICTID = 10;    /* i: waiting for dictionary check value */\nvar    DICT = 11;      /* waiting for inflateSetDictionary() call */\nvar        TYPE = 12;      /* i: waiting for type bits, including last-flag bit */\nvar        TYPEDO = 13;    /* i: same, but skip check to exit inflate on new block */\nvar        STORED = 14;    /* i: waiting for stored size (length and complement) */\nvar        COPY_ = 15;     /* i/o: same as COPY below, but only first time in */\nvar        COPY = 16;      /* i/o: waiting for input or output to copy stored block */\nvar        TABLE = 17;     /* i: waiting for dynamic block table lengths */\nvar        LENLENS = 18;   /* i: waiting for code length code lengths */\nvar        CODELENS = 19;  /* i: waiting for length/lit and distance code lengths */\nvar            LEN_ = 20;      /* i: same as LEN below, but only first time in */\nvar            LEN = 21;       /* i: waiting for length/lit/eob code */\nvar            LENEXT = 22;    /* i: waiting for length extra bits */\nvar            DIST = 23;      /* i: waiting for distance code */\nvar            DISTEXT = 24;   /* i: waiting for distance extra bits */\nvar            MATCH = 25;     /* o: waiting for output space to copy string */\nvar            LIT = 26;       /* o: waiting for output space to write literal */\nvar    CHECK = 27;     /* i: waiting for 32-bit check value */\nvar    LENGTH = 28;    /* i: waiting for 32-bit length (gzip) */\nvar    DONE = 29;      /* finished check, done -- remain here until reset */\nvar    BAD = 30;       /* got a data error -- remain here until reset */\nvar    MEM = 31;       /* got an inflate() memory error -- remain here until reset */\nvar    SYNC = 32;      /* looking for synchronization bytes to restart inflate() */\n\n/* ===========================================================================*/\n\n\n\nvar ENOUGH_LENS = 852;\nvar ENOUGH_DISTS = 592;\n//var ENOUGH =  (ENOUGH_LENS+ENOUGH_DISTS);\n\nvar MAX_WBITS = 15;\n/* 32K LZ77 window */\nvar DEF_WBITS = MAX_WBITS;\n\n\nfunction zswap32(q) {\n  return  (((q >>> 24) & 0xff) +\n          ((q >>> 8) & 0xff00) +\n          ((q & 0xff00) << 8) +\n          ((q & 0xff) << 24));\n}\n\n\nfunction InflateState() {\n  this.mode = 0;             /* current inflate mode */\n  this.last = false;          /* true if processing last block */\n  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip */\n  this.havedict = false;      /* true if dictionary provided */\n  this.flags = 0;             /* gzip header method and flags (0 if zlib) */\n  this.dmax = 0;              /* zlib header max distance (INFLATE_STRICT) */\n  this.check = 0;             /* protected copy of check value */\n  this.total = 0;             /* protected copy of output count */\n  // TODO: may be {}\n  this.head = null;           /* where to save gzip header information */\n\n  /* sliding window */\n  this.wbits = 0;             /* log base 2 of requested window size */\n  this.wsize = 0;             /* window size or zero if not using window */\n  this.whave = 0;             /* valid bytes in the window */\n  this.wnext = 0;             /* window write index */\n  this.window = null;         /* allocated sliding window, if needed */\n\n  /* bit accumulator */\n  this.hold = 0;              /* input bit accumulator */\n  this.bits = 0;              /* number of bits in \"in\" */\n\n  /* for string and stored block copying */\n  this.length = 0;            /* literal or length of data to copy */\n  this.offset = 0;            /* distance back to copy string from */\n\n  /* for table and code decoding */\n  this.extra = 0;             /* extra bits needed */\n\n  /* fixed and dynamic code tables */\n  this.lencode = null;          /* starting table for length/literal codes */\n  this.distcode = null;         /* starting table for distance codes */\n  this.lenbits = 0;           /* index bits for lencode */\n  this.distbits = 0;          /* index bits for distcode */\n\n  /* dynamic table building */\n  this.ncode = 0;             /* number of code length code lengths */\n  this.nlen = 0;              /* number of length code lengths */\n  this.ndist = 0;             /* number of distance code lengths */\n  this.have = 0;              /* number of code lengths in lens[] */\n  this.next = null;              /* next available space in codes[] */\n\n  this.lens = new utils.Buf16(320); /* temporary storage for code lengths */\n  this.work = new utils.Buf16(288); /* work area for code table building */\n\n  /*\n   because we don't have pointers in js, we use lencode and distcode directly\n   as buffers so we don't need codes\n  */\n  //this.codes = new utils.Buf32(ENOUGH);       /* space for code tables */\n  this.lendyn = null;              /* dynamic table for length/literal codes (JS specific) */\n  this.distdyn = null;             /* dynamic table for distance codes (JS specific) */\n  this.sane = 0;                   /* if false, allow invalid distance too far */\n  this.back = 0;                   /* bits back of last unprocessed length/lit */\n  this.was = 0;                    /* initial length of match */\n}\n\nfunction inflateResetKeep(strm) {\n  var state;\n\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  state = strm.state;\n  strm.total_in = strm.total_out = state.total = 0;\n  strm.msg = ''; /*Z_NULL*/\n  if (state.wrap) {       /* to support ill-conceived Java test suite */\n    strm.adler = state.wrap & 1;\n  }\n  state.mode = HEAD;\n  state.last = 0;\n  state.havedict = 0;\n  state.dmax = 32768;\n  state.head = null/*Z_NULL*/;\n  state.hold = 0;\n  state.bits = 0;\n  //state.lencode = state.distcode = state.next = state.codes;\n  state.lencode = state.lendyn = new utils.Buf32(ENOUGH_LENS);\n  state.distcode = state.distdyn = new utils.Buf32(ENOUGH_DISTS);\n\n  state.sane = 1;\n  state.back = -1;\n  //Tracev((stderr, \"inflate: reset\\n\"));\n  return Z_OK;\n}\n\nfunction inflateReset(strm) {\n  var state;\n\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  state = strm.state;\n  state.wsize = 0;\n  state.whave = 0;\n  state.wnext = 0;\n  return inflateResetKeep(strm);\n\n}\n\nfunction inflateReset2(strm, windowBits) {\n  var wrap;\n  var state;\n\n  /* get the state */\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  state = strm.state;\n\n  /* extract wrap request from windowBits parameter */\n  if (windowBits < 0) {\n    wrap = 0;\n    windowBits = -windowBits;\n  }\n  else {\n    wrap = (windowBits >> 4) + 1;\n    if (windowBits < 48) {\n      windowBits &= 15;\n    }\n  }\n\n  /* set number of window bits, free window if different */\n  if (windowBits && (windowBits < 8 || windowBits > 15)) {\n    return Z_STREAM_ERROR;\n  }\n  if (state.window !== null && state.wbits !== windowBits) {\n    state.window = null;\n  }\n\n  /* update state and reset the rest of it */\n  state.wrap = wrap;\n  state.wbits = windowBits;\n  return inflateReset(strm);\n}\n\nfunction inflateInit2(strm, windowBits) {\n  var ret;\n  var state;\n\n  if (!strm) { return Z_STREAM_ERROR; }\n  //strm.msg = Z_NULL;                 /* in case we return an error */\n\n  state = new InflateState();\n\n  //if (state === Z_NULL) return Z_MEM_ERROR;\n  //Tracev((stderr, \"inflate: allocated\\n\"));\n  strm.state = state;\n  state.window = null/*Z_NULL*/;\n  ret = inflateReset2(strm, windowBits);\n  if (ret !== Z_OK) {\n    strm.state = null/*Z_NULL*/;\n  }\n  return ret;\n}\n\nfunction inflateInit(strm) {\n  return inflateInit2(strm, DEF_WBITS);\n}\n\n\n/*\n Return state with length and distance decoding tables and index sizes set to\n fixed code decoding.  Normally this returns fixed tables from inffixed.h.\n If BUILDFIXED is defined, then instead this routine builds the tables the\n first time it's called, and returns those tables the first time and\n thereafter.  This reduces the size of the code by about 2K bytes, in\n exchange for a little execution time.  However, BUILDFIXED should not be\n used for threaded applications, since the rewriting of the tables and virgin\n may not be thread-safe.\n */\nvar virgin = true;\n\nvar lenfix, distfix; // We have no pointers in JS, so keep tables separate\n\nfunction fixedtables(state) {\n  /* build fixed huffman tables if first call (may not be thread safe) */\n  if (virgin) {\n    var sym;\n\n    lenfix = new utils.Buf32(512);\n    distfix = new utils.Buf32(32);\n\n    /* literal/length table */\n    sym = 0;\n    while (sym < 144) { state.lens[sym++] = 8; }\n    while (sym < 256) { state.lens[sym++] = 9; }\n    while (sym < 280) { state.lens[sym++] = 7; }\n    while (sym < 288) { state.lens[sym++] = 8; }\n\n    inflate_table(LENS,  state.lens, 0, 288, lenfix,   0, state.work, { bits: 9 });\n\n    /* distance table */\n    sym = 0;\n    while (sym < 32) { state.lens[sym++] = 5; }\n\n    inflate_table(DISTS, state.lens, 0, 32,   distfix, 0, state.work, { bits: 5 });\n\n    /* do this just once */\n    virgin = false;\n  }\n\n  state.lencode = lenfix;\n  state.lenbits = 9;\n  state.distcode = distfix;\n  state.distbits = 5;\n}\n\n\n/*\n Update the window with the last wsize (normally 32K) bytes written before\n returning.  If window does not exist yet, create it.  This is only called\n when a window is already in use, or when output has been written during this\n inflate call, but the end of the deflate stream has not been reached yet.\n It is also called to create a window for dictionary data when a dictionary\n is loaded.\n\n Providing output buffers larger than 32K to inflate() should provide a speed\n advantage, since only the last 32K of output is copied to the sliding window\n upon return from inflate(), and since all distances after the first 32K of\n output will fall in the output data, making match copies simpler and faster.\n The advantage may be dependent on the size of the processor's data caches.\n */\nfunction updatewindow(strm, src, end, copy) {\n  var dist;\n  var state = strm.state;\n\n  /* if it hasn't been done already, allocate space for the window */\n  if (state.window === null) {\n    state.wsize = 1 << state.wbits;\n    state.wnext = 0;\n    state.whave = 0;\n\n    state.window = new utils.Buf8(state.wsize);\n  }\n\n  /* copy state->wsize or less output bytes into the circular window */\n  if (copy >= state.wsize) {\n    utils.arraySet(state.window, src, end - state.wsize, state.wsize, 0);\n    state.wnext = 0;\n    state.whave = state.wsize;\n  }\n  else {\n    dist = state.wsize - state.wnext;\n    if (dist > copy) {\n      dist = copy;\n    }\n    //zmemcpy(state->window + state->wnext, end - copy, dist);\n    utils.arraySet(state.window, src, end - copy, dist, state.wnext);\n    copy -= dist;\n    if (copy) {\n      //zmemcpy(state->window, end - copy, copy);\n      utils.arraySet(state.window, src, end - copy, copy, 0);\n      state.wnext = copy;\n      state.whave = state.wsize;\n    }\n    else {\n      state.wnext += dist;\n      if (state.wnext === state.wsize) { state.wnext = 0; }\n      if (state.whave < state.wsize) { state.whave += dist; }\n    }\n  }\n  return 0;\n}\n\nfunction inflate(strm, flush) {\n  var state;\n  var input, output;          // input/output buffers\n  var next;                   /* next input INDEX */\n  var put;                    /* next output INDEX */\n  var have, left;             /* available input and output */\n  var hold;                   /* bit buffer */\n  var bits;                   /* bits in bit buffer */\n  var _in, _out;              /* save starting available input and output */\n  var copy;                   /* number of stored or match bytes to copy */\n  var from;                   /* where to copy match bytes from */\n  var from_source;\n  var here = 0;               /* current decoding table entry */\n  var here_bits, here_op, here_val; // paked \"here\" denormalized (JS specific)\n  //var last;                   /* parent table entry */\n  var last_bits, last_op, last_val; // paked \"last\" denormalized (JS specific)\n  var len;                    /* length to copy for repeats, bits to drop */\n  var ret;                    /* return code */\n  var hbuf = new utils.Buf8(4);    /* buffer for gzip header crc calculation */\n  var opts;\n\n  var n; // temporary var for NEED_BITS\n\n  var order = /* permutation of code lengths */\n    [ 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 ];\n\n\n  if (!strm || !strm.state || !strm.output ||\n      (!strm.input && strm.avail_in !== 0)) {\n    return Z_STREAM_ERROR;\n  }\n\n  state = strm.state;\n  if (state.mode === TYPE) { state.mode = TYPEDO; }    /* skip check */\n\n\n  //--- LOAD() ---\n  put = strm.next_out;\n  output = strm.output;\n  left = strm.avail_out;\n  next = strm.next_in;\n  input = strm.input;\n  have = strm.avail_in;\n  hold = state.hold;\n  bits = state.bits;\n  //---\n\n  _in = have;\n  _out = left;\n  ret = Z_OK;\n\n  inf_leave: // goto emulation\n  for (;;) {\n    switch (state.mode) {\n      case HEAD:\n        if (state.wrap === 0) {\n          state.mode = TYPEDO;\n          break;\n        }\n        //=== NEEDBITS(16);\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if ((state.wrap & 2) && hold === 0x8b1f) {  /* gzip header */\n          state.check = 0/*crc32(0L, Z_NULL, 0)*/;\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32(state.check, hbuf, 2, 0);\n          //===//\n\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          state.mode = FLAGS;\n          break;\n        }\n        state.flags = 0;           /* expect zlib header */\n        if (state.head) {\n          state.head.done = false;\n        }\n        if (!(state.wrap & 1) ||   /* check if zlib header allowed */\n          (((hold & 0xff)/*BITS(8)*/ << 8) + (hold >> 8)) % 31) {\n          strm.msg = 'incorrect header check';\n          state.mode = BAD;\n          break;\n        }\n        if ((hold & 0x0f)/*BITS(4)*/ !== Z_DEFLATED) {\n          strm.msg = 'unknown compression method';\n          state.mode = BAD;\n          break;\n        }\n        //--- DROPBITS(4) ---//\n        hold >>>= 4;\n        bits -= 4;\n        //---//\n        len = (hold & 0x0f)/*BITS(4)*/ + 8;\n        if (state.wbits === 0) {\n          state.wbits = len;\n        }\n        else if (len > state.wbits) {\n          strm.msg = 'invalid window size';\n          state.mode = BAD;\n          break;\n        }\n        state.dmax = 1 << len;\n        //Tracev((stderr, \"inflate:   zlib header ok\\n\"));\n        strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;\n        state.mode = hold & 0x200 ? DICTID : TYPE;\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        break;\n      case FLAGS:\n        //=== NEEDBITS(16); */\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.flags = hold;\n        if ((state.flags & 0xff) !== Z_DEFLATED) {\n          strm.msg = 'unknown compression method';\n          state.mode = BAD;\n          break;\n        }\n        if (state.flags & 0xe000) {\n          strm.msg = 'unknown header flags set';\n          state.mode = BAD;\n          break;\n        }\n        if (state.head) {\n          state.head.text = ((hold >> 8) & 1);\n        }\n        if (state.flags & 0x0200) {\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32(state.check, hbuf, 2, 0);\n          //===//\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = TIME;\n        /* falls through */\n      case TIME:\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if (state.head) {\n          state.head.time = hold;\n        }\n        if (state.flags & 0x0200) {\n          //=== CRC4(state.check, hold)\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          hbuf[2] = (hold >>> 16) & 0xff;\n          hbuf[3] = (hold >>> 24) & 0xff;\n          state.check = crc32(state.check, hbuf, 4, 0);\n          //===\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = OS;\n        /* falls through */\n      case OS:\n        //=== NEEDBITS(16); */\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if (state.head) {\n          state.head.xflags = (hold & 0xff);\n          state.head.os = (hold >> 8);\n        }\n        if (state.flags & 0x0200) {\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32(state.check, hbuf, 2, 0);\n          //===//\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = EXLEN;\n        /* falls through */\n      case EXLEN:\n        if (state.flags & 0x0400) {\n          //=== NEEDBITS(16); */\n          while (bits < 16) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.length = hold;\n          if (state.head) {\n            state.head.extra_len = hold;\n          }\n          if (state.flags & 0x0200) {\n            //=== CRC2(state.check, hold);\n            hbuf[0] = hold & 0xff;\n            hbuf[1] = (hold >>> 8) & 0xff;\n            state.check = crc32(state.check, hbuf, 2, 0);\n            //===//\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n        }\n        else if (state.head) {\n          state.head.extra = null/*Z_NULL*/;\n        }\n        state.mode = EXTRA;\n        /* falls through */\n      case EXTRA:\n        if (state.flags & 0x0400) {\n          copy = state.length;\n          if (copy > have) { copy = have; }\n          if (copy) {\n            if (state.head) {\n              len = state.head.extra_len - state.length;\n              if (!state.head.extra) {\n                // Use untyped array for more convenient processing later\n                state.head.extra = new Array(state.head.extra_len);\n              }\n              utils.arraySet(\n                state.head.extra,\n                input,\n                next,\n                // extra field is limited to 65536 bytes\n                // - no need for additional size check\n                copy,\n                /*len + copy > state.head.extra_max - len ? state.head.extra_max : copy,*/\n                len\n              );\n              //zmemcpy(state.head.extra + len, next,\n              //        len + copy > state.head.extra_max ?\n              //        state.head.extra_max - len : copy);\n            }\n            if (state.flags & 0x0200) {\n              state.check = crc32(state.check, input, copy, next);\n            }\n            have -= copy;\n            next += copy;\n            state.length -= copy;\n          }\n          if (state.length) { break inf_leave; }\n        }\n        state.length = 0;\n        state.mode = NAME;\n        /* falls through */\n      case NAME:\n        if (state.flags & 0x0800) {\n          if (have === 0) { break inf_leave; }\n          copy = 0;\n          do {\n            // TODO: 2 or 1 bytes?\n            len = input[next + copy++];\n            /* use constant limit because in js we should not preallocate memory */\n            if (state.head && len &&\n                (state.length < 65536 /*state.head.name_max*/)) {\n              state.head.name += String.fromCharCode(len);\n            }\n          } while (len && copy < have);\n\n          if (state.flags & 0x0200) {\n            state.check = crc32(state.check, input, copy, next);\n          }\n          have -= copy;\n          next += copy;\n          if (len) { break inf_leave; }\n        }\n        else if (state.head) {\n          state.head.name = null;\n        }\n        state.length = 0;\n        state.mode = COMMENT;\n        /* falls through */\n      case COMMENT:\n        if (state.flags & 0x1000) {\n          if (have === 0) { break inf_leave; }\n          copy = 0;\n          do {\n            len = input[next + copy++];\n            /* use constant limit because in js we should not preallocate memory */\n            if (state.head && len &&\n                (state.length < 65536 /*state.head.comm_max*/)) {\n              state.head.comment += String.fromCharCode(len);\n            }\n          } while (len && copy < have);\n          if (state.flags & 0x0200) {\n            state.check = crc32(state.check, input, copy, next);\n          }\n          have -= copy;\n          next += copy;\n          if (len) { break inf_leave; }\n        }\n        else if (state.head) {\n          state.head.comment = null;\n        }\n        state.mode = HCRC;\n        /* falls through */\n      case HCRC:\n        if (state.flags & 0x0200) {\n          //=== NEEDBITS(16); */\n          while (bits < 16) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          if (hold !== (state.check & 0xffff)) {\n            strm.msg = 'header crc mismatch';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n        }\n        if (state.head) {\n          state.head.hcrc = ((state.flags >> 9) & 1);\n          state.head.done = true;\n        }\n        strm.adler = state.check = 0;\n        state.mode = TYPE;\n        break;\n      case DICTID:\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        strm.adler = state.check = zswap32(hold);\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = DICT;\n        /* falls through */\n      case DICT:\n        if (state.havedict === 0) {\n          //--- RESTORE() ---\n          strm.next_out = put;\n          strm.avail_out = left;\n          strm.next_in = next;\n          strm.avail_in = have;\n          state.hold = hold;\n          state.bits = bits;\n          //---\n          return Z_NEED_DICT;\n        }\n        strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;\n        state.mode = TYPE;\n        /* falls through */\n      case TYPE:\n        if (flush === Z_BLOCK || flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case TYPEDO:\n        if (state.last) {\n          //--- BYTEBITS() ---//\n          hold >>>= bits & 7;\n          bits -= bits & 7;\n          //---//\n          state.mode = CHECK;\n          break;\n        }\n        //=== NEEDBITS(3); */\n        while (bits < 3) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.last = (hold & 0x01)/*BITS(1)*/;\n        //--- DROPBITS(1) ---//\n        hold >>>= 1;\n        bits -= 1;\n        //---//\n\n        switch ((hold & 0x03)/*BITS(2)*/) {\n          case 0:                             /* stored block */\n            //Tracev((stderr, \"inflate:     stored block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = STORED;\n            break;\n          case 1:                             /* fixed block */\n            fixedtables(state);\n            //Tracev((stderr, \"inflate:     fixed codes block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = LEN_;             /* decode codes */\n            if (flush === Z_TREES) {\n              //--- DROPBITS(2) ---//\n              hold >>>= 2;\n              bits -= 2;\n              //---//\n              break inf_leave;\n            }\n            break;\n          case 2:                             /* dynamic block */\n            //Tracev((stderr, \"inflate:     dynamic codes block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = TABLE;\n            break;\n          case 3:\n            strm.msg = 'invalid block type';\n            state.mode = BAD;\n        }\n        //--- DROPBITS(2) ---//\n        hold >>>= 2;\n        bits -= 2;\n        //---//\n        break;\n      case STORED:\n        //--- BYTEBITS() ---// /* go to byte boundary */\n        hold >>>= bits & 7;\n        bits -= bits & 7;\n        //---//\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if ((hold & 0xffff) !== ((hold >>> 16) ^ 0xffff)) {\n          strm.msg = 'invalid stored block lengths';\n          state.mode = BAD;\n          break;\n        }\n        state.length = hold & 0xffff;\n        //Tracev((stderr, \"inflate:       stored length %u\\n\",\n        //        state.length));\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = COPY_;\n        if (flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case COPY_:\n        state.mode = COPY;\n        /* falls through */\n      case COPY:\n        copy = state.length;\n        if (copy) {\n          if (copy > have) { copy = have; }\n          if (copy > left) { copy = left; }\n          if (copy === 0) { break inf_leave; }\n          //--- zmemcpy(put, next, copy); ---\n          utils.arraySet(output, input, next, copy, put);\n          //---//\n          have -= copy;\n          next += copy;\n          left -= copy;\n          put += copy;\n          state.length -= copy;\n          break;\n        }\n        //Tracev((stderr, \"inflate:       stored end\\n\"));\n        state.mode = TYPE;\n        break;\n      case TABLE:\n        //=== NEEDBITS(14); */\n        while (bits < 14) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.nlen = (hold & 0x1f)/*BITS(5)*/ + 257;\n        //--- DROPBITS(5) ---//\n        hold >>>= 5;\n        bits -= 5;\n        //---//\n        state.ndist = (hold & 0x1f)/*BITS(5)*/ + 1;\n        //--- DROPBITS(5) ---//\n        hold >>>= 5;\n        bits -= 5;\n        //---//\n        state.ncode = (hold & 0x0f)/*BITS(4)*/ + 4;\n        //--- DROPBITS(4) ---//\n        hold >>>= 4;\n        bits -= 4;\n        //---//\n//#ifndef PKZIP_BUG_WORKAROUND\n        if (state.nlen > 286 || state.ndist > 30) {\n          strm.msg = 'too many length or distance symbols';\n          state.mode = BAD;\n          break;\n        }\n//#endif\n        //Tracev((stderr, \"inflate:       table sizes ok\\n\"));\n        state.have = 0;\n        state.mode = LENLENS;\n        /* falls through */\n      case LENLENS:\n        while (state.have < state.ncode) {\n          //=== NEEDBITS(3);\n          while (bits < 3) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.lens[order[state.have++]] = (hold & 0x07);//BITS(3);\n          //--- DROPBITS(3) ---//\n          hold >>>= 3;\n          bits -= 3;\n          //---//\n        }\n        while (state.have < 19) {\n          state.lens[order[state.have++]] = 0;\n        }\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        //state.next = state.codes;\n        //state.lencode = state.next;\n        // Switch to use dynamic table\n        state.lencode = state.lendyn;\n        state.lenbits = 7;\n\n        opts = { bits: state.lenbits };\n        ret = inflate_table(CODES, state.lens, 0, 19, state.lencode, 0, state.work, opts);\n        state.lenbits = opts.bits;\n\n        if (ret) {\n          strm.msg = 'invalid code lengths set';\n          state.mode = BAD;\n          break;\n        }\n        //Tracev((stderr, \"inflate:       code lengths ok\\n\"));\n        state.have = 0;\n        state.mode = CODELENS;\n        /* falls through */\n      case CODELENS:\n        while (state.have < state.nlen + state.ndist) {\n          for (;;) {\n            here = state.lencode[hold & ((1 << state.lenbits) - 1)];/*BITS(state.lenbits)*/\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          if (here_val < 16) {\n            //--- DROPBITS(here.bits) ---//\n            hold >>>= here_bits;\n            bits -= here_bits;\n            //---//\n            state.lens[state.have++] = here_val;\n          }\n          else {\n            if (here_val === 16) {\n              //=== NEEDBITS(here.bits + 2);\n              n = here_bits + 2;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              if (state.have === 0) {\n                strm.msg = 'invalid bit length repeat';\n                state.mode = BAD;\n                break;\n              }\n              len = state.lens[state.have - 1];\n              copy = 3 + (hold & 0x03);//BITS(2);\n              //--- DROPBITS(2) ---//\n              hold >>>= 2;\n              bits -= 2;\n              //---//\n            }\n            else if (here_val === 17) {\n              //=== NEEDBITS(here.bits + 3);\n              n = here_bits + 3;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              len = 0;\n              copy = 3 + (hold & 0x07);//BITS(3);\n              //--- DROPBITS(3) ---//\n              hold >>>= 3;\n              bits -= 3;\n              //---//\n            }\n            else {\n              //=== NEEDBITS(here.bits + 7);\n              n = here_bits + 7;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              len = 0;\n              copy = 11 + (hold & 0x7f);//BITS(7);\n              //--- DROPBITS(7) ---//\n              hold >>>= 7;\n              bits -= 7;\n              //---//\n            }\n            if (state.have + copy > state.nlen + state.ndist) {\n              strm.msg = 'invalid bit length repeat';\n              state.mode = BAD;\n              break;\n            }\n            while (copy--) {\n              state.lens[state.have++] = len;\n            }\n          }\n        }\n\n        /* handle error breaks in while */\n        if (state.mode === BAD) { break; }\n\n        /* check for end-of-block code (better have one) */\n        if (state.lens[256] === 0) {\n          strm.msg = 'invalid code -- missing end-of-block';\n          state.mode = BAD;\n          break;\n        }\n\n        /* build code tables -- note: do not change the lenbits or distbits\n           values here (9 and 6) without reading the comments in inftrees.h\n           concerning the ENOUGH constants, which depend on those values */\n        state.lenbits = 9;\n\n        opts = { bits: state.lenbits };\n        ret = inflate_table(LENS, state.lens, 0, state.nlen, state.lencode, 0, state.work, opts);\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        // state.next_index = opts.table_index;\n        state.lenbits = opts.bits;\n        // state.lencode = state.next;\n\n        if (ret) {\n          strm.msg = 'invalid literal/lengths set';\n          state.mode = BAD;\n          break;\n        }\n\n        state.distbits = 6;\n        //state.distcode.copy(state.codes);\n        // Switch to use dynamic table\n        state.distcode = state.distdyn;\n        opts = { bits: state.distbits };\n        ret = inflate_table(DISTS, state.lens, state.nlen, state.ndist, state.distcode, 0, state.work, opts);\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        // state.next_index = opts.table_index;\n        state.distbits = opts.bits;\n        // state.distcode = state.next;\n\n        if (ret) {\n          strm.msg = 'invalid distances set';\n          state.mode = BAD;\n          break;\n        }\n        //Tracev((stderr, 'inflate:       codes ok\\n'));\n        state.mode = LEN_;\n        if (flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case LEN_:\n        state.mode = LEN;\n        /* falls through */\n      case LEN:\n        if (have >= 6 && left >= 258) {\n          //--- RESTORE() ---\n          strm.next_out = put;\n          strm.avail_out = left;\n          strm.next_in = next;\n          strm.avail_in = have;\n          state.hold = hold;\n          state.bits = bits;\n          //---\n          inflate_fast(strm, _out);\n          //--- LOAD() ---\n          put = strm.next_out;\n          output = strm.output;\n          left = strm.avail_out;\n          next = strm.next_in;\n          input = strm.input;\n          have = strm.avail_in;\n          hold = state.hold;\n          bits = state.bits;\n          //---\n\n          if (state.mode === TYPE) {\n            state.back = -1;\n          }\n          break;\n        }\n        state.back = 0;\n        for (;;) {\n          here = state.lencode[hold & ((1 << state.lenbits) - 1)];  /*BITS(state.lenbits)*/\n          here_bits = here >>> 24;\n          here_op = (here >>> 16) & 0xff;\n          here_val = here & 0xffff;\n\n          if (here_bits <= bits) { break; }\n          //--- PULLBYTE() ---//\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n          //---//\n        }\n        if (here_op && (here_op & 0xf0) === 0) {\n          last_bits = here_bits;\n          last_op = here_op;\n          last_val = here_val;\n          for (;;) {\n            here = state.lencode[last_val +\n                    ((hold & ((1 << (last_bits + last_op)) - 1))/*BITS(last.bits + last.op)*/ >> last_bits)];\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((last_bits + here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          //--- DROPBITS(last.bits) ---//\n          hold >>>= last_bits;\n          bits -= last_bits;\n          //---//\n          state.back += last_bits;\n        }\n        //--- DROPBITS(here.bits) ---//\n        hold >>>= here_bits;\n        bits -= here_bits;\n        //---//\n        state.back += here_bits;\n        state.length = here_val;\n        if (here_op === 0) {\n          //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?\n          //        \"inflate:         literal '%c'\\n\" :\n          //        \"inflate:         literal 0x%02x\\n\", here.val));\n          state.mode = LIT;\n          break;\n        }\n        if (here_op & 32) {\n          //Tracevv((stderr, \"inflate:         end of block\\n\"));\n          state.back = -1;\n          state.mode = TYPE;\n          break;\n        }\n        if (here_op & 64) {\n          strm.msg = 'invalid literal/length code';\n          state.mode = BAD;\n          break;\n        }\n        state.extra = here_op & 15;\n        state.mode = LENEXT;\n        /* falls through */\n      case LENEXT:\n        if (state.extra) {\n          //=== NEEDBITS(state.extra);\n          n = state.extra;\n          while (bits < n) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.length += hold & ((1 << state.extra) - 1)/*BITS(state.extra)*/;\n          //--- DROPBITS(state.extra) ---//\n          hold >>>= state.extra;\n          bits -= state.extra;\n          //---//\n          state.back += state.extra;\n        }\n        //Tracevv((stderr, \"inflate:         length %u\\n\", state.length));\n        state.was = state.length;\n        state.mode = DIST;\n        /* falls through */\n      case DIST:\n        for (;;) {\n          here = state.distcode[hold & ((1 << state.distbits) - 1)];/*BITS(state.distbits)*/\n          here_bits = here >>> 24;\n          here_op = (here >>> 16) & 0xff;\n          here_val = here & 0xffff;\n\n          if ((here_bits) <= bits) { break; }\n          //--- PULLBYTE() ---//\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n          //---//\n        }\n        if ((here_op & 0xf0) === 0) {\n          last_bits = here_bits;\n          last_op = here_op;\n          last_val = here_val;\n          for (;;) {\n            here = state.distcode[last_val +\n                    ((hold & ((1 << (last_bits + last_op)) - 1))/*BITS(last.bits + last.op)*/ >> last_bits)];\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((last_bits + here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          //--- DROPBITS(last.bits) ---//\n          hold >>>= last_bits;\n          bits -= last_bits;\n          //---//\n          state.back += last_bits;\n        }\n        //--- DROPBITS(here.bits) ---//\n        hold >>>= here_bits;\n        bits -= here_bits;\n        //---//\n        state.back += here_bits;\n        if (here_op & 64) {\n          strm.msg = 'invalid distance code';\n          state.mode = BAD;\n          break;\n        }\n        state.offset = here_val;\n        state.extra = (here_op) & 15;\n        state.mode = DISTEXT;\n        /* falls through */\n      case DISTEXT:\n        if (state.extra) {\n          //=== NEEDBITS(state.extra);\n          n = state.extra;\n          while (bits < n) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.offset += hold & ((1 << state.extra) - 1)/*BITS(state.extra)*/;\n          //--- DROPBITS(state.extra) ---//\n          hold >>>= state.extra;\n          bits -= state.extra;\n          //---//\n          state.back += state.extra;\n        }\n//#ifdef INFLATE_STRICT\n        if (state.offset > state.dmax) {\n          strm.msg = 'invalid distance too far back';\n          state.mode = BAD;\n          break;\n        }\n//#endif\n        //Tracevv((stderr, \"inflate:         distance %u\\n\", state.offset));\n        state.mode = MATCH;\n        /* falls through */\n      case MATCH:\n        if (left === 0) { break inf_leave; }\n        copy = _out - left;\n        if (state.offset > copy) {         /* copy from window */\n          copy = state.offset - copy;\n          if (copy > state.whave) {\n            if (state.sane) {\n              strm.msg = 'invalid distance too far back';\n              state.mode = BAD;\n              break;\n            }\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR\n//          Trace((stderr, \"inflate.c too far\\n\"));\n//          copy -= state.whave;\n//          if (copy > state.length) { copy = state.length; }\n//          if (copy > left) { copy = left; }\n//          left -= copy;\n//          state.length -= copy;\n//          do {\n//            output[put++] = 0;\n//          } while (--copy);\n//          if (state.length === 0) { state.mode = LEN; }\n//          break;\n//#endif\n          }\n          if (copy > state.wnext) {\n            copy -= state.wnext;\n            from = state.wsize - copy;\n          }\n          else {\n            from = state.wnext - copy;\n          }\n          if (copy > state.length) { copy = state.length; }\n          from_source = state.window;\n        }\n        else {                              /* copy from output */\n          from_source = output;\n          from = put - state.offset;\n          copy = state.length;\n        }\n        if (copy > left) { copy = left; }\n        left -= copy;\n        state.length -= copy;\n        do {\n          output[put++] = from_source[from++];\n        } while (--copy);\n        if (state.length === 0) { state.mode = LEN; }\n        break;\n      case LIT:\n        if (left === 0) { break inf_leave; }\n        output[put++] = state.length;\n        left--;\n        state.mode = LEN;\n        break;\n      case CHECK:\n        if (state.wrap) {\n          //=== NEEDBITS(32);\n          while (bits < 32) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            // Use '|' instead of '+' to make sure that result is signed\n            hold |= input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          _out -= left;\n          strm.total_out += _out;\n          state.total += _out;\n          if (_out) {\n            strm.adler = state.check =\n                /*UPDATE(state.check, put - _out, _out);*/\n                (state.flags ? crc32(state.check, output, _out, put - _out) : adler32(state.check, output, _out, put - _out));\n\n          }\n          _out = left;\n          // NB: crc32 stored as signed 32-bit int, zswap32 returns signed too\n          if ((state.flags ? hold : zswap32(hold)) !== state.check) {\n            strm.msg = 'incorrect data check';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          //Tracev((stderr, \"inflate:   check matches trailer\\n\"));\n        }\n        state.mode = LENGTH;\n        /* falls through */\n      case LENGTH:\n        if (state.wrap && state.flags) {\n          //=== NEEDBITS(32);\n          while (bits < 32) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          if (hold !== (state.total & 0xffffffff)) {\n            strm.msg = 'incorrect length check';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          //Tracev((stderr, \"inflate:   length matches trailer\\n\"));\n        }\n        state.mode = DONE;\n        /* falls through */\n      case DONE:\n        ret = Z_STREAM_END;\n        break inf_leave;\n      case BAD:\n        ret = Z_DATA_ERROR;\n        break inf_leave;\n      case MEM:\n        return Z_MEM_ERROR;\n      case SYNC:\n        /* falls through */\n      default:\n        return Z_STREAM_ERROR;\n    }\n  }\n\n  // inf_leave <- here is real place for \"goto inf_leave\", emulated via \"break inf_leave\"\n\n  /*\n     Return from inflate(), updating the total counts and the check value.\n     If there was no progress during the inflate() call, return a buffer\n     error.  Call updatewindow() to create and/or update the window state.\n     Note: a memory error from inflate() is non-recoverable.\n   */\n\n  //--- RESTORE() ---\n  strm.next_out = put;\n  strm.avail_out = left;\n  strm.next_in = next;\n  strm.avail_in = have;\n  state.hold = hold;\n  state.bits = bits;\n  //---\n\n  if (state.wsize || (_out !== strm.avail_out && state.mode < BAD &&\n                      (state.mode < CHECK || flush !== Z_FINISH))) {\n    if (updatewindow(strm, strm.output, strm.next_out, _out - strm.avail_out)) {\n      state.mode = MEM;\n      return Z_MEM_ERROR;\n    }\n  }\n  _in -= strm.avail_in;\n  _out -= strm.avail_out;\n  strm.total_in += _in;\n  strm.total_out += _out;\n  state.total += _out;\n  if (state.wrap && _out) {\n    strm.adler = state.check = /*UPDATE(state.check, strm.next_out - _out, _out);*/\n      (state.flags ? crc32(state.check, output, _out, strm.next_out - _out) : adler32(state.check, output, _out, strm.next_out - _out));\n  }\n  strm.data_type = state.bits + (state.last ? 64 : 0) +\n                    (state.mode === TYPE ? 128 : 0) +\n                    (state.mode === LEN_ || state.mode === COPY_ ? 256 : 0);\n  if (((_in === 0 && _out === 0) || flush === Z_FINISH) && ret === Z_OK) {\n    ret = Z_BUF_ERROR;\n  }\n  return ret;\n}\n\nfunction inflateEnd(strm) {\n\n  if (!strm || !strm.state /*|| strm->zfree == (free_func)0*/) {\n    return Z_STREAM_ERROR;\n  }\n\n  var state = strm.state;\n  if (state.window) {\n    state.window = null;\n  }\n  strm.state = null;\n  return Z_OK;\n}\n\nfunction inflateGetHeader(strm, head) {\n  var state;\n\n  /* check state */\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  state = strm.state;\n  if ((state.wrap & 2) === 0) { return Z_STREAM_ERROR; }\n\n  /* save header structure */\n  state.head = head;\n  head.done = false;\n  return Z_OK;\n}\n\nfunction inflateSetDictionary(strm, dictionary) {\n  var dictLength = dictionary.length;\n\n  var state;\n  var dictid;\n  var ret;\n\n  /* check state */\n  if (!strm /* == Z_NULL */ || !strm.state /* == Z_NULL */) { return Z_STREAM_ERROR; }\n  state = strm.state;\n\n  if (state.wrap !== 0 && state.mode !== DICT) {\n    return Z_STREAM_ERROR;\n  }\n\n  /* check for correct dictionary identifier */\n  if (state.mode === DICT) {\n    dictid = 1; /* adler32(0, null, 0)*/\n    /* dictid = adler32(dictid, dictionary, dictLength); */\n    dictid = adler32(dictid, dictionary, dictLength, 0);\n    if (dictid !== state.check) {\n      return Z_DATA_ERROR;\n    }\n  }\n  /* copy dictionary to window using updatewindow(), which will amend the\n   existing dictionary if appropriate */\n  ret = updatewindow(strm, dictionary, dictLength, dictLength);\n  if (ret) {\n    state.mode = MEM;\n    return Z_MEM_ERROR;\n  }\n  state.havedict = 1;\n  // Tracev((stderr, \"inflate:   dictionary set\\n\"));\n  return Z_OK;\n}\n\nexports.inflateReset = inflateReset;\nexports.inflateReset2 = inflateReset2;\nexports.inflateResetKeep = inflateResetKeep;\nexports.inflateInit = inflateInit;\nexports.inflateInit2 = inflateInit2;\nexports.inflate = inflate;\nexports.inflateEnd = inflateEnd;\nexports.inflateGetHeader = inflateGetHeader;\nexports.inflateSetDictionary = inflateSetDictionary;\nexports.inflateInfo = 'pako inflate (from Nodeca project)';\n\n/* Not implemented\nexports.inflateCopy = inflateCopy;\nexports.inflateGetDictionary = inflateGetDictionary;\nexports.inflateMark = inflateMark;\nexports.inflatePrime = inflatePrime;\nexports.inflateSync = inflateSync;\nexports.inflateSyncPoint = inflateSyncPoint;\nexports.inflateUndermine = inflateUndermine;\n*/\n\n\n/***/ }),\n/* 55 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar utils = __webpack_require__(3);\n\nvar MAXBITS = 15;\nvar ENOUGH_LENS = 852;\nvar ENOUGH_DISTS = 592;\n//var ENOUGH = (ENOUGH_LENS+ENOUGH_DISTS);\n\nvar CODES = 0;\nvar LENS = 1;\nvar DISTS = 2;\n\nvar lbase = [ /* Length codes 257..285 base */\n  3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31,\n  35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0\n];\n\nvar lext = [ /* Length codes 257..285 extra */\n  16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18,\n  19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78\n];\n\nvar dbase = [ /* Distance codes 0..29 base */\n  1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193,\n  257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145,\n  8193, 12289, 16385, 24577, 0, 0\n];\n\nvar dext = [ /* Distance codes 0..29 extra */\n  16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22,\n  23, 23, 24, 24, 25, 25, 26, 26, 27, 27,\n  28, 28, 29, 29, 64, 64\n];\n\nmodule.exports = function inflate_table(type, lens, lens_index, codes, table, table_index, work, opts)\n{\n  var bits = opts.bits;\n      //here = opts.here; /* table entry for duplication */\n\n  var len = 0;               /* a code's length in bits */\n  var sym = 0;               /* index of code symbols */\n  var min = 0, max = 0;          /* minimum and maximum code lengths */\n  var root = 0;              /* number of index bits for root table */\n  var curr = 0;              /* number of index bits for current table */\n  var drop = 0;              /* code bits to drop for sub-table */\n  var left = 0;                   /* number of prefix codes available */\n  var used = 0;              /* code entries in table used */\n  var huff = 0;              /* Huffman code */\n  var incr;              /* for incrementing code, index */\n  var fill;              /* index for replicating entries */\n  var low;               /* low bits for current root entry */\n  var mask;              /* mask for low root bits */\n  var next;             /* next available space in table */\n  var base = null;     /* base value table to use */\n  var base_index = 0;\n//  var shoextra;    /* extra bits table to use */\n  var end;                    /* use base and extra for symbol > end */\n  var count = new utils.Buf16(MAXBITS + 1); //[MAXBITS+1];    /* number of codes of each length */\n  var offs = new utils.Buf16(MAXBITS + 1); //[MAXBITS+1];     /* offsets in table for each length */\n  var extra = null;\n  var extra_index = 0;\n\n  var here_bits, here_op, here_val;\n\n  /*\n   Process a set of code lengths to create a canonical Huffman code.  The\n   code lengths are lens[0..codes-1].  Each length corresponds to the\n   symbols 0..codes-1.  The Huffman code is generated by first sorting the\n   symbols by length from short to long, and retaining the symbol order\n   for codes with equal lengths.  Then the code starts with all zero bits\n   for the first code of the shortest length, and the codes are integer\n   increments for the same length, and zeros are appended as the length\n   increases.  For the deflate format, these bits are stored backwards\n   from their more natural integer increment ordering, and so when the\n   decoding tables are built in the large loop below, the integer codes\n   are incremented backwards.\n\n   This routine assumes, but does not check, that all of the entries in\n   lens[] are in the range 0..MAXBITS.  The caller must assure this.\n   1..MAXBITS is interpreted as that code length.  zero means that that\n   symbol does not occur in this code.\n\n   The codes are sorted by computing a count of codes for each length,\n   creating from that a table of starting indices for each length in the\n   sorted table, and then entering the symbols in order in the sorted\n   table.  The sorted table is work[], with that space being provided by\n   the caller.\n\n   The length counts are used for other purposes as well, i.e. finding\n   the minimum and maximum length codes, determining if there are any\n   codes at all, checking for a valid set of lengths, and looking ahead\n   at length counts to determine sub-table sizes when building the\n   decoding tables.\n   */\n\n  /* accumulate lengths for codes (assumes lens[] all in 0..MAXBITS) */\n  for (len = 0; len <= MAXBITS; len++) {\n    count[len] = 0;\n  }\n  for (sym = 0; sym < codes; sym++) {\n    count[lens[lens_index + sym]]++;\n  }\n\n  /* bound code lengths, force root to be within code lengths */\n  root = bits;\n  for (max = MAXBITS; max >= 1; max--) {\n    if (count[max] !== 0) { break; }\n  }\n  if (root > max) {\n    root = max;\n  }\n  if (max === 0) {                     /* no symbols to code at all */\n    //table.op[opts.table_index] = 64;  //here.op = (var char)64;    /* invalid code marker */\n    //table.bits[opts.table_index] = 1;   //here.bits = (var char)1;\n    //table.val[opts.table_index++] = 0;   //here.val = (var short)0;\n    table[table_index++] = (1 << 24) | (64 << 16) | 0;\n\n\n    //table.op[opts.table_index] = 64;\n    //table.bits[opts.table_index] = 1;\n    //table.val[opts.table_index++] = 0;\n    table[table_index++] = (1 << 24) | (64 << 16) | 0;\n\n    opts.bits = 1;\n    return 0;     /* no symbols, but wait for decoding to report error */\n  }\n  for (min = 1; min < max; min++) {\n    if (count[min] !== 0) { break; }\n  }\n  if (root < min) {\n    root = min;\n  }\n\n  /* check for an over-subscribed or incomplete set of lengths */\n  left = 1;\n  for (len = 1; len <= MAXBITS; len++) {\n    left <<= 1;\n    left -= count[len];\n    if (left < 0) {\n      return -1;\n    }        /* over-subscribed */\n  }\n  if (left > 0 && (type === CODES || max !== 1)) {\n    return -1;                      /* incomplete set */\n  }\n\n  /* generate offsets into symbol table for each length for sorting */\n  offs[1] = 0;\n  for (len = 1; len < MAXBITS; len++) {\n    offs[len + 1] = offs[len] + count[len];\n  }\n\n  /* sort symbols by length, by symbol order within each length */\n  for (sym = 0; sym < codes; sym++) {\n    if (lens[lens_index + sym] !== 0) {\n      work[offs[lens[lens_index + sym]]++] = sym;\n    }\n  }\n\n  /*\n   Create and fill in decoding tables.  In this loop, the table being\n   filled is at next and has curr index bits.  The code being used is huff\n   with length len.  That code is converted to an index by dropping drop\n   bits off of the bottom.  For codes where len is less than drop + curr,\n   those top drop + curr - len bits are incremented through all values to\n   fill the table with replicated entries.\n\n   root is the number of index bits for the root table.  When len exceeds\n   root, sub-tables are created pointed to by the root entry with an index\n   of the low root bits of huff.  This is saved in low to check for when a\n   new sub-table should be started.  drop is zero when the root table is\n   being filled, and drop is root when sub-tables are being filled.\n\n   When a new sub-table is needed, it is necessary to look ahead in the\n   code lengths to determine what size sub-table is needed.  The length\n   counts are used for this, and so count[] is decremented as codes are\n   entered in the tables.\n\n   used keeps track of how many table entries have been allocated from the\n   provided *table space.  It is checked for LENS and DIST tables against\n   the constants ENOUGH_LENS and ENOUGH_DISTS to guard against changes in\n   the initial root table size constants.  See the comments in inftrees.h\n   for more information.\n\n   sym increments through all symbols, and the loop terminates when\n   all codes of length max, i.e. all codes, have been processed.  This\n   routine permits incomplete codes, so another loop after this one fills\n   in the rest of the decoding tables with invalid code markers.\n   */\n\n  /* set up for code type */\n  // poor man optimization - use if-else instead of switch,\n  // to avoid deopts in old v8\n  if (type === CODES) {\n    base = extra = work;    /* dummy value--not used */\n    end = 19;\n\n  } else if (type === LENS) {\n    base = lbase;\n    base_index -= 257;\n    extra = lext;\n    extra_index -= 257;\n    end = 256;\n\n  } else {                    /* DISTS */\n    base = dbase;\n    extra = dext;\n    end = -1;\n  }\n\n  /* initialize opts for loop */\n  huff = 0;                   /* starting code */\n  sym = 0;                    /* starting code symbol */\n  len = min;                  /* starting code length */\n  next = table_index;              /* current table to fill in */\n  curr = root;                /* current table index bits */\n  drop = 0;                   /* current bits to drop from code for index */\n  low = -1;                   /* trigger new sub-table when len > root */\n  used = 1 << root;          /* use root table entries */\n  mask = used - 1;            /* mask for comparing low */\n\n  /* check available table space */\n  if ((type === LENS && used > ENOUGH_LENS) ||\n    (type === DISTS && used > ENOUGH_DISTS)) {\n    return 1;\n  }\n\n  /* process all codes and make table entries */\n  for (;;) {\n    /* create table entry */\n    here_bits = len - drop;\n    if (work[sym] < end) {\n      here_op = 0;\n      here_val = work[sym];\n    }\n    else if (work[sym] > end) {\n      here_op = extra[extra_index + work[sym]];\n      here_val = base[base_index + work[sym]];\n    }\n    else {\n      here_op = 32 + 64;         /* end of block */\n      here_val = 0;\n    }\n\n    /* replicate for those indices with low len bits equal to huff */\n    incr = 1 << (len - drop);\n    fill = 1 << curr;\n    min = fill;                 /* save offset to next table */\n    do {\n      fill -= incr;\n      table[next + (huff >> drop) + fill] = (here_bits << 24) | (here_op << 16) | here_val |0;\n    } while (fill !== 0);\n\n    /* backwards increment the len-bit code huff */\n    incr = 1 << (len - 1);\n    while (huff & incr) {\n      incr >>= 1;\n    }\n    if (incr !== 0) {\n      huff &= incr - 1;\n      huff += incr;\n    } else {\n      huff = 0;\n    }\n\n    /* go to next symbol, update count, len */\n    sym++;\n    if (--count[len] === 0) {\n      if (len === max) { break; }\n      len = lens[lens_index + work[sym]];\n    }\n\n    /* create new sub-table if needed */\n    if (len > root && (huff & mask) !== low) {\n      /* if first time, transition to sub-tables */\n      if (drop === 0) {\n        drop = root;\n      }\n\n      /* increment past last table */\n      next += min;            /* here min is 1 << curr */\n\n      /* determine length of next table */\n      curr = len - drop;\n      left = 1 << curr;\n      while (curr + drop < max) {\n        left -= count[curr + drop];\n        if (left <= 0) { break; }\n        curr++;\n        left <<= 1;\n      }\n\n      /* check for enough space */\n      used += 1 << curr;\n      if ((type === LENS && used > ENOUGH_LENS) ||\n        (type === DISTS && used > ENOUGH_DISTS)) {\n        return 1;\n      }\n\n      /* point entry in root table to sub-table */\n      low = huff & mask;\n      /*table.op[low] = curr;\n      table.bits[low] = root;\n      table.val[low] = next - opts.table_index;*/\n      table[low] = (root << 24) | (curr << 16) | (next - table_index) |0;\n    }\n  }\n\n  /* fill in remaining table entry if code is incomplete (guaranteed to have\n   at most one remaining entry, since if the code is incomplete, the\n   maximum code length that was allowed to get this far is one bit) */\n  if (huff !== 0) {\n    //table.op[next + huff] = 64;            /* invalid code marker */\n    //table.bits[next + huff] = len - drop;\n    //table.val[next + huff] = 0;\n    table[next + huff] = ((len - drop) << 24) | (64 << 16) |0;\n  }\n\n  /* set return parameters */\n  //opts.table_index += used;\n  opts.bits = root;\n  return 0;\n};\n\n\n/***/ }),\n/* 56 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n/* eslint-disable space-unary-ops */\n\nvar utils = __webpack_require__(3);\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\n\n//var Z_FILTERED          = 1;\n//var Z_HUFFMAN_ONLY      = 2;\n//var Z_RLE               = 3;\nvar Z_FIXED               = 4;\n//var Z_DEFAULT_STRATEGY  = 0;\n\n/* Possible values of the data_type field (though see inflate()) */\nvar Z_BINARY              = 0;\nvar Z_TEXT                = 1;\n//var Z_ASCII             = 1; // = Z_TEXT\nvar Z_UNKNOWN             = 2;\n\n/*============================================================================*/\n\n\nfunction zero(buf) { var len = buf.length; while (--len >= 0) { buf[len] = 0; } }\n\n// From zutil.h\n\nvar STORED_BLOCK = 0;\nvar STATIC_TREES = 1;\nvar DYN_TREES    = 2;\n/* The three kinds of block type */\n\nvar MIN_MATCH    = 3;\nvar MAX_MATCH    = 258;\n/* The minimum and maximum match lengths */\n\n// From deflate.h\n/* ===========================================================================\n * Internal compression state.\n */\n\nvar LENGTH_CODES  = 29;\n/* number of length codes, not counting the special END_BLOCK code */\n\nvar LITERALS      = 256;\n/* number of literal bytes 0..255 */\n\nvar L_CODES       = LITERALS + 1 + LENGTH_CODES;\n/* number of Literal or Length codes, including the END_BLOCK code */\n\nvar D_CODES       = 30;\n/* number of distance codes */\n\nvar BL_CODES      = 19;\n/* number of codes used to transfer the bit lengths */\n\nvar HEAP_SIZE     = 2 * L_CODES + 1;\n/* maximum heap size */\n\nvar MAX_BITS      = 15;\n/* All codes must not exceed MAX_BITS bits */\n\nvar Buf_size      = 16;\n/* size of bit buffer in bi_buf */\n\n\n/* ===========================================================================\n * Constants\n */\n\nvar MAX_BL_BITS = 7;\n/* Bit length codes must not exceed MAX_BL_BITS bits */\n\nvar END_BLOCK   = 256;\n/* end of block literal code */\n\nvar REP_3_6     = 16;\n/* repeat previous bit length 3-6 times (2 bits of repeat count) */\n\nvar REPZ_3_10   = 17;\n/* repeat a zero length 3-10 times  (3 bits of repeat count) */\n\nvar REPZ_11_138 = 18;\n/* repeat a zero length 11-138 times  (7 bits of repeat count) */\n\n/* eslint-disable comma-spacing,array-bracket-spacing */\nvar extra_lbits =   /* extra bits for each length code */\n  [0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];\n\nvar extra_dbits =   /* extra bits for each distance code */\n  [0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];\n\nvar extra_blbits =  /* extra bits for each bit length code */\n  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];\n\nvar bl_order =\n  [16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];\n/* eslint-enable comma-spacing,array-bracket-spacing */\n\n/* The lengths of the bit length codes are sent in order of decreasing\n * probability, to avoid transmitting the lengths for unused bit length codes.\n */\n\n/* ===========================================================================\n * Local data. These are initialized only once.\n */\n\n// We pre-fill arrays with 0 to avoid uninitialized gaps\n\nvar DIST_CODE_LEN = 512; /* see definition of array dist_code below */\n\n// !!!! Use flat array instead of structure, Freq = i*2, Len = i*2+1\nvar static_ltree  = new Array((L_CODES + 2) * 2);\nzero(static_ltree);\n/* The static literal tree. Since the bit lengths are imposed, there is no\n * need for the L_CODES extra codes used during heap construction. However\n * The codes 286 and 287 are needed to build a canonical tree (see _tr_init\n * below).\n */\n\nvar static_dtree  = new Array(D_CODES * 2);\nzero(static_dtree);\n/* The static distance tree. (Actually a trivial tree since all codes use\n * 5 bits.)\n */\n\nvar _dist_code    = new Array(DIST_CODE_LEN);\nzero(_dist_code);\n/* Distance codes. The first 256 values correspond to the distances\n * 3 .. 258, the last 256 values correspond to the top 8 bits of\n * the 15 bit distances.\n */\n\nvar _length_code  = new Array(MAX_MATCH - MIN_MATCH + 1);\nzero(_length_code);\n/* length code for each normalized match length (0 == MIN_MATCH) */\n\nvar base_length   = new Array(LENGTH_CODES);\nzero(base_length);\n/* First normalized length for each code (0 = MIN_MATCH) */\n\nvar base_dist     = new Array(D_CODES);\nzero(base_dist);\n/* First normalized distance for each code (0 = distance of 1) */\n\n\nfunction StaticTreeDesc(static_tree, extra_bits, extra_base, elems, max_length) {\n\n  this.static_tree  = static_tree;  /* static tree or NULL */\n  this.extra_bits   = extra_bits;   /* extra bits for each code or NULL */\n  this.extra_base   = extra_base;   /* base index for extra_bits */\n  this.elems        = elems;        /* max number of elements in the tree */\n  this.max_length   = max_length;   /* max bit length for the codes */\n\n  // show if `static_tree` has data or dummy - needed for monomorphic objects\n  this.has_stree    = static_tree && static_tree.length;\n}\n\n\nvar static_l_desc;\nvar static_d_desc;\nvar static_bl_desc;\n\n\nfunction TreeDesc(dyn_tree, stat_desc) {\n  this.dyn_tree = dyn_tree;     /* the dynamic tree */\n  this.max_code = 0;            /* largest code with non zero frequency */\n  this.stat_desc = stat_desc;   /* the corresponding static tree */\n}\n\n\n\nfunction d_code(dist) {\n  return dist < 256 ? _dist_code[dist] : _dist_code[256 + (dist >>> 7)];\n}\n\n\n/* ===========================================================================\n * Output a short LSB first on the stream.\n * IN assertion: there is enough room in pendingBuf.\n */\nfunction put_short(s, w) {\n//    put_byte(s, (uch)((w) & 0xff));\n//    put_byte(s, (uch)((ush)(w) >> 8));\n  s.pending_buf[s.pending++] = (w) & 0xff;\n  s.pending_buf[s.pending++] = (w >>> 8) & 0xff;\n}\n\n\n/* ===========================================================================\n * Send a value on a given number of bits.\n * IN assertion: length <= 16 and value fits in length bits.\n */\nfunction send_bits(s, value, length) {\n  if (s.bi_valid > (Buf_size - length)) {\n    s.bi_buf |= (value << s.bi_valid) & 0xffff;\n    put_short(s, s.bi_buf);\n    s.bi_buf = value >> (Buf_size - s.bi_valid);\n    s.bi_valid += length - Buf_size;\n  } else {\n    s.bi_buf |= (value << s.bi_valid) & 0xffff;\n    s.bi_valid += length;\n  }\n}\n\n\nfunction send_code(s, c, tree) {\n  send_bits(s, tree[c * 2]/*.Code*/, tree[c * 2 + 1]/*.Len*/);\n}\n\n\n/* ===========================================================================\n * Reverse the first len bits of a code, using straightforward code (a faster\n * method would use a table)\n * IN assertion: 1 <= len <= 15\n */\nfunction bi_reverse(code, len) {\n  var res = 0;\n  do {\n    res |= code & 1;\n    code >>>= 1;\n    res <<= 1;\n  } while (--len > 0);\n  return res >>> 1;\n}\n\n\n/* ===========================================================================\n * Flush the bit buffer, keeping at most 7 bits in it.\n */\nfunction bi_flush(s) {\n  if (s.bi_valid === 16) {\n    put_short(s, s.bi_buf);\n    s.bi_buf = 0;\n    s.bi_valid = 0;\n\n  } else if (s.bi_valid >= 8) {\n    s.pending_buf[s.pending++] = s.bi_buf & 0xff;\n    s.bi_buf >>= 8;\n    s.bi_valid -= 8;\n  }\n}\n\n\n/* ===========================================================================\n * Compute the optimal bit lengths for a tree and update the total bit length\n * for the current block.\n * IN assertion: the fields freq and dad are set, heap[heap_max] and\n *    above are the tree nodes sorted by increasing frequency.\n * OUT assertions: the field len is set to the optimal bit length, the\n *     array bl_count contains the frequencies for each bit length.\n *     The length opt_len is updated; static_len is also updated if stree is\n *     not null.\n */\nfunction gen_bitlen(s, desc)\n//    deflate_state *s;\n//    tree_desc *desc;    /* the tree descriptor */\n{\n  var tree            = desc.dyn_tree;\n  var max_code        = desc.max_code;\n  var stree           = desc.stat_desc.static_tree;\n  var has_stree       = desc.stat_desc.has_stree;\n  var extra           = desc.stat_desc.extra_bits;\n  var base            = desc.stat_desc.extra_base;\n  var max_length      = desc.stat_desc.max_length;\n  var h;              /* heap index */\n  var n, m;           /* iterate over the tree elements */\n  var bits;           /* bit length */\n  var xbits;          /* extra bits */\n  var f;              /* frequency */\n  var overflow = 0;   /* number of elements with bit length too large */\n\n  for (bits = 0; bits <= MAX_BITS; bits++) {\n    s.bl_count[bits] = 0;\n  }\n\n  /* In a first pass, compute the optimal bit lengths (which may\n   * overflow in the case of the bit length tree).\n   */\n  tree[s.heap[s.heap_max] * 2 + 1]/*.Len*/ = 0; /* root of the heap */\n\n  for (h = s.heap_max + 1; h < HEAP_SIZE; h++) {\n    n = s.heap[h];\n    bits = tree[tree[n * 2 + 1]/*.Dad*/ * 2 + 1]/*.Len*/ + 1;\n    if (bits > max_length) {\n      bits = max_length;\n      overflow++;\n    }\n    tree[n * 2 + 1]/*.Len*/ = bits;\n    /* We overwrite tree[n].Dad which is no longer needed */\n\n    if (n > max_code) { continue; } /* not a leaf node */\n\n    s.bl_count[bits]++;\n    xbits = 0;\n    if (n >= base) {\n      xbits = extra[n - base];\n    }\n    f = tree[n * 2]/*.Freq*/;\n    s.opt_len += f * (bits + xbits);\n    if (has_stree) {\n      s.static_len += f * (stree[n * 2 + 1]/*.Len*/ + xbits);\n    }\n  }\n  if (overflow === 0) { return; }\n\n  // Trace((stderr,\"\\nbit length overflow\\n\"));\n  /* This happens for example on obj2 and pic of the Calgary corpus */\n\n  /* Find the first bit length which could increase: */\n  do {\n    bits = max_length - 1;\n    while (s.bl_count[bits] === 0) { bits--; }\n    s.bl_count[bits]--;      /* move one leaf down the tree */\n    s.bl_count[bits + 1] += 2; /* move one overflow item as its brother */\n    s.bl_count[max_length]--;\n    /* The brother of the overflow item also moves one step up,\n     * but this does not affect bl_count[max_length]\n     */\n    overflow -= 2;\n  } while (overflow > 0);\n\n  /* Now recompute all bit lengths, scanning in increasing frequency.\n   * h is still equal to HEAP_SIZE. (It is simpler to reconstruct all\n   * lengths instead of fixing only the wrong ones. This idea is taken\n   * from 'ar' written by Haruhiko Okumura.)\n   */\n  for (bits = max_length; bits !== 0; bits--) {\n    n = s.bl_count[bits];\n    while (n !== 0) {\n      m = s.heap[--h];\n      if (m > max_code) { continue; }\n      if (tree[m * 2 + 1]/*.Len*/ !== bits) {\n        // Trace((stderr,\"code %d bits %d->%d\\n\", m, tree[m].Len, bits));\n        s.opt_len += (bits - tree[m * 2 + 1]/*.Len*/) * tree[m * 2]/*.Freq*/;\n        tree[m * 2 + 1]/*.Len*/ = bits;\n      }\n      n--;\n    }\n  }\n}\n\n\n/* ===========================================================================\n * Generate the codes for a given tree and bit counts (which need not be\n * optimal).\n * IN assertion: the array bl_count contains the bit length statistics for\n * the given tree and the field len is set for all tree elements.\n * OUT assertion: the field code is set for all tree elements of non\n *     zero code length.\n */\nfunction gen_codes(tree, max_code, bl_count)\n//    ct_data *tree;             /* the tree to decorate */\n//    int max_code;              /* largest code with non zero frequency */\n//    ushf *bl_count;            /* number of codes at each bit length */\n{\n  var next_code = new Array(MAX_BITS + 1); /* next code value for each bit length */\n  var code = 0;              /* running code value */\n  var bits;                  /* bit index */\n  var n;                     /* code index */\n\n  /* The distribution counts are first used to generate the code values\n   * without bit reversal.\n   */\n  for (bits = 1; bits <= MAX_BITS; bits++) {\n    next_code[bits] = code = (code + bl_count[bits - 1]) << 1;\n  }\n  /* Check that the bit counts in bl_count are consistent. The last code\n   * must be all ones.\n   */\n  //Assert (code + bl_count[MAX_BITS]-1 == (1<<MAX_BITS)-1,\n  //        \"inconsistent bit counts\");\n  //Tracev((stderr,\"\\ngen_codes: max_code %d \", max_code));\n\n  for (n = 0;  n <= max_code; n++) {\n    var len = tree[n * 2 + 1]/*.Len*/;\n    if (len === 0) { continue; }\n    /* Now reverse the bits */\n    tree[n * 2]/*.Code*/ = bi_reverse(next_code[len]++, len);\n\n    //Tracecv(tree != static_ltree, (stderr,\"\\nn %3d %c l %2d c %4x (%x) \",\n    //     n, (isgraph(n) ? n : ' '), len, tree[n].Code, next_code[len]-1));\n  }\n}\n\n\n/* ===========================================================================\n * Initialize the various 'constant' tables.\n */\nfunction tr_static_init() {\n  var n;        /* iterates over tree elements */\n  var bits;     /* bit counter */\n  var length;   /* length value */\n  var code;     /* code value */\n  var dist;     /* distance index */\n  var bl_count = new Array(MAX_BITS + 1);\n  /* number of codes at each bit length for an optimal tree */\n\n  // do check in _tr_init()\n  //if (static_init_done) return;\n\n  /* For some embedded targets, global variables are not initialized: */\n/*#ifdef NO_INIT_GLOBAL_POINTERS\n  static_l_desc.static_tree = static_ltree;\n  static_l_desc.extra_bits = extra_lbits;\n  static_d_desc.static_tree = static_dtree;\n  static_d_desc.extra_bits = extra_dbits;\n  static_bl_desc.extra_bits = extra_blbits;\n#endif*/\n\n  /* Initialize the mapping length (0..255) -> length code (0..28) */\n  length = 0;\n  for (code = 0; code < LENGTH_CODES - 1; code++) {\n    base_length[code] = length;\n    for (n = 0; n < (1 << extra_lbits[code]); n++) {\n      _length_code[length++] = code;\n    }\n  }\n  //Assert (length == 256, \"tr_static_init: length != 256\");\n  /* Note that the length 255 (match length 258) can be represented\n   * in two different ways: code 284 + 5 bits or code 285, so we\n   * overwrite length_code[255] to use the best encoding:\n   */\n  _length_code[length - 1] = code;\n\n  /* Initialize the mapping dist (0..32K) -> dist code (0..29) */\n  dist = 0;\n  for (code = 0; code < 16; code++) {\n    base_dist[code] = dist;\n    for (n = 0; n < (1 << extra_dbits[code]); n++) {\n      _dist_code[dist++] = code;\n    }\n  }\n  //Assert (dist == 256, \"tr_static_init: dist != 256\");\n  dist >>= 7; /* from now on, all distances are divided by 128 */\n  for (; code < D_CODES; code++) {\n    base_dist[code] = dist << 7;\n    for (n = 0; n < (1 << (extra_dbits[code] - 7)); n++) {\n      _dist_code[256 + dist++] = code;\n    }\n  }\n  //Assert (dist == 256, \"tr_static_init: 256+dist != 512\");\n\n  /* Construct the codes of the static literal tree */\n  for (bits = 0; bits <= MAX_BITS; bits++) {\n    bl_count[bits] = 0;\n  }\n\n  n = 0;\n  while (n <= 143) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 8;\n    n++;\n    bl_count[8]++;\n  }\n  while (n <= 255) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 9;\n    n++;\n    bl_count[9]++;\n  }\n  while (n <= 279) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 7;\n    n++;\n    bl_count[7]++;\n  }\n  while (n <= 287) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 8;\n    n++;\n    bl_count[8]++;\n  }\n  /* Codes 286 and 287 do not exist, but we must include them in the\n   * tree construction to get a canonical Huffman tree (longest code\n   * all ones)\n   */\n  gen_codes(static_ltree, L_CODES + 1, bl_count);\n\n  /* The static distance tree is trivial: */\n  for (n = 0; n < D_CODES; n++) {\n    static_dtree[n * 2 + 1]/*.Len*/ = 5;\n    static_dtree[n * 2]/*.Code*/ = bi_reverse(n, 5);\n  }\n\n  // Now data ready and we can init static trees\n  static_l_desc = new StaticTreeDesc(static_ltree, extra_lbits, LITERALS + 1, L_CODES, MAX_BITS);\n  static_d_desc = new StaticTreeDesc(static_dtree, extra_dbits, 0,          D_CODES, MAX_BITS);\n  static_bl_desc = new StaticTreeDesc(new Array(0), extra_blbits, 0,         BL_CODES, MAX_BL_BITS);\n\n  //static_init_done = true;\n}\n\n\n/* ===========================================================================\n * Initialize a new block.\n */\nfunction init_block(s) {\n  var n; /* iterates over tree elements */\n\n  /* Initialize the trees. */\n  for (n = 0; n < L_CODES;  n++) { s.dyn_ltree[n * 2]/*.Freq*/ = 0; }\n  for (n = 0; n < D_CODES;  n++) { s.dyn_dtree[n * 2]/*.Freq*/ = 0; }\n  for (n = 0; n < BL_CODES; n++) { s.bl_tree[n * 2]/*.Freq*/ = 0; }\n\n  s.dyn_ltree[END_BLOCK * 2]/*.Freq*/ = 1;\n  s.opt_len = s.static_len = 0;\n  s.last_lit = s.matches = 0;\n}\n\n\n/* ===========================================================================\n * Flush the bit buffer and align the output on a byte boundary\n */\nfunction bi_windup(s)\n{\n  if (s.bi_valid > 8) {\n    put_short(s, s.bi_buf);\n  } else if (s.bi_valid > 0) {\n    //put_byte(s, (Byte)s->bi_buf);\n    s.pending_buf[s.pending++] = s.bi_buf;\n  }\n  s.bi_buf = 0;\n  s.bi_valid = 0;\n}\n\n/* ===========================================================================\n * Copy a stored block, storing first the length and its\n * one's complement if requested.\n */\nfunction copy_block(s, buf, len, header)\n//DeflateState *s;\n//charf    *buf;    /* the input data */\n//unsigned len;     /* its length */\n//int      header;  /* true if block header must be written */\n{\n  bi_windup(s);        /* align on byte boundary */\n\n  if (header) {\n    put_short(s, len);\n    put_short(s, ~len);\n  }\n//  while (len--) {\n//    put_byte(s, *buf++);\n//  }\n  utils.arraySet(s.pending_buf, s.window, buf, len, s.pending);\n  s.pending += len;\n}\n\n/* ===========================================================================\n * Compares to subtrees, using the tree depth as tie breaker when\n * the subtrees have equal frequency. This minimizes the worst case length.\n */\nfunction smaller(tree, n, m, depth) {\n  var _n2 = n * 2;\n  var _m2 = m * 2;\n  return (tree[_n2]/*.Freq*/ < tree[_m2]/*.Freq*/ ||\n         (tree[_n2]/*.Freq*/ === tree[_m2]/*.Freq*/ && depth[n] <= depth[m]));\n}\n\n/* ===========================================================================\n * Restore the heap property by moving down the tree starting at node k,\n * exchanging a node with the smallest of its two sons if necessary, stopping\n * when the heap property is re-established (each father smaller than its\n * two sons).\n */\nfunction pqdownheap(s, tree, k)\n//    deflate_state *s;\n//    ct_data *tree;  /* the tree to restore */\n//    int k;               /* node to move down */\n{\n  var v = s.heap[k];\n  var j = k << 1;  /* left son of k */\n  while (j <= s.heap_len) {\n    /* Set j to the smallest of the two sons: */\n    if (j < s.heap_len &&\n      smaller(tree, s.heap[j + 1], s.heap[j], s.depth)) {\n      j++;\n    }\n    /* Exit if v is smaller than both sons */\n    if (smaller(tree, v, s.heap[j], s.depth)) { break; }\n\n    /* Exchange v with the smallest son */\n    s.heap[k] = s.heap[j];\n    k = j;\n\n    /* And continue down the tree, setting j to the left son of k */\n    j <<= 1;\n  }\n  s.heap[k] = v;\n}\n\n\n// inlined manually\n// var SMALLEST = 1;\n\n/* ===========================================================================\n * Send the block data compressed using the given Huffman trees\n */\nfunction compress_block(s, ltree, dtree)\n//    deflate_state *s;\n//    const ct_data *ltree; /* literal tree */\n//    const ct_data *dtree; /* distance tree */\n{\n  var dist;           /* distance of matched string */\n  var lc;             /* match length or unmatched char (if dist == 0) */\n  var lx = 0;         /* running index in l_buf */\n  var code;           /* the code to send */\n  var extra;          /* number of extra bits to send */\n\n  if (s.last_lit !== 0) {\n    do {\n      dist = (s.pending_buf[s.d_buf + lx * 2] << 8) | (s.pending_buf[s.d_buf + lx * 2 + 1]);\n      lc = s.pending_buf[s.l_buf + lx];\n      lx++;\n\n      if (dist === 0) {\n        send_code(s, lc, ltree); /* send a literal byte */\n        //Tracecv(isgraph(lc), (stderr,\" '%c' \", lc));\n      } else {\n        /* Here, lc is the match length - MIN_MATCH */\n        code = _length_code[lc];\n        send_code(s, code + LITERALS + 1, ltree); /* send the length code */\n        extra = extra_lbits[code];\n        if (extra !== 0) {\n          lc -= base_length[code];\n          send_bits(s, lc, extra);       /* send the extra length bits */\n        }\n        dist--; /* dist is now the match distance - 1 */\n        code = d_code(dist);\n        //Assert (code < D_CODES, \"bad d_code\");\n\n        send_code(s, code, dtree);       /* send the distance code */\n        extra = extra_dbits[code];\n        if (extra !== 0) {\n          dist -= base_dist[code];\n          send_bits(s, dist, extra);   /* send the extra distance bits */\n        }\n      } /* literal or match pair ? */\n\n      /* Check that the overlay between pending_buf and d_buf+l_buf is ok: */\n      //Assert((uInt)(s->pending) < s->lit_bufsize + 2*lx,\n      //       \"pendingBuf overflow\");\n\n    } while (lx < s.last_lit);\n  }\n\n  send_code(s, END_BLOCK, ltree);\n}\n\n\n/* ===========================================================================\n * Construct one Huffman tree and assigns the code bit strings and lengths.\n * Update the total bit length for the current block.\n * IN assertion: the field freq is set for all tree elements.\n * OUT assertions: the fields len and code are set to the optimal bit length\n *     and corresponding code. The length opt_len is updated; static_len is\n *     also updated if stree is not null. The field max_code is set.\n */\nfunction build_tree(s, desc)\n//    deflate_state *s;\n//    tree_desc *desc; /* the tree descriptor */\n{\n  var tree     = desc.dyn_tree;\n  var stree    = desc.stat_desc.static_tree;\n  var has_stree = desc.stat_desc.has_stree;\n  var elems    = desc.stat_desc.elems;\n  var n, m;          /* iterate over heap elements */\n  var max_code = -1; /* largest code with non zero frequency */\n  var node;          /* new node being created */\n\n  /* Construct the initial heap, with least frequent element in\n   * heap[SMALLEST]. The sons of heap[n] are heap[2*n] and heap[2*n+1].\n   * heap[0] is not used.\n   */\n  s.heap_len = 0;\n  s.heap_max = HEAP_SIZE;\n\n  for (n = 0; n < elems; n++) {\n    if (tree[n * 2]/*.Freq*/ !== 0) {\n      s.heap[++s.heap_len] = max_code = n;\n      s.depth[n] = 0;\n\n    } else {\n      tree[n * 2 + 1]/*.Len*/ = 0;\n    }\n  }\n\n  /* The pkzip format requires that at least one distance code exists,\n   * and that at least one bit should be sent even if there is only one\n   * possible code. So to avoid special checks later on we force at least\n   * two codes of non zero frequency.\n   */\n  while (s.heap_len < 2) {\n    node = s.heap[++s.heap_len] = (max_code < 2 ? ++max_code : 0);\n    tree[node * 2]/*.Freq*/ = 1;\n    s.depth[node] = 0;\n    s.opt_len--;\n\n    if (has_stree) {\n      s.static_len -= stree[node * 2 + 1]/*.Len*/;\n    }\n    /* node is 0 or 1 so it does not have extra bits */\n  }\n  desc.max_code = max_code;\n\n  /* The elements heap[heap_len/2+1 .. heap_len] are leaves of the tree,\n   * establish sub-heaps of increasing lengths:\n   */\n  for (n = (s.heap_len >> 1/*int /2*/); n >= 1; n--) { pqdownheap(s, tree, n); }\n\n  /* Construct the Huffman tree by repeatedly combining the least two\n   * frequent nodes.\n   */\n  node = elems;              /* next internal node of the tree */\n  do {\n    //pqremove(s, tree, n);  /* n = node of least frequency */\n    /*** pqremove ***/\n    n = s.heap[1/*SMALLEST*/];\n    s.heap[1/*SMALLEST*/] = s.heap[s.heap_len--];\n    pqdownheap(s, tree, 1/*SMALLEST*/);\n    /***/\n\n    m = s.heap[1/*SMALLEST*/]; /* m = node of next least frequency */\n\n    s.heap[--s.heap_max] = n; /* keep the nodes sorted by frequency */\n    s.heap[--s.heap_max] = m;\n\n    /* Create a new node father of n and m */\n    tree[node * 2]/*.Freq*/ = tree[n * 2]/*.Freq*/ + tree[m * 2]/*.Freq*/;\n    s.depth[node] = (s.depth[n] >= s.depth[m] ? s.depth[n] : s.depth[m]) + 1;\n    tree[n * 2 + 1]/*.Dad*/ = tree[m * 2 + 1]/*.Dad*/ = node;\n\n    /* and insert the new node in the heap */\n    s.heap[1/*SMALLEST*/] = node++;\n    pqdownheap(s, tree, 1/*SMALLEST*/);\n\n  } while (s.heap_len >= 2);\n\n  s.heap[--s.heap_max] = s.heap[1/*SMALLEST*/];\n\n  /* At this point, the fields freq and dad are set. We can now\n   * generate the bit lengths.\n   */\n  gen_bitlen(s, desc);\n\n  /* The field len is now set, we can generate the bit codes */\n  gen_codes(tree, max_code, s.bl_count);\n}\n\n\n/* ===========================================================================\n * Scan a literal or distance tree to determine the frequencies of the codes\n * in the bit length tree.\n */\nfunction scan_tree(s, tree, max_code)\n//    deflate_state *s;\n//    ct_data *tree;   /* the tree to be scanned */\n//    int max_code;    /* and its largest code of non zero frequency */\n{\n  var n;                     /* iterates over all tree elements */\n  var prevlen = -1;          /* last emitted length */\n  var curlen;                /* length of current code */\n\n  var nextlen = tree[0 * 2 + 1]/*.Len*/; /* length of next code */\n\n  var count = 0;             /* repeat count of the current code */\n  var max_count = 7;         /* max repeat count */\n  var min_count = 4;         /* min repeat count */\n\n  if (nextlen === 0) {\n    max_count = 138;\n    min_count = 3;\n  }\n  tree[(max_code + 1) * 2 + 1]/*.Len*/ = 0xffff; /* guard */\n\n  for (n = 0; n <= max_code; n++) {\n    curlen = nextlen;\n    nextlen = tree[(n + 1) * 2 + 1]/*.Len*/;\n\n    if (++count < max_count && curlen === nextlen) {\n      continue;\n\n    } else if (count < min_count) {\n      s.bl_tree[curlen * 2]/*.Freq*/ += count;\n\n    } else if (curlen !== 0) {\n\n      if (curlen !== prevlen) { s.bl_tree[curlen * 2]/*.Freq*/++; }\n      s.bl_tree[REP_3_6 * 2]/*.Freq*/++;\n\n    } else if (count <= 10) {\n      s.bl_tree[REPZ_3_10 * 2]/*.Freq*/++;\n\n    } else {\n      s.bl_tree[REPZ_11_138 * 2]/*.Freq*/++;\n    }\n\n    count = 0;\n    prevlen = curlen;\n\n    if (nextlen === 0) {\n      max_count = 138;\n      min_count = 3;\n\n    } else if (curlen === nextlen) {\n      max_count = 6;\n      min_count = 3;\n\n    } else {\n      max_count = 7;\n      min_count = 4;\n    }\n  }\n}\n\n\n/* ===========================================================================\n * Send a literal or distance tree in compressed form, using the codes in\n * bl_tree.\n */\nfunction send_tree(s, tree, max_code)\n//    deflate_state *s;\n//    ct_data *tree; /* the tree to be scanned */\n//    int max_code;       /* and its largest code of non zero frequency */\n{\n  var n;                     /* iterates over all tree elements */\n  var prevlen = -1;          /* last emitted length */\n  var curlen;                /* length of current code */\n\n  var nextlen = tree[0 * 2 + 1]/*.Len*/; /* length of next code */\n\n  var count = 0;             /* repeat count of the current code */\n  var max_count = 7;         /* max repeat count */\n  var min_count = 4;         /* min repeat count */\n\n  /* tree[max_code+1].Len = -1; */  /* guard already set */\n  if (nextlen === 0) {\n    max_count = 138;\n    min_count = 3;\n  }\n\n  for (n = 0; n <= max_code; n++) {\n    curlen = nextlen;\n    nextlen = tree[(n + 1) * 2 + 1]/*.Len*/;\n\n    if (++count < max_count && curlen === nextlen) {\n      continue;\n\n    } else if (count < min_count) {\n      do { send_code(s, curlen, s.bl_tree); } while (--count !== 0);\n\n    } else if (curlen !== 0) {\n      if (curlen !== prevlen) {\n        send_code(s, curlen, s.bl_tree);\n        count--;\n      }\n      //Assert(count >= 3 && count <= 6, \" 3_6?\");\n      send_code(s, REP_3_6, s.bl_tree);\n      send_bits(s, count - 3, 2);\n\n    } else if (count <= 10) {\n      send_code(s, REPZ_3_10, s.bl_tree);\n      send_bits(s, count - 3, 3);\n\n    } else {\n      send_code(s, REPZ_11_138, s.bl_tree);\n      send_bits(s, count - 11, 7);\n    }\n\n    count = 0;\n    prevlen = curlen;\n    if (nextlen === 0) {\n      max_count = 138;\n      min_count = 3;\n\n    } else if (curlen === nextlen) {\n      max_count = 6;\n      min_count = 3;\n\n    } else {\n      max_count = 7;\n      min_count = 4;\n    }\n  }\n}\n\n\n/* ===========================================================================\n * Construct the Huffman tree for the bit lengths and return the index in\n * bl_order of the last bit length code to send.\n */\nfunction build_bl_tree(s) {\n  var max_blindex;  /* index of last bit length code of non zero freq */\n\n  /* Determine the bit length frequencies for literal and distance trees */\n  scan_tree(s, s.dyn_ltree, s.l_desc.max_code);\n  scan_tree(s, s.dyn_dtree, s.d_desc.max_code);\n\n  /* Build the bit length tree: */\n  build_tree(s, s.bl_desc);\n  /* opt_len now includes the length of the tree representations, except\n   * the lengths of the bit lengths codes and the 5+5+4 bits for the counts.\n   */\n\n  /* Determine the number of bit length codes to send. The pkzip format\n   * requires that at least 4 bit length codes be sent. (appnote.txt says\n   * 3 but the actual value used is 4.)\n   */\n  for (max_blindex = BL_CODES - 1; max_blindex >= 3; max_blindex--) {\n    if (s.bl_tree[bl_order[max_blindex] * 2 + 1]/*.Len*/ !== 0) {\n      break;\n    }\n  }\n  /* Update opt_len to include the bit length tree and counts */\n  s.opt_len += 3 * (max_blindex + 1) + 5 + 5 + 4;\n  //Tracev((stderr, \"\\ndyn trees: dyn %ld, stat %ld\",\n  //        s->opt_len, s->static_len));\n\n  return max_blindex;\n}\n\n\n/* ===========================================================================\n * Send the header for a block using dynamic Huffman trees: the counts, the\n * lengths of the bit length codes, the literal tree and the distance tree.\n * IN assertion: lcodes >= 257, dcodes >= 1, blcodes >= 4.\n */\nfunction send_all_trees(s, lcodes, dcodes, blcodes)\n//    deflate_state *s;\n//    int lcodes, dcodes, blcodes; /* number of codes for each tree */\n{\n  var rank;                    /* index in bl_order */\n\n  //Assert (lcodes >= 257 && dcodes >= 1 && blcodes >= 4, \"not enough codes\");\n  //Assert (lcodes <= L_CODES && dcodes <= D_CODES && blcodes <= BL_CODES,\n  //        \"too many codes\");\n  //Tracev((stderr, \"\\nbl counts: \"));\n  send_bits(s, lcodes - 257, 5); /* not +255 as stated in appnote.txt */\n  send_bits(s, dcodes - 1,   5);\n  send_bits(s, blcodes - 4,  4); /* not -3 as stated in appnote.txt */\n  for (rank = 0; rank < blcodes; rank++) {\n    //Tracev((stderr, \"\\nbl code %2d \", bl_order[rank]));\n    send_bits(s, s.bl_tree[bl_order[rank] * 2 + 1]/*.Len*/, 3);\n  }\n  //Tracev((stderr, \"\\nbl tree: sent %ld\", s->bits_sent));\n\n  send_tree(s, s.dyn_ltree, lcodes - 1); /* literal tree */\n  //Tracev((stderr, \"\\nlit tree: sent %ld\", s->bits_sent));\n\n  send_tree(s, s.dyn_dtree, dcodes - 1); /* distance tree */\n  //Tracev((stderr, \"\\ndist tree: sent %ld\", s->bits_sent));\n}\n\n\n/* ===========================================================================\n * Check if the data type is TEXT or BINARY, using the following algorithm:\n * - TEXT if the two conditions below are satisfied:\n *    a) There are no non-portable control characters belonging to the\n *       \"black list\" (0..6, 14..25, 28..31).\n *    b) There is at least one printable character belonging to the\n *       \"white list\" (9 {TAB}, 10 {LF}, 13 {CR}, 32..255).\n * - BINARY otherwise.\n * - The following partially-portable control characters form a\n *   \"gray list\" that is ignored in this detection algorithm:\n *   (7 {BEL}, 8 {BS}, 11 {VT}, 12 {FF}, 26 {SUB}, 27 {ESC}).\n * IN assertion: the fields Freq of dyn_ltree are set.\n */\nfunction detect_data_type(s) {\n  /* black_mask is the bit mask of black-listed bytes\n   * set bits 0..6, 14..25, and 28..31\n   * 0xf3ffc07f = binary 11110011111111111100000001111111\n   */\n  var black_mask = 0xf3ffc07f;\n  var n;\n\n  /* Check for non-textual (\"black-listed\") bytes. */\n  for (n = 0; n <= 31; n++, black_mask >>>= 1) {\n    if ((black_mask & 1) && (s.dyn_ltree[n * 2]/*.Freq*/ !== 0)) {\n      return Z_BINARY;\n    }\n  }\n\n  /* Check for textual (\"white-listed\") bytes. */\n  if (s.dyn_ltree[9 * 2]/*.Freq*/ !== 0 || s.dyn_ltree[10 * 2]/*.Freq*/ !== 0 ||\n      s.dyn_ltree[13 * 2]/*.Freq*/ !== 0) {\n    return Z_TEXT;\n  }\n  for (n = 32; n < LITERALS; n++) {\n    if (s.dyn_ltree[n * 2]/*.Freq*/ !== 0) {\n      return Z_TEXT;\n    }\n  }\n\n  /* There are no \"black-listed\" or \"white-listed\" bytes:\n   * this stream either is empty or has tolerated (\"gray-listed\") bytes only.\n   */\n  return Z_BINARY;\n}\n\n\nvar static_init_done = false;\n\n/* ===========================================================================\n * Initialize the tree data structures for a new zlib stream.\n */\nfunction _tr_init(s)\n{\n\n  if (!static_init_done) {\n    tr_static_init();\n    static_init_done = true;\n  }\n\n  s.l_desc  = new TreeDesc(s.dyn_ltree, static_l_desc);\n  s.d_desc  = new TreeDesc(s.dyn_dtree, static_d_desc);\n  s.bl_desc = new TreeDesc(s.bl_tree, static_bl_desc);\n\n  s.bi_buf = 0;\n  s.bi_valid = 0;\n\n  /* Initialize the first block of the first file: */\n  init_block(s);\n}\n\n\n/* ===========================================================================\n * Send a stored block\n */\nfunction _tr_stored_block(s, buf, stored_len, last)\n//DeflateState *s;\n//charf *buf;       /* input block */\n//ulg stored_len;   /* length of input block */\n//int last;         /* one if this is the last block for a file */\n{\n  send_bits(s, (STORED_BLOCK << 1) + (last ? 1 : 0), 3);    /* send block type */\n  copy_block(s, buf, stored_len, true); /* with header */\n}\n\n\n/* ===========================================================================\n * Send one empty static block to give enough lookahead for inflate.\n * This takes 10 bits, of which 7 may remain in the bit buffer.\n */\nfunction _tr_align(s) {\n  send_bits(s, STATIC_TREES << 1, 3);\n  send_code(s, END_BLOCK, static_ltree);\n  bi_flush(s);\n}\n\n\n/* ===========================================================================\n * Determine the best encoding for the current block: dynamic trees, static\n * trees or store, and output the encoded block to the zip file.\n */\nfunction _tr_flush_block(s, buf, stored_len, last)\n//DeflateState *s;\n//charf *buf;       /* input block, or NULL if too old */\n//ulg stored_len;   /* length of input block */\n//int last;         /* one if this is the last block for a file */\n{\n  var opt_lenb, static_lenb;  /* opt_len and static_len in bytes */\n  var max_blindex = 0;        /* index of last bit length code of non zero freq */\n\n  /* Build the Huffman trees unless a stored block is forced */\n  if (s.level > 0) {\n\n    /* Check if the file is binary or text */\n    if (s.strm.data_type === Z_UNKNOWN) {\n      s.strm.data_type = detect_data_type(s);\n    }\n\n    /* Construct the literal and distance trees */\n    build_tree(s, s.l_desc);\n    // Tracev((stderr, \"\\nlit data: dyn %ld, stat %ld\", s->opt_len,\n    //        s->static_len));\n\n    build_tree(s, s.d_desc);\n    // Tracev((stderr, \"\\ndist data: dyn %ld, stat %ld\", s->opt_len,\n    //        s->static_len));\n    /* At this point, opt_len and static_len are the total bit lengths of\n     * the compressed block data, excluding the tree representations.\n     */\n\n    /* Build the bit length tree for the above two trees, and get the index\n     * in bl_order of the last bit length code to send.\n     */\n    max_blindex = build_bl_tree(s);\n\n    /* Determine the best encoding. Compute the block lengths in bytes. */\n    opt_lenb = (s.opt_len + 3 + 7) >>> 3;\n    static_lenb = (s.static_len + 3 + 7) >>> 3;\n\n    // Tracev((stderr, \"\\nopt %lu(%lu) stat %lu(%lu) stored %lu lit %u \",\n    //        opt_lenb, s->opt_len, static_lenb, s->static_len, stored_len,\n    //        s->last_lit));\n\n    if (static_lenb <= opt_lenb) { opt_lenb = static_lenb; }\n\n  } else {\n    // Assert(buf != (char*)0, \"lost buf\");\n    opt_lenb = static_lenb = stored_len + 5; /* force a stored block */\n  }\n\n  if ((stored_len + 4 <= opt_lenb) && (buf !== -1)) {\n    /* 4: two words for the lengths */\n\n    /* The test buf != NULL is only necessary if LIT_BUFSIZE > WSIZE.\n     * Otherwise we can't have processed more than WSIZE input bytes since\n     * the last block flush, because compression would have been\n     * successful. If LIT_BUFSIZE <= WSIZE, it is never too late to\n     * transform a block into a stored block.\n     */\n    _tr_stored_block(s, buf, stored_len, last);\n\n  } else if (s.strategy === Z_FIXED || static_lenb === opt_lenb) {\n\n    send_bits(s, (STATIC_TREES << 1) + (last ? 1 : 0), 3);\n    compress_block(s, static_ltree, static_dtree);\n\n  } else {\n    send_bits(s, (DYN_TREES << 1) + (last ? 1 : 0), 3);\n    send_all_trees(s, s.l_desc.max_code + 1, s.d_desc.max_code + 1, max_blindex + 1);\n    compress_block(s, s.dyn_ltree, s.dyn_dtree);\n  }\n  // Assert (s->compressed_len == s->bits_sent, \"bad compressed size\");\n  /* The above check is made mod 2^32, for files larger than 512 MB\n   * and uLong implemented on 32 bits.\n   */\n  init_block(s);\n\n  if (last) {\n    bi_windup(s);\n  }\n  // Tracev((stderr,\"\\ncomprlen %lu(%lu) \", s->compressed_len>>3,\n  //       s->compressed_len-7*last));\n}\n\n/* ===========================================================================\n * Save the match info and tally the frequency counts. Return true if\n * the current block must be flushed.\n */\nfunction _tr_tally(s, dist, lc)\n//    deflate_state *s;\n//    unsigned dist;  /* distance of matched string */\n//    unsigned lc;    /* match length-MIN_MATCH or unmatched char (if dist==0) */\n{\n  //var out_length, in_length, dcode;\n\n  s.pending_buf[s.d_buf + s.last_lit * 2]     = (dist >>> 8) & 0xff;\n  s.pending_buf[s.d_buf + s.last_lit * 2 + 1] = dist & 0xff;\n\n  s.pending_buf[s.l_buf + s.last_lit] = lc & 0xff;\n  s.last_lit++;\n\n  if (dist === 0) {\n    /* lc is the unmatched char */\n    s.dyn_ltree[lc * 2]/*.Freq*/++;\n  } else {\n    s.matches++;\n    /* Here, lc is the match length - MIN_MATCH */\n    dist--;             /* dist = match distance - 1 */\n    //Assert((ush)dist < (ush)MAX_DIST(s) &&\n    //       (ush)lc <= (ush)(MAX_MATCH-MIN_MATCH) &&\n    //       (ush)d_code(dist) < (ush)D_CODES,  \"_tr_tally: bad match\");\n\n    s.dyn_ltree[(_length_code[lc] + LITERALS + 1) * 2]/*.Freq*/++;\n    s.dyn_dtree[d_code(dist) * 2]/*.Freq*/++;\n  }\n\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n\n//#ifdef TRUNCATE_BLOCK\n//  /* Try to guess if it is profitable to stop the current block here */\n//  if ((s.last_lit & 0x1fff) === 0 && s.level > 2) {\n//    /* Compute an upper bound for the compressed length */\n//    out_length = s.last_lit*8;\n//    in_length = s.strstart - s.block_start;\n//\n//    for (dcode = 0; dcode < D_CODES; dcode++) {\n//      out_length += s.dyn_dtree[dcode*2]/*.Freq*/ * (5 + extra_dbits[dcode]);\n//    }\n//    out_length >>>= 3;\n//    //Tracev((stderr,\"\\nlast_lit %u, in %ld, out ~%ld(%ld%%) \",\n//    //       s->last_lit, in_length, out_length,\n//    //       100L - out_length*100L/in_length));\n//    if (s.matches < (s.last_lit>>1)/*int /2*/ && out_length < (in_length>>1)/*int /2*/) {\n//      return true;\n//    }\n//  }\n//#endif\n\n  return (s.last_lit === s.lit_bufsize - 1);\n  /* We avoid equality with lit_bufsize because of wraparound at 64K\n   * on 16 bit machines and because stored blocks are restricted to\n   * 64K-1 bytes.\n   */\n}\n\nexports._tr_init  = _tr_init;\nexports._tr_stored_block = _tr_stored_block;\nexports._tr_flush_block  = _tr_flush_block;\nexports._tr_tally = _tr_tally;\nexports._tr_align = _tr_align;\n\n\n/***/ }),\n/* 57 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*!\n * PEP v0.4.3 | https://github.com/jquery/PEP\n * Copyright jQuery Foundation and other contributors | http://jquery.org/license\n */\n\n(function (global, factory) {\n   true ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global.PointerEventsPolyfill = factory());\n}(this, function () { 'use strict';\n\n  /**\n   * This is the constructor for new PointerEvents.\n   *\n   * New Pointer Events must be given a type, and an optional dictionary of\n   * initialization properties.\n   *\n   * Due to certain platform requirements, events returned from the constructor\n   * identify as MouseEvents.\n   *\n   * @constructor\n   * @param {String} inType The type of the event to create.\n   * @param {Object} [inDict] An optional dictionary of initial event properties.\n   * @return {Event} A new PointerEvent of type `inType`, initialized with properties from `inDict`.\n   */\n  var MOUSE_PROPS = [\n    'bubbles',\n    'cancelable',\n    'view',\n    'detail',\n    'screenX',\n    'screenY',\n    'clientX',\n    'clientY',\n    'ctrlKey',\n    'altKey',\n    'shiftKey',\n    'metaKey',\n    'button',\n    'relatedTarget',\n    'pageX',\n    'pageY'\n  ];\n\n  var MOUSE_DEFAULTS = [\n    false,\n    false,\n    null,\n    null,\n    0,\n    0,\n    0,\n    0,\n    false,\n    false,\n    false,\n    false,\n    0,\n    null,\n    0,\n    0\n  ];\n\n  function PointerEvent(inType, inDict) {\n    inDict = inDict || Object.create(null);\n\n    var e = document.createEvent('Event');\n    e.initEvent(inType, inDict.bubbles || false, inDict.cancelable || false);\n\n    // define inherited MouseEvent properties\n    // skip bubbles and cancelable since they're set above in initEvent()\n    for (var i = 2, p; i < MOUSE_PROPS.length; i++) {\n      p = MOUSE_PROPS[i];\n      e[p] = inDict[p] || MOUSE_DEFAULTS[i];\n    }\n    e.buttons = inDict.buttons || 0;\n\n    // Spec requires that pointers without pressure specified use 0.5 for down\n    // state and 0 for up state.\n    var pressure = 0;\n\n    if (inDict.pressure && e.buttons) {\n      pressure = inDict.pressure;\n    } else {\n      pressure = e.buttons ? 0.5 : 0;\n    }\n\n    // add x/y properties aliased to clientX/Y\n    e.x = e.clientX;\n    e.y = e.clientY;\n\n    // define the properties of the PointerEvent interface\n    e.pointerId = inDict.pointerId || 0;\n    e.width = inDict.width || 0;\n    e.height = inDict.height || 0;\n    e.pressure = pressure;\n    e.tiltX = inDict.tiltX || 0;\n    e.tiltY = inDict.tiltY || 0;\n    e.twist = inDict.twist || 0;\n    e.tangentialPressure = inDict.tangentialPressure || 0;\n    e.pointerType = inDict.pointerType || '';\n    e.hwTimestamp = inDict.hwTimestamp || 0;\n    e.isPrimary = inDict.isPrimary || false;\n    return e;\n  }\n\n  /**\n   * This module implements a map of pointer states\n   */\n  var USE_MAP = window.Map && window.Map.prototype.forEach;\n  var PointerMap = USE_MAP ? Map : SparseArrayMap;\n\n  function SparseArrayMap() {\n    this.array = [];\n    this.size = 0;\n  }\n\n  SparseArrayMap.prototype = {\n    set: function(k, v) {\n      if (v === undefined) {\n        return this.delete(k);\n      }\n      if (!this.has(k)) {\n        this.size++;\n      }\n      this.array[k] = v;\n    },\n    has: function(k) {\n      return this.array[k] !== undefined;\n    },\n    delete: function(k) {\n      if (this.has(k)) {\n        delete this.array[k];\n        this.size--;\n      }\n    },\n    get: function(k) {\n      return this.array[k];\n    },\n    clear: function() {\n      this.array.length = 0;\n      this.size = 0;\n    },\n\n    // return value, key, map\n    forEach: function(callback, thisArg) {\n      return this.array.forEach(function(v, k) {\n        callback.call(thisArg, v, k, this);\n      }, this);\n    }\n  };\n\n  var CLONE_PROPS = [\n\n    // MouseEvent\n    'bubbles',\n    'cancelable',\n    'view',\n    'detail',\n    'screenX',\n    'screenY',\n    'clientX',\n    'clientY',\n    'ctrlKey',\n    'altKey',\n    'shiftKey',\n    'metaKey',\n    'button',\n    'relatedTarget',\n\n    // DOM Level 3\n    'buttons',\n\n    // PointerEvent\n    'pointerId',\n    'width',\n    'height',\n    'pressure',\n    'tiltX',\n    'tiltY',\n    'pointerType',\n    'hwTimestamp',\n    'isPrimary',\n\n    // event instance\n    'type',\n    'target',\n    'currentTarget',\n    'which',\n    'pageX',\n    'pageY',\n    'timeStamp'\n  ];\n\n  var CLONE_DEFAULTS = [\n\n    // MouseEvent\n    false,\n    false,\n    null,\n    null,\n    0,\n    0,\n    0,\n    0,\n    false,\n    false,\n    false,\n    false,\n    0,\n    null,\n\n    // DOM Level 3\n    0,\n\n    // PointerEvent\n    0,\n    0,\n    0,\n    0,\n    0,\n    0,\n    '',\n    0,\n    false,\n\n    // event instance\n    '',\n    null,\n    null,\n    0,\n    0,\n    0,\n    0\n  ];\n\n  var BOUNDARY_EVENTS = {\n    'pointerover': 1,\n    'pointerout': 1,\n    'pointerenter': 1,\n    'pointerleave': 1\n  };\n\n  var HAS_SVG_INSTANCE = (typeof SVGElementInstance !== 'undefined');\n\n  /**\n   * This module is for normalizing events. Mouse and Touch events will be\n   * collected here, and fire PointerEvents that have the same semantics, no\n   * matter the source.\n   * Events fired:\n   *   - pointerdown: a pointing is added\n   *   - pointerup: a pointer is removed\n   *   - pointermove: a pointer is moved\n   *   - pointerover: a pointer crosses into an element\n   *   - pointerout: a pointer leaves an element\n   *   - pointercancel: a pointer will no longer generate events\n   */\n  var dispatcher = {\n    pointermap: new PointerMap(),\n    eventMap: Object.create(null),\n    captureInfo: Object.create(null),\n\n    // Scope objects for native events.\n    // This exists for ease of testing.\n    eventSources: Object.create(null),\n    eventSourceList: [],\n    /**\n     * Add a new event source that will generate pointer events.\n     *\n     * `inSource` must contain an array of event names named `events`, and\n     * functions with the names specified in the `events` array.\n     * @param {string} name A name for the event source\n     * @param {Object} source A new source of platform events.\n     */\n    registerSource: function(name, source) {\n      var s = source;\n      var newEvents = s.events;\n      if (newEvents) {\n        newEvents.forEach(function(e) {\n          if (s[e]) {\n            this.eventMap[e] = s[e].bind(s);\n          }\n        }, this);\n        this.eventSources[name] = s;\n        this.eventSourceList.push(s);\n      }\n    },\n    register: function(element) {\n      var l = this.eventSourceList.length;\n      for (var i = 0, es; (i < l) && (es = this.eventSourceList[i]); i++) {\n\n        // call eventsource register\n        es.register.call(es, element);\n      }\n    },\n    unregister: function(element) {\n      var l = this.eventSourceList.length;\n      for (var i = 0, es; (i < l) && (es = this.eventSourceList[i]); i++) {\n\n        // call eventsource register\n        es.unregister.call(es, element);\n      }\n    },\n    contains: /*scope.external.contains || */function(container, contained) {\n      try {\n        return container.contains(contained);\n      } catch (ex) {\n\n        // most likely: https://bugzilla.mozilla.org/show_bug.cgi?id=208427\n        return false;\n      }\n    },\n\n    // EVENTS\n    down: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointerdown', inEvent);\n    },\n    move: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointermove', inEvent);\n    },\n    up: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointerup', inEvent);\n    },\n    enter: function(inEvent) {\n      inEvent.bubbles = false;\n      this.fireEvent('pointerenter', inEvent);\n    },\n    leave: function(inEvent) {\n      inEvent.bubbles = false;\n      this.fireEvent('pointerleave', inEvent);\n    },\n    over: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointerover', inEvent);\n    },\n    out: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointerout', inEvent);\n    },\n    cancel: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointercancel', inEvent);\n    },\n    leaveOut: function(event) {\n      this.out(event);\n      this.propagate(event, this.leave, false);\n    },\n    enterOver: function(event) {\n      this.over(event);\n      this.propagate(event, this.enter, true);\n    },\n\n    // LISTENER LOGIC\n    eventHandler: function(inEvent) {\n\n      // This is used to prevent multiple dispatch of pointerevents from\n      // platform events. This can happen when two elements in different scopes\n      // are set up to create pointer events, which is relevant to Shadow DOM.\n      if (inEvent._handledByPE) {\n        return;\n      }\n      var type = inEvent.type;\n      var fn = this.eventMap && this.eventMap[type];\n      if (fn) {\n        fn(inEvent);\n      }\n      inEvent._handledByPE = true;\n    },\n\n    // set up event listeners\n    listen: function(target, events) {\n      events.forEach(function(e) {\n        this.addEvent(target, e);\n      }, this);\n    },\n\n    // remove event listeners\n    unlisten: function(target, events) {\n      events.forEach(function(e) {\n        this.removeEvent(target, e);\n      }, this);\n    },\n    addEvent: /*scope.external.addEvent || */function(target, eventName) {\n      target.addEventListener(eventName, this.boundHandler);\n    },\n    removeEvent: /*scope.external.removeEvent || */function(target, eventName) {\n      target.removeEventListener(eventName, this.boundHandler);\n    },\n\n    // EVENT CREATION AND TRACKING\n    /**\n     * Creates a new Event of type `inType`, based on the information in\n     * `inEvent`.\n     *\n     * @param {string} inType A string representing the type of event to create\n     * @param {Event} inEvent A platform event with a target\n     * @return {Event} A PointerEvent of type `inType`\n     */\n    makeEvent: function(inType, inEvent) {\n\n      // relatedTarget must be null if pointer is captured\n      if (this.captureInfo[inEvent.pointerId]) {\n        inEvent.relatedTarget = null;\n      }\n      var e = new PointerEvent(inType, inEvent);\n      if (inEvent.preventDefault) {\n        e.preventDefault = inEvent.preventDefault;\n      }\n      e._target = e._target || inEvent.target;\n      return e;\n    },\n\n    // make and dispatch an event in one call\n    fireEvent: function(inType, inEvent) {\n      var e = this.makeEvent(inType, inEvent);\n      return this.dispatchEvent(e);\n    },\n    /**\n     * Returns a snapshot of inEvent, with writable properties.\n     *\n     * @param {Event} inEvent An event that contains properties to copy.\n     * @return {Object} An object containing shallow copies of `inEvent`'s\n     *    properties.\n     */\n    cloneEvent: function(inEvent) {\n      var eventCopy = Object.create(null);\n      var p;\n      for (var i = 0; i < CLONE_PROPS.length; i++) {\n        p = CLONE_PROPS[i];\n        eventCopy[p] = inEvent[p] || CLONE_DEFAULTS[i];\n\n        // Work around SVGInstanceElement shadow tree\n        // Return the <use> element that is represented by the instance for Safari, Chrome, IE.\n        // This is the behavior implemented by Firefox.\n        if (HAS_SVG_INSTANCE && (p === 'target' || p === 'relatedTarget')) {\n          if (eventCopy[p] instanceof SVGElementInstance) {\n            eventCopy[p] = eventCopy[p].correspondingUseElement;\n          }\n        }\n      }\n\n      // keep the semantics of preventDefault\n      if (inEvent.preventDefault) {\n        eventCopy.preventDefault = function() {\n          inEvent.preventDefault();\n        };\n      }\n      return eventCopy;\n    },\n    getTarget: function(inEvent) {\n      var capture = this.captureInfo[inEvent.pointerId];\n      if (!capture) {\n        return inEvent._target;\n      }\n      if (inEvent._target === capture || !(inEvent.type in BOUNDARY_EVENTS)) {\n        return capture;\n      }\n    },\n    propagate: function(event, fn, propagateDown) {\n      var target = event.target;\n      var targets = [];\n\n      // Order of conditions due to document.contains() missing in IE.\n      while (target !== document && !target.contains(event.relatedTarget)) {\n        targets.push(target);\n        target = target.parentNode;\n\n        // Touch: Do not propagate if node is detached.\n        if (!target) {\n          return;\n        }\n      }\n      if (propagateDown) {\n        targets.reverse();\n      }\n      targets.forEach(function(target) {\n        event.target = target;\n        fn.call(this, event);\n      }, this);\n    },\n    setCapture: function(inPointerId, inTarget, skipDispatch) {\n      if (this.captureInfo[inPointerId]) {\n        this.releaseCapture(inPointerId, skipDispatch);\n      }\n\n      this.captureInfo[inPointerId] = inTarget;\n      this.implicitRelease = this.releaseCapture.bind(this, inPointerId, skipDispatch);\n      document.addEventListener('pointerup', this.implicitRelease);\n      document.addEventListener('pointercancel', this.implicitRelease);\n\n      var e = new PointerEvent('gotpointercapture');\n      e.pointerId = inPointerId;\n      e._target = inTarget;\n\n      if (!skipDispatch) {\n        this.asyncDispatchEvent(e);\n      }\n    },\n    releaseCapture: function(inPointerId, skipDispatch) {\n      var t = this.captureInfo[inPointerId];\n      if (!t) {\n        return;\n      }\n\n      this.captureInfo[inPointerId] = undefined;\n      document.removeEventListener('pointerup', this.implicitRelease);\n      document.removeEventListener('pointercancel', this.implicitRelease);\n\n      var e = new PointerEvent('lostpointercapture');\n      e.pointerId = inPointerId;\n      e._target = t;\n\n      if (!skipDispatch) {\n        this.asyncDispatchEvent(e);\n      }\n    },\n    /**\n     * Dispatches the event to its target.\n     *\n     * @param {Event} inEvent The event to be dispatched.\n     * @return {Boolean} True if an event handler returns true, false otherwise.\n     */\n    dispatchEvent: /*scope.external.dispatchEvent || */function(inEvent) {\n      var t = this.getTarget(inEvent);\n      if (t) {\n        return t.dispatchEvent(inEvent);\n      }\n    },\n    asyncDispatchEvent: function(inEvent) {\n      requestAnimationFrame(this.dispatchEvent.bind(this, inEvent));\n    }\n  };\n  dispatcher.boundHandler = dispatcher.eventHandler.bind(dispatcher);\n\n  var targeting = {\n    shadow: function(inEl) {\n      if (inEl) {\n        return inEl.shadowRoot || inEl.webkitShadowRoot;\n      }\n    },\n    canTarget: function(shadow) {\n      return shadow && Boolean(shadow.elementFromPoint);\n    },\n    targetingShadow: function(inEl) {\n      var s = this.shadow(inEl);\n      if (this.canTarget(s)) {\n        return s;\n      }\n    },\n    olderShadow: function(shadow) {\n      var os = shadow.olderShadowRoot;\n      if (!os) {\n        var se = shadow.querySelector('shadow');\n        if (se) {\n          os = se.olderShadowRoot;\n        }\n      }\n      return os;\n    },\n    allShadows: function(element) {\n      var shadows = [];\n      var s = this.shadow(element);\n      while (s) {\n        shadows.push(s);\n        s = this.olderShadow(s);\n      }\n      return shadows;\n    },\n    searchRoot: function(inRoot, x, y) {\n      if (inRoot) {\n        var t = inRoot.elementFromPoint(x, y);\n        var st, sr;\n\n        // is element a shadow host?\n        sr = this.targetingShadow(t);\n        while (sr) {\n\n          // find the the element inside the shadow root\n          st = sr.elementFromPoint(x, y);\n          if (!st) {\n\n            // check for older shadows\n            sr = this.olderShadow(sr);\n          } else {\n\n            // shadowed element may contain a shadow root\n            var ssr = this.targetingShadow(st);\n            return this.searchRoot(ssr, x, y) || st;\n          }\n        }\n\n        // light dom element is the target\n        return t;\n      }\n    },\n    owner: function(element) {\n      var s = element;\n\n      // walk up until you hit the shadow root or document\n      while (s.parentNode) {\n        s = s.parentNode;\n      }\n\n      // the owner element is expected to be a Document or ShadowRoot\n      if (s.nodeType !== Node.DOCUMENT_NODE && s.nodeType !== Node.DOCUMENT_FRAGMENT_NODE) {\n        s = document;\n      }\n      return s;\n    },\n    findTarget: function(inEvent) {\n      var x = inEvent.clientX;\n      var y = inEvent.clientY;\n\n      // if the listener is in the shadow root, it is much faster to start there\n      var s = this.owner(inEvent.target);\n\n      // if x, y is not in this root, fall back to document search\n      if (!s.elementFromPoint(x, y)) {\n        s = document;\n      }\n      return this.searchRoot(s, x, y);\n    }\n  };\n\n  var forEach = Array.prototype.forEach.call.bind(Array.prototype.forEach);\n  var map = Array.prototype.map.call.bind(Array.prototype.map);\n  var toArray = Array.prototype.slice.call.bind(Array.prototype.slice);\n  var filter = Array.prototype.filter.call.bind(Array.prototype.filter);\n  var MO = window.MutationObserver || window.WebKitMutationObserver;\n  var SELECTOR = '[touch-action]';\n  var OBSERVER_INIT = {\n    subtree: true,\n    childList: true,\n    attributes: true,\n    attributeOldValue: true,\n    attributeFilter: ['touch-action']\n  };\n\n  function Installer(add, remove, changed, binder) {\n    this.addCallback = add.bind(binder);\n    this.removeCallback = remove.bind(binder);\n    this.changedCallback = changed.bind(binder);\n    if (MO) {\n      this.observer = new MO(this.mutationWatcher.bind(this));\n    }\n  }\n\n  Installer.prototype = {\n    watchSubtree: function(target) {\n\n      // Only watch scopes that can target find, as these are top-level.\n      // Otherwise we can see duplicate additions and removals that add noise.\n      //\n      // TODO(dfreedman): For some instances with ShadowDOMPolyfill, we can see\n      // a removal without an insertion when a node is redistributed among\n      // shadows. Since it all ends up correct in the document, watching only\n      // the document will yield the correct mutations to watch.\n      if (this.observer && targeting.canTarget(target)) {\n        this.observer.observe(target, OBSERVER_INIT);\n      }\n    },\n    enableOnSubtree: function(target) {\n      this.watchSubtree(target);\n      if (target === document && document.readyState !== 'complete') {\n        this.installOnLoad();\n      } else {\n        this.installNewSubtree(target);\n      }\n    },\n    installNewSubtree: function(target) {\n      forEach(this.findElements(target), this.addElement, this);\n    },\n    findElements: function(target) {\n      if (target.querySelectorAll) {\n        return target.querySelectorAll(SELECTOR);\n      }\n      return [];\n    },\n    removeElement: function(el) {\n      this.removeCallback(el);\n    },\n    addElement: function(el) {\n      this.addCallback(el);\n    },\n    elementChanged: function(el, oldValue) {\n      this.changedCallback(el, oldValue);\n    },\n    concatLists: function(accum, list) {\n      return accum.concat(toArray(list));\n    },\n\n    // register all touch-action = none nodes on document load\n    installOnLoad: function() {\n      document.addEventListener('readystatechange', function() {\n        if (document.readyState === 'complete') {\n          this.installNewSubtree(document);\n        }\n      }.bind(this));\n    },\n    isElement: function(n) {\n      return n.nodeType === Node.ELEMENT_NODE;\n    },\n    flattenMutationTree: function(inNodes) {\n\n      // find children with touch-action\n      var tree = map(inNodes, this.findElements, this);\n\n      // make sure the added nodes are accounted for\n      tree.push(filter(inNodes, this.isElement));\n\n      // flatten the list\n      return tree.reduce(this.concatLists, []);\n    },\n    mutationWatcher: function(mutations) {\n      mutations.forEach(this.mutationHandler, this);\n    },\n    mutationHandler: function(m) {\n      if (m.type === 'childList') {\n        var added = this.flattenMutationTree(m.addedNodes);\n        added.forEach(this.addElement, this);\n        var removed = this.flattenMutationTree(m.removedNodes);\n        removed.forEach(this.removeElement, this);\n      } else if (m.type === 'attributes') {\n        this.elementChanged(m.target, m.oldValue);\n      }\n    }\n  };\n\n  function shadowSelector(v) {\n    return 'body /shadow-deep/ ' + selector(v);\n  }\n  function selector(v) {\n    return '[touch-action=\"' + v + '\"]';\n  }\n  function rule(v) {\n    return '{ -ms-touch-action: ' + v + '; touch-action: ' + v + '; }';\n  }\n  var attrib2css = [\n    'none',\n    'auto',\n    'pan-x',\n    'pan-y',\n    {\n      rule: 'pan-x pan-y',\n      selectors: [\n        'pan-x pan-y',\n        'pan-y pan-x'\n      ]\n    }\n  ];\n  var styles = '';\n\n  // only install stylesheet if the browser has touch action support\n  var hasNativePE = window.PointerEvent || window.MSPointerEvent;\n\n  // only add shadow selectors if shadowdom is supported\n  var hasShadowRoot = !window.ShadowDOMPolyfill && document.head.createShadowRoot;\n\n  function applyAttributeStyles() {\n    if (hasNativePE) {\n      attrib2css.forEach(function(r) {\n        if (String(r) === r) {\n          styles += selector(r) + rule(r) + '\\n';\n          if (hasShadowRoot) {\n            styles += shadowSelector(r) + rule(r) + '\\n';\n          }\n        } else {\n          styles += r.selectors.map(selector) + rule(r.rule) + '\\n';\n          if (hasShadowRoot) {\n            styles += r.selectors.map(shadowSelector) + rule(r.rule) + '\\n';\n          }\n        }\n      });\n\n      var el = document.createElement('style');\n      el.textContent = styles;\n      document.head.appendChild(el);\n    }\n  }\n\n  var pointermap = dispatcher.pointermap;\n\n  // radius around touchend that swallows mouse events\n  var DEDUP_DIST = 25;\n\n  // left, middle, right, back, forward\n  var BUTTON_TO_BUTTONS = [1, 4, 2, 8, 16];\n\n  var HAS_BUTTONS = false;\n  try {\n    HAS_BUTTONS = new MouseEvent('test', { buttons: 1 }).buttons === 1;\n  } catch (e) {}\n\n  // handler block for native mouse events\n  var mouseEvents = {\n    POINTER_ID: 1,\n    POINTER_TYPE: 'mouse',\n    events: [\n      'mousedown',\n      'mousemove',\n      'mouseup',\n      'mouseover',\n      'mouseout'\n    ],\n    register: function(target) {\n      dispatcher.listen(target, this.events);\n    },\n    unregister: function(target) {\n      dispatcher.unlisten(target, this.events);\n    },\n    lastTouches: [],\n\n    // collide with the global mouse listener\n    isEventSimulatedFromTouch: function(inEvent) {\n      var lts = this.lastTouches;\n      var x = inEvent.clientX;\n      var y = inEvent.clientY;\n      for (var i = 0, l = lts.length, t; i < l && (t = lts[i]); i++) {\n\n        // simulated mouse events will be swallowed near a primary touchend\n        var dx = Math.abs(x - t.x);\n        var dy = Math.abs(y - t.y);\n        if (dx <= DEDUP_DIST && dy <= DEDUP_DIST) {\n          return true;\n        }\n      }\n    },\n    prepareEvent: function(inEvent) {\n      var e = dispatcher.cloneEvent(inEvent);\n\n      // forward mouse preventDefault\n      var pd = e.preventDefault;\n      e.preventDefault = function() {\n        inEvent.preventDefault();\n        pd();\n      };\n      e.pointerId = this.POINTER_ID;\n      e.isPrimary = true;\n      e.pointerType = this.POINTER_TYPE;\n      return e;\n    },\n    prepareButtonsForMove: function(e, inEvent) {\n      var p = pointermap.get(this.POINTER_ID);\n\n      // Update buttons state after possible out-of-document mouseup.\n      if (inEvent.which === 0 || !p) {\n        e.buttons = 0;\n      } else {\n        e.buttons = p.buttons;\n      }\n      inEvent.buttons = e.buttons;\n    },\n    mousedown: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var p = pointermap.get(this.POINTER_ID);\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) {\n          e.buttons = BUTTON_TO_BUTTONS[e.button];\n          if (p) { e.buttons |= p.buttons; }\n          inEvent.buttons = e.buttons;\n        }\n        pointermap.set(this.POINTER_ID, inEvent);\n        if (!p || p.buttons === 0) {\n          dispatcher.down(e);\n        } else {\n          dispatcher.move(e);\n        }\n      }\n    },\n    mousemove: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) { this.prepareButtonsForMove(e, inEvent); }\n        e.button = -1;\n        pointermap.set(this.POINTER_ID, inEvent);\n        dispatcher.move(e);\n      }\n    },\n    mouseup: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var p = pointermap.get(this.POINTER_ID);\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) {\n          var up = BUTTON_TO_BUTTONS[e.button];\n\n          // Produces wrong state of buttons in Browsers without `buttons` support\n          // when a mouse button that was pressed outside the document is released\n          // inside and other buttons are still pressed down.\n          e.buttons = p ? p.buttons & ~up : 0;\n          inEvent.buttons = e.buttons;\n        }\n        pointermap.set(this.POINTER_ID, inEvent);\n\n        // Support: Firefox <=44 only\n        // FF Ubuntu includes the lifted button in the `buttons` property on\n        // mouseup.\n        // https://bugzilla.mozilla.org/show_bug.cgi?id=1223366\n        e.buttons &= ~BUTTON_TO_BUTTONS[e.button];\n        if (e.buttons === 0) {\n          dispatcher.up(e);\n        } else {\n          dispatcher.move(e);\n        }\n      }\n    },\n    mouseover: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) { this.prepareButtonsForMove(e, inEvent); }\n        e.button = -1;\n        pointermap.set(this.POINTER_ID, inEvent);\n        dispatcher.enterOver(e);\n      }\n    },\n    mouseout: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) { this.prepareButtonsForMove(e, inEvent); }\n        e.button = -1;\n        dispatcher.leaveOut(e);\n      }\n    },\n    cancel: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.cancel(e);\n      this.deactivateMouse();\n    },\n    deactivateMouse: function() {\n      pointermap.delete(this.POINTER_ID);\n    }\n  };\n\n  var captureInfo = dispatcher.captureInfo;\n  var findTarget = targeting.findTarget.bind(targeting);\n  var allShadows = targeting.allShadows.bind(targeting);\n  var pointermap$1 = dispatcher.pointermap;\n\n  // This should be long enough to ignore compat mouse events made by touch\n  var DEDUP_TIMEOUT = 2500;\n  var CLICK_COUNT_TIMEOUT = 200;\n  var ATTRIB = 'touch-action';\n  var INSTALLER;\n\n  // handler block for native touch events\n  var touchEvents = {\n    events: [\n      'touchstart',\n      'touchmove',\n      'touchend',\n      'touchcancel'\n    ],\n    register: function(target) {\n      INSTALLER.enableOnSubtree(target);\n    },\n    unregister: function() {\n\n      // TODO(dfreedman): is it worth it to disconnect the MO?\n    },\n    elementAdded: function(el) {\n      var a = el.getAttribute(ATTRIB);\n      var st = this.touchActionToScrollType(a);\n      if (st) {\n        el._scrollType = st;\n        dispatcher.listen(el, this.events);\n\n        // set touch-action on shadows as well\n        allShadows(el).forEach(function(s) {\n          s._scrollType = st;\n          dispatcher.listen(s, this.events);\n        }, this);\n      }\n    },\n    elementRemoved: function(el) {\n      el._scrollType = undefined;\n      dispatcher.unlisten(el, this.events);\n\n      // remove touch-action from shadow\n      allShadows(el).forEach(function(s) {\n        s._scrollType = undefined;\n        dispatcher.unlisten(s, this.events);\n      }, this);\n    },\n    elementChanged: function(el, oldValue) {\n      var a = el.getAttribute(ATTRIB);\n      var st = this.touchActionToScrollType(a);\n      var oldSt = this.touchActionToScrollType(oldValue);\n\n      // simply update scrollType if listeners are already established\n      if (st && oldSt) {\n        el._scrollType = st;\n        allShadows(el).forEach(function(s) {\n          s._scrollType = st;\n        }, this);\n      } else if (oldSt) {\n        this.elementRemoved(el);\n      } else if (st) {\n        this.elementAdded(el);\n      }\n    },\n    scrollTypes: {\n      EMITTER: 'none',\n      XSCROLLER: 'pan-x',\n      YSCROLLER: 'pan-y',\n      SCROLLER: /^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/\n    },\n    touchActionToScrollType: function(touchAction) {\n      var t = touchAction;\n      var st = this.scrollTypes;\n      if (t === 'none') {\n        return 'none';\n      } else if (t === st.XSCROLLER) {\n        return 'X';\n      } else if (t === st.YSCROLLER) {\n        return 'Y';\n      } else if (st.SCROLLER.exec(t)) {\n        return 'XY';\n      }\n    },\n    POINTER_TYPE: 'touch',\n    firstTouch: null,\n    isPrimaryTouch: function(inTouch) {\n      return this.firstTouch === inTouch.identifier;\n    },\n    setPrimaryTouch: function(inTouch) {\n\n      // set primary touch if there no pointers, or the only pointer is the mouse\n      if (pointermap$1.size === 0 || (pointermap$1.size === 1 && pointermap$1.has(1))) {\n        this.firstTouch = inTouch.identifier;\n        this.firstXY = { X: inTouch.clientX, Y: inTouch.clientY };\n        this.scrolling = false;\n        this.cancelResetClickCount();\n      }\n    },\n    removePrimaryPointer: function(inPointer) {\n      if (inPointer.isPrimary) {\n        this.firstTouch = null;\n        this.firstXY = null;\n        this.resetClickCount();\n      }\n    },\n    clickCount: 0,\n    resetId: null,\n    resetClickCount: function() {\n      var fn = function() {\n        this.clickCount = 0;\n        this.resetId = null;\n      }.bind(this);\n      this.resetId = setTimeout(fn, CLICK_COUNT_TIMEOUT);\n    },\n    cancelResetClickCount: function() {\n      if (this.resetId) {\n        clearTimeout(this.resetId);\n      }\n    },\n    typeToButtons: function(type) {\n      var ret = 0;\n      if (type === 'touchstart' || type === 'touchmove') {\n        ret = 1;\n      }\n      return ret;\n    },\n    touchToPointer: function(inTouch) {\n      var cte = this.currentTouchEvent;\n      var e = dispatcher.cloneEvent(inTouch);\n\n      // We reserve pointerId 1 for Mouse.\n      // Touch identifiers can start at 0.\n      // Add 2 to the touch identifier for compatibility.\n      var id = e.pointerId = inTouch.identifier + 2;\n      e.target = captureInfo[id] || findTarget(e);\n      e.bubbles = true;\n      e.cancelable = true;\n      e.detail = this.clickCount;\n      e.button = 0;\n      e.buttons = this.typeToButtons(cte.type);\n      e.width = (inTouch.radiusX || inTouch.webkitRadiusX || 0) * 2;\n      e.height = (inTouch.radiusY || inTouch.webkitRadiusY || 0) * 2;\n      e.pressure = inTouch.force || inTouch.webkitForce || 0.5;\n      e.isPrimary = this.isPrimaryTouch(inTouch);\n      e.pointerType = this.POINTER_TYPE;\n\n      // forward modifier keys\n      e.altKey = cte.altKey;\n      e.ctrlKey = cte.ctrlKey;\n      e.metaKey = cte.metaKey;\n      e.shiftKey = cte.shiftKey;\n\n      // forward touch preventDefaults\n      var self = this;\n      e.preventDefault = function() {\n        self.scrolling = false;\n        self.firstXY = null;\n        cte.preventDefault();\n      };\n      return e;\n    },\n    processTouches: function(inEvent, inFunction) {\n      var tl = inEvent.changedTouches;\n      this.currentTouchEvent = inEvent;\n      for (var i = 0, t; i < tl.length; i++) {\n        t = tl[i];\n        inFunction.call(this, this.touchToPointer(t));\n      }\n    },\n\n    // For single axis scrollers, determines whether the element should emit\n    // pointer events or behave as a scroller\n    shouldScroll: function(inEvent) {\n      if (this.firstXY) {\n        var ret;\n        var scrollAxis = inEvent.currentTarget._scrollType;\n        if (scrollAxis === 'none') {\n\n          // this element is a touch-action: none, should never scroll\n          ret = false;\n        } else if (scrollAxis === 'XY') {\n\n          // this element should always scroll\n          ret = true;\n        } else {\n          var t = inEvent.changedTouches[0];\n\n          // check the intended scroll axis, and other axis\n          var a = scrollAxis;\n          var oa = scrollAxis === 'Y' ? 'X' : 'Y';\n          var da = Math.abs(t['client' + a] - this.firstXY[a]);\n          var doa = Math.abs(t['client' + oa] - this.firstXY[oa]);\n\n          // if delta in the scroll axis > delta other axis, scroll instead of\n          // making events\n          ret = da >= doa;\n        }\n        this.firstXY = null;\n        return ret;\n      }\n    },\n    findTouch: function(inTL, inId) {\n      for (var i = 0, l = inTL.length, t; i < l && (t = inTL[i]); i++) {\n        if (t.identifier === inId) {\n          return true;\n        }\n      }\n    },\n\n    // In some instances, a touchstart can happen without a touchend. This\n    // leaves the pointermap in a broken state.\n    // Therefore, on every touchstart, we remove the touches that did not fire a\n    // touchend event.\n    // To keep state globally consistent, we fire a\n    // pointercancel for this \"abandoned\" touch\n    vacuumTouches: function(inEvent) {\n      var tl = inEvent.touches;\n\n      // pointermap.size should be < tl.length here, as the touchstart has not\n      // been processed yet.\n      if (pointermap$1.size >= tl.length) {\n        var d = [];\n        pointermap$1.forEach(function(value, key) {\n\n          // Never remove pointerId == 1, which is mouse.\n          // Touch identifiers are 2 smaller than their pointerId, which is the\n          // index in pointermap.\n          if (key !== 1 && !this.findTouch(tl, key - 2)) {\n            var p = value.out;\n            d.push(p);\n          }\n        }, this);\n        d.forEach(this.cancelOut, this);\n      }\n    },\n    touchstart: function(inEvent) {\n      this.vacuumTouches(inEvent);\n      this.setPrimaryTouch(inEvent.changedTouches[0]);\n      this.dedupSynthMouse(inEvent);\n      if (!this.scrolling) {\n        this.clickCount++;\n        this.processTouches(inEvent, this.overDown);\n      }\n    },\n    overDown: function(inPointer) {\n      pointermap$1.set(inPointer.pointerId, {\n        target: inPointer.target,\n        out: inPointer,\n        outTarget: inPointer.target\n      });\n      dispatcher.enterOver(inPointer);\n      dispatcher.down(inPointer);\n    },\n    touchmove: function(inEvent) {\n      if (!this.scrolling) {\n        if (this.shouldScroll(inEvent)) {\n          this.scrolling = true;\n          this.touchcancel(inEvent);\n        } else {\n          inEvent.preventDefault();\n          this.processTouches(inEvent, this.moveOverOut);\n        }\n      }\n    },\n    moveOverOut: function(inPointer) {\n      var event = inPointer;\n      var pointer = pointermap$1.get(event.pointerId);\n\n      // a finger drifted off the screen, ignore it\n      if (!pointer) {\n        return;\n      }\n      var outEvent = pointer.out;\n      var outTarget = pointer.outTarget;\n      dispatcher.move(event);\n      if (outEvent && outTarget !== event.target) {\n        outEvent.relatedTarget = event.target;\n        event.relatedTarget = outTarget;\n\n        // recover from retargeting by shadow\n        outEvent.target = outTarget;\n        if (event.target) {\n          dispatcher.leaveOut(outEvent);\n          dispatcher.enterOver(event);\n        } else {\n\n          // clean up case when finger leaves the screen\n          event.target = outTarget;\n          event.relatedTarget = null;\n          this.cancelOut(event);\n        }\n      }\n      pointer.out = event;\n      pointer.outTarget = event.target;\n    },\n    touchend: function(inEvent) {\n      this.dedupSynthMouse(inEvent);\n      this.processTouches(inEvent, this.upOut);\n    },\n    upOut: function(inPointer) {\n      if (!this.scrolling) {\n        dispatcher.up(inPointer);\n        dispatcher.leaveOut(inPointer);\n      }\n      this.cleanUpPointer(inPointer);\n    },\n    touchcancel: function(inEvent) {\n      this.processTouches(inEvent, this.cancelOut);\n    },\n    cancelOut: function(inPointer) {\n      dispatcher.cancel(inPointer);\n      dispatcher.leaveOut(inPointer);\n      this.cleanUpPointer(inPointer);\n    },\n    cleanUpPointer: function(inPointer) {\n      pointermap$1.delete(inPointer.pointerId);\n      this.removePrimaryPointer(inPointer);\n    },\n\n    // prevent synth mouse events from creating pointer events\n    dedupSynthMouse: function(inEvent) {\n      var lts = mouseEvents.lastTouches;\n      var t = inEvent.changedTouches[0];\n\n      // only the primary finger will synth mouse events\n      if (this.isPrimaryTouch(t)) {\n\n        // remember x/y of last touch\n        var lt = { x: t.clientX, y: t.clientY };\n        lts.push(lt);\n        var fn = (function(lts, lt) {\n          var i = lts.indexOf(lt);\n          if (i > -1) {\n            lts.splice(i, 1);\n          }\n        }).bind(null, lts, lt);\n        setTimeout(fn, DEDUP_TIMEOUT);\n      }\n    }\n  };\n\n  INSTALLER = new Installer(touchEvents.elementAdded, touchEvents.elementRemoved,\n    touchEvents.elementChanged, touchEvents);\n\n  var pointermap$2 = dispatcher.pointermap;\n  var HAS_BITMAP_TYPE = window.MSPointerEvent &&\n    typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE === 'number';\n  var msEvents = {\n    events: [\n      'MSPointerDown',\n      'MSPointerMove',\n      'MSPointerUp',\n      'MSPointerOut',\n      'MSPointerOver',\n      'MSPointerCancel',\n      'MSGotPointerCapture',\n      'MSLostPointerCapture'\n    ],\n    register: function(target) {\n      dispatcher.listen(target, this.events);\n    },\n    unregister: function(target) {\n      dispatcher.unlisten(target, this.events);\n    },\n    POINTER_TYPES: [\n      '',\n      'unavailable',\n      'touch',\n      'pen',\n      'mouse'\n    ],\n    prepareEvent: function(inEvent) {\n      var e = inEvent;\n      if (HAS_BITMAP_TYPE) {\n        e = dispatcher.cloneEvent(inEvent);\n        e.pointerType = this.POINTER_TYPES[inEvent.pointerType];\n      }\n      return e;\n    },\n    cleanup: function(id) {\n      pointermap$2.delete(id);\n    },\n    MSPointerDown: function(inEvent) {\n      pointermap$2.set(inEvent.pointerId, inEvent);\n      var e = this.prepareEvent(inEvent);\n      dispatcher.down(e);\n    },\n    MSPointerMove: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.move(e);\n    },\n    MSPointerUp: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.up(e);\n      this.cleanup(inEvent.pointerId);\n    },\n    MSPointerOut: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.leaveOut(e);\n    },\n    MSPointerOver: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.enterOver(e);\n    },\n    MSPointerCancel: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.cancel(e);\n      this.cleanup(inEvent.pointerId);\n    },\n    MSLostPointerCapture: function(inEvent) {\n      var e = dispatcher.makeEvent('lostpointercapture', inEvent);\n      dispatcher.dispatchEvent(e);\n    },\n    MSGotPointerCapture: function(inEvent) {\n      var e = dispatcher.makeEvent('gotpointercapture', inEvent);\n      dispatcher.dispatchEvent(e);\n    }\n  };\n\n  function applyPolyfill() {\n\n    // only activate if this platform does not have pointer events\n    if (!window.PointerEvent) {\n      window.PointerEvent = PointerEvent;\n\n      if (window.navigator.msPointerEnabled) {\n        var tp = window.navigator.msMaxTouchPoints;\n        Object.defineProperty(window.navigator, 'maxTouchPoints', {\n          value: tp,\n          enumerable: true\n        });\n        dispatcher.registerSource('ms', msEvents);\n      } else {\n        Object.defineProperty(window.navigator, 'maxTouchPoints', {\n          value: 0,\n          enumerable: true\n        });\n        dispatcher.registerSource('mouse', mouseEvents);\n        if (window.ontouchstart !== undefined) {\n          dispatcher.registerSource('touch', touchEvents);\n        }\n      }\n\n      dispatcher.register(document);\n    }\n  }\n\n  var n = window.navigator;\n  var s;\n  var r;\n  var h;\n  function assertActive(id) {\n    if (!dispatcher.pointermap.has(id)) {\n      var error = new Error('InvalidPointerId');\n      error.name = 'InvalidPointerId';\n      throw error;\n    }\n  }\n  function assertConnected(elem) {\n    var parent = elem.parentNode;\n    while (parent && parent !== elem.ownerDocument) {\n      parent = parent.parentNode;\n    }\n    if (!parent) {\n      var error = new Error('InvalidStateError');\n      error.name = 'InvalidStateError';\n      throw error;\n    }\n  }\n  function inActiveButtonState(id) {\n    var p = dispatcher.pointermap.get(id);\n    return p.buttons !== 0;\n  }\n  if (n.msPointerEnabled) {\n    s = function(pointerId) {\n      assertActive(pointerId);\n      assertConnected(this);\n      if (inActiveButtonState(pointerId)) {\n        dispatcher.setCapture(pointerId, this, true);\n        this.msSetPointerCapture(pointerId);\n      }\n    };\n    r = function(pointerId) {\n      assertActive(pointerId);\n      dispatcher.releaseCapture(pointerId, true);\n      this.msReleasePointerCapture(pointerId);\n    };\n  } else {\n    s = function setPointerCapture(pointerId) {\n      assertActive(pointerId);\n      assertConnected(this);\n      if (inActiveButtonState(pointerId)) {\n        dispatcher.setCapture(pointerId, this);\n      }\n    };\n    r = function releasePointerCapture(pointerId) {\n      assertActive(pointerId);\n      dispatcher.releaseCapture(pointerId);\n    };\n  }\n  h = function hasPointerCapture(pointerId) {\n    return !!dispatcher.captureInfo[pointerId];\n  };\n\n  function applyPolyfill$1() {\n    if (window.Element && !Element.prototype.setPointerCapture) {\n      Object.defineProperties(Element.prototype, {\n        'setPointerCapture': {\n          value: s\n        },\n        'releasePointerCapture': {\n          value: r\n        },\n        'hasPointerCapture': {\n          value: h\n        }\n      });\n    }\n  }\n\n  applyAttributeStyles();\n  applyPolyfill();\n  applyPolyfill$1();\n\n  var pointerevents = {\n    dispatcher: dispatcher,\n    Installer: Installer,\n    PointerEvent: PointerEvent,\n    PointerMap: PointerMap,\n    targetFinding: targeting\n  };\n\n  return pointerevents;\n\n}));\n\n/***/ }),\n/* 58 */\n/***/ (function(module, exports) {\n\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n/***/ }),\n/* 59 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(42);\nif(typeof content === 'string') content = [[module.i, content, '']];\n// add the styles to the DOM\nvar update = __webpack_require__(6)(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../node_modules/less-loader/dist/cjs.js!./skin.less\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../node_modules/less-loader/dist/cjs.js!./skin.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n/***/ }),\n/* 60 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(44);\nif(typeof content === 'string') content = [[module.i, content, '']];\n// add the styles to the DOM\nvar update = __webpack_require__(6)(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/src/index.js??postcss!./drawing.css\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/src/index.js??postcss!./drawing.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n/***/ }),\n/* 61 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(45);\nif(typeof content === 'string') content = [[module.i, content, '']];\n// add the styles to the DOM\nvar update = __webpack_require__(6)(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/src/index.js??postcss!./tiramisu.css\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/src/index.js??postcss!./tiramisu.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n/***/ }),\n/* 62 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(46);\nif(typeof content === 'string') content = [[module.i, content, '']];\n// add the styles to the DOM\nvar update = __webpack_require__(6)(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/src/index.js??postcss!./tiramisu.css\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/src/index.js??postcss!./tiramisu.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n/***/ }),\n/* 63 */\n/***/ (function(module, exports) {\n\nvar g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n/***/ }),\n/* 64 */\n/***/ (function(module, exports) {\n\n/* brought from https://github.com/KyleAMathews/deepmerge and unwrapped from UMD */\nfunction deepmerge(target, src) {\n    var array = Array.isArray(src);\n    var dst = array && [] || {};\n\n    if (array) {\n        target = target || [];\n        dst = dst.concat(target);\n        src.forEach(function(e, i) {\n            if (typeof dst[i] === 'undefined') {\n                dst[i] = e;\n            } else if (typeof e === 'object') {\n                dst[i] = deepmerge(target[i], e);\n            } else {\n                if (target.indexOf(e) === -1) {\n                    dst.push(e);\n                }\n            }\n        });\n    } else {\n        if (target && typeof target === 'object') {\n            Object.keys(target).forEach(function (key) {\n                dst[key] = target[key];\n            });\n        }\n        Object.keys(src).forEach(function (key) {\n            if (typeof src[key] !== 'object' || !src[key]) {\n                dst[key] = src[key];\n            }\n            else {\n                if (!target[key]) {\n                    dst[key] = src[key];\n                } else {\n                    dst[key] = deepmerge(target[key], src[key]);\n                }\n            }\n        });\n    }\n\n    return dst;\n}\n\nmodule.exports = deepmerge;\n\n\n/***/ }),\n/* 65 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Vec3f = __webpack_require__(24);\r\n\r\n/**\r\n * Construct a new Rotation object.<br><br>\r\n * \r\n * #### new Rotation(x, y, z, angle)\r\n * #### new Rotation([x, y, z, angle])\r\n * \r\n * where \r\n * - _x_, _y_, and _z_ are the axis of the rotation; \r\n * - _angle_ is the angle of the rotation (in radians).<br><br>\r\n * \r\n * #### new Rotation(<{@link Vec3f}> axis, angle)\r\n * \r\n * where \r\n * - _axis_ is the axis of rotation;\r\n * - _angle_ is the angle of the rotation (in radians).<br><br>\r\n * \r\n * #### new Rotation(<{@link Vec3f}> fromVector, <{@link Vec3f}> toVector)\r\n * \r\n * where\r\n * - _fromVector_ and _toVector_ are normalized and the rotation value that would rotate from the _fromVector_ to the _toVector_ is stored in the object.\r\n * \r\n * @class The Rotation object corresponds to a VRML SFRotation field. It has four numeric properties: x, y, z (the axis of rotation) and angle.\r\n */\r\nfunction Rotation( /*oVec3f, angle | oVec3f, oVec3f | x, y, z, angle*/ ) {\r\n    if (arguments.length == 4) {\r\n        /**\r\n         * First value of the axis vector.\r\n         * @type number\r\n         * @default 0\r\n         */\r\n        this.x = arguments[0];\r\n        /**\r\n         * Second value of the axis vector.\r\n         * @type number\r\n         * @default 1\r\n         */\r\n        this.y = arguments[1];\r\n        /**\r\n         * Third value of the axis vector.\r\n         * @type number\r\n         * @default 0\r\n         */\r\n        this.z = arguments[2];\r\n        /**\r\n         * The angle of the rotation (in radians).\r\n         * @type number\r\n         * @default 0\r\n         */\r\n        this.angle = arguments[3];\r\n    } else if (arguments.length == 2) {\r\n        if (typeof (arguments[1]) == 'number') {\r\n            this.setAxis(arguments[0]);\r\n            this.angle = arguments[1];\r\n        } else {\r\n            var FLT_EPSILON = 1.192092896e-07;\r\n            var v = arguments[0].normalize();\r\n            var v1 = arguments[1].normalize();\r\n            var axis = v.cross(v1);\r\n            var len = axis.length();\r\n            if (len <= FLT_EPSILON) {\r\n                if (v.dot(v1) < 0.0) {\r\n                    axis = v.cross(new Vec3f(1, 0, 0));\r\n                    this.angle = Math.PI;\r\n                    len = axis.length();\r\n                    if (len <= FLT_EPSILON)\r\n                        axis = v.cross(new Vec3f(0, 1, 0));\r\n                    axis = axis.normalize();\r\n\r\n                } else {\r\n                    axis = new Vec3f(0, 1, 0);\r\n                    this.angle = 0.0;\r\n                }\r\n            } else {\r\n                this.angle = Math.atan2(len, v.dot(v1));\r\n                axis = axis.normalize();\r\n            }\r\n            this.setAxis(axis);\r\n        }\r\n    } else if (arguments.length == 1 && typeof arguments[0] == \"object\" && arguments[0] !== null && arguments[0].length === 4) {\r\n        this.x = arguments[0][0];\r\n        this.y = arguments[0][1];\r\n        this.z = arguments[0][2];\r\n        this.angle = arguments[0][3];\r\n    } else {\r\n        this.x = 0;\r\n        this.y = 1;\r\n        this.z = 0;\r\n        this.angle = 0;\r\n    }\r\n}\r\n\r\n/**\r\n * Returns array represents rotations fields [x, y, z, angle].\r\n * @returns {number[]} Array of four floats.\r\n */\r\nRotation.prototype.toArray =\r\n    function () {\r\n        return [this.x, this.y, this.z, this.angle];\r\n    };\r\n\r\n/**\r\n * Returns the value of oVec3f multiplied by the matrix corresponding to this object's rotation.\r\n * @param {Vec3f} oVec3f The Vec3f object.\r\n * @returns {Vec3f}\r\n */\r\nRotation.prototype.multVec =\r\n    function (oVec3f) {\r\n        var e = -this.angle;\r\n        var s = Math.sin(e);\r\n        var c = Math.cos(e);\r\n\r\n        var f = this.x;\r\n        var g = this.y;\r\n        var h = this.z;\r\n\r\n        var x = oVec3f.x;\r\n        var y = oVec3f.y;\r\n        var z = oVec3f.z;\r\n\r\n        var p = (f * x + g * y + h * z) * (1 - c);\r\n\r\n        var px = f * p + c * x + s * (h * y - g * z);\r\n        var py = g * p + c * y + s * (f * z - h * x);\r\n        var pz = h * p + c * z + s * (g * x - f * y);\r\n        return new Vec3f(px, py, pz);\r\n    };\r\n\r\n/**\r\n * Returns the inverse of this object's rotation.\r\n * @returns {Rotation}\r\n */\r\nRotation.prototype.inverse =\r\n    function () {\r\n        return new Rotation(this.x, this.y, this.z, -this.angle);\r\n    };\r\n\r\n/**\r\n * Returns the object multiplied by the passed value.\r\n * @param {Rotation} oRotation The Rotation object.\r\n * @returns {Rotation}\r\n */\r\nRotation.prototype.multiply =\r\n    function (oRotation) {\r\n        var angle = oRotation.angle;\r\n        var Sa = Math.sin(angle / 2);\r\n        var Ca = Math.cos(angle / 2);\r\n        var As = oRotation.getAxis().multiply(Sa);\r\n\r\n        var Sb = Math.sin(this.angle / 2);\r\n        var Cb = Math.cos(this.angle / 2);\r\n        var Bs = this.getAxis().multiply(Sb);\r\n\r\n        var Cab = Ca * Cb - As.dot(Bs);\r\n\r\n        var ABs = As.multiply(Cb).add(Bs.multiply(Ca)).add(Bs.cross(As));\r\n\r\n        var msq = ABs.x * ABs.x + ABs.y * ABs.y + ABs.z * ABs.z;\r\n\r\n        var result = new Rotation(0, 0, 1, 0);\r\n        if (msq !== 0) {\r\n            var Sab = Math.sqrt(msq);\r\n            result.setAxis(ABs.divide(Sab));\r\n            result.angle = 2 * Math.atan2(Sab, Cab);\r\n        }\r\n        return result;\r\n    };\r\n\r\n/**\r\n * Sets the axis of rotation to the value passed in oVec3f.\r\n * @param {Vec3f} oVec3f The Vec3f object.\r\n */\r\nRotation.prototype.setAxis =\r\n    function (oVec3f) {\r\n        this.x = oVec3f.x;\r\n        this.y = oVec3f.y;\r\n        this.z = oVec3f.z;\r\n    };\r\n\r\n/**\r\n * Returns the axis of rotation.\r\n * @returns {Vec3f}\r\n */\r\nRotation.prototype.getAxis =\r\n    function () {\r\n        return new Vec3f(this.x, this.y, this.z);\r\n    };\r\n\r\n/**\r\n * Returns a string containing the value of x, y, z, and angle separated by spaces.\r\n * @returns {string}\r\n */\r\nRotation.prototype.toString =\r\n    function () {\r\n        return this.toArray().join(' ');\r\n    };\r\n\r\nmodule.exports = Rotation;\n\n/***/ }),\n/* 66 */\n/***/ (function(module, exports) {\n\n/**\n * XMLNodeData class\n *\n * @author timduck@cortona3d.com\n */\n\n/**\n * Creates a new data element for the XML element.\n * \n * @class\n * @classdesc A helper class for representing XML data, for example:\n * ```xml\n * <node att1=\"value1\" att2=\"value2\">\n *      <foo>Foo</foo>\n *      <bar>\n *          <![CDATA[Bar]]>\n *      </bar>\n *      <items>\n *          <item>i1</item>\n *          <item>i2</item>\n *          <item>i3</item>\n *          <item>i4</item>\n *      </items>\n * </node>\n * ```\n * ```\n * {\n *  node: {\n *      \"@name\": \"node\",\n *      \"@attributes\": {\n *          att1: \"value1\",\n *          att2: \"value2\"\n *      },\n *      \"@children\": [\n *          { \"@name\": \"foo\", \"#text\": \"Foo\" },\n *          { \"@name\": \"bar\", \"#text\": \"Bar\" },\n *          { \"@name\": \"items\", ... }\n *      ],\n *      foo: { \"@name\": \"foo\", \"#text\": \"Foo\" },\n *      bar: { \"@name\": \"bar\", \"#text\": \"Bar\" },\n *      items: {\n *          \"@name\": \"items\",\n *          \"@children\": [ ... ],\n *          item: [\n *              { \"@name\": \"item\", \"#text\": \"i1\" },\n *              { \"@name\": \"item\", \"#text\": \"i2\" },\n *              { \"@name\": \"item\", \"#text\": \"i3\" },\n *              { \"@name\": \"item\", \"#text\": \"i4\" }\n *          ]\n *      }\n *  }\n * }\n * ```\n * @prop {string} #text The text content of a node.\n * @prop {KeyValuePairs} @attributes Node attributes.\n * @prop {XMLNodeData|string[]} @children Node children, including not empty strings.\n */\nfunction XMLNodeData() {}\n\n/**\n * Returns the array of {@link XMLNodeData} objects depending on the argument:\n * \n * - If type of the argument is the {@link XMLNodeData} object, the method returns an array of one element to the object;\n * - If type of the argument is _array_, the method returns the array itself;\n * - If type of the argument is _string_, the argument value is interpreted as simple XPath expresion to select XML elements, If the elements are not found, an empty array is returned;\n * - If argument is omitted, the method returns the array element containing the object itself.\n * \n * Examples of supported XPath expressions: \n * - \"root/some/path/child\" - exact name;\n * - \"root//child\" - recursive descent; searches for the specified element at any depth;\n * - \"root/some/path/*\" - wildcard; selects all elements regardless of the element name.\n * \n * @param {XMLNodeData|string} [obj]\n * @returns {XMLNodeData[]} The array of the {@link XMLNodeData} objects\n */\nXMLNodeData.prototype.$ = function (obj, recurse) {\n    var current = obj || this;\n    if (typeof obj === 'string' && obj) {\n        if (obj === '*') {\n            current = (this['@children'] || []).filter(function (node) {\n                return typeof node !== 'string';\n            });\n            if (recurse) {\n                current = current.reduce(function (a, node) {\n                    return a.concat(node, node.$(obj, recurse));\n                }, []);\n            }\n        } else {\n            // nodes path: \"root/children/child\" --> child = [...]\n            // \"root//child\"\n            // \"root/*/child\" \n\n            var index = obj.indexOf('/'),\n                head = obj.substring(0, index),\n                tail = obj.substring(index + 1),\n                next = tail.indexOf('/');\n\n            // 'head//some/path'\n            if (index >= 0 && next === 0) {\n                tail = tail.substring(1);\n                current = this.$(head, recurse).reduce(function (a, node) {\n                    return a.concat(node.$(tail, true));\n                }, []);\n            } else {\n                if (recurse) {\n                    current = this.$('*').reduce(function (a, node) {\n                        return a.concat(node.$(obj, true));\n                    }, this.$(obj));\n                } else {\n                    current = (index < 0) ? this[obj] : this.$(head).reduce(function (a, node) {\n                        return a.concat(node.$(tail));\n                    }, []);\n                }\n            }\n        }\n    }\n    return !current ? [] : !current.map ? [current] : current;\n};\n\n/**\n * Returns the text content of the element itself or defined by an XPath expression.\n * \n * @param {string} [path] Simple XPath expresion, i.e. \"SimulationInteractivity/SimulationInformation/ExporterVersionNumber\"\n * @returns {string}\n */\nXMLNodeData.prototype.$text = function (path) {\n    if (!path) {\n        return this['#text'] || (this['@children'] || []).reduce(function (s, child) {\n            if (typeof child === 'string') return s + child;\n            return s + child.$text();\n        }, '');\n    }\n    return this.$(path).reduce(function (s, node) {\n        return s + node.$text();\n    }, '');\n};\n\n/**\n * Returns the value of a specified attribute on the element.\n * \n * @param {string} name The name of an attribute\n * @returns {string} Tha value of an attribute\n */\nXMLNodeData.prototype.$attr = function (name) {\n    if (!this['@attributes']) return null;\n    return this['@attributes'][name];\n};\n\nmodule.exports = XMLNodeData;\n\n/***/ }),\n/* 67 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Cortona3DSolo = __webpack_require__(2);\r\nvar app = __webpack_require__(1).app;\r\nvar util = __webpack_require__(0);\r\n\r\nvar m_hoverRow = -1;\r\n\r\nvar DOUBLE_TAP_TIME = 250;\r\n\r\nvar ipcExports = {\r\n    /**\r\n     * The namespace represents an application interface to manage DPL table in the interactive parts catalog.\r\n     * \r\n     * @namespace\r\n     * @memberof module:solo.app.ipc\r\n     */\r\n    dpl: {\r\n\r\n        /**\r\n         * Setup the DPL table for the current IPC sheet.\r\n         * \r\n         * @param {HTMLTableElement} dplTableElement An HTML table representing the current IPC sheet\r\n         * @see external:HTMLTableElement\r\n         * @fires \"app.ipc.dpl.didSetupRow\"\r\n         * @fires \"app.ipc.dpl.willSetupTable\"\r\n         * @fires \"app.ipc.dpl.didSetupTable\"\r\n         */\r\n        setupTable: function (dplTableElement) {\r\n            Cortona3DSolo.dispatch('app.ipc.dpl.willSetupTable', dplTableElement);\r\n            if (dplTableElement) {\r\n                m_hoverRow = -1;\r\n\r\n                // TO-DO: touch devices\r\n                // TO-DO: keyboard accelerators\r\n\r\n                var timeoutOut,\r\n                    indexOut;\r\n\r\n                Array.prototype.slice.call(dplTableElement.rows).forEach(function (row) {\r\n                    if (row.id) {\r\n                        var index = +row.id.substring(3);\r\n                        row.setAttribute('data-index', index);\r\n                        row.onmouseover = function (e) {\r\n                            clearTimeout(timeoutOut);\r\n                            var index = +this.getAttribute('data-index');\r\n                            if (indexOut !== index) {\r\n                                indexOut = null;\r\n                                Cortona3DSolo.dispatch(\"app.ipc.dpl.didHoverRow\", index);\r\n                            }\r\n                        };\r\n                        row.onmouseout = function (e) {\r\n                            indexOut = +this.getAttribute('data-index');\r\n                            clearTimeout(timeoutOut);\r\n                            timeoutOut = setTimeout(function () {\r\n                                Cortona3DSolo.dispatch(\"app.ipc.dpl.didHoverRow\", -1);\r\n                                indexOut = null;\r\n                            }, 10);\r\n                        };\r\n                        row.onclick = function (e) {\r\n                            var index = +this.getAttribute('data-index');\r\n                            var keys = +(e.shiftKey && 1) | +(e.ctrlKey && 2) | +(e.altKey && 4);\r\n                            var self = this;\r\n                            if (!this.__debounceTimeout) {\r\n                                this.__debounceTimeout = setTimeout(function () {\r\n                                        delete self.__debounceTimeout;\r\n                                        Cortona3DSolo.dispatch(\"app.ipc.dpl.didSelectRow\", index, keys);\r\n                                    },\r\n                                    DOUBLE_TAP_TIME);\r\n                            } else {\r\n                                clearTimeout(this.__debounceTimeout);\r\n                                delete this.__debounceTimeout;\r\n                            }\r\n                        };\r\n                        row.oncontextmenu = function (e) {\r\n                            var index = +this.getAttribute('data-index');\r\n                            var target = dplTableElement,\r\n                                rect = target.getBoundingClientRect(),\r\n                                offsetX = e.clientX - rect.left,\r\n                                offsetY = e.clientY - rect.top;\r\n                            Cortona3DSolo.dispatch(\"app.ipc.dpl.didCallContextMenu\", index, offsetX, offsetY, target);\r\n                            if (e.preventDefault) e.preventDefault();\r\n                            if (e.stopPropagation) e.stopPropagation();\r\n                        };\r\n                        Cortona3DSolo.dispatch(\"app.ipc.dpl.didSetupRow\", row, index);\r\n                    }\r\n                });\r\n            }\r\n            Cortona3DSolo.dispatch('app.ipc.dpl.didSetupTable', dplTableElement);\r\n        },\r\n        /**\r\n         * Highlight the line in the DPL table.\r\n         * \r\n         * @param {number} index The row number on the current IPC sheet\r\n         */\r\n        hoverRow: function (index) {\r\n            var el;\r\n            if (m_hoverRow >= 0) {\r\n                el = document.getElementById('row' + m_hoverRow);\r\n                if (el) el.classList.remove('hover');\r\n            }\r\n            if (index >= 0) {\r\n                el = document.getElementById('row' + index);\r\n                if (el) el.classList.add('hover');\r\n            }\r\n            m_hoverRow = index;\r\n        },\r\n        /**\r\n         * Highlight the line in the DPL table.\r\n         * \r\n         * @param {number} index The row number on the current IPC sheet\r\n         * @param {boolean} [flag=true] -\r\n         * - true - highlight the DPL table row\r\n         * - false - clear selection\r\n         */\r\n        highlightRow: function (index, flag) {\r\n            flag = (typeof flag == 'undefined') ? true : flag;\r\n            util.toggleClass(document.getElementById('row' + index), 'hover', flag);\r\n        },\r\n        /**\r\n         * Select the line in the DPL table.\r\n         * \r\n         * @param {number} index The row number on the current IPC sheet\r\n         * @param {boolean} [flag=true] -\r\n         * - true - select the DPL table row\r\n         * - false - clear selection\r\n         */\r\n        selectRow: function (index, flag) {\r\n            flag = (typeof flag == 'undefined') ? true : flag;\r\n            util.toggleClass(document.getElementById('row' + index), 'selected', flag);\r\n        },\r\n        /**\r\n         * Toggles the line in the DPL table.\r\n         * \r\n         * @param {number} index The row number on the current IPC sheet\r\n         * @param {boolean} [flag] -\r\n         * - true - make the DPL table row visible\r\n         * - false - make the DPL table row hidden\r\n         * @since 1.4.3\r\n         */\r\n        toggleRow: function (index, flag) {\r\n            var el = document.getElementById('row' + index);\r\n            if (el) {\r\n                flag = (typeof flag == 'undefined') ? el.classList.contains('hidden') : flag;\r\n                util.toggleClass(el, 'hidden', !flag);\r\n            }\r\n        },\r\n    }\r\n};\r\n\r\nmodule.exports = ipcExports.dpl;\r\n\r\n/**\r\n * The hook method is invoked before the DPL table is initialized.\r\n * \r\n * @memberof module:solo.app.ipc.dpl\r\n * @abstract \r\n * @function willSetupTable\r\n * @param {HTMLTableElement} tableElement The table element\r\n * @see external:HTMLTableElement\r\n * @see The corresponding event {@link event:\"app.ipc.dpl.willSetupTable\" \"app.ipc.dpl.willSetupTable\"}\r\n * @since 1.5.0\r\n */\r\n/**\r\n * @event \"app.ipc.dpl.willSetupTable\"\r\n * @see The corresponding hook method {@link module:solo.app.ipc.dpl.willSetupTable app.ipc.dpl.willSetupTable()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked after the DPL table is initialized.\r\n * \r\n * @memberof module:solo.app.ipc.dpl\r\n * @abstract \r\n * @function didSetupTable\r\n * @param {HTMLTableElement} tableElement The table element\r\n * @see external:HTMLTableElement\r\n * @see The corresponding event {@link event:\"app.ipc.dpl.didSetupTable\" \"app.ipc.dpl.didSetupTable\"}\r\n * @since 1.5.0\r\n */\r\n/**\r\n * @event \"app.ipc.dpl.didSetupTable\"\r\n * @see The corresponding hook method {@link module:solo.app.ipc.dpl.didSetupTable app.ipc.dpl.didSetupTable()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked when the line of the DPL table is initialized.\r\n * \r\n * @memberof module:solo.app.ipc.dpl\r\n * @abstract \r\n * @function didSetupRow\r\n * @param {HTMLTableRowElement} rowElement The row element\r\n * @param {number} index The row number in the DPL table\r\n * @see external:HTMLTableRowElement\r\n * @see The corresponding event {@link event:\"app.ipc.dpl.didSetupRow\" \"app.ipc.dpl.didSetupRow\"}\r\n */\r\n/**\r\n * @event \"app.ipc.dpl.didSetupRow\"\r\n * @see The corresponding hook method {@link module:solo.app.ipc.dpl.didSetupRow app.ipc.dpl.didSetupRow()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked when the line of the DPL table is selected.\r\n * \r\n * @memberof module:solo.app.ipc.dpl\r\n * @abstract \r\n * @function didSelectRow\r\n * @param {number} index The row number on the current IPC sheet\r\n * @param {number} keys Flags bitmask that corresponds to the state of the SHIFT, CTRL, and ALT keys:\r\n * - 0x01 - SHIFT key\r\n * - 0x02 - CTRL key\r\n * - 0x04 - ALT key\r\n * @see The corresponding event {@link event:\"app.ipc.dpl.didSelectRow\" \"app.ipc.dpl.didSelectRow\"}\r\n */\r\n/**\r\n * @event \"app.ipc.dpl.didSelectRow\"\r\n * @see The corresponding hook method {@link module:solo.app.ipc.dpl.didSelectRow app.ipc.dpl.didSelectRow()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked when the line of the DPL table is hovered.\r\n * \r\n * @memberof module:solo.app.ipc.dpl\r\n * @abstract \r\n * @function didHoverRow\r\n * @param {number} index The row number on the current IPC sheet\r\n * @see The corresponding event {@link event:\"app.ipc.dpl.didHoverRow\" \"app.ipc.dpl.didHoverRow\"}\r\n */\r\n/**\r\n * @event \"app.ipc.dpl.didHoverRow\"\r\n * @see The corresponding hook method {@link module:solo.app.ipc.dpl.didHoverRow app.ipc.dpl.didHoverRow()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked when the context menu is called in the DPL table. \r\n * The mouse uses secondary button click. The touch device uses long tap.\r\n * \r\n * @memberof module:solo.app.ipc.dpl\r\n * @abstract \r\n * @function didCallContextMenu\r\n * @param {number} index The row number on the current IPC sheet\r\n * @param {number} offsetX The X coordinate relative to the target element\r\n * @param {number} offsetY The Y coordinate relative to the target element \r\n * @param {HTMLElement} target Target element (`<table>`)\r\n * @see The corresponding event {@link event:\"app.ipc.dpl.didCallContextMenu\" \"app.ipc.dpl.didCallContextMenu\"}\r\n */\r\n/**\r\n * @event \"app.ipc.dpl.didCallContextMenu\"\r\n * @see The corresponding hook method {@link module:solo.app.ipc.dpl.didCallContextMenu app.ipc.dpl.didCallContextMenu()}\r\n */\n\n/***/ }),\n/* 68 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar app = __webpack_require__(1).app;\nvar expand = __webpack_require__(0).expand;\n\nmodule.exports = function (interactivity, baseURL) {\n    var json = interactivity.json;\n\n    var getMetadata = __webpack_require__(8);\n\n    var m_ipcInteractivityMap = {\n        dpl: [],\n        def: [],\n        prefferedViews: [],\n        sheets: {},\n        options: {},\n        metadata: {},\n        info: []\n    };\n\n    /*\n        dplid: ['itemid', ...],\n\n        catalog: {\n            options: {\n                'name': 'value',\n                ...\n            },\n            metadata: {\n                'decl-id': 'value',\n                ...\n            },\n            dpl: ['csn', ...],\n            def: [['DEF_name', ...], ...],\n            prefferedViews: ['viewId', ...],\n            children: [[row, ....], ...] // children for row\n            parent: [row, ...] // parent for row\n            \n            sheets: { \n                'viewId': { // sheet/view\n                    id: 'viewId',\n                    description: '',\n                    drawing: 'url',\n                    items: [row, ...]\n                }, \n                ...\n            }\n        },\n    */\n\n    var dplid = json.$('ipc/figure/dplist/item').map(function (item) {\n        return item.$attr('id');\n    });\n\n    var sheetsMap = {};\n    var doc = app.modelInfo || {\n        sheets: json.$('ipc/figure/views/view')\n            .filter(function (view) {\n                return +view.$attr('hidden') === 0;\n            })\n            .map(function (view) {\n                return {\n                    id: view.$attr('id')\n                };\n            })\n    };\n\n    doc.sheets.forEach(function (sheet) {\n        var view = json.$('ipc/figure/views/view').filter(function (view) {\n            return view.$attr('id') === sheet.id;\n        })[0];\n\n        var sh = expand(sheet, {\n            changed: !!+view.$attr('changed'),\n            items: view.$('refItem').map(function (refItem) {\n                return dplid.indexOf(refItem.$attr('ref'));\n            }).sort(function (a, b) {\n                return a - b;\n            })\n        });\n\n        var refmedias = view.$('refmedia').filter(function (refmedia) {\n            return refmedia.$attr('ref') != 1;\n        });\n\n        if (refmedias.length > 0) {\n            var mediaId = refmedias[0].$attr('ref');\n            var src = json.$('ipc/figure/media').filter(function (media) {\n                return media.$attr('id') == mediaId;\n            })[0].$attr('src');\n            sh.drawing = baseURL + src;\n        }\n\n        sheetsMap[sheet.id] = sh;\n    });\n\n    var options = __webpack_require__(12)(json);\n    var metadata = getMetadata(json.$('ipc/figure/metadata/value'));\n\n    var parent = json.$('ipc/figure/dplist/item').map(function (item, row, items) {\n        var indent = getIndent(item) - 1;\n        var parent = -1;\n        for (var i = row - 1; i >= 0; i--) {\n            var asp = +getMeta(items[i], 'ASP') || 0;\n            var attach = +getMeta(items[i], '_301F121F8EF84EC0B9979C8D10D19A79') || 0;\n            if (asp !== 1 && attach === 0) { // not attaching part\n                if (getIndent(items[i]) === indent) break;\n            }\n        }\n        for (; i >= 0; i--) {\n            if (getIndent(items[i]) === indent) {\n                if (!+getMeta(items[i], 'NIL')) {\n                    parent = i;\n                    break;\n                }\n            }\n        }\n        return parent;\n    });\n\n    var itemInfo = json.$('ipc/figure/dplist/item').map(function (item, row) {\n        var info = {\n            row: row\n        };\n        var itemMetaValues = item.$('metadata/value');\n        info.id = item.$attr('id');\n        info.metadata = getMetadata(itemMetaValues);\n        info.part = {};\n        info.part.id = item.$attr('refPart');\n        var part = json.$('ipc/parts/part').reduce(function (acc, part) {\n            return part.$attr('id') == info.part.id ? part : acc;\n        });\n        var partMetaValues = part.$('metadata/value');\n        info.part.metadata = getMetadata(partMetaValues);\n\n        info.roles = new Array(8);\n\n        itemMetaValues.concat(partMetaValues).forEach(function (value) {\n            var role = +value.$attr('role');\n            if (role) {\n                info.roles[role] = value.$text();\n            }\n        });\n\n        info.sheetId = item.refview ? item.refview.$attr('ref') : '';\n        info.screentip = item.tooltip ? item.$text('tooltip') : '';\n        info.callout = item.callout ? item.$text('callout') : '';\n\n        info.objectNames = item.$('refmedia').filter(function (refmedia) {\n            return refmedia.$attr('ref') == 1;\n        }).map(function (refmedia) {\n            return refmedia.$text();\n        });\n\n        info.commands = item.$('commands/command').map(function (command) {\n            var values = {};\n            command.$('value').forEach(function (value) {\n                values[value.$attr('name')] = value.$text();\n            });\n            return {\n                id: command.$attr('id'),\n                type: command.$attr('type'),\n                args: command.$('value').map(function (value) {\n                    return value.$text();\n                }),\n                values: values\n            };\n        });\n\n        return info;\n    });\n\n    function normalizeCSN(s) {\n        return String(s).replace(/(^\\s+|\\s+$)/g, '').replace(/^0+(\\d)/, '$1');\n    }\n\n    function initializeDPLItemMap(interactivity) {\n        if (!m_ipcInteractivityMap.dpl) {\n            m_ipcInteractivityMap.dpl = json.$('ipc/figure/dplist/item').map(function (item, row) {\n                var csn;\n                if (typeof interactivity.willGetCSNString == 'function') {\n                    csn = interactivity.willGetCSNString(itemInfo[row], row);\n                } else if (itemInfo[row].callout) {\n                    csn = itemInfo[row].callout;\n                } else {\n                    csn = itemInfo[row].roles[3] || ''; // Item number\n                    csn += itemInfo[row].roles[4] || ''; // Item number variant\n                }\n                return csn;\n            });\n        }\n    }\n\n    m_ipcInteractivityMap = {\n        info: itemInfo,\n        def: json.$('ipc/figure/dplist/item').map(function (item, row) {\n            return itemInfo[row].objectNames;\n        }),\n        prefferedViews: json.$('ipc/figure/dplist/item').map(function (item, row) {\n            return itemInfo[row].sheetId;\n        }),\n        sheets: sheetsMap,\n        options: options,\n        metadata: metadata,\n        parent: parent,\n        children: parent.map(function (row, index, array) {\n            return array.reduce(function (acc, value, i, array) {\n                return (value === index) ? acc.concat(i) : acc;\n            }, []);\n        })\n    };\n\n    // getMeta\n    function getMeta(item, declId) {\n        var metadataValues = item.$('metadata/value');\n        return metadataValues.filter(function (value) {\n            return value.$attr('decl-id') == declId;\n        }).reduce(function (acc, value) {\n            return acc + value.$text();\n        }, '');\n    }\n\n    // getIndent\n    function getIndent(item) {\n        var indent = item.$('metadata/value').filter(function (value) {\n            return value.$attr('role') == 5; // Indent\n        });\n        if (indent.length > 0) {\n            indent = +indent[0].$text() || 0;\n        }\n        return indent;\n    }\n\n    var appExports = {\n        ipc: {\n            /**\n             * The namespace represents an interface to access the information from the companion file for interactive parts catalog (IPC).\n             * \n             * @namespace\n             * @memberof module:solo.app.ipc\n             */\n            interactivity: {\n                /**\n                 * JavaScript representation of the companion file *.interactivity.xml*\n                 * \n                 * @name json\n                 * @memberof module:solo.app.ipc.interactivity\n                 * @property {XMLNodeData} json JavaScript representation of the XML file\n                 * *XML:*\n                 * ```\n                 * <node att1=\"att1-value\" att2=\"att2-value\">\n                 *      <foo>Foo</foo>\n                 *      <bar>\n                 *          <![CDATA[  Bar]]>\n                 *      </bar>\n                 *      <items>\n                 *          <item>i1</item>\n                 *          <item>i2</item>\n                 *          <item>i3</item>\n                 *          <item>i4</item>\n                 *      </items>\n                 * </node>\n                 * ```\n                 * *JSON:*\n                 * ```\n                 * {\n                 *  \"node\": {\n                 *      \"@attributes\": {\n                 *          \"att1\": \"att1-value\",\n                 *          \"att2\": \"att2-value\"\n                 *      },\n                 *      \"foo\": { \"#text\": \"Foo\" },\n                 *      \"bar\": { \"#text\": \"  Bar\" },\n                 *      \"items\": {\n                 *          \"item\": [\n                 *              { \"#text\": \"i1\" },\n                 *              { \"#text\": \"i2\" },\n                 *              { \"#text\": \"i3\" },\n                 *              { \"#text\": \"i4\" }\n                 *          ]\n                 *      }\n                 *  }\n                 * }\n                 * ```\n                 */\n                //json: json,\n\n                /**\n                 * Gets the DPL line number by the row number on the current IPC sheet.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {number} index The row number on the current IPC sheet\n                 * @returns {number} DPL line number\n                 */\n                getRowByIndex: function (index) {\n                    var currentSheetId = app.ipc.getCurrentSheet().id;\n                    return m_ipcInteractivityMap.sheets[currentSheetId].items[index]; //-> number\n                },\n\n                /**\n                 * Gets the row number on the current IPC sheet by the DPL line number.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {number} row DPL line number\n                 * @returns {number} The row number on the current IPC sheet\n                 */\n                getIndexByRow: function (row) {\n                    var currentSheetId = app.ipc.getCurrentSheet().id;\n                    return m_ipcInteractivityMap.sheets[currentSheetId].items.indexOf(row); //-> number\n                },\n\n                /**\n                 * Gets the DPL line number by the catalog sequence item number (CSN).\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {string} item CSN\n                 * @returns {number} DPL line number\n                 */\n                getRowByItem: function (item) {\n                    initializeDPLItemMap(this);\n                    var csn = normalizeCSN(item),\n                        i;\n                    for (i = m_ipcInteractivityMap.dpl.length - 1; i >= 0; i--) {\n                        if (normalizeCSN(m_ipcInteractivityMap.dpl[i]) === csn) {\n                            break;\n                        }\n                    }\n                    return i; //-> number\n                },\n\n                /**\n                 * Gets CSN by the DPL line number.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {number} row DPL line number\n                 * @returns {string} CSN\n                 */\n                getItemByRow: function (row) {\n                    initializeDPLItemMap(this);\n                    return m_ipcInteractivityMap.dpl[row]; //-> string\n                },\n\n                /**\n                 *  Gets the row number on the current IPC sheet by CSN.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {string} item CSN\n                 * @returns {number} The row number on the current IPC sheet\n                 */\n                getIndexByItem: function (item) {\n                    return this.getIndexByRow(this.getRowByItem(item)); //-> number\n                },\n\n                /**\n                 * Gets CSN by the row number on the current IPC sheet\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {number} index The row number on the current IPC sheet\n                 * @returns {string} CSN\n                 */\n                getItemByIndex: function (index) {\n                    return this.getItemByRow(this.getRowByIndex(index)); //-> string\n                },\n\n                /**\n                 * Gets DPL line number for the 3D object name.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {any} name The name of 3D object\n                 * @returns {number} DPL line number\n                 */\n                getRowByObjectName: function (name) {\n                    var i,\n                        a = m_ipcInteractivityMap.def;\n                    for (i = a.length - 1; i >= 0 ; i--) {\n                        if (a[i].indexOf(name) >= 0) {\n                            break;\n                        }\n                    }\n                    return i; //-> number\n                },\n\n                /**\n                 * Gets the names of 3D objects for the DPL line number.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {any} row DPL line number\n                 * @returns {string[]} An array of 3D object names\n                 */\n                getObjectsNamesByRow: function (row) {\n                    return m_ipcInteractivityMap.def[row]; //-> [name, ...]\n                },\n\n                /**\n                 * Returns the URL to the 2D illustration of the IPC sheet.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {string} [id] IPC sheet identifier\n                 * @returns {string} URL to the 2D illustration\n                 */\n                getDrawingForIPCView: function (id) {\n                    id = id || app.ipc.currentSheetInfo.id;\n                    var sheetInfo = m_ipcInteractivityMap.sheets[id];\n                    return (sheetInfo && sheetInfo.drawing) || '';\n                },\n\n                /**\n                 * Returns the IPC sheet information.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {string} [id] IPC sheet identifier\n                 * @returns {CatalogSheetInfo} The object represents IPC sheet information.\n                 */\n                getSheetInfo: function (id) {\n                    id = id || app.ipc.currentSheetInfo.id;\n                    return m_ipcInteractivityMap.sheets[id];\n                },\n\n                /**\n                 * Returns publication options from the companion file in form of key-value array.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @returns {KeyValuePairs} \n                 */\n                getOptions: function () {\n                    return m_ipcInteractivityMap.options;\n                },\n\n                /**\n                 * Returns project metadata from the companion file in form of key-value array.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @returns {KeyValuePairs} \n                 */\n                getProjectMetadata: function () {\n                    return m_ipcInteractivityMap.metadata;\n                },\n\n                /**\n                 * Gets screen tip for the object by the row number on the current IPC sheet.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {number} index The row number on the current IPC sheet\n                 * @returns {string} Screen tip for the object\n                 */\n                getScreenTip: function (index) {\n                    var row = this.getRowByIndex(index);\n                    return this.getItemInfo(row).screentip;\n                },\n\n                /**\n                 * Gets preffered sheet for the object by the row number on the current IPC sheet.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {number} index The row number on the current IPC sheet\n                 * @returns {string} Preffered IPC sheet identifier\n                 */\n                getPrefferedSheetId: function (index) {\n                    var row = this.getRowByIndex(index);\n                    return this.getItemInfo(row).sheetId;\n                },\n\n                /**\n                 * Returns the IPC item information.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {number} row DPL line number\n                 * @returns {CatalogItemInfo} The object represents IPC item information\n                 * @since 1.4.0\n                 */\n                getItemInfo: function (row) {\n                    return m_ipcInteractivityMap.info[row];\n                },\n\n                /**\n                 * Gets the parent for the DPL line number.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {number} row DPL line number\n                 * @returns {number} DPL line number or -1\n                 * @since 1.4.0\n                 */\n                getParent: function (row) {\n                    return m_ipcInteractivityMap.parent[row];\n                },\n\n                /**\n                 * Gets children for the DPL line number.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {number} row DPL line number\n                 * @param {boolean} [deep] Recursive\n                 * @returns {number[]} Array of the DPL line number \n                 * @since 1.4.0\n                 */\n                getChildren: function (row, deep) {\n                    var res = [];\n                    var ch = m_ipcInteractivityMap.children[row];\n                    var self = this;\n                    if (deep) {\n                        ch.forEach(function (child) {\n                            res.push(child);\n                            res = res.concat(self.getChildren(child, deep));\n                        });\n                    } else {\n                        res = ch;\n                    }\n                    return res;\n                }\n            }\n        }\n    };\n\n    return appExports.ipc;\n};\n\n\n/**\n * The hook method is invoked to get the CSN string for DPL row presented by argument.\n * Must return the CSN string for DPL row.\n * Default returns the concatenation of metadata values \"Item number\" and \"Item number variant\".\n * \n * @memberof module:solo.app.ipc.interactivity\n * @abstract \n * @method willGetCSNString\n * @param {CatalogItemInfo} itemInfo The object represents IPC item information\n * @param {number} row DPL line number\n * @returns {string} Returns the CSN string\n */\n\n/**\n * The object represents the catalog item information, for example:\n * ```\n * {\n *      id: \"2dc27be52b0\",\n *      row: 1,\n *      metadata: {\n *          IND: \"2\",\n *          ITEM: \"10\",\n *          QNA: \"1\",\n *          _470D3AF1C4C540EA8EF895E86D7C147D: \"2\",\n *          _B479653540A9423B8170B31E38783811: \"\"\n *      },\n *      objectNames: [ \"PM005301_1\" ],\n *      part: { ... },\n *      roles: [ , \"PM005301\", \"Back Plate Assy\", \"10\", , \"2\", \"1\", ],\n *      screentip: \"Item:10\",\n *      callout: \"10\",\n *      sheetId: \"view_2\",\n *      commands: [ ... ]\n * }\n * ```\n * @prop {string} id The unique identifier of the object in the companion xml file.\n * @prop {number} row The number of DPL row.\n * @prop {KeyValuePairs} metadata Metadata of the catalog item.\n * @prop {string[]} objectNames An array of 3D object names associated with the catalog item.\n * @prop {CatalogPartInfo} part The object represents the part information.\n * @prop {string[]} roles The array of the metadata values by {@link MetadataRoleCode role number}:\n * - `0` - Undefined\n * - `1` - Part number\n * - `2` - Description for part\n * - `3` - Item number\n * - `4` - Item number variant\n * - `5` - Indent\n * - `6` - Item quantity per next higher assembly\n * - `7` - Item total quantity\n * @prop {string} screentip A string contains a brief note or label pertaining to the catalog item.\n * @prop {string} callout A string contains the CSN string for the catalog item. This is also the name of a 2D hotspot.\n * @prop {string} sheetId The identifier of the preferred catalog sheet for the catalog item.\n * @prop {DPLCommandInfo[]} commands\n * @typedef {object} CatalogItemInfo\n * @see {@link module:solo.app.ipc.interactivity.getItemInfo app.ipc.interactivity.getItemInfo()}\n */\n\n/**\n * The object represents the command information, for example:\n * ```\n * {\n *      id: \"233f0c80570\",\n *      type: \"MODAPPLY\",\n *      args: [ \"A B\" ],\n *      values: { \n *          \"MODEL APPLY CODES\": \"A B\"\n *      }\n * }\n * ```\n * @prop {string} id The unique identifier of the object in the companion xml file.\n * @prop {string} type The name of the command.\n * @prop {string[]} args Array of arguments of the command.\n * @prop {KeyValuePairs} Arguments of the command by name.\n * @typedef {object} DPLCommandInfo\n * @see CatalogItemInfo\n */\n\n\n/**\n * The object represents the part information, for example:\n * ```\n * {\n *      id: \"2dc27a27920\",\n *      metadata: {\n *          DFP: \"Back Plate Assy\",\n *          PNR, \"PM005301\"\n *      }\n * }\n * ```\n * @prop {string} id The unique identifier of the object in the companion xml file.\n * @prop {KeyValuePairs} metadata Metadata of the catalog part.\n * @typedef {object} CatalogPartInfo\n * @see CatalogItemInfo\n */\n\n/**\n * The object represents the IPC sheet information, for example:\n * ```\n * {\n *      id: \"view_0\",\n *      description: \"Assembled View\",\n *      drawing: \"http://.../pump-catalog-1.svg\",\n *      indentationLevel: 0,\n *      items: [0,1,13,28]\n * }\n * ```\n * @prop {string} id - IPC sheet ID. \n * @prop {string} description - IPC sheet description.\n * @prop {string} drawing - The name of the file for 2D illustration.\n * @prop {number} indentationLevel - The indentation level that indicates IPC sheets relationships.\n * @prop {number[]} items - An array of row numbers of the DPL table active on this sheet.\n * @prop {boolean} changed\n * @typedef {object} CatalogSheetInfo\n * @see DocumentCatalogInfo\n * @see {@link module:solo.app.ipc.interactivity.getSheetInfo app.ipc.interactivity.getSheetInfo()}\n */\n\n/***/ }),\n/* 69 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar app = __webpack_require__(1).app;\n\nmodule.exports = function (interactivity, baseURL) {\n    var json = interactivity.json;\n    var getMetadata = __webpack_require__(8);\n\n    var m_prcInteractivityMap = {\n        defs: {},\n        docitems: {},\n        procedureItems: {},\n        options: {},\n        metadata: {}\n    };\n\n    /*\n        procedure: {\n            options: {\n                'name': 'value',\n                ...\n            },\n            metadata: {\n                'decl-id': 'value',\n                ...\n            },\n            defs: {\n                'def': {\n                    'DocID': '',\n                    'name': 'value',\n                    '{decl-id}': 'value',\n                },\n                ...\n            },\n            docitems: {\n                'DocID': {\n                    id: DocID,\n                    metadata: {\n                        'decl-id': 'value',\n                        ...\n                    },\n                    objectNames: ['def', ...],\n                    screentip: ''\n                }\n                ...\n            }\n            pictures: [\n                {\n                    drawing: '',\n                    description: '',\n                    flags: 0\n                }\n            ],\n            procedureItems: {\n                'id': {\n                    type: 'procedure|step|action|event'\n                    comment: '',\n                    description: '',\n                    parent: 'id',\n                    parentStep: 'id',\n                    eventType: '',\n                    children: ['id', ...],\n                    actions: ['id', ...],\n                    events: ['id', ...]\n                }\n            }\n            procedureId: 'id'\n        }\n\n    */\n\n    json.$('SimulationInteractivity/DocItems/DocItem').forEach(function (DocItem) {\n        var def = DocItem.$attr('id'),\n            defInfo = {},\n            metadata = {};\n\n        DocItem.$('metadata/value').forEach(function (value) {\n            var text = value.$text();\n            defInfo[value.$attr(\"name\")] = text;\n            defInfo['{' + value.$attr(\"decl-id\") + '}'] = text;\n            metadata[value.$attr(\"decl-id\")] = text;\n        });\n\n        m_prcInteractivityMap.defs[def] = defInfo;\n\n        var docid = defInfo['{DocID}'];\n        if (!m_prcInteractivityMap.docitems[docid]) {\n            m_prcInteractivityMap.docitems[docid] = {\n                id: docid,\n                objectNames: [],\n                metadata: metadata,\n                screentip: DocItem.$text('tooltip')\n            };\n        }\n        m_prcInteractivityMap.docitems[docid].objectNames.push(def);\n    });\n\n    m_prcInteractivityMap.pictures = json.$('SimulationInteractivity/Resources/Picture').map(function (Picture) {\n        return {\n            description: Picture.$attr('descr'),\n            drawing: baseURL + Picture.$text(),\n            flags: Picture.$attr('flags') || 0\n        };\n    });\n\n    m_prcInteractivityMap.options = __webpack_require__(12)(json);\n    m_prcInteractivityMap.metadata = getMetadata(json.$('SimulationInteractivity/SimulationInformation/metadata/value'));\n\n    m_prcInteractivityMap.procedureId = json.SimulationInteractivity.Simulation && json.SimulationInteractivity.Simulation.$attr('id');\n\n    function findDescription(id, node) {\n        node = node || json.SimulationInteractivity.Simulation;\n        var i,\n            description = \"\";\n        if (node.$attr('id') != id) {\n            if (node.Step) {\n                for (i = 0; i < node.Step.length && !description; i++) {\n                    description = findDescription(id, node.Step[i]);\n                }\n            } else if (node.Substep) {\n                for (i = 0; i < node.Substep.length && !description; i++) {\n                    description = findDescription(id, node.Substep[i]);\n                }\n            }\n        } else {\n            description = node.$text('Description');\n        }\n        return description;\n    }\n\n    function processEvent(node, parentId) {\n        var id = node.$attr('id');\n        m_prcInteractivityMap.procedureItems[id] = {\n            id: id,\n            type: 'event',\n            description: node.$text('Description'),\n            eventType: node.$text('Type').toUpperCase(),\n            parent: parentId\n        };\n    }\n\n    function processItem(node, parentId) {\n        var i,\n            id = node.$attr('id'),\n            itemInfo = {\n                id: id,\n                comment: node.$text('Comment'),\n                description: findDescription(id),\n                children: node.$('Item').map(function (node) {\n                    return node.$attr('id');\n                }),\n                actions: node.$('Action').map(function (node) {\n                    return node.$attr('id');\n                }),\n                metadata: node.$('metadata/value').reduce(function (metadata, value) {\n                    metadata[value.$attr('decl-id')] = value.$text();\n                    return metadata;\n                }, {}),\n                raw: node\n            };\n        itemInfo.type = ((itemInfo.children.length + itemInfo.actions.length) > 0 || node['@name'] !== 'Action') ? 'step' : 'action';\n\n        if (parentId) {\n            itemInfo.parent = parentId;\n        }\n\n        if (itemInfo.type == 'action') {\n            delete itemInfo.children;\n            delete itemInfo.actions;\n            var steps = json.$('SimulationInteractivity/Simulation/Step');\n            for (i = 0; i < steps.length; i++) {\n                var step = steps[i];\n                var substep = step.$('Substep').filter(function (substep) {\n                    return substep.$attr('id') == id;\n                });\n                if (substep.length > 0) {\n                    itemInfo.parentStep = step.$attr('id');\n                    itemInfo.events = substep[0].$('Event').map(function (node) {\n                        processEvent(node, id);\n                        return node.$attr('id');\n                    });\n                    break;\n                }\n            }\n        }\n\n        m_prcInteractivityMap.procedureItems[id] = itemInfo;\n\n        node.$('Action').forEach(function (action) {\n            processItem(action, id);\n        });\n\n        node.$('Item').forEach(function (item) {\n            processItem(item, id);\n        });\n    }\n\n    if (json.SimulationInteractivity.Procedure) {\n        processItem(json.SimulationInteractivity.Procedure);\n        m_prcInteractivityMap.procedureItems[m_prcInteractivityMap.procedureId].type = 'procedure';\n        m_prcInteractivityMap.procedureItems[m_prcInteractivityMap.procedureId].comment = json.$text('SimulationInteractivity/Simulation/Comment');\n    }\n\n    var appExports = {\n        procedure: {\n            /**\n             * The namespace represents an interface to access the information from the companion file for the interactive procedure.\n             * \n             * @namespace\n             * @memberof module:solo.app.procedure\n             */\n            interactivity: {\n                /**\n                 * JavaScript representation of the companion file *.interactivity.xml*\n                 * \n                 * @name json\n                 * @memberof module:solo.app.procedure.interactivity\n                 * @property {XMLNodeData} json JavaScript representation of the XML file\n                 * \n                 * *XML:*\n                 * ```\n                 * <node att1=\"att1-value\" att2=\"att2-value\">\n                 *      <foo>Foo</foo>\n                 *      <bar>\n                 *          <![CDATA[  Bar]]>\n                 *      </bar>\n                 *      <items>\n                 *          <item>i1</item>\n                 *          <item>i2</item>\n                 *          <item>i3</item>\n                 *          <item>i4</item>\n                 *      </items>\n                 * </node>\n                 * ```\n                 * *JSON:*\n                 * ```\n                 * {\n                 *  \"node\": {\n                 *      \"@attributes\": {\n                 *          \"att1\": \"att1-value\",\n                 *          \"att2\": \"att2-value\"\n                 *      },\n                 *      \"foo\": { \"#text\": \"Foo\" },\n                 *      \"bar\": { \"#text\": \"  Bar\" },\n                 *      \"items\": {\n                 *          \"item\": [\n                 *              { \"#text\": \"i1\" },\n                 *              { \"#text\": \"i2\" },\n                 *              { \"#text\": \"i3\" },\n                 *              { \"#text\": \"i4\" }\n                 *          ]\n                 *      }\n                 *  }\n                 * }\n                 * ```\n                 */\n                //json: json,\n\n                /**\n                 * Returns the 3D procedure ID\n                 * \n                 * @memberof module:solo.app.procedure.interactivity\n                 * @returns {string} 3D procedure ID\n                 */\n                getProcedureId: function () {\n                    return m_prcInteractivityMap.procedureId;\n                },\n\n                /**\n                 * Returns an array of the 2D illustration from the companion file.\n                 * \n                 * @memberof module:solo.app.procedure.interactivity\n                 * @returns {ProcedureDrawingInfo[]} Array of 2D illustrations in the procedure\n                 */\n                getDrawings: function () {\n                    return m_prcInteractivityMap.pictures;\n                },\n\n                /**\n                 * Returns an DocID for the name of 3D object.\n                 * \n                 * @memberof module:solo.app.procedure.interactivity\n                 * @param {string} name The name of 3D object\n                 * @returns {DocID} DocID value\n                 */\n                getDocIdByObjectName: function (name) {\n                    var defInfo = m_prcInteractivityMap.defs[name];\n                    if (defInfo) {\n                        return defInfo['{DocID}'];\n                    }\n                    return null;\n                },\n\n                /**\n                 * Returns an array of the name of 3D object by DocID.\n                 * \n                 * @memberof module:solo.app.procedure.interactivity\n                 * @param {DocID} docId DocID value\n                 * @returns {string[]} An array of the names of 3D objects\n                 */\n                getObjectNamesByDocId: function (docId) {\n                    var docItemInfo = m_prcInteractivityMap.docitems[docId];\n                    return docItemInfo ? docItemInfo.objectNames : [];\n                },\n\n                /**\n                 * Returns information about the 3D item by DocID.\n                 * \n                 * @memberof module:solo.app.procedure.interactivity\n                 * @param {DocID} docId DocID value\n                 * @returns {DocItemInfo} The object represents an information about the 3D item\n                 * @since 1.5.2\n                 */\n                getDocItemInfo: function (docId) {\n                    return m_prcInteractivityMap.docitems[docId];\n                },\n\n                /**\n                 * Returns information about the 3D item.\n                 * \n                 * @memberof module:solo.app.procedure.interactivity\n                 * @param {string} name The name of 3D object\n                 * @returns {DocItemMetadata} The object represents the metadata value of the 3D object by name and id\n                 * @since 1.4.0\n                 */\n                getDocItemMetadata: function (name) {\n                    return m_prcInteractivityMap.defs[name];\n                },\n\n                /**\n                 * Returns an array of all DocID.\n                 * \n                 * @memberof module:solo.app.procedure.interactivity\n                 * @returns {DocID[]} An array of DocID\n                 */\n                getDocItems: function () {\n                    var res = [];\n                    for (var docId in m_prcInteractivityMap.docitems) res.push(docId);\n                    return res;\n                },\n\n                /**\n                 * Returns information about the procedure item.\n                 * \n                 * @memberof module:solo.app.procedure.interactivity\n                 * @param {string} id Procedure item ID\n                 * @returns {ProcedureElementInfo} The object represents an information about the procedure item\n                 */\n                getProcedureItemInfo: function (id) {\n                    return m_prcInteractivityMap.procedureItems[id];\n                },\n\n                /**\n                 * Returns the publication options from the companion file in form of key-value array.\n                 * \n                 * @memberof module:solo.app.procedure.interactivity\n                 * @returns {KeyValuePairs} Key-value array\n                 */\n                getOptions: function () {\n                    return m_prcInteractivityMap.options;\n                },\n\n                /**\n                 * Returns the project metadata from the companion file in form of key-value array.\n                 * \n                 * @memberof module:solo.app.procedure.interactivity\n                 * @returns {KeyValuePairs} Key-value array\n                 */\n                getProjectMetadata: function () {\n                    return m_prcInteractivityMap.metadata;\n                }\n            }\n        }\n    };\n\n    return appExports.procedure;\n};\n\n/**\n * The identifier of the 3D object used to link to the document.\n * @typedef {string} DocID\n */\n\n/**\n * The object represents the metadata value of the 3D object by name and id, for example:\n * ```\n *   {\n *      {DocID}: \"SH40400\", // by metadata id in form: {decl-id}\n *      {_F0CF006A8AC54725A80D5DC19077CD1D}: \"SH40400\",\n *      {_F519A19D050D45A68584453C44EA85DC}: \"1\",\n *      DocID: \"SH40400\",   // by metadata name\n *      \"Part Number\": \"SH40400\",\n *      Qty: \"1\"\n *   }\n * ```\n * @typedef {KeyValuePairs} DocItemMetadata\n * @see {@link module:solo.app.procedure.interactivity.getDocItemMetadata app.procedure.interactivity.getDocItemMetadata()}\n */\n\n/**\n * Information about the element of the procedure, for example:\n * ```\n *   {\n *       type: \"procedure\",\n *       id: \"R84E4929F-26B0-4848-9375-4A1D42DF4F6F\",\n *       description: \"Pump Disassembly Procedure\",\n *       raw: [ ... ],\n *       ...\n *   }\n * ```\n * @typedef {ProcedureRootInfo|ProcedureStepInfo|ProcedureActionInfo|ProcedureAlertInfo} ProcedureElementInfo\n * @prop {string} type The type of the procedure element:\n * - `\"procedure\"`\n * - `\"step\"`\n * - `\"action\"`\n * - `\"event\"`\n * @prop {string} id The identifier of the procedure element.\n * @prop {string} description Description of the procedure element.\n * @prop {XMLNodeData} raw An XMLNodeData instance that represents an element in the companion file.\n * @see {@link module:solo.app.procedure.interactivity.getProcedureItemInfo app.procedure.interactivity.getProcedureItemInfo()}\n */\n\n/**\n * Information about the procedure, for example:\n * ```\n *   {\n *       type: \"procedure\",\n *       id: \"R84E4929F-26B0-4848-9375-4A1D42DF4F6F\",\n *       description: \"Pump Disassembly Procedure\",\n *       comment: \"<p><b><span style=\\\"font-size: 117%;\\\">Pump Disassembly Procedure</span></b></p>\",\n *       children: [\n *          \"R94679328-76C1-46FC-B49E-C23070C14A16\",\n *          \"R14F8C444-4ADF-4930-B685-4B1E9E613550\",\n *          \"R6F5017B0-FD12-4636-A638-D77CF6193B65\",\n *          \"D767D5C6-0D78-4F52-AB27-404E22EB43E0\",\n *          ...\n *       ],\n *       actions: [],\n *       metadata: {}\n *   }\n * ```\n * @typedef {ProcedureElementInfo} ProcedureRootInfo\n * @prop {string} type=procedure See {@link ProcedureElementInfo}.\n * @prop {string} id See {@link ProcedureElementInfo}.\n * @prop {string} description See {@link ProcedureElementInfo}.\n * @prop {string} comment The comment to the element of the procedure in the form of an HTML string.\n * @prop {string[]} children Array of identifiers for children elements.\n * @prop {string[]} actions Array of identifiers for actions of the element.\n * @prop {KeyValuePairs} metadata Metadata of the item.\n * @see ProcedureElementInfo\n */\n\n/**\n * Information about the step of the procedure, for example:\n * ```\n *  {\n *      type: \"step\",\n *      id: \"R94679328-76C1-46FC-B49E-C23070C14A16\",\n *      description\t\"1\",\n *      comment\t\"<p>Remove the bolts securing the faceplate to the the casing. Remove the faceplate.</p>\",\n *      parent: \"R84E4929F-26B0-4848-9375-4A1D42DF4F6F\",\n *      children: [],\n *      actions\t[\n *          \"D6C54479-3203-4473-85E2-637875CA4F18\"\n *      ],\n *      metadata: {}\n *   }\n * ```\n * @typedef {ProcedureElementInfo} ProcedureStepInfo\n * @prop {string} type=step See {@link ProcedureElementInfo}.\n * @prop {string} id See {@link ProcedureElementInfo}.\n * @prop {string} description See {@link ProcedureElementInfo}.\n * @prop {string} comment The comment to the element of the procedure in the form of an HTML string.\n * @prop {string} parent The identifier of the parent element in the procedure.\n * @prop {string[]} children Array of identifiers for children elements.\n * @prop {string[]} actions Array of identifiers for actions of the element. See {@link ProcedureActionInfo}.\n * @prop {KeyValuePairs} metadata Metadata of the item.\n * @see ProcedureElementInfo\n */\n\n/**\n * Information about the action in the procedure, for example:\n * ```\n *  {\n *      type: \"action\",\n *      id: \"5124CF6D-621B-46EC-9EF9-B9EDB0FDD496\",\n *      description\t\"\",\n *      comment: \"<p>Visually inspect all parts. Replace all worn or damaged parts before reassembling pump. It is recommended that new gaskets be installed each time the pump is disassembled and reassembled<span style=\\\"font-size: 117%;\\\">.</span></p>\",\n *      parent: \"R1712E390-60A4-45CC-ACEC-63ED166989EE\",\n *      parentStep: \"R1712E390-60A4-45CC-ACEC-63ED166989EE\",\n *      events: [\n *          \"NOTE-694FE061-2655-4CF1-A567-D78212E2FF87\"\n *      ],\n *      metadata: {}\n *   }\n * ```\n * @typedef {ProcedureElementInfo} ProcedureActionInfo\n * @prop {string} type=action See {@link ProcedureElementInfo}.\n * @prop {string} id See {@link ProcedureElementInfo}.\n * @prop {string} description See {@link ProcedureElementInfo}.\n * @prop {string} comment The comment to the element of the procedure in the form of an HTML string.\n * @prop {string} parent The identifier of the parent element in the procedure.\n * @prop {string} parentStep The identifier of the parent step corresponding to the step of the VRML procedure.\n * @prop {string[]} Array of identifiers for procedure elements of type `\"event\"`. See {@link ProcedureAlertInfo}.\n * @prop {KeyValuePairs} metadata Metadata of the item.\n * @see ProcedureElementInfo\n */\n\n/**\n * Information about the alert in the procedure, for example:\n * ```\n *  {\n *      type: \"event\",\n *      id: \"NOTE-694FE061-2655-4CF1-A567-D78212E2FF87\",\n *      description: \"note001\",\n *      parent: \"5124CF6D-621B-46EC-9EF9-B9EDB0FDD496\",\n *      eventType: \"\"\n *   }\n * ```\n * @typedef {ProcedureElementInfo} ProcedureAlertInfo\n * @prop {string} type=event See {@link ProcedureElementInfo}.\n * @prop {string} id See {@link ProcedureElementInfo}.\n * @prop {string} description See {@link ProcedureElementInfo}.\n * @prop {string} parent The identifier of the parent action in the procedure.\n * @prop {string} eventType The type of alert:\n * - `\"WARNING\"`\n * - `\"CAUTION\"`\n * - `\"NOTE\"`\n * - custom type\n * @see ProcedureElementInfo\n */\n\n/**\n * Information about the 3D item that is referenced by the document, for example:\n * ```\n * { \n *      id: \"id02\",\n *      objectNames: [ \"PM005301_2\" ],\n *      metadata: {\n *          DocID: \"id01\",\n *          _6A7337C8022746BA8C02F29B0FC2257F: \"Back Plate Assy\",\n *          _F0CF006A8AC54725A80D5DC19077CD1D: \"PM005302\",\n *          _F519A19D050D45A68584453C44EA85DC: \"1\"\n *      },\n *      screentip: \"Back Plate Assy\\nP/N: PM005302\"\n * }\n * ```\n * @typedef {object} DocItemInfo\n * @prop {DocID} id The unique ID of the 3D item used to link to the document.\n * @prop {string[]} objectNames An array of the names of 3D objects.\n * @prop {KeyValuePairs} metadata Metadata of the 3D item.\n * @prop {string} screentip A string contains a brief note or label pertaining to the 3D item.\n * @see {@link module:solo.app.procedure.interactivity.getDrawings app.procedure.interactivity.getDrawings()}\n */\n\n /**\n * Information about the 2D drawing in the procedure, for example:\n * ```\n * { \n *     drawing: \"http://.../pump-procedure-1.svg\", \n *     description: \"Pump Cross-Section\",\n *     flags: 0\n * }\n * ```\n * @typedef {object} ProcedureDrawingInfo\n * @prop {string} drawing The filename or URL of the 2D illustration.\n * @prop {string} description Description of 2D illustration.\n * @prop {number} flags Flags for the 2D illustration.\n * @see {@link module:solo.app.procedure.interactivity.getDrawings app.procedure.interactivity.getDrawings()}\n */\n\n/***/ }),\n/* 70 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n * SVG Drawing module.\n *\n * @module drawing\n * @author timduck@cortona3d.com\n * @copyright (C) 2015-2016 Paragraphics, Ltd. All rights reserved.\n */\n\nvar expand = __webpack_require__(0).expand;\nvar EventEmitter = __webpack_require__(10).EventEmitter;\n\nvar SVGNS = \"http://www.w3.org/2000/svg\";\nvar XLINKNS = \"http://www.w3.org/1999/xlink\";\n\nvar SUPPORT_TOUCH = ('ontouchstart' in window);\nvar SUPPORT_ONLY_TOUCH = SUPPORT_TOUCH && /mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent);\n\nvar Hammer = __webpack_require__(16);\nvar pako = __webpack_require__(48);\n\nvar PRESS_TIME = 750;\nvar DOUBLE_TAP_TIME = 250;\n\nvar m_svgHammerManagers = [];\nvar debounceTimeout = {};\n\n/*\n    Members\n */\n\nvar m_svgElement,\n    m_svgShadow,\n    m_viewportShadow,\n    m_view,\n    m_viewport,\n    m_viewBox,\n    m_zoom = 1,\n    m_originX = 0,\n    m_originY = 0,\n    m_maxScale = 50,\n    m_minScale = 1,\n    m_enableDrawingOptimization = false,\n    m_textNodesCount = 0,\n    m_disableAutoCalculationScaleLimit = false,\n    m_enableHoverFilling = false,\n    m_isPressed = false,\n    m_isDoubleTap = false,\n    m_isHidden = true,\n    m_isReady = false,\n    m_loadingUrl = '',\n    m_image = null,\n    m_xhr = null,\n    m_delegate = {\n        didCompleteLoad: function (url) {\n            m_isReady = true;\n            if (this.delegate.didCompleteLoad) {\n                this.delegate.didCompleteLoad.call(this, url);\n            }\n        },\n        didClickHotspot: function (name, keys) {\n            if (this.delegate.didClickHotspot) {\n                this.delegate.didClickHotspot.call(this, name, keys);\n            }\n        },\n        didEnterHotspot: function (name) {\n            if (this.delegate.didEnterHotspot) {\n                this.delegate.didEnterHotspot.call(this, name);\n            }\n        },\n        didLeaveHotspot: function (name) {\n            if (this.delegate.didLeaveHotspot) {\n                this.delegate.didLeaveHotspot.call(this, name);\n            }\n        },\n        didCallContextMenu: function (name, offsetX, offsetY, target) {\n            if (this.delegate.didCallContextMenu) {\n                this.delegate.didCallContextMenu.call(this, name, offsetX, offsetY, target);\n            }\n        },\n        failedLoadingDocument: function (url, message) {\n            if (this.delegate.failedLoadingDocument) {\n                this.delegate.failedLoadingDocument.call(this, url, message);\n            }\n        },\n        onProgress: function (loaded, total) {\n            if (this.delegate.onProgress) {\n                this.delegate.onProgress.call(this, loaded, total);\n            }\n        },\n        onZoomChange: function (zoom) {\n            if (this.delegate.onZoomChange) {\n                this.delegate.onZoomChange.call(this, zoom);\n            }\n        }\n    };\n\n// IE11 SVGElement.classList polyfill\n(function () {\n    // helpers\n    var regExp = function (name) {\n        return new RegExp('(^| )' + name + '( |$)');\n    };\n    var forEach = function (list, fn, scope) {\n        for (var i = 0; i < list.length; i++) {\n            fn.call(scope, list[i]);\n        }\n    };\n\n    // class list object with basic methods\n    function ClassList(element) {\n        this.element = element;\n    }\n\n    ClassList.prototype = {\n        add: function () {\n            forEach(arguments, function (name) {\n                if (!this.contains(name)) {\n                    this.element.className.baseVal += ' ' + name;\n                }\n            }, this);\n        },\n        remove: function () {\n            forEach(arguments, function (name) {\n                this.element.className.baseVal =\n                    this.element.className.baseVal.replace(regExp(name), '');\n            }, this);\n        },\n        toggle: function (name, flag) {\n            flag = typeof flag === 'undefined' ? !this.contains(name) : flag;\n            return (flag ? this.add(name) : this.remove(name)), flag;\n        },\n        contains: function (name) {\n            return regExp(name).test(this.element.className.baseVal);\n        }\n    };\n\n    if (!('classList' in SVGElement.prototype)) {\n        Object.defineProperty(SVGElement.prototype, 'classList', {\n            get: function () {\n                return new ClassList(this);\n            }\n        });\n    }\n})();\n\n/**\n * @private\n * @async\n */\nfunction arrayBufferToString(buffer, encoding) {\n    return new Promise(function (resolve, reject) {\n        var blob = new Blob([buffer], {\n            type: 'text/plain'\n        });\n        var reader = new FileReader();\n        reader.onload = function (evt) {\n            resolve(evt.target.result);\n        };\n        reader.readAsText(blob, encoding);\n    });\n}\n\n/**\n * @private\n */\nfunction getFirstChild(n) {\n    var child = n.firstChild;\n    while (child && !child.tagName) {\n        child = child.nextSibling;\n    }\n    return child;\n}\n\n/**\n * @private\n */\nfunction getHotspotRegion(n) {\n    var firstChild,\n        res = Array.prototype.slice.call(n.getElementsByTagName('path')).filter(function (path) {\n            return path.classList.contains('hotspot-region');\n        })[0];\n\n    if (!res) {\n        // changing the order of nodes in SVG <a> element\n        // 1. g/path (geometry)\n        // 2. path (hotspot region)\n        // 3. g/text\n        firstChild = getFirstChild(n);\n        if (firstChild && firstChild.tagName === 'path') {\n            res = firstChild;\n            firstChild.classList.add('hotspot-region');\n            n.appendChild(firstChild);\n\n            Array.prototype.slice.call(n.getElementsByTagName('text')).forEach(function (text) {\n                var textParentNode = text.parentNode;\n                if (textParentNode !== n) {\n                    if (textParentNode.parentNode === n) {\n                        n.appendChild(textParentNode.cloneNode()).appendChild(text);\n                        if (!textParentNode.childElementCount) {\n                            textParentNode.parentNode.removeChild(textParentNode);\n                        }\n                    }\n                } else {\n                    n.appendChild(text);\n                }\n            });\n        }\n    }\n\n    return res;\n}\n\n/**\n * @private\n */\nfunction getHotspotNodes(n) {\n    var el = [],\n        hotspotRegion = getHotspotRegion(n);\n    if (hotspotRegion) {\n        el.push(hotspotRegion);\n    } else {\n        el = el.concat(\n            Array.prototype.slice.call(n.getElementsByTagName('path')),\n            Array.prototype.slice.call(n.getElementsByTagName('text'))\n        );\n    }\n    return el;\n}\n\n/**\n * \n * @private\n * @param {any} node\n * @returns {SVGAElement}\n */\nfunction getSVGAElement(node) {\n    var res = node;\n    while (res && res.nodeName.toLowerCase() != 'a') res = res.parentNode;\n    return res;\n}\n\nvar m_eventHandlersA = {\n    /**\n     * \n     * \n     * @private\n     * @param {any} e\n     */\n    mouseover: function (e) {\n        e = e || window.event;\n        var target = getSVGAElement(e.target || e.srcElement),\n            name = target ? target.getAttribute('name') : '';\n        SVGDrawing.dispatch(\"didEnterHotspot\", name);\n        e.preventDefault();\n    },\n    /**\n     * \n     * \n     * @private\n     * @param {any} e\n     */\n    mouseout: function (e) {\n        e = e || window.event;\n        var target = getSVGAElement(e.target || e.srcElement),\n            name = target ? target.getAttribute('name') : '';\n        SVGDrawing.dispatch(\"didLeaveHotspot\", name);\n        e.preventDefault();\n    }\n};\n\nvar m_lastX,\n    m_lastY,\n    m_lastScale;\n\nvar m_eventHandlers = {\n    /**\n     * \n     * \n     * @private\n     * @param {any} e\n     */\n    contextmenu: function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        if (m_isPressed) return;\n        e = e || window.event;\n        var target = e.target || e.srcElement,\n            svgANode = getSVGAElement(target),\n            name = svgANode ? svgANode.getAttribute('name') : '',\n            rect = m_view.getBoundingClientRect(),\n            offsetX = e.clientX - rect.left,\n            offsetY = e.clientY - rect.top;\n        SVGDrawing.dispatch(\"didCallContextMenu\", name, offsetX, offsetY, m_view);\n    },\n\n    /**\n     * \n     * \n     * @private\n     * @param {any} e\n     * @returns {any}\n     */\n    wheel: function (e) {\n        e = e || window.event;\n        var delta = e.deltaY < 0 ? -0.1 : 0.1;\n\n        var W = m_view.clientWidth,\n            H = m_view.clientHeight,\n            dimensions = getViewBoxDimensions(),\n            w = dimensions.w,\n            h = dimensions.h;\n\n        var scale = Math.max(m_minScale, Math.min(m_maxScale, (1 - delta) * m_zoom)) / m_zoom,\n            rect = m_view.getBoundingClientRect(),\n            offsetX = e.clientX - rect.left,\n            offsetY = e.clientY - rect.top,\n            x = (offsetX - (W - w) / 2 - m_originX / dimensions.scale) / m_zoom * dimensions.scale,\n            y = (offsetY - (H - h) / 2 - m_originY / dimensions.scale) / m_zoom * dimensions.scale,\n            originX = m_originX + x * (1 - scale) * m_zoom,\n            originY = m_originY + y * (1 - scale) * m_zoom;\n\n        setTransform(originX, originY, m_zoom * scale);\n\n        e.preventDefault();\n        return false;\n    },\n    /**\n     * \n     * \n     * @private\n     * @param {any} e\n     * @returns {any}\n     */\n    dblclick: function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        if (m_isDoubleTap) return;\n        var scale = (m_maxScale - m_minScale) * 0.4 + m_minScale;\n        if (Math.abs(m_zoom - scale) < 0.001) {\n            reset();\n        } else {\n            scale = scale / m_zoom;\n            var W = m_view.clientWidth,\n                H = m_view.clientHeight,\n                dimensions = getViewBoxDimensions(),\n                w = dimensions.w,\n                h = dimensions.h;\n            var rect = m_view.getBoundingClientRect(),\n                offsetX = e.clientX - rect.left,\n                offsetY = e.clientY - rect.top,\n                x = (offsetX - (W - w) / 2 - m_originX / dimensions.scale) / m_zoom * dimensions.scale,\n                y = (offsetY - (H - h) / 2 - m_originY / dimensions.scale) / m_zoom * dimensions.scale,\n                originX = m_originX + x * (1 - scale) * m_zoom,\n                originY = m_originY + y * (1 - scale) * m_zoom;\n            setTransform(originX, originY, m_zoom * scale);\n        }\n    }\n};\n\n/**\n * \n * \n * @private\n * @returns {object}\n */\nfunction getViewBoxDimensions() {\n    if (m_zoom === 1) {\n        m_viewBox = (m_enableDrawingOptimization && m_viewportShadow) ? m_svgShadow.getBBox() : m_svgElement.getBBox();\n    }\n    var viewBox = m_viewBox,\n        W = m_view.clientWidth,\n        H = m_view.clientHeight,\n        w = viewBox.width,\n        h = viewBox.height,\n        A = W / H,\n        a = w / h;\n\n    if (A > a) {\n        // width\n        h = H;\n        w = h * a;\n    } else if (A < a) {\n        // height\n        w = W;\n        h = w / a;\n    } else {\n        h = H;\n        w = W;\n    }\n    return {\n        h: h,\n        w: w,\n        scale: viewBox.width / w\n    };\n}\n\n/**\n * \n * \n * @private\n * @param {any} dx\n * @param {any} dy\n */\nfunction setOriginBy(dx, dy) {\n    var dimensions = getViewBoxDimensions();\n    setOrigin(m_originX + dx * dimensions.scale, m_originY + dy * dimensions.scale);\n}\n\n/**\n * \n * \n * @private\n * @param {any} x\n * @param {any} y\n */\nfunction setOrigin(x, y) {\n    var W = m_view.clientWidth,\n        H = m_view.clientHeight,\n        dimensions = getViewBoxDimensions(),\n        w = dimensions.w,\n        h = dimensions.h,\n        scale = dimensions.scale,\n        viewW = w * m_zoom,\n        viewH = h * m_zoom;\n\n    var oX = -Math.abs(W - w) / 2;\n    var oY = -Math.abs(H - h) / 2;\n\n    if (viewW <= W) {\n        m_originX = Math.max(Math.min(x, (oX + W - viewW) * scale), oX * scale);\n    } else {\n        m_originX = Math.max(Math.min(x, oX * scale), (oX + W - viewW) * scale);\n    }\n    if (viewH <= H) {\n        m_originY = Math.max(Math.min(y, (oY + H - viewH) * scale), oY * scale);\n    } else {\n        m_originY = Math.max(Math.min(y, oY * scale), (oY + H - viewH) * scale);\n    }\n}\n\n/**\n * \n * \n * @param {any} x\n * @param {any} y\n * @param {any} zoom\n */\nfunction setTransform(x, y, zoom) {\n    m_originX = x;\n    m_originY = y;\n    m_zoom = zoom;\n    SVGDrawing.dispatch(\"onZoomChange\", m_zoom);\n    applyTransform();\n}\n\n/**\n * \n * @private\n */\nvar m_applyTimeout,\n    m_shadowTimeout;\n\nfunction applyTransformTo(viewport) {\n    if (!viewport) return;\n    var m = viewport.transform.baseVal;\n    if (isNaN(m_originX) || isNaN(m_originY) || isNaN(m_zoom)) {\n        m_originX = 0;\n        m_originY = 0;\n        m_zoom = 1;\n    }\n    m.getItem(0).setTranslate(m_originX, m_originY);\n    m.getItem(1).setScale(m_zoom, m_zoom);\n}\n\nfunction applyTransform() {\n    if (!m_viewport) return;\n    clearTimeout(m_applyTimeout);\n    m_applyTimeout = setTimeout(function () {\n        function _apply() {\n            m_shadowTimeout = null;\n            m_svgElement.style.display = 'block';\n            m_svgShadow.style.visibility = 'hidden';\n            applyTransformTo(m_viewport);\n        }\n        clearTimeout(m_shadowTimeout);\n        if (!m_enableDrawingOptimization || !m_viewportShadow) {\n            _apply();\n        } else {\n            if (!m_shadowTimeout) {\n                m_svgShadow.style.visibility = 'visible';\n                m_svgElement.style.display = 'none';\n            }\n            m_shadowTimeout = setTimeout(_apply, 1000);\n            applyTransformTo(m_viewportShadow);\n        }\n    }, 0);\n}\n\n/**\n * \n * @memberof module:drawing\n * @returns {SVGElement} \n */\nfunction getSVGSource() {\n    var div = document.createElement('div');\n    div.appendChild(m_svgElement.cloneNode(true));\n    div.firstChild.removeAttribute('id');\n    div.firstChild.removeAttribute('style');\n    return div.innerHTML;\n}\n\n/**\n * @memberof module:drawing\n */\nfunction attach() {\n    var eventName,\n        mc,\n        mcOptions = {},\n        i,\n        a = m_svgElement.getElementsByTagName('a');\n\n    if (!m_isReady) return;\n    if (m_svgHammerManagers.length) return;\n\n    if (navigator.pointerEnabled === false) {\n        if (SUPPORT_ONLY_TOUCH) {\n            mcOptions.inputClass = Hammer.TouchInput;\n        } else if (!SUPPORT_TOUCH) {\n            mcOptions.inputClass = Hammer.MouseInput;\n        } else {\n            mcOptions.inputClass = Hammer.TouchMouseInput;\n        }\n    }\n\n    for (i = 0; i < a.length; i++) {\n        (function (anchor) {\n            // In an HTML5 document the attribute has to be accessed with vm2d:name since namespaces are not supported.\n            // https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttributeNS#Examples\n            var name = anchor.getAttribute('vm2d:name');\n\n            if (name) {\n                anchor.setAttribute('name', name);\n            }\n\n            name = anchor.getAttribute('name');\n            if (!name) {\n                name = anchor.textContent.replace(/[\\r\\n\\s]+/g, ' ').trim();\n                if (name) {\n                    anchor.setAttribute('name', name);\n                }\n                console.log('WARNING: Element \"' + anchor.tagName + '\" has no \"name\" attribute. Uses text content instead: \"' + name + '\"');\n            }\n            if (name) {\n                mc = new Hammer.Manager(anchor, expand({\n                    recognizers: [\n                        [Hammer.Tap]\n                    ]\n                }, mcOptions));\n                mc.on('tap', function (e) {\n                    var event = e.srcEvent || e;\n                    var keys = +(event.shiftKey && 1) | +(event.ctrlKey && 2) | +(event.altKey && 4);\n                    if (!debounceTimeout[name]) {\n                        debounceTimeout[name] = setTimeout(function () {\n                            delete debounceTimeout[name];\n                            SVGDrawing.dispatch(\"didClickHotspot\", name, keys);\n                        }, DOUBLE_TAP_TIME);\n                    } else {\n                        clearTimeout(debounceTimeout[name]);\n                        delete debounceTimeout[name];\n                    }\n                });\n                m_svgHammerManagers.push(mc);\n\n                for (eventName in m_eventHandlersA) {\n                    anchor.addEventListener(eventName, m_eventHandlersA[eventName], false);\n                }\n            }\n        })(a[i]);\n    }\n\n    mc = new Hammer.Manager(m_view, mcOptions);\n\n    var press = new Hammer.Press({\n        time: PRESS_TIME\n    });\n\n    var doubletap = new Hammer.Tap({\n        event: 'doubletap',\n        taps: 2,\n        threshold: 5,\n        posThreshold: 100,\n        interval: DOUBLE_TAP_TIME\n    });\n\n    var pinch = new Hammer.Pinch({\n        enable: true\n    });\n\n    var pan = new Hammer.Pan({\n        pointers: 0,\n        threshold: 1\n    });\n\n    pinch.recognizeWith(pan);\n\n    mc.add(press);\n    mc.add(doubletap);\n    mc.add(pinch);\n    mc.add(pan);\n    mc.set({\n        touchAction: 'none'\n    });\n\n    mc.on('press', function (e) {\n        if (e.pointerType === 'mouse') return;\n        m_eventHandlers.contextmenu(e.srcEvent);\n        m_isPressed = true;\n    });\n\n    mc.on('pressup', function (e) {\n        if (e.pointerType === 'mouse') return;\n        setTimeout(function () {\n            m_isPressed = false;\n        }, 250);\n    });\n\n    mc.on('doubletap', function (e) {\n        m_eventHandlers.dblclick(e.srcEvent);\n        m_isDoubleTap = true;\n        setTimeout(function () {\n            m_isDoubleTap = false;\n        }, 250);\n    });\n\n    mc.on('pinchstart', function (e) {\n        m_lastScale = 1;\n    });\n\n    mc.on('pinch', function (e) {\n        var W = m_view.clientWidth,\n            H = m_view.clientHeight,\n            dimensions = getViewBoxDimensions(),\n            w = dimensions.w,\n            h = dimensions.h;\n\n        var scale = Math.max(m_minScale, Math.min(m_maxScale, (1 - (m_lastScale - e.scale)) * m_zoom)) / m_zoom,\n            rect = m_view.getBoundingClientRect(),\n            clientX = e.center.x,\n            clientY = e.center.y,\n            offsetX = clientX - rect.left,\n            offsetY = clientY - rect.top,\n            x = (offsetX - (W - w) / 2 - m_originX / dimensions.scale) / m_zoom * dimensions.scale,\n            y = (offsetY - (H - h) / 2 - m_originY / dimensions.scale) / m_zoom * dimensions.scale,\n            originX = m_originX + x * (1 - scale) * m_zoom,\n            originY = m_originY + y * (1 - scale) * m_zoom;\n\n        setTransform(originX, originY, m_zoom * scale);\n\n        m_lastScale = e.scale;\n    });\n\n    mc.on('panstart', function (e) {\n        m_view.style.cursor = 'move';\n        m_lastX = e.deltaX;\n        m_lastY = e.deltaY;\n    });\n\n    mc.on('pan', function (e) {\n        setOriginBy(e.deltaX - m_lastX, e.deltaY - m_lastY);\n        m_lastX = e.deltaX;\n        m_lastY = e.deltaY;\n        applyTransform();\n    });\n\n    mc.on('panend', function (e) {\n        m_view.style.cursor = 'default';\n    });\n\n    m_svgHammerManagers.push(mc);\n\n    for (eventName in m_eventHandlers) {\n        m_view.addEventListener(eventName, m_eventHandlers[eventName], false);\n    }\n}\n\n/**\n * @memberof module:drawing\n */\nfunction detach() {\n    var eventName,\n        name,\n        anchor,\n        i,\n        a = m_svgElement.getElementsByTagName('a');\n    for (i = 0; i < a.length; i++) {\n        anchor = a[i];\n        if (anchor.__mc) anchor.__mc.destroy();\n        delete anchor.__mc;\n        for (eventName in m_eventHandlersA) {\n            anchor.removeEventListener(eventName, m_eventHandlersA[eventName], false);\n        }\n    }\n    for (eventName in m_eventHandlers) {\n        m_view.removeEventListener(eventName, m_eventHandlers[eventName], false);\n    }\n    m_svgHammerManagers.forEach(function (mc) {\n        mc.destroy();\n    });\n    m_svgHammerManagers.length = 0;\n    for (name in debounceTimeout) {\n        clearTimeout(debounceTimeout[name]);\n    }\n    debounceTimeout = {};\n    m_zoom = 1;\n    m_originX = 0;\n    m_originY = 0;\n}\n\n/**\n * \n * @memberof module:drawing\n * @param {string} url\n * @param {boolean} raster\n */\nfunction load(url, raster) {\n    /** \n     * @private\n     */\n    function onLoadSvg(syntax) {\n        var svg,\n            div = document.createElement('div');\n\n        div.innerHTML = syntax;\n        svg = div.querySelector('svg');\n\n        if (!svg) throw new Error('No SVG data.');\n\n        if (svg) {\n            detach();\n\n            var cssText = m_svgElement.style.cssText;\n            var cssClass = m_svgElement.getAttribute('class') || '';\n\n            m_svgElement.parentNode.replaceChild(svg, m_svgElement);\n            m_svgElement = svg;\n            m_svgElement.setAttribute('touch-action', 'none');\n            m_svgElement.style.touchAction = 'none';\n\n            var titleNode = svg.getElementsByTagName('title')[0];\n            if (titleNode) svg.removeChild(titleNode);\n\n            var childNodes = Array.prototype.slice.call(svg.childNodes || svg.children).filter(function (el) {\n                var n = el.nodeName;\n                return n !== '#text' && n !== 'title' && n !== 'defs' && n != 'desc';\n            });\n\n            m_viewport = document.createElementNS(SVGNS, 'g');\n\n            var v = m_viewport.transform.baseVal;\n            v.initialize(svg.createSVGTransform());\n            v.appendItem(svg.createSVGTransform());\n\n            childNodes.forEach(function (node) {\n                m_viewport.appendChild(node);\n            });\n            svg.appendChild(m_viewport);\n\n            if (!svg.getAttribute('viewBox')) {\n                svg.setAttribute('viewBox', '0 0 ' + svg.getAttribute('width') + ' ' + svg.getAttribute('height'));\n            }\n\n            var viewBox = (svg.getAttribute('viewBox') || '0 0 0 0').split(' ');\n\n            if (!svg.getAttribute('width')) {\n                svg.setAttribute('width', viewBox[2]);\n            }\n\n            if (!svg.getAttribute('height')) {\n                svg.setAttribute('height', viewBox[3]);\n            }\n\n            svg.style.cssText = cssText;\n            svg.setAttribute('class', cssClass);\n\n            m_isReady = true;\n            SVGDrawing.dispatch(\"didCompleteLoad\", url);\n\n            if (!m_isHidden) attach();\n            m_loadingUrl = url;\n\n            m_textNodesCount = svg.getElementsByTagName('text').length;\n\n            initShadow();\n            calculateScaleLimit();\n        }\n    }\n    if (url == m_loadingUrl) return;\n    if (m_xhr) {\n        m_xhr.abort();\n        m_xhr = null;\n    }\n    if (m_image) {\n        m_image.onload = null;\n        m_image = null;\n    }\n    if (raster || /\\.(png|jpe?g|jpe|gif)$/i.test(url)) {\n        // PNG, JPEG, GIF\n        var img = new Image();\n        img.onload = function () {\n            unload();\n\n            var image = document.createElementNS(SVGNS, 'image');\n            image.setAttribute('image-rendering', 'optimizeQuality');\n            image.setAttribute('width', img.width);\n            image.setAttribute('height', img.height);\n            m_svgElement.setAttribute('viewBox', '0 0 ' + img.width + ' ' + img.height);\n            image.setAttributeNS(XLINKNS, 'href', img.src);\n\n            m_viewport = document.createElementNS(SVGNS, 'g');\n            var v = m_viewport.transform.baseVal;\n            v.initialize(m_svgElement.createSVGTransform());\n            v.appendItem(m_svgElement.createSVGTransform());\n            m_viewport.appendChild(image);\n            m_svgElement.appendChild(m_viewport);\n\n            calculateScaleLimit();\n\n            m_isReady = true;\n            SVGDrawing.dispatch(\"didCompleteLoad\", img.src);\n\n            if (!m_isHidden) attach();\n            m_loadingUrl = url;\n        };\n        img.src = url;\n        m_image = img;\n    } else {\n        // SVG(Z)\n        var xhr = new window.XMLHttpRequest();\n        if (xhr.overrideMimeType) {\n            xhr.overrideMimeType('application/octet-stream'); //application/xhtml+xml\n        }\n        try {\n            var self = this;\n            xhr.open(\"GET\", url, true);\n            xhr.responseType = 'arraybuffer';\n            /**\n             * \n             * @private\n             */\n            xhr.onerror = function () {\n                SVGDrawing.dispatch(\"onProgress\", 0, -1);\n                SVGDrawing.dispatch(\"failedLoadingDocument\", url, xhr.status);\n            };\n            /**\n             * \n             * @private\n             */\n            xhr.onprogress = function (e) {\n                var loaded = e.loaded;\n                var total = e.lengthComputable || e.lengthComputable === undefined ? e.total : 0;\n                SVGDrawing.dispatch(\"onProgress\", loaded, total);\n            };\n            /**\n             * \n             * @private\n             */\n            xhr.onload = function () {\n                SVGDrawing.dispatch(\"onProgress\", 0, -1);\n                var binData = new Uint8Array(xhr.response);\n\n                Promise\n                    .resolve()\n                    .then(function () {\n                        /*\n                        if (Cortona3DSolo && Cortona3DSolo.app.util.inflate) {\n                            var data = Cortona3DSolo.app.util.inflate(binData);\n                            if (!data) throw new Error();\n                            return arrayBufferToString(new Uint8Array(data))\n                                .then(function (str) {\n                                    Cortona3DSolo.app.util.freeTypedArray(data);\n                                    return str;\n                                });\n                        }\n                        */\n                        return arrayBufferToString(new Uint8Array(pako.inflate(binData)));\n                    })\n                    .catch(function () {\n                        return arrayBufferToString(binData);\n                    })\n                    .then(onLoadSvg)\n                    .catch(function () {\n                        SVGDrawing.dispatch(\"failedLoadingDocument\", url, xhr.status);\n                        m_loadingUrl = '';\n                    });\n            };\n            xhr.send(null);\n            m_xhr = xhr;\n        } catch (e) {\n            SVGDrawing.dispatch(\"failedLoadingDocument\", url, e.message);\n            m_loadingUrl = '';\n        }\n    }\n}\n\n/**\n * @memberof module:drawing\n */\nfunction unload() {\n    detach();\n    while (m_svgElement.firstChild) {\n        m_svgElement.removeChild(m_svgElement.firstChild);\n    }\n    freeShadow();\n    m_isReady = false;\n}\n\nfunction freeShadow() {\n    while (m_svgShadow.firstChild) {\n        m_svgShadow.removeChild(m_svgShadow.firstChild);\n    }\n    m_viewportShadow = null;\n}\n\nfunction initShadow() {\n    freeShadow();\n\n    if (m_textNodesCount < 5000 || !m_enableDrawingOptimization) return;\n\n    var svgString = new XMLSerializer().serializeToString(m_svgElement);\n\n    var DOMURL = self.URL || self.webkitURL || self,\n        img = new Image(),\n        svg = new Blob([svgString], {\n            type: \"image/svg+xml;charset=utf-8\"\n        }),\n        url = DOMURL.createObjectURL(svg);\n\n    img.onload = function () {\n        DOMURL.revokeObjectURL(url);\n\n        if (!img.width && !img.height) {\n            m_enableDrawingOptimization = false;\n            return;\n        }\n\n        var canvas = m_view.appendChild(document.createElement('canvas'));\n\n        canvas.style.display = 'none';\n\n        canvas.width = img.width;\n        canvas.height = img.height;\n\n        var ctx = canvas.getContext(\"2d\");\n        ctx.drawImage(img, 0, 0, img.width, img.height);\n\n        var png = canvas.toDataURL(\"image/png\");\n        var image = document.createElementNS(SVGNS, 'image');\n\n        image.setAttribute('image-rendering', 'optimizeQuality');\n        image.setAttribute('width', img.width);\n        image.setAttribute('height', img.height);\n        m_svgShadow.setAttribute('viewBox', '0 0 ' + img.width + ' ' + img.height);\n        image.setAttributeNS(XLINKNS, 'href', png);\n\n        m_viewportShadow = document.createElementNS(SVGNS, 'g');\n        var v = m_viewportShadow.transform.baseVal;\n        v.initialize(m_svgShadow.createSVGTransform());\n        v.appendItem(m_svgShadow.createSVGTransform());\n        m_viewportShadow.appendChild(image);\n        m_svgShadow.appendChild(m_viewportShadow);\n        applyTransformTo(m_viewportShadow);\n\n        m_view.removeChild(canvas);\n    };\n\n    img.src = url;\n}\n\nfunction calculateScaleLimit() {\n    if (m_disableAutoCalculationScaleLimit) return;\n    try {\n        var viewBox = m_svgElement.getBBox();\n        m_maxScale = Math.sqrt(viewBox.width * viewBox.width + viewBox.height * viewBox.height) / 50 || 50;\n    } catch (e) {}\n}\n\n/**\n * \n * @memberof module:drawing\n * @param {any} hotspotName\n * @param {any} className\n * @param {any} flag\n * @returns {boolean}\n */\nfunction toggleHotspotClass(hotspotName, className, flag) {\n    var res = flag;\n    m_svgElement.querySelectorAll('a[name=\"' + hotspotName + '\"]').forEach(function (n) {\n        getHotspotNodes(n).forEach(function (path) {\n            if (path.classList) {\n                res = path.classList.toggle(className, flag);\n            }\n        });\n    });\n    return res;\n}\n\n/**\n * \n * @memberof module:drawing\n * @param {any} hotspotName\n * @param {any} color\n */\nfunction highlight(hotspotName, color) {\n    Array.prototype.slice.call(m_svgElement.getElementsByTagName('a')).forEach(function (n) {\n        if (n.getAttribute('name') === hotspotName) {\n            getHotspotNodes(n).forEach(function (path) {\n                if (m_enableHoverFilling) {\n                    if (path.tagName !== 'text') {\n                        path.style.fill = color;\n                        path.style.fillOpacity = 0.5;\n                    }\n                } else {\n                    path.style.stroke = color;\n                    path.style.strokeWidth = path.tagName === 'text' ? '.1em' : '.5px';\n                    path.style.strokeOpacity = 1;\n                }\n            });\n        }\n    });\n}\n\n/**\n * \n * @memberof module:drawing\n * @param {any} hotspotName\n */\nfunction unhighlight(hotspotName) {\n    Array.prototype.slice.call(m_svgElement.getElementsByTagName('a')).forEach(function (n) {\n        if (n.getAttribute('name') === hotspotName) {\n            getHotspotNodes(n).forEach(function (path) {\n                if (m_enableHoverFilling) {\n                    if (path.tagName !== 'text') {\n                        path.style.fill = path.style.stroke;\n                        path.style.fillOpacity = path.style.strokeOpacity;\n                    }\n                } else {\n                    path.style.stroke = '';\n                    path.style.strokeWidth = '';\n                    path.style.strokeOpacity = '';\n                }\n            });\n        }\n    });\n}\n\n/**\n * \n * @memberof module:drawing\n * @param {any} hotspotName\n * @param {any} color\n */\nfunction select(hotspotName, color) {\n    Array.prototype.slice.call(m_svgElement.getElementsByTagName('a')).forEach(function (n) {\n        if (n.getAttribute('name') === hotspotName) {\n            getHotspotNodes(n).forEach(function (path) {\n                if (m_enableHoverFilling) {\n                    path.style.stroke = color;\n                    path.style.strokeWidth = path.tagName === 'text' ? '.1em' : '.5px';\n                    path.style.strokeOpacity = 1;\n                }\n                if (path.tagName !== 'text') {\n                    path.style.fill = color;\n                    path.style.fillOpacity = 0.8;\n                }\n            });\n        }\n    });\n}\n\n/**\n * \n * @memberof module:drawing\n * @param {any} hotspotName\n */\nfunction unselect(hotspotName) {\n    Array.prototype.slice.call(m_svgElement.getElementsByTagName('a')).forEach(function (n) {\n        if (n.getAttribute('name') === hotspotName) {\n            getHotspotNodes(n).forEach(function (path) {\n                if (m_enableHoverFilling) {\n                    path.style.stroke = '';\n                    path.style.strokeWidth = '';\n                    path.style.strokeOpacity = '';\n                }\n                if (path.tagName !== 'text') {\n                    path.style.fill = '';\n                    path.style.fillOpacity = '';\n                }\n            });\n        }\n    });\n}\n\n/**\n * @memberof module:drawing\n */\nfunction reset() {\n    setTransform(0, 0, 1);\n}\n\n/**\n * \n * @memberof module:drawing\n * @param {any} delta\n */\nfunction scaleBy(delta) {\n    if (m_zoom === 1) {\n        m_viewBox = m_svgElement.getBBox();\n    }\n    var viewBox = m_viewBox,\n        W = m_view.clientWidth,\n        H = m_view.clientHeight,\n        w = viewBox.width,\n        h = viewBox.height,\n        A = W / H,\n        a = w / h;\n\n    if (A > a) {\n        // width\n        h = H * m_zoom;\n        w = h * a;\n    } else if (A < a) {\n        // height\n        w = W * m_zoom;\n        h = w / a;\n    } else {\n        h = H * m_zoom;\n        w = W * m_zoom;\n    }\n\n    var zoom = Math.max(m_minScale, Math.min(m_maxScale, m_zoom + delta)),\n        s = (m_zoom - zoom) / 2;\n\n    m_zoom = zoom;\n\n    setOriginBy(w * s, h * s);\n    applyTransform();\n}\n\n/**\n * @memberof module:drawing\n */\nfunction hide() {\n    detach();\n    m_view.style.visibility = 'hidden';\n    m_isHidden = true;\n}\n\n/**\n * @memberof module:drawing\n */\nfunction show() {\n    attach();\n    m_view.style.visibility = 'visible';\n    m_isHidden = false;\n    calculateScaleLimit();\n}\n\n/**\n * @memberof module:drawing\n * @param {HTMLElement} svgElement\n * @param {object} [options]\n */\nfunction initialize(svgElement, options) {\n    svgElement.setAttribute('touch-action', 'none');\n    svgElement.style.touchAction = 'none';\n    svgElement.style.width = '100%';\n    svgElement.style.height = '100%';\n    svgElement.style.position = 'absolute';\n    svgElement.style.display = 'block';\n    svgElement.style.overflow = 'hidden';\n    m_svgElement = svgElement;\n    m_view = document.createElement('div');\n    m_view.classList.add('cortona3dsolo-svg');\n    svgElement.parentNode.replaceChild(m_view, svgElement);\n    m_view.appendChild(svgElement);\n    m_svgShadow = m_view.appendChild(document.createElementNS(SVGNS, 'svg'));\n    m_svgShadow.setAttribute('touch-action', 'none');\n    m_svgShadow.style.touchAction = 'none';\n    m_svgShadow.style.pointerEvents = 'none';\n    m_svgShadow.style.width = '100%';\n    m_svgShadow.style.height = '100%';\n    m_svgShadow.style.position = 'absolute';\n    svgElement.style.display = 'block';\n    m_svgShadow.style.overflow = 'hidden';\n    m_svgShadow.style.visibility = 'hidden';\n    hide();\n}\n\nvar SVGDrawing = expand(new EventEmitter(), {\n    dispatch: function (eventName) {\n        SVGDrawing.emit.apply(SVGDrawing, arguments);\n        if (typeof SVGDrawing.delegate[eventName] == 'function') {\n            SVGDrawing.delegate[eventName].apply(SVGDrawing, Array.prototype.slice.call(arguments, 1));\n        }\n    },\n    initialize: initialize, // initialize(svgElement, options)\n    hide: hide,\n    show: show,\n    reset: reset,\n    scaleBy: scaleBy,\n    toggleHotspotClass: toggleHotspotClass,\n    select: select,\n    unselect: unselect,\n    highlight: highlight,\n    unhighlight: unhighlight,\n    load: load,\n    unload: unload,\n    attach: attach,\n    detach: detach,\n    getSVGSource: getSVGSource,\n    /**\n     * @returns {boolean}\n     */\n    checkComplete: function () {\n        return m_isReady;\n    },\n    /**\n     * @returns {boolean}\n     */\n    checkShown: function () {\n        return !m_isHidden;\n    },\n    /**\n     * Hooks\n     */\n    delegate: {} // hooks\n    /*\n     didClickHotspot(name) \n     didEnterHotspot(name)\n     didLeaveHotspot(name)\n     didCompleteLoad(url)\n     didCallContextMenu(name, offsetX, offsetY, target)\n     failedLoadingDocument()\n     onProgress(loaded, total)\n     onZoomChange(zoom)\n     */\n});\n\nObject.defineProperties(SVGDrawing, {\n    'svg': {\n        get: function () {\n            return m_svgElement;\n        },\n        enumerable: true\n    },\n    'enableDrawingOptimization': {\n        get: function () {\n            return m_enableDrawingOptimization;\n        },\n        set: function (value) {\n            m_enableDrawingOptimization = !!value;\n        },\n        enumerable: true\n    },\n    'enableHoverFilling': {\n        get: function () {\n            return m_enableHoverFilling;\n        },\n        set: function (value) {\n            m_enableHoverFilling = !!value;\n        },\n        enumerable: true\n    },\n    'maxScale': {\n        get: function () {\n            return m_maxScale;\n        },\n        set: function (scale) {\n            m_disableAutoCalculationScaleLimit = !!scale;\n            m_maxScale = Math.max(+scale > 0 ? scale : 50, m_minScale);\n        },\n        enumerable: true\n    },\n    'minScale': {\n        get: function () {\n            return m_minScale;\n        },\n        set: function (scale) {\n            m_minScale = Math.min(+scale > 0 ? scale : 1, m_maxScale);\n        },\n        enumerable: true\n    }\n});\n\nmodule.exports = SVGDrawing;\n\n/***/ }),\n/* 71 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(26); // require Promise polyfill for IE\n\n/**\n * The global object that is exposed by the Cortona3D Solo library.\n * \n * @global\n * @implements module:solo\n * @implements external:EventEmitter\n * @tutorial event-handling\n */\n\nvar Cortona3DSolo = __webpack_require__(2);\n\nif (!window.Cortona3DSolo) window.Cortona3DSolo = Cortona3DSolo;\n\nCortona3DSolo.setMaxListeners(0); // Infinity\n\n/**\n * @memberof module:solo\n * @member {string} baseURL The relative base URL of a Cortona3D Solo library.\n * @since 1.4.0\n */\n\nvar m_baseUrl = Cortona3DSolo.baseUrl || Cortona3DSolo.baseURL || (document.currentScript && document.currentScript.src.replace(/[^\\\\\\/]+$/, ''));\n\nObject.defineProperty(Cortona3DSolo, 'baseURL', {\n    get: function () {\n        return m_baseUrl;\n    },\n    set: function (value) {\n        m_baseUrl = value;\n    },\n    enumerable: true\n});\n\nObject.defineProperty(Cortona3DSolo, 'baseUrl', {\n    get: function () {\n        return m_baseUrl;\n    },\n    set: function (value) {\n        m_baseUrl = value;\n    },\n    enumerable: true\n});\n\nvar util = __webpack_require__(0);\nvar expand = util.expand;\nvar b64toBlob = __webpack_require__(27);\n\nvar usedModules = __webpack_require__(1).usedModules;\n\nconsole.log('Cortona3D Solo v' + \"1.6.6\");\n\nmodule.exports = expand(Cortona3DSolo, {\n    /**\n     * _Asynchronous method_. Enables the use of functional modules in API.\n     * \n     * @memberof module:solo\n     * @async\n     * @param {string} moduleName -\n     * - `\"core\"` - the internal module to manage the 3D illustration without usage of the Cortona3D Viewer component. See namespaces {@link module:solo.core core}, {@link module:solo.app app};\n     * - `\"drawing\"` - the internal module to manage the 2D illustration. See namespace {@link module:solo.app.drawing app.drawing};\n     * - `\"touch\"` - the internal module to work with pointer events in the 3D window. See namespace {@link module:solo.touch touch};\n     * - `\"skin\"` - the internal module that provide UI framework. See namespace {@link module:solo.skin skin};\n     * - `\"require\"` - the internal module implements the functionality of the {@link https://github.com/amdjs/amdjs-api/blob/master/AMD.md AMD} module loader similar to {@link http://requirejs.org/ RequireJS}. Adds three global functions:\n     *     - `require()`\n     *     - `requirejs()`\n     *     - `define()`\n     * - The name of the external add-on that is used to extend the functionality of the standard API and use the format of the AMD module. It is required to use external or built-in loader of AMD modules.\n     * @param {object} [options] - Module options\n     * @param {string} options.src - The src property specifies the URL of the external file:\n     * - companion file *.interactivity.xml*\n     * - VRML file *.wrl*\n     * - compressed (zip) package file containing the RapidAuthor publication *.cortona3d* *.vmb* *.zip*\n     * - SVG file *.svg* \n     * - image file *.png* *.jpg* *.gif*\n     * @param {number} options.features - A features bitmask of the Cortona3D Solo instance. See the {@link module:solo.app app} properties.\n     * @param {HTMLElement} options.element \n     * - The `<canvas>` element for the `\"core\"` module\n     * - The `<svg>` element for the `\"drawing\"` module\n     * @param {string} options.prefixURL -  The URL prefix to loading the Corona3D Solo files.\n     * It is preferable to use {@link module:solo.baseURL solo.baseURL} property instead of this option.\n     * @param {number} options.totalMemory=64 - Total memory used by the Cortona3D Solo core in MB.\n     * @param {HexColorString} options.hotspotHoverColor=#FF0000 - The color to the hovered hotspot area on the 2D illustration.\n     * @param {HexColorString} options.hotspotSelectionColor=#FF0000 - The color to the selected hotspot area on the 2D illustration.\n     * @param {HexColorString} options.ipcHoverColor=#808080 - The color to the hovered 3D object in the interactive parts catalog.\n     * @param {HexColorString} options.ipcSelectionColor=#FFD133 - The color to the selected 3D object in the interactive parts catalog.\n     * @returns {Promise<object>} `Promise` whose fulfillment handler receives an object with exports and options of the loaded functional module\n     * @see external:Promise\n     */\n    use: function (moduleName, options) {\n        if (moduleName === 'Cortona3DSoloSkin') {\n            moduleName = 'skin';\n        } else if (moduleName === 'Cortona3DSoloTouch') {\n            moduleName = 'touch';\n        }\n        var usedModule = usedModules[moduleName],\n            usedAddon = usedModules.addons[moduleName];\n        switch (moduleName) {\n            case 'core':\n                if (!usedModule) {\n                    return new Promise(function (resolve, reject) {\n                        usedModules[moduleName] = usedModule = {\n                            config: expand({}, options)\n                        };\n                        Cortona3DSolo.core = __webpack_require__(33).configure(options);\n                        expand(Cortona3DSolo.app, __webpack_require__(28).app);\n                        expand(Cortona3DSolo.app, __webpack_require__(30).app);\n                        expand(Cortona3DSolo.app, __webpack_require__(29).app);\n                        expand(Cortona3DSolo.app, __webpack_require__(31).app);\n                        expand(Cortona3DSolo.app, __webpack_require__(32).app);\n                        Cortona3DSolo.once(\"core.onRuntimeInitialized\", function () {\n                            resolve(usedModule);\n                        });\n                        Cortona3DSolo.once(\"core.onError\", reject);\n                    });\n                }\n                break;\n            case 'drawing':\n                if (!usedModule) {\n                    usedModules[moduleName] = usedModule = {\n                        config: expand({}, options)\n                    };\n                    expand(Cortona3DSolo.app, __webpack_require__(7).configure(options));\n                }\n                break;\n            case 'touch':\n                if (!usedModule) {\n                    usedModules[moduleName] = usedModule = {\n                        config: expand({}, options)\n                    };\n                    expand(Cortona3DSolo, __webpack_require__(41).configure(options));\n                }\n                break;\n            case 'skin':\n                if (!usedModule) {\n                    Cortona3DSolo.use('require');\n                    usedModules[moduleName] = usedModule = {\n                        config: expand({}, options)\n                    };\n                    expand(Cortona3DSolo, __webpack_require__(40).configure(options));\n                }\n                break;\n            case 'require':\n                if (!usedModule) {\n                    if (util.detectAMDLoader()) {\n                        console.log('The AMD loader is already on the page.');\n                    } else {\n                        expand(window, __webpack_require__(34));\n                    }\n                    usedModules[moduleName] = usedModule = {\n                        config: expand({}, options) // require global config\n                    };\n                    window.require.onError = function () {};\n                    window.require.config(usedModule.config);\n                    __webpack_require__(38);\n                    __webpack_require__(36);\n                    __webpack_require__(35);\n                    __webpack_require__(37);\n                    __webpack_require__(39);\n                }\n                break;\n            default: // addon\n                if (usedAddon) {\n                    return Promise.resolve(usedAddon);\n                } else {\n                    return Cortona3DSolo\n                        .use('require')\n                        .then(function () {\n                            // module options\n                            var localOptions = expand({}, options),\n                                config = usedModules.require && usedModules.require.config || {},\n                                prefixURL = localOptions.prefixURL || Cortona3DSolo.baseURL;\n\n                            usedModules.addons[moduleName] = usedAddon = {\n                                config: localOptions\n                            };\n\n                            if (!prefixURL) {\n                                if (usedModules.core) {\n                                    if (typeof Module.locateFile === 'function') {\n                                        prefixURL = Module.locateFile('');\n                                    } else if (Module.memoryInitializerPrefixURL) {\n                                        prefixURL = Module.memoryInitializerPrefixURL;\n                                    }\n                                }\n                            }\n\n                            config = expand({}, config, {\n                                context: 'Cortona3DSolo',\n                                baseUrl: prefixURL,\n                                config: {}\n                            });\n\n                            config.config[moduleName] = localOptions;\n\n                            return Cortona3DSolo.app.util.requirePromise([moduleName], window.requirejs.config(config))\n                                .then(function (exports) {\n                                    usedAddon.exports = exports;\n                                    return usedAddon;\n                                });\n                        });\n                }\n        }\n        return Promise.resolve(usedModule);\n    },\n    app: expand(__webpack_require__(1).app, {\n        util: {\n            /**\n             * A helper method.\n             * Convert DOM XML tree to JavaScript object:\n             * ```xml\n             * <node att1=\"value1\" att2=\"value2\">\n             *      <foo>Foo</foo>\n             *      <bar>\n             *          <![CDATA[Bar]]>\n             *      </bar>\n             *      <items>\n             *          <item>i1</item>\n             *          <item>i2</item>\n             *          <item>i3</item>\n             *          <item>i4</item>\n             *      </items>\n             * </node>\n             * ```\n             * ```\n             * {\n             *  node: {\n             *      \"@name\": \"node\",\n             *      \"@attributes\": {\n             *          att1: \"value1\",\n             *          att2: \"value2\"\n             *      },\n             *      \"@children\": [\n             *          { \"@name\": \"foo\", \"#text\": \"Foo\" },\n             *          { \"@name\": \"bar\", \"#text\": \"Bar\" },\n             *          { \"@name\": \"items\", ... }\n             *      ],\n             *      foo: { \"@name\": \"foo\", \"#text\": \"Foo\" },\n             *      bar: { \"@name\": \"bar\", \"#text\": \"Bar\" },\n             *      items: {\n             *          \"@name\": \"items\",\n             *          \"@children\": [ ... ],\n             *          item: [\n             *              { \"@name\": \"item\", \"#text\": \"i1\" },\n             *              { \"@name\": \"item\", \"#text\": \"i2\" },\n             *              { \"@name\": \"item\", \"#text\": \"i3\" },\n             *              { \"@name\": \"item\", \"#text\": \"i4\" }\n             *          ]\n             *      }\n             *  }\n             * }\n             * ```\n             * @memberof module:solo.app.util\n             * @method\n             * @param {Document} xml The XML document\n             * @returns {XMLNodeData} The JavaScript object\n             */\n            xmlToJSON: __webpack_require__(15),\n            /**\n             * Loads a resource file from URL using XMLHttpRequest\n             * \n             * @async\n             * @memberof module:solo.app.util\n             * @method\n             * @param {string} url An URL to load the resource\n             * @param {string} [overrideMimeType]\n             * @param {string} [responseType]\n             * @returns {Promise<XMLHttpRequest>} `Promise` whose fulfillment handler receives an XMLHttpRequest object when the requested resource has successfully been loaded.\n             * @see {@link https://developer.mozilla.org/ru/docs/Web/API/XMLHttpRequest XMLHttpRequest}\n             * @see external:Promise\n             * @fires \"app.onProgress\"\n             * @since 1.4.3\n             */\n            loadResource: util.loadResource,\n            /**\n             * Converts the path specified by the first argument to the absolute path relative to the base path specified by the second argument.\n             * If the second argument is omitted, the absolute path is generated relative to the URL of the loaded HTML document.\n             * \n             * @memberof module:solo.app.util\n             * @method\n             * @param {string} resourceUrl\n             * @param {string} [baseUrl]\n             * @return {string} \n             * @since 1.4.3\n             */\n            toUrl: function (resourceUrl, baseUrl) {\n                var url = (typeof resourceUrl !== 'string') ? '' : resourceUrl;\n                if (url.match(/^[a-z]+\\:\\/\\//i)) {\n                    return url; // absolute url\n                } else if (url.match(/^\\/\\//)) {\n                    return 'http:' + url; // absolute url\n                } else if (url.match(/^[a-z]+\\:/i)) {\n                    return url; // data URI\n                }\n\n                var a = document.createElement('a');\n                if (url[0] === '/') {\n                    a.href = util.getBaseURL(baseUrl);\n                    a.href = a.protocol + '//' + a.host + url;\n                } else {\n                    a.href = util.getBaseURL(baseUrl) + url;\n                }\n                url = a.href;\n                if (url.match(/^file\\:\\/\\//i)) {\n                    url = decodeURI(url);\n                }\n                return url.replace(/(\\/\\.\\/|\\/[^/]+\\/\\.\\.\\/)/g, '/').replace(/([^:/])\\/{2,}/g, '$1/');\n            },\n            /**\n             * Converts base64-encoded data to a Blob object.\n             * \n             * @async\n             * @memberof module:solo.app.util\n             * @method\n             * @param {string} b64Data A string containing base64 encoded data or data URL\n             * @param {string} [contentType] The content type to assign to the new Blob\n             * @param {number} [sliceSize=1048576]\n             * @returns {Promise<Blob>} `Promise` whose fulfillment handler receives a Blob object when base64-encoded data has successfully been decoded\n             * @see external:Blob\n             * @see external:Promise\n             * @since 1.5.6\n             */\n            b64toBlob: b64toBlob,\n\n            /** \n             * The method defines a new class that can be inherited from parent class.\n             *\n             * @memberof module:solo.app.util\n             * @method\n             * @param parent {?Function} The parent class of the new class or null\n             * @param ctor {Function} The constructor of the new class\n             * @param methods {Object} An object literal containing the methods of the new class\n             * @return {Function} The constructor function of the new class\n             * @since 1.6.0\n             */\n            defineClass: util.defineClass,\n\n            /**\n             * Wrap `requirejs()` call with Promise.\n             * \n             * @async\n             * @memberof module:solo.app.util\n             * @method\n             * @param {string} name The name of module to load\n             * @param {function} [requirejs=window.requirejs] An `requirejs` function\n             * @returns {Promise<exports>} `Promise` whose fulfillment handler receives the export object of a successfully loaded AMD module\n             * @see external:Promise\n             * @since 1.6.0\n             */\n            requirePromise: function (name, req) {\n                return new Promise(function (resolve, reject) {\n                    req = req || window.requirejs;\n                    Promise.all([req([name], resolve, reject)]).catch(function () {});\n                });\n            }\n        },\n        ui: {\n            /** \n             * Creates HTML element with given tag name, list of attributes and array of children.\n             *\n             * @memberof module:solo.app.ui\n             * @method\n             * @param {CSSSelector} name The name of the new element. Class and ID selectors can be used. If the element type name is omitted, `<div>` is created by default. \n             * @param {object} [options] The properties of the new element. \n             * @param {...*} [content] The contents of the new element. It can be plain text, HTMLElement or an array.\n             * @return {HTMLElement}\n             * @since 1.6.0\n             * @example\nvar h = Cortona3DSolo.app.ui.createElement;\n\nh('img#img-001.graphic', { src: 'image.png' }); \n// -> <img id=\"img-001\" class=\"graphic\" src=\"image.png\"/>\n\nh('span#msg', 'A text'); \n// -> <span id=\"msg\">A text</span>\n\nh('#bydefault', h('ul', [h('li', 'a'), h('li', 'b')]); \n// -> <div id=\"bydefault\"><ul><li>a</li><li>b</li></ul></div>\n             */\n            createElement: __webpack_require__(4).createElement,\n            /** \n             * Create HTML elements from string.\n             *\n             * @memberof module:solo.app.ui\n             * @method\n             * @param {string} syntax HTML string\n             * @return {HTMLElement[]}\n             * @since 1.6.0\n             * @example\nCortona3DSolo.app.ui.html('<img src=\"image.png\"/><span>A text</span>');\n// -> [ <img src=\"image.png\"/>, <span>A text</span> ]\n             */\n            html: __webpack_require__(4).createElementsFromHTML,\n            /**\n             * Returns a new instance of CSSObject.\n             *  \n             * @memberof module:solo.app.ui\n             * @method\n             * @param {object} [rules]\n             * @return {CSSObject}\n             * @since 1.6.0\n             * @example\nCortona3DSolo.app.ui.css({ body: { backgroundColor: 'red' }});\n// -> body { background-color: red; }\n            */\n            css: __webpack_require__(14),\n            /** \n             * Returns new instance of ColorObject.\n             * \n             * @memberof module:solo.app.ui\n             * @method\n             * @param {string|object|number} [color] \n             * - HTML hex string\n             * - RGB object\n             * - HSL object\n             * - an 32-bit integer specifies RGB color in the following hexadecimal form `0x00BBGGRR`.\n             * @return {ColorObject}\n             * @since 1.6.0\n             * @example\nvar color = Cortona3DSolo.app.ui.color;\ncolor('#FF8800');\ncolor('#F80');\ncolor({r: 255, g: 136, b: 0});\ncolor({h: 32, s: 100, l: 50});\ncolor(0x0088FF);\n             */\n            color: __webpack_require__(13)\n        }\n    }),\n    /**\n     * A helper method.\n     * Recursively combines the properties of objects. If a property with the name already exists, it will be overwritten.\n     * @memberof module:solo\n     * @method\n     * @param {objеct} obj Destination object\n     * @param {...objеct} [src] Source objects\n     * @returns {object} Destination object\n     */\n    expand: expand,\n    /**\n     * Dispatches the event by emit the event object into event flow from the main object {@link Cortona3DSolo} or by calling appropriate hook method.\n     * @memberof module:solo\n     * @param {string} eventName Event name\n     * @param {...any} [arg] Arguments of the event\n     * @since 1.4.0\n     */\n    dispatch: function (eventName, arg) {\n        if (false) {\n            if (eventName.indexOf(\"AnimationFrame\") === -1) {\n                console.log(\"EVENT(\" + eventName + \"): \", Array.prototype.slice.call(arguments, 1));\n            }\n        }\n        Cortona3DSolo.emit.apply(Cortona3DSolo, arguments);\n        var ns = eventName.split('.');\n        var method = ns.pop();\n        var context = Cortona3DSolo;\n        while (ns.length && context) {\n            context = context[ns.shift()];\n        }\n        if (context && typeof context[method] == 'function') {\n            switch (arguments.length) {\n                case 1:\n                    context[method].call(Cortona3DSolo);\n                    break;\n                case 2:\n                    context[method].call(Cortona3DSolo, arguments[1]);\n                    break;\n                case 3:\n                    context[method].call(Cortona3DSolo, arguments[1], arguments[2]);\n                    break;\n                case 4:\n                    context[method].call(Cortona3DSolo, arguments[1], arguments[2], arguments[3]);\n                    break;\n                case 5:\n                    context[method].call(Cortona3DSolo, arguments[1], arguments[2], arguments[3], arguments[3]);\n                    break;\n                default:\n                    // slow method\n                    context[method].apply(Cortona3DSolo, Array.prototype.slice.call(arguments, 1));\n            }\n        }\n    }\n});\n\n/**\n * Gets a semantic version string of the library.\n * \n * @static\n * @member {SemVer} version\n * @memberof module:solo\n * @since 1.5.0\n * @see http://semver.org/\n */\n\nObject.defineProperty(Cortona3DSolo, 'version', {\n    get: function () {\n        return \"1.6.6\";\n    },\n    enumerable: true\n});\n\n/**\n * The EventEmitter class in the event standard module Node.js.\n * @external EventEmitter\n * @see https://nodejs.org/api/events.html#events_class_eventemitter\n */\n\n/**\n * The Promise object represents the eventual completion (or failure) of an asynchronous operation, and its resulting value.\n * @external Promise\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\n */\n\n/**\n * The HTMLTableRowElement interface provides special properties and methods for manipulating the layout and presentation of rows in an HTML table.\n * @external HTMLTableRowElement\n * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableRowElement\n */\n\n/**\n * The HTMLTableElement interface provides special properties and methods for manipulating the layout and presentation of tables in an HTML document.\n * @external HTMLTableElement\n * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableElement\n */\n\n/**\n * The HTMLImageElement interface provides special properties and methods  for manipulating the layout and presentation of <img> elements.\n * @external HTMLImageElement \n * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement \n */\n\n/**\n * The HTMLCanvasElement interface provides properties and methods for manipulating the layout and presentation of canvas elements.\n * @external HTMLCanvasElement \n * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement \n */\n\n/**\n * The URL interface represents an object providing static methods used for creating object URLs.\n * @external URL \n * @see https://developer.mozilla.org/en-US/docs/Web/API/URL\n */\n\n/**\n * Module is a global JavaScript object with attributes that Emscripten-generated code calls at various points in its execution.\n * @external Module\n * @see http://kripken.github.io/emscripten-site/docs/api_reference/module.html#module-object\n */\n\n/**\n * A Blob object represents a file-like object of immutable, raw data.\n * @external Blob \n * @see https://developer.mozilla.org/en-US/docs/Web/API/Blob\n */\n\n/***/ }),\n/* 72 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar util = __webpack_require__(0);\r\n\r\nvar EventEmitter = __webpack_require__(10).EventEmitter;\r\n\r\nvar createElement = __webpack_require__(4).createElement,\r\n    html = __webpack_require__(4).createElementsFromHTML,\r\n    css = __webpack_require__(14),\r\n    millicolor = __webpack_require__(13);\r\n\r\n// NodeList.prototype.forEach polyfill\r\nif (window.NodeList && !NodeList.prototype.forEach) {\r\n    NodeList.prototype.forEach = Array.prototype.forEach;\r\n}\r\n\r\n// Source: https://github.com/jserz/js_piece/blob/master/DOM/ParentNode/append()/append().md\r\n(function (arr) {\r\n    arr.forEach(function (item) {\r\n        if (item.hasOwnProperty('append')) {\r\n            return;\r\n        }\r\n        Object.defineProperty(item, 'append', {\r\n            configurable: true,\r\n            enumerable: true,\r\n            writable: true,\r\n            value: function append() {\r\n                var argArr = Array.prototype.slice.call(arguments),\r\n                    docFrag = document.createDocumentFragment();\r\n\r\n                argArr.forEach(function (argItem) {\r\n                    var isNode = argItem instanceof Node;\r\n                    docFrag.appendChild(isNode ? argItem : document.createTextNode(String(argItem)));\r\n                });\r\n\r\n                this.appendChild(docFrag);\r\n            }\r\n        });\r\n    });\r\n})([Element.prototype, Document.prototype, DocumentFragment.prototype]);\r\n\r\nElement.prototype.remove = function () {\r\n    Array.prototype.slice.call(arguments).forEach(function (el) {\r\n        this.removeChild(el);\r\n    }, this);\r\n};\r\n\r\nfunction toUISkinKey(name) {\r\n    return name.toLowerCase().replace(/\\W/g, '');\r\n}\r\n\r\nfunction toArray(arg, from) {\r\n    if (util.isNumber(from)) {\r\n        return Array.prototype.slice.call(arg, from);\r\n    }\r\n    return Array.prototype.slice.call(arg);\r\n}\r\n\r\nfunction createTag(tag, options, content) {\r\n    var attr = options;\r\n\r\n    if (util.isString(options)) {\r\n        tag += options;\r\n        attr = {};\r\n    }\r\n    return createElement(tag, attr, toArray(arguments, 2));\r\n}\r\n\r\nvar UISkinElement = util.defineClass(EventEmitter,\r\n    /**\r\n     * @classdesc The class that provides the base interface for all UI objects.\r\n     * @hideconstructor\r\n     * @constructs\r\n     * @implements {external:EventEmitter}\r\n     */\r\n    function () {\r\n        this.setMaxListeners(0); // Infinity\r\n    },\r\n    /** \r\n     * @lends UISkinElement.prototype \r\n     */\r\n    {\r\n        /**\r\n         * The root node of the object.\r\n         * \r\n         * @abstract\r\n         * @member {HTMLElement} $el \r\n         * @memberof UISkinElement\r\n         */\r\n        emit: function (name) {\r\n            if (false) {\r\n                console.log('EVENT: ', Array.prototype.slice.call(arguments), this);\r\n            }\r\n            EventEmitter.prototype.emit.apply(this, arguments);\r\n        },\r\n        /**\r\n         * Inserts a set of {@link UISkinComponent} objects, `Node` objects or `DOMString` objects \r\n         * after the last child of the root node of the object.\r\n         * \r\n         * @param {...(UISkinComponent|HTMLElement|string)} child\r\n         */\r\n        append: function () {\r\n            if (this.$el) {\r\n                Element.prototype.append.apply(this.$el,\r\n                    Array.prototype.slice.call(arguments).map(function (arg) {\r\n                        if (arg instanceof UISkinComponent) {\r\n                            return arg.$el || '';\r\n                        }\r\n                        return arg || '';\r\n                    })\r\n                );\r\n            }\r\n        },\r\n        /**\r\n         * Removes a set of {@link UISkinComponent} objects or `Node` objects from the DOM.\r\n         * The string argument is treated as a CSS selector that defines the nodes to be removed from the DOM. \r\n         * \r\n         * If the argument is omitted, the root node of the object itself is removed from the DOM.\r\n         * \r\n         * @param {...(UISkinComponent|HTMLElement|CSSSelector)} [child]\r\n         */\r\n        remove: function () {\r\n            if (!arguments.length) {\r\n                if (this instanceof UISkinComponent) {\r\n                    if (this.$el) {\r\n                        this.$el.parentNode.removeChild(this.$el);\r\n                    }\r\n                }\r\n            } else {\r\n                Array.prototype.slice.call(arguments).forEach(function (el) {\r\n                    if (typeof el === 'string' && this.$el) {\r\n                        el = this.$el.querySelectorAll(el);\r\n                        this.remove.apply(this, Array.prototype.slice.call(el));\r\n                        return;\r\n                    } else if (el instanceof UISkinComponent) {\r\n                        el = el.$el;\r\n                    }\r\n                    if (el && el.parentNode) {\r\n                        el.parentNode.removeChild(el);\r\n                    }\r\n                }, this);\r\n            }\r\n        }\r\n    }\r\n);\r\n\r\nvar UISkinComponent = util.defineClass(UISkinElement,\r\n    /**\r\n     * @classdesc The class that provides an interface for the UI component object.\r\n     * @hideconstructor\r\n     * @constructs\r\n     * @implements {UISkinElement}\r\n     */\r\n    function () {\r\n        UISkinElement.call(this);\r\n    },\r\n    /** \r\n     * @lends UISkinComponent.prototype \r\n     */\r\n    {\r\n        /**\r\n         * Assigns a DOM node to the component instance.\r\n         * \r\n         * @memberof UISkinComponent.prototype \r\n         * @method\r\n         * @param {HTMLElement} element\r\n         * @returns {UISkinComponent} This object itself\r\n         * @example \r\ndefine(function (require, exports, module) {\r\n    module.exports = function (skin, options, solo) {\r\n        var element = skin.createElement('span', options.text);\r\n        // \"this\" is UISkinComponent instance \r\n        return this.exports(element); \r\n    }\r\n});\r\n         */\r\n        exports: function (element, props) {\r\n            if (element) {\r\n                Object.defineProperties(this, {\r\n                    /**\r\n                     * The root node of the component.\r\n                     * \r\n                     * @member {HTMLElement} $el\r\n                     * @readonly\r\n                     * @memberof UISkinComponent\r\n                     */\r\n                    '$el': {\r\n                        value: element\r\n                    },\r\n                    'element': {\r\n                        value: element\r\n                    }\r\n                });\r\n                if (element.classList) {\r\n                    /**\r\n                     * Reference to the `classList` property of the root node.\r\n                     * \r\n                     * @member {DOMTokenList} classList\r\n                     * @readonly\r\n                     * @memberof UISkinComponent\r\n                     */\r\n                    Object.defineProperty(this, 'classList', {\r\n                        value: element.classList\r\n                    });\r\n                }\r\n            }\r\n            if (props) {\r\n                for (var key in props) {\r\n                    if (props.hasOwnProperty(key)) {\r\n                        switch (typeof props[key]) {\r\n                            case 'function':\r\n                                Object.defineProperty(this, key, {\r\n                                    configurable: true,\r\n                                    enumerable: true,\r\n                                    writable: true,\r\n                                    value: props[key]\r\n                                });\r\n                                break;\r\n                            default:\r\n                                Object.defineProperty(this, key, props[key]);\r\n\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return this;\r\n        }\r\n    }\r\n);\r\n\r\nvar UISkinController = util.defineClass(UISkinElement,\r\n    /**\r\n     * @classdesc The class that provides an interface for the UI controller object.\r\n     * \r\n     * The UI controller object is linked to a box area in the HTML layout where UI elements will be added, which is called the skin area.\r\n     * \r\n     * @hideconstructor\r\n     * @constructs\r\n     * @implements {UISkinElement}\r\n     */\r\n    function (name, baseElement) {\r\n        UISkinElement.call(this);\r\n\r\n        this.name = name;\r\n\r\n        var rootNode = document.body;\r\n        if (baseElement) {\r\n            rootNode = baseElement;\r\n        } else if (Cortona3DSolo.core && Cortona3DSolo.core.canvas) {\r\n            rootNode = Cortona3DSolo.core.canvas.parentNode;\r\n        } else if (Cortona3DSolo.drawing && Cortona3DSolo.drawing.svg) {\r\n            rootNode = Cortona3DSolo.drawing.svg.parentNode;\r\n        }\r\n\r\n        var element = rootNode.querySelector('.skin-holder');\r\n\r\n        if (!element || element.parentNode !== rootNode) {\r\n            element = (function (div) {\r\n                rootNode.insertBefore(div, rootNode.firstChild).className = 'skin-holder';\r\n                return div;\r\n            })(document.createElement('div'));\r\n        }\r\n\r\n        element.classList.add('skin-holder-' + toUISkinKey(this.name));\r\n\r\n        Object.defineProperties(this, {\r\n            /**\r\n             * The root node of the skin area.\r\n             * \r\n             * @member {HTMLElement} $el\r\n             * @readonly\r\n             * @memberof UISkinController\r\n             */\r\n            '$el': {\r\n                value: element\r\n            },\r\n            'element': {\r\n                value: element\r\n            },\r\n            /**\r\n             * Reference to the `classList` property of the root node.\r\n             * \r\n             * @member {DOMTokenList} classList\r\n             * @readonly\r\n             * @memberof UISkinController\r\n             */\r\n            'classList': {\r\n                value: element.classList\r\n            }\r\n        });\r\n    },\r\n    /** \r\n     * @lends UISkinController.prototype \r\n     */\r\n    {\r\n        /**\r\n         * Creates an instance of the component as needed and appends it to the skin area root node if the component is an object of type {@link UISkinComponent} or HTMLElement.\r\n         * \r\n         * The argument can be:\r\n         * - a factory function of the component - {@link UISkinComponentFactory}\r\n         * - the instance of the component - {@link UISkinComponent}\r\n         * - an HTML node\r\n         * - a string with the module name of the component\r\n         * - an object with two properties `component` and `option`\r\n         * - a Promise object that returns any object of the types listed here\r\n         * - an array containing any object of the types listed here\r\n         * \r\n         * If an array is used as an argument, the return value is an array of created components.\r\n         * \r\n         * If an asynchronous load is required when creating a component instance, \r\n         * i.e. a string with the name of the component module or a Promise object is used, \r\n         * the Promise object is returned with the result.\r\n         * \r\n         * @param {(UISkinComponent|UISkinComponentFactory|HTMLElement|string|object|Promise|Array)} components \r\n         * @param {object} [options] An options object that apply to factory \r\n         * @returns {UISkinComponent|Promise.<UISkinComponent>|HTMLElement|Array}\r\n         * @example <caption>HTML element</caption>\r\nvar skin = solo.skin.create('app');\r\nskin.render(skin.create('span', 'A message')); // -> HTMLElement\r\n         * @example <caption>Component module</caption>\r\nskin.render('components/wait', { type: 'win8' }); // -> Promise.<UISkinComponent>\r\n         * @example <caption>Component factory function</caption>\r\nskin.render(function (skin, options, solo) {\r\n    return this.exports(skin.create('span', options.message || ''));\r\n}); // -> UISkinComponent\r\n         * @example <caption>A Promise object that returns the component factory function</caption>\r\nskin.render(solo.skin.require('components/wait'), { type: 'win8' }); // -> Promise.<UISkinComponent>\r\n         * @example <caption>A Promise object that returns the component instance</caption>\r\nskin.render(skin.use('components/wait', { type: 'win8' })); // -> Promise.<UISkinComponent>\r\n         * @example <caption>An object</caption>\r\nskin.render({\r\n    component: require('components/wait'),\r\n    options: {\r\n        type: 'win8'\r\n    }\r\n}, options); // -> UISkinComponent\r\n         * @example <caption>An array</caption>\r\nskin.render([ ... ], options); // -> UISkinComponent[]\r\n         * @example <caption>An array with the asynchronous loading of elements</caption>\r\nskin.render([\r\n    skin.create('h3', 'Component sample'), \r\n    'components/wait'\r\n], { type: 'win8' }); // -> Promise.<[HTMLElement, UISkinComponent]>\r\n         */\r\n        render: function (components, options) {\r\n            var self = this,\r\n                component;\r\n            if (components) {\r\n                if (util.isString(components)) {\r\n                    return this.render(this.use(components, options), options);\r\n                } else if (util.isFunction(components)) {\r\n                    component = this.create(components, options);\r\n                    return this.render(component, options);\r\n                } else if (util.isObject(components)) {\r\n                    if ((components instanceof UISkinComponent) || (components instanceof Node)) {\r\n                        this.append(components);\r\n                        return components;\r\n                    } else if (components instanceof Promise) {\r\n                        return components.then(function (component) {\r\n                            return self.render(component, options);\r\n                        });\r\n                    } else if (components.forEach) {\r\n                        res = components.map(function (item) {\r\n                            return this.render(item, options);\r\n                        }, this);\r\n                        return res.some(function (component) {\r\n                            return component instanceof Promise;\r\n                        }) ? Promise.all(res) : res;\r\n                    } else if (util.isObject(components.rules) && util.isFunction(components.render)) {\r\n                        components.render();\r\n                        return components;\r\n                    } else if (components.component) {\r\n                        return this.render(components.component, Cortona3DSolo.expand(components.options || {}, options || {}));\r\n                    }\r\n                }\r\n            }\r\n            return components;\r\n        },\r\n        /**\r\n         * @private\r\n         */\r\n        register: function (factory, options) {\r\n            return this.create(factory, options);\r\n        },\r\n        /**\r\n         * Creates an instance of the component.\r\n         * \r\n         * Loads the module with the factory function, if necessary, \r\n         * performs the factory function of the component and returns the result.\r\n         * \r\n         * @async\r\n         * @param {string|UISkinComponentFactory} name \r\n         * - a string with the module name of the component\r\n         * - factory function of the component - {@link UISkinComponentFactory}\r\n         * @param {*} options \r\n         * @returns {Promise.<UISkinComponent>} `Promise` whose fulfillment handler receives an {@link UISkinComponent} instance of the requested component.\r\n         */\r\n        use: function (name, options) {\r\n            var self = this;\r\n\r\n            if (util.isString(name)) {\r\n                return Cortona3DSolo.skin.require(name)\r\n                    .then(function (factory) {\r\n                        return self.create(factory, options);\r\n                    });\r\n            }\r\n\r\n            if (util.isFunction(name)) {\r\n                // use(factory, options)\r\n                return Promise.resolve(this.create(name, options));\r\n            }\r\n\r\n            return Promise.reject(new Error('The first argument in use() must be string or factory function.'));\r\n        },\r\n        /**\r\n         * Shows the HTML element.\r\n         * If the argument is omitted, shows the contents of the skin area itself.\r\n         * \r\n         * @param {HTMLElement|CSSSelector} [el] HTML node or CSS selector\r\n         */\r\n        show: function (el) {\r\n            if (util.isString(el)) {\r\n                el = document.querySelector(el);\r\n            } else if (util.isUndefined(el)) {\r\n                el = this.$el;\r\n            }\r\n            if (el) {\r\n                el.style.visibility = 'visible';\r\n                el.style.display = '';\r\n            }\r\n            return el;\r\n        },\r\n        /**\r\n         * Hides the HTML element.\r\n         * If the argument is omitted, hides the contents of the skin area itself.\r\n         * \r\n         * @param {HTMLElement|CSSSelector} [el] HTML node or CSS selector\r\n         * @param {boolean} [force=false] \r\n         * - `false` - `style.visibility='hidden'` is used\r\n         * - `true` - `style.dispaly='none'` is used\r\n         */\r\n        hide: function (el, force) {\r\n            if (util.isString(el)) {\r\n                el = document.querySelector(el);\r\n            } else if (util.isUndefined(el)) {\r\n                el = this.$el;\r\n                force = true;\r\n            }\r\n            if (el) {\r\n                el.style.visibility = 'hidden';\r\n                if (force) {\r\n                    el.style.display = 'none';\r\n                }\r\n            }\r\n            return el;\r\n        },\r\n        /**\r\n         * Toggles visibility of the HTML element.\r\n         * If the argument is omitted, toggles visibility of the skin area itself.\r\n         * \r\n         * @param {HTMLElement|CSSSelector} [el] HTML node or CSS selector\r\n         * @param {boolean} [visibility] \r\n         * @returns {boolean}\r\n         */\r\n        toggle: function (el, visibility) {\r\n            if (util.isString(el)) {\r\n                el = document.querySelector(el);\r\n            } else if (typeof el === \"boolean\") {\r\n                el = this.$el;\r\n                visibility = el;\r\n            } else if (util.isUndefined(el)) {\r\n                el = this.$el;\r\n            }\r\n            if (el) {\r\n                if (util.isUndefined(visibility)) visibility = el.style.display === 'none';\r\n                el.style.display = visibility ? '' : 'none';\r\n                el.style.visibility = visibility ? 'visible' : 'hidden';\r\n            }\r\n            return visibility;\r\n        },\r\n        /**\r\n         * Clears contents of the HTML element.\r\n         * If the argument is omitted, the contents of the skin root node are cleared.\r\n         * \r\n         * @param {HTMLElement|CSSSelector} [el] HTML node or CSS selector\r\n         */\r\n        clear: function (el) {\r\n            if (util.isString(el)) {\r\n                el = document.querySelector(el);\r\n            } else if (util.isUndefined(el)) {\r\n                el = this.$el;\r\n            }\r\n            if (el) {\r\n                el.innerHTML = '';\r\n            }\r\n        },\r\n        /**\r\n         * Creates an HTML element or instance of a component.\r\n         * \r\n         * @param {string|UISkinComponentFactory} factory\r\n         * @param {object} [options] Contains properties needed to create a new HTML element or UISkinComponent object.\r\n         * @param {...*} [content] The contents of the new HTML element.\r\n         * @returns {HTMLElement|UISkinComponent}\r\n         * @see {@link module:solo.app.ui.createElement app.ui.createElement()}\r\n         * @example\r\nskin.create('span#msg', 'A message'); // -> HTMLElement\r\nskin.create(require('components/wait'), { type: 'win8' }); // -> UISkinComponent\r\n         */\r\n        create: function (factory, options) {\r\n            function isArray(o) { return util.isObject(o) && util.isFunction(o.forEach); }\r\n            function resolveUISkinComponent(child) {\r\n                if (isArray(child)) {\r\n                    return child.map(resolveUISkinComponent);\r\n                } else if (util.isObject(child) && (child instanceof UISkinComponent)) {\r\n                    return child.$el || '';\r\n                } else {\r\n                    return child;\r\n                }\r\n            }\r\n            if (util.isFunction(factory)) {\r\n                var component = new UISkinComponent(),\r\n                    res = factory.call(component, this, options || {}, Cortona3DSolo);\r\n                if (!util.isUndefined(res)) {\r\n                    component = res;\r\n                }\r\n                return component || {};\r\n            } else {\r\n                return createElement.apply(this, Array.prototype.slice.call(arguments).map(resolveUISkinComponent));\r\n            }\r\n        },\r\n        /**\r\n         * @private\r\n         * @param {object} options\r\n         * @param {...*} [content]\r\n         */\r\n        toolbar: function (options, content) {\r\n            var el = this.div.apply(this, arguments);\r\n            el.classList.add('skin-toolbar');\r\n            return el;\r\n        },\r\n        /**\r\n         * @private\r\n         * @param {object} options\r\n         * @param {...*} [content]\r\n         */\r\n        container: function (options, content) {\r\n            var el = this.div.apply(this, arguments);\r\n            el.classList.add('skin-container');\r\n            return el;\r\n        },\r\n        /**\r\n         * @private\r\n         * @param {object} options\r\n         * @param {...*} [content]\r\n         */\r\n        panel: function (options, content) {\r\n            var el = this.div.apply(this, arguments);\r\n            el.classList.add('skin-panel');\r\n            return el;\r\n        },\r\n        /**\r\n         * @private\r\n         * @param {object} options\r\n         * @param {...*} [content]\r\n         */\r\n        button: function (options, content) {\r\n            var el = createTag.apply(this, ['button'].concat(toArray(arguments)));\r\n            el.classList.add('skin-control');\r\n            return el;\r\n        },\r\n        /**\r\n         * @private\r\n         * @param {object} options\r\n         * @param {...*} [content]\r\n         */\r\n        buttonImg: function (options, content) {\r\n            var el = this.span.apply(this, arguments);\r\n            el.classList.add('skin-img-button');\r\n            return el;\r\n        },\r\n        /**\r\n         * @private\r\n         * @param {object} options\r\n         * @param {...*} [content]\r\n         */\r\n        input: function (options, content) {\r\n            var el = createTag.apply(this, ['input'].concat(toArray(arguments)));\r\n            el.classList.add('skin-control');\r\n            return el;\r\n        },\r\n        /**\r\n         * Creates an HTML element `<select>`\r\n         * @param {object} options The properties of the new element.\r\n         * @param {object[]} items An array of objects with the contents of `<select>` items.\r\n         * The object must contains properties:\r\n         * - `description` - the `<option>` contents\r\n         * - `value` - value of the attribute of the same name\r\n         * - `selected` - value of the attribute of the same name\r\n         * A string can be used as the content of an element `<option>` instead of an object.\r\n         */\r\n        select: function (options, items) {\r\n            var el = createTag.apply(this, ['select', options].concat(\r\n                items.map(function (option) {\r\n                    var o = option;\r\n                    if (util.isString(option)) {\r\n                        o = {\r\n                            description: option\r\n                        };\r\n                    }\r\n                    return this.create('option', {\r\n                        selected: o.selected,\r\n                        value: o.value\r\n                    }, o.description);\r\n                }, this)\r\n            ));\r\n            el.classList.add('skin-control');\r\n            return el;\r\n        },\r\n        /**\r\n         * @private\r\n         * @param {string} type \"ul\" or \"ol\"\r\n         * @param {object} options\r\n         * @param {object[]} items\r\n         */\r\n        list: function (type, options, items) {\r\n            if (type !== 'ul' && type !== 'ol') {\r\n                console.error('Type of list must be \"ol\" or \"ul\" only.');\r\n            }\r\n            var el = createTag.apply(this, [type, options].concat(\r\n                items.map(function (item) {\r\n                    return this.create('li', {}, item);\r\n                }, this)\r\n            ));\r\n            return el;\r\n        },\r\n        /**\r\n         * Creates the HTML `<ul>` element\r\n         * \r\n         * @param {object} options The properties of the new element.\r\n         * @param {object[]} items An array of objects to create the content of `<li>` elements. This can be a string or HTML element.\r\n         */\r\n        ul: function (options, items) {\r\n            return this.list('ul', options, items);\r\n        },\r\n        /**\r\n         * Creates the HTML `<ol>` element\r\n         * \r\n         * @param {object} options The properties of the new element.\r\n         * @param {object[]} items An array of objects to create the content of `<li>` elements. This can be a string or HTML element.\r\n         */\r\n        ol: function (options, items) {\r\n            return this.list('ol', options, items);\r\n        },\r\n        /**\r\n         * Creates the HTML `<dl>` element\r\n         * \r\n         * @param {object} options The properties of the new element.\r\n         * @param {object[]} items An array of objects with the contents of `<dl>` items.\r\n         * The object must contains properties:\r\n         * - `term` - the `<dt>` contents\r\n         * - `def` - the `<dd>` contents\r\n         */\r\n        dl: function (options, items) {\r\n            var self = this;\r\n            var el = createTag.apply(this, ['dl', options].concat(\r\n                items.reduce(function (a, item) {\r\n                    return a.concat(\r\n                        self.create('dt', {}, item.term),\r\n                        self.create('dd', {}, item.def)\r\n                    );\r\n                }, [])\r\n            ));\r\n            return el;\r\n        },\r\n        /**\r\n         * @private\r\n         * @param {object} options\r\n         * @param {...*} [content]\r\n         */\r\n        text: function (options, content) {\r\n            var el = this.span.apply(this, arguments);\r\n            el.classList.add('skin-text');\r\n            return el;\r\n        },\r\n        /**\r\n         * @private\r\n         * @param {object} options\r\n         * @param {...*} [content]\r\n         */\r\n        label: createTag.bind(this, 'label'),\r\n        /**\r\n         * @private\r\n         * @param {object} options\r\n         * @param {...*} [content]\r\n         */\r\n        p: createTag.bind(this, 'p'),\r\n        /**\r\n         * @private\r\n         * @param {object} options\r\n         * @param {...*} [content]\r\n         */\r\n        a: createTag.bind(this, 'a'),\r\n        /**\r\n         * @private\r\n         * @param {object} options\r\n         * @param {...*} [content]\r\n         */\r\n        span: createTag.bind(this, 'span'),\r\n        /**\r\n         * @private\r\n         * @param {object} options\r\n         * @param {...*} [content]\r\n         */\r\n        div: createTag.bind(this, 'div'),\r\n        /**\r\n         * Checks if the HTML element is hidden.\r\n         * \r\n         * @param {HTMLElement} node\r\n         * @returns {boolean}\r\n         */\r\n        isHidden: function (node) {\r\n            return !node.offsetWidth && !node.offsetHeight;\r\n        },\r\n        /**\r\n         * Checks if the HTML element is visible in the scroll area on the screen.\r\n         * \r\n         * @param {HTMLElement} node\r\n         * @param {boolean} [checkHorizontal=false] Checks also the offset on the horizontal axis.\r\n         * @returns {boolean}\r\n         */\r\n        isVisible: function (node, checkHorizontal) {\r\n            var nodeRect = node.getBoundingClientRect(),\r\n                thisRect = this.$el.getBoundingClientRect();\r\n            return (nodeRect.top >= thisRect.top && nodeRect.bottom <= thisRect.bottom) &&\r\n                (!checkHorizontal || (nodeRect.left >= thisRect.left && nodeRect.right <= thisRect.right));\r\n        },\r\n        createElement: createElement,\r\n        html: html,\r\n        css: css,\r\n        color: millicolor\r\n    }\r\n);\r\n\r\nmodule.exports = UISkinController;\r\n\r\n/**\r\n * A function that creates a new instance of a user interface component.\r\n * \r\n * @param {UISkinController} skin\r\n * @param {object} options\r\n * @param {Cortona3DSolo} solo\r\n * @typedef {function} UISkinComponentFactory\r\n * @this UISkinComponent\r\n * @example\r\nfunction (skin, options, solo) {\r\n    return this.exports(skin.create('#message', options.message | ''));\r\n}\r\n */\r\n\r\n/**\r\n * A CSS selector that directly match one element in a document, based on the type of element, class, or id.\r\n * \r\n * @typedef {string} CSSSelector\r\n * @example \r\nspan#ident.class-one.class-two\r\n */\r\n\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// Cortona3DSolo.js","// cortona3d/util.js\n\n/**\n * @module cortona3d/util\n */\n\nmodule.exports = {\n    extend: extend,\n    defineClass: defineClass,\n    expand: expand,\n    RGB: RGB,\n    fromHTMLColor: fromHTMLColor,\n    loadScript: loadScript,\n    loadStyleSheet: loadStyleSheet,\n    isFunction: isFunction,\n    isNumber: isNumber,\n    isString: isString,\n    isObject: isObject,\n    isUndefined: isUndefined,\n    detectAMDLoader: detectAMDLoader,\n    getBaseURL: getBaseURL,\n    loadResource: loadResource,\n    toggleClass: toggleClass\n};\n\n/*\n */\nfunction extend(f) {\n    function G() {}\n    G.prototype = f.prototype || f;\n    return new G();\n}\n\n/** \n * Utility function for defining a new class.\n *\n * @param parent {Function} the parent class of the new class or null\n * @param ctor {Function} the constructor of the new class\n * @param methods {Object} an object literal containing the methods of the new class\n * @return {Function} the constructor function of the new class\n */\nfunction defineClass(parent, ctor, methods) {\n    function Inheritance() {}\n    if (parent) {\n        Inheritance.prototype = parent.prototype;\n        ctor.prototype = new Inheritance();\n        ctor.prototype.constructor = ctor;\n        ctor.superClass = parent;\n    }\n    if (methods) {\n        for (var m in methods) {\n            if (methods.hasOwnProperty(m)) {\n                ctor.prototype[m] = methods[m];\n            }\n        }\n    }\n    return ctor;\n}\n\n/**\n * @param obj {Object}\n * @param [props, ...] {Object}\n */\nfunction expand(obj) {\n    for (var i = 1; i < arguments.length; i++) {\n        var props = arguments[i];\n        if (!isObject(props)) continue;\n        for (var key in props) {\n            if (props.hasOwnProperty(key)) {\n                if (key in obj) {\n                    if (isFunction(obj[key]) && isFunction(props[key])) {\n                        obj[key] = props[key];\n                    } else if (obj[key] instanceof Array && props[key] instanceof Array) {\n                        obj[key] = props[key];\n                    } else if (obj[key] instanceof Object && props[key] instanceof Object && props[key] !== {}) {\n                        expand(obj[key], props[key]);\n                    } else {\n                        obj[key] = props[key];\n                    }\n                } else {\n                    obj[key] = props[key];\n                }\n            }\n        }\n    }\n    return obj;\n}\n\n/**\n * @param r {Number} [0...255]\n * @param g {Number} [0...255]\n * @param b {Number} [0...255]\n * @return {Number} \n */\nfunction RGB(r, g, b) {\n    return (r + g * 256 + b * 65536);\n}\n\n/**\n * @param color {string} HTML HEX color\n * @return {Number} \n */\nfunction fromHTMLColor(color) {\n    if (isNumber(color)) return color;\n    if (isString(color) && color.match(/^#?([0-9A-F]{6})$/i)) {\n        return parseInt(\n            RegExp.$1.substr(4, 2) +\n            RegExp.$1.substr(2, 2) +\n            RegExp.$1.substr(0, 2), 16);\n    }\n    return 0;\n}\n\n/**\n * @callback requestCallback\n */\n\n/**\n * @param fileName {string} url for loading\n * @param [async] {boolean} async attribute\n * @param  resolve {requestCallback}\n * @returns {HTMLElement}\n * @memberof cortona3d\n */\nfunction loadScript(fileName, async, resolve, reject) {\n    var scriptElement = document.createElement('script');\n    scriptElement.type = 'text/javascript';\n    scriptElement.src = fileName;\n    if (!isUndefined(async)) {\n        scriptElement.async = !!async;\n    }\n    scriptElement.onload = resolve;\n    scriptElement.onerror = reject;\n    document.getElementsByTagName('head')[0].appendChild(scriptElement);\n    return scriptElement;\n}\n\n/**\n * @param fileName {string} url for loading\n * @param  resolve {requestCallback}\n * @returns {HTMLElement}\n * @memberof cortona3d\n */\nfunction loadStyleSheet(fileName, resolve, reject) {\n    var linkElement = document.createElement('link');\n    linkElement.href = fileName;\n    linkElement.rel = 'stylesheet';\n    linkElement.type = 'text/css';\n    linkElement.onload = resolve;\n    linkElement.onerror = reject;\n    document.getElementsByTagName('head')[0].appendChild(linkElement);\n    return linkElement;\n}\n\n/**\n * @param arg {object} \n * @return {boolean} \n */\nfunction isFunction(arg) {\n    return typeof arg === 'function';\n}\n\n/**\n * @param arg {object} \n * @return {boolean} \n */\nfunction isNumber(arg) {\n    return typeof arg === 'number';\n}\n\n/**\n * @param arg {object} \n * @return {boolean} \n */\nfunction isString(arg) {\n    return typeof arg === 'string';\n}\n\n/**\n * @param arg {object} \n * @return {boolean} \n * @memberof cortona3d\n */\nfunction isObject(arg) {\n    return typeof arg === 'object' && arg !== null;\n}\n\n/**\n * @param arg {object} \n * @return {boolean} \n */\nfunction isUndefined(arg) {\n    return arg === void 0;\n}\n\n/**\n * @return {boolean}\n */\nfunction detectAMDLoader() {\n    return isFunction(window.requirejs) && (isFunction(window.define) && window.define.amd);\n}\n\n/**\n * @param [url] {string} \n * @return {string} \n * @memberof cortona3d\n */\nfunction getBaseURL(url) {\n    if (typeof url !== 'string') {\n        url = '#';\n    }\n    // check is data URI\n    if (!/^[a-z]+\\:\\/\\//i.test(url) && !/^\\/\\//.test(url) && /^[a-z]+\\:/i.test(url)) {\n        return \"\";\n    }\n    var a = document.createElement('a');\n    a.href = url;\n    a = a.cloneNode(false);\n    url = a.protocol + '//' + a.host + (a.pathname[0] === '/' ? '' : '/') + a.pathname;\n    return url.substring(0, url.lastIndexOf('/') + 1);\n}\n\n\n/**\n * Loads a resource from url using XMLHttpRequest\n * @param {string} url \n * @param {string} [overrideMimeType]\n * @param {string} [responseType]\n * @return promise<xhr>\n */\nfunction loadResource(url, overrideMimeType, responseType) {\n    return new Promise(function (resolve, reject) {\n        var DOMURL = window.URL || window.webkitURL || window,\n            xhr = new XMLHttpRequest();\n\n        if (overrideMimeType && xhr.overrideMimeType) {\n            xhr.overrideMimeType(overrideMimeType);\n        }\n\n        xhr.open(\"GET\", url, true);\n\n        if (responseType) {\n            xhr.responseType = responseType;\n        }\n\n        function errorHandler(e) {\n            if (window.Cortona3DSolo) window.Cortona3DSolo.dispatch('app.onProgress', 0, -1, e.type);\n        }\n\n        xhr.onprogress = function (e) {\n            var loaded = e.loaded,\n                total = e.lengthComputable || e.lengthComputable === undefined ? e.total : 0;\n            if (window.Cortona3DSolo) window.Cortona3DSolo.dispatch('app.onProgress', loaded, total, e.type);\n        };\n        xhr.onabort = errorHandler;\n        xhr.onerror = errorHandler;\n        xhr.onload = errorHandler;\n        xhr.onreadystatechange = function (e) {\n            if (xhr.readyState === XMLHttpRequest.DONE) {\n\n                if (/^blob:/i.test(url)) {\n                    DOMURL.revokeObjectURL(url);\n                }\n\n                var data;\n                if (xhr.status === 200 || xhr.status === 0) {\n                    resolve(xhr);\n                } else {\n                    reject(new Error(url + \" \" + xhr.status + \" \" + xhr.statusText));\n                }\n            }\n        };\n        try {\n            xhr.send(null);\n        } catch (e) {\n            reject(e);\n        }\n    });\n}\n\n/**\n * @param element {HTMLElement} \n * @param className {string} \n * @param flag [{boolean}]\n */\nfunction toggleClass(element, className, flag) {\n    if (element) {\n        flag = isUndefined(flag) ? !element.classList.contains(className) : flag;\n        if (flag) {\n            element.classList.add(className);\n        } else {\n            element.classList.remove(className);\n        }\n    }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/util.js\n// module id = 0\n// module chunks = 0","var util = require('lib/util');\nvar expand = util.expand;\nvar xmlToJson = require('xml2json');\n\nvar m_instanceConfigurationFlags = 0;\nvar m_usedModules = {\n    addons: {}\n};\nvar m_loaded = false;\n\n/**\n * The namespace represents the main application interface for Cortona3D Solo.\n * \n * @namespace \n * @memberof module:solo\n * @property {number} DISABLE_DOCUMENT_INTERACTIVITY=0x000001 Disables the selection and parts highlighting in the 3D window\n * @property {number} DISABLE_PROCEDURE_TEXT_EMISSION=0x000002 Disables parsing and delivery text comments when loading procedure\n * @property {number} DISABLE_AUDIO=0x000004 Disables audio in the procedure\n * @property {number} DISABLE_VERTEX_ARRAY_OBJECT_OES=0x000008 Disables the OES_vertex_array_object extension (part of the WebGL API)  \n * @property {number} DISABLE_DISCARDABLE_GEOMETRY_DATA=0x000010 The flag must be set to enable geometry pick. See {@link module:solo.app.pickObjectChain app.pickObjectChain()}. \n * @property {number} DISABLE_PROPERTY_VALUE_ANIMATIONS=0x000020 The flag must be set to turn off the animated color transition when objects are selected in the interactive catalog.\n * @property {number} ENABLE_GLES3=0x000040 The flag must be set to enable WebGL 2.0.\n * @property {number} DISABLE_ANTIALIASING_GLES3=0x000080 The flag must be set to disable antialiasing in the WebGL 2.0.\n * @property {number} TRANSPARENT_BACKGROUND=0x000100 The flag must be set to enable transparent background in the scene without VRML Background node.\n * @property {number} ENABLE_NAVIGATION_FIT_TO_OBJECT=0x008000 Enables fit to object and change center of rotation in the 3D window\n * @property {number} DISABLE_INTERACTIVITY_XML_EMISSION=0x010000 Disables access to the interactivity.xml as JSON object \n * @property {number} DRAWING_HOTSPOT_HIGHLIGHT_SOLID=0x020000 Determines whether to use the frame selection representation for selected hotspot area on the SVG image (default value), or to fill with another color\n * @property {number} ENABLE_AUTO_SWITCHING_DISPLAY_MODE=0x040000 Enables automatic switching of display modes (2D and 3D) for IPC\n * @property {number} ENABLE_VRML_TEXT_NODE=0x080000 Enables VRML Text node support\n * @property {number} DISABLE_DRAWING_INTERACTIVITY_OPTIMIZATION=0x100000 Disables optimization for the large drawing (more than 5000 text nodes)\n */\nvar app = {\n    /**\n     * Configures the Cortona3D Solo instance.\n     * See {@link module:solo.app app} properties.\n     * \n     * @param {number} set - Flags bitmask \n     * @param {number} reset - Flags bitmask\n     */\n    configureInstance: function (set, reset) {\n        if (typeof set == 'number') m_instanceConfigurationFlags |= set;\n        if (typeof reset == 'number') m_instanceConfigurationFlags &= ~reset;\n        if (m_usedModules.core) {\n            if (Module.ccall) {\n                Module.ccall('tiramisu_configure', 'number', ['number', 'number'], [set & 32767, reset & 32767]);\n            }\n        }\n        if (m_usedModules.drawing) {\n            var drawingFeatures = m_usedModules.drawing.config.features || 0;\n            if (typeof set == 'number') drawingFeatures |= set;\n            if (typeof reset == 'number') drawingFeatures &= ~reset;\n            m_usedModules.drawing.config.features = drawingFeatures;\n            require('app.drawing').configure(m_usedModules.drawing.config);\n        }\n        return m_instanceConfigurationFlags;\n    },\n\n    /**\n     * Initializes the Cortona3D Solo instance.\n     * \n     * @memberof module:solo.app\n     * @async\n     * @function initialize\n     * @param {string} [url] - The optional argument specifies the URL of the external file:\n     * - companion file *.interactivity.xml*\n     * - VRML file *.wrl*\n     * - compressed (zip) package file containing the RapidAuthor publication *.cortona3d* *.vmb* *.zip*\n     * - SVG file *.svg* \n     * - image file *.png* *.jpg* *.gif*\n     * \n     * If omitted, the value specified in the `src` property is used.\n     * @returns {Promise<DocumentInfo>} `Promise` whose fulfillment handler receives an {@link DocumentInfo} object when the requested file has successfully been loaded.\n     * @see external:Promise\n     * @see {@link module:solo.use use()}\n     */\n    initialize: function (canvas, url) {\n        var src = url;\n        var Cortona3DSolo = require('solo');\n\n        if (typeof canvas === \"string\") {\n            // initialize(src)\n            src = canvas;\n\n            if (!m_usedModules.drawing && !m_usedModules.core) {\n                Cortona3DSolo.use('core', {\n                    src: src,\n                    features: m_instanceConfigurationFlags\n                });\n            }\n        } else if (canvas && url) {\n            // initialize(canvas, src)\n\n            if (m_usedModules.core) {\n                if (canvas) Cortona3DSolo.core.canvas = canvas;\n            }\n\n            Cortona3DSolo.use('core', {\n                canvas: canvas,\n                src: url,\n                features: m_instanceConfigurationFlags\n            });\n\n            /*\n            if (!app.drawing) {\n                var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n                canvas.parentNode.insertBefore(svg, canvas);\n                Cortona3DSolo.use('drawing', {\n                    svg: svg,\n                    features: m_instanceConfigurationFlags\n                });\n            }\n            */\n        }\n\n        function loaded() {\n            m_loaded = true;\n        }\n\n        Cortona3DSolo.once('app.didFinishLoadDocument', loaded);\n        Cortona3DSolo.once('app.didFailLoadDocument', loaded);\n\n        if (m_usedModules.drawing) {\n            require('app.drawing').attach(Cortona3DSolo.core && Cortona3DSolo.core.canvas);\n            if (!m_usedModules.core) {\n                src = src || m_usedModules.drawing.config.src;\n                if (src) {\n                    Cortona3DSolo.app.drawing.show(true);\n                    return new Promise(function (resolve, reject) {\n                        Cortona3DSolo.once('app.didFinishLoadDocument', resolve);\n                        Cortona3DSolo.app.drawing.load(src).catch(reject);\n                    });\n                }\n                return Promise.resolve({});\n            }\n        }\n\n        if (m_usedModules.core) {\n            if (Cortona3DSolo.core.canvas) {\n                Cortona3DSolo.core.canvas.setAttribute('touch-action', 'none');\n                Cortona3DSolo.core.canvas.style.touchAction = 'none';\n            }\n\n            var moduleArguments = require('core.solo').Arguments;\n\n            src = src || moduleArguments.document;\n\n            if (src) {\n                moduleArguments.document = Cortona3DSolo.app.util.toUrl(src);\n            } else {\n                moduleArguments.document = URL.createObjectURL(new Blob([\"#VRML V2.0 utf8\"], {\n                    type: \"model/vrml\"\n                }));\n            }\n            moduleArguments.features = (m_instanceConfigurationFlags & 32767);\n            moduleArguments.contentScaleFactor = window.devicePixelRatio || 1;\n            moduleArguments.toModule();\n            return new Promise(function (resolve, reject) {\n                Cortona3DSolo.once(\"core.onError\", reject);\n                Cortona3DSolo.once('app.didFinishLoadDocument', resolve);\n                Cortona3DSolo.once('app.didFailLoadDocument', reject);\n            });\n        }\n\n        return Promise.reject(new Error('Solo initialize: nothing to do'));\n    },\n\n    version: function () {\n        return VERSION;\n    },\n\n    /**\n     * Returns true if the library has already been initialized and the document has already been loaded.\n     * \n     * @memberof module:solo.app\n     * @function isDocumentLoaded\n     * @returns {boolean} \n     * @since 1.4.3\n     */\n    isDocumentLoaded: function () {\n        return m_loaded;\n    },\n\n    /**\n     * _Asynchronous method_. Loads the companion file.\n     * \n     * @async\n     * @memberof module:solo.app\n     * @function loadCompanionFile\n     * @param {string} url - An URL to load the external companion file *.interactivity.xml*\n     * @returns {Promise<CompanionFileInfo>} `Promise` whose fulfillment handler receives an {@link CompanionFileInfo} object when the requested file has successfully been loaded.\n     * @fires \"app.onProgress\"\n     * @see external:Promise\n     * @since 1.4.0\n     */\n    loadCompanionFile: function (url) {\n        return util.loadResource(url, 'text/xml').then(function (xhr) {\n            var data,\n                json,\n                type = '',\n                meta = [];\n\n            if (xhr.responseXML) {\n                json = xmlToJson(xhr.responseXML);\n\n                data = {\n                    baseURL: util.getBaseURL(url),\n                    options: require('interactivity.options.js')(json),\n                    interactivity: {\n                        json: json\n                    }\n                };\n\n                data.specificationName = data.options.SpecID;\n\n                if (json.ipc) {\n                    expand(data, {\n                            type: 'ipc',\n                            metadata: require('interactivity.metadata.js')(json.$('ipc/figure/metadata/value'))\n                        },\n                        require('app.ipc.interactivity.js')(data.interactivity, data.baseURL));\n                } else if (json.SimulationInteractivity) {\n                    expand(data, {\n                            type: 'procedure',\n                            metadata: require('interactivity.metadata.js')(json.$('SimulationInteractivity/SimulationInformation/metadata/value'))\n                        },\n                        require('app.procedure.interactivity.js')(data.interactivity, data.baseURL));\n                }\n\n                return Promise.resolve(data);\n            } else {\n                return Promise.reject(new Error(url + \" empty content\"));\n            }\n        });\n    }\n};\n\nObject.defineProperty(app, 'DISABLE_DOCUMENT_INTERACTIVITY', {\n    value: 1,\n    writable: false\n});\nObject.defineProperty(app, 'DISABLE_PROCEDURE_TEXT_EMISSION', {\n    value: 2,\n    writable: false\n});\nObject.defineProperty(app, 'DISABLE_AUDIO', {\n    value: 4,\n    writable: false\n});\nObject.defineProperty(app, 'DISABLE_VERTEX_ARRAY_OBJECT_OES', {\n    value: 8,\n    writable: false\n});\nObject.defineProperty(app, 'DISABLE_DISCARDABLE_GEOMETRY_DATA', {\n    value: 16,\n    writable: false\n});\nObject.defineProperty(app, 'DISABLE_PROPERTY_VALUE_ANIMATIONS', {\n    value: 32,\n    writable: false\n});\nObject.defineProperty(app, 'ENABLE_GLES3', {\n    value: 64,\n    writable: false\n});\nObject.defineProperty(app, 'DISABLE_ANTIALIASING_GLES3', {\n    value: 128,\n    writable: false\n});\nObject.defineProperty(app, 'TRANSPARENT_BACKGROUND', {\n    value: 256,\n    writable: false\n});\nObject.defineProperty(app, 'ENABLE_NAVIGATION_FIT_TO_OBJECT', {\n    value: 32768,\n    writable: false\n});\nObject.defineProperty(app, 'DISABLE_INTERACTIVITY_XML_EMISSION', {\n    value: 32768 * 2,\n    writable: false\n});\nObject.defineProperty(app, 'DRAWING_HOTSPOT_HIGHLIGHT_SOLID', {\n    value: 32768 * 4,\n    writable: false\n});\nObject.defineProperty(app, 'ENABLE_AUTO_SWITCHING_DISPLAY_MODE', {\n    value: 32768 * 8,\n    writable: false\n});\nObject.defineProperty(app, 'ENABLE_VRML_TEXT_NODE', {\n    value: 32768 * 16,\n    writable: false\n});\nObject.defineProperty(app, 'DISABLE_DRAWING_INTERACTIVITY_OPTIMIZATION', {\n    value: 32768 * 32,\n    writable: false\n});\n\n\nmodule.exports = {\n    app: app,\n    checkConfigureOptions: function (options) {\n        return !!(m_instanceConfigurationFlags & options);\n    },\n    getInstanceConfigurationFlags: function () {\n        return m_instanceConfigurationFlags;\n    },\n    getDocumentURL: function () {\n        var res = \"\";\n        if (m_usedModules.core) {\n            var args = Module.arguments;\n            if (args) {\n                var i = args.indexOf('document');\n                if (i >= 0) {\n                    res = args[i + 1];\n                }\n            }\n        }\n        return res;\n    },\n    usedModules: m_usedModules\n};\n\n/**\n * Information from the loaded companion file, for example:\n * ```\n * {\n *      type: 'ipc',\n *      metadata: {\n *          TITLE: \"Pump IPC - Complete\",\n *          ...\n *      },\n *      options: {\n *          SpecID: \"GENERIC_IPC\",\n *          SpecLang: \"en\",\n *          ...\n *      },\n *      specificationName: \"GENERIC_IPC\",\n *      interactivity: { ... }\n * }\n * ```\n * @prop {string} type - Name of the companion file type:\n * - `\"ipc\"`\n * - `\"procedure\"`\n * @prop {KeyValuePairs} metadata - An object represents project metadata from the companion file.\n * @prop {KeyValuePairs} options - An object represents published options from the companion file.\n * @prop {string} specificationName - Identifier of the specification component.\n * @prop {object} interactivity - The namespace corresponding to the type of companion file. See {@link module:solo.app.ipc.interactivity app.ipc.interactivity} and {@link module:solo.app.procedure.interactivity app.procedure.interactivity}.\n * @prop {string} baseURL - A base path to the loaded companion file or the empty string if the model loaded from the bundle file.\n * @typedef {object} CompanionFileInfo\n * @see {@link module:solo.app.loadCompanionFile app.loadCompanionFile()}\n */\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app.js\n// module id = 1\n// module chunks = 0","/**\n * The Cortona3D Solo module. The main interface of the Cortona3D Solo API:\n *\n * - Uses the Universal Module Definition (UMD) interface;\n * - Exports {@link Cortona3DSolo} global object;\n * - The exported object is an instance of the {@link external:EventEmitter EventEmitter} class;\n * - Exports namespaces {@link module:solo.core core}, {@link module:solo.app app}.\n *  \n * **Configuration:**\n * ```\n * Cortona3DSolo.use('core', {\n *      prefixURL: 'res/',\n *      totalMemory: 64\n * });\n * ```\n * See the {@link module:solo.use use()} method for more details.\n * \n * **Configuration using global variable:**\n * ```\n * var Cortona3DSolo = {\n *     config: {\n *         memoryInitializerPrefixURL: 'res/',\n *         TOTAL_MEMORY: 0x4000000 // 64 MB\n *     }\n * }\n * ```\n * See the {@link module:solo.core core} namespace.\n * \n * @module solo\n * @implements {@link external:EventEmitter EventEmitter}\n */\n\nvar expand = require('lib/util').expand;\nvar EventEmitter = require('events').EventEmitter;\n\nmodule.exports = expand(new EventEmitter(), window.Cortona3DSolo || {});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/solo.js\n// module id = 2\n// module chunks = 0","'use strict';\n\n\nvar TYPED_OK =  (typeof Uint8Array !== 'undefined') &&\n                (typeof Uint16Array !== 'undefined') &&\n                (typeof Int32Array !== 'undefined');\n\nfunction _has(obj, key) {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\n\nexports.assign = function (obj /*from1, from2, from3, ...*/) {\n  var sources = Array.prototype.slice.call(arguments, 1);\n  while (sources.length) {\n    var source = sources.shift();\n    if (!source) { continue; }\n\n    if (typeof source !== 'object') {\n      throw new TypeError(source + 'must be non-object');\n    }\n\n    for (var p in source) {\n      if (_has(source, p)) {\n        obj[p] = source[p];\n      }\n    }\n  }\n\n  return obj;\n};\n\n\n// reduce buffer size, avoiding mem copy\nexports.shrinkBuf = function (buf, size) {\n  if (buf.length === size) { return buf; }\n  if (buf.subarray) { return buf.subarray(0, size); }\n  buf.length = size;\n  return buf;\n};\n\n\nvar fnTyped = {\n  arraySet: function (dest, src, src_offs, len, dest_offs) {\n    if (src.subarray && dest.subarray) {\n      dest.set(src.subarray(src_offs, src_offs + len), dest_offs);\n      return;\n    }\n    // Fallback to ordinary array\n    for (var i = 0; i < len; i++) {\n      dest[dest_offs + i] = src[src_offs + i];\n    }\n  },\n  // Join array of chunks to single array.\n  flattenChunks: function (chunks) {\n    var i, l, len, pos, chunk, result;\n\n    // calculate data length\n    len = 0;\n    for (i = 0, l = chunks.length; i < l; i++) {\n      len += chunks[i].length;\n    }\n\n    // join chunks\n    result = new Uint8Array(len);\n    pos = 0;\n    for (i = 0, l = chunks.length; i < l; i++) {\n      chunk = chunks[i];\n      result.set(chunk, pos);\n      pos += chunk.length;\n    }\n\n    return result;\n  }\n};\n\nvar fnUntyped = {\n  arraySet: function (dest, src, src_offs, len, dest_offs) {\n    for (var i = 0; i < len; i++) {\n      dest[dest_offs + i] = src[src_offs + i];\n    }\n  },\n  // Join array of chunks to single array.\n  flattenChunks: function (chunks) {\n    return [].concat.apply([], chunks);\n  }\n};\n\n\n// Enable/Disable typed arrays use, for testing\n//\nexports.setTyped = function (on) {\n  if (on) {\n    exports.Buf8  = Uint8Array;\n    exports.Buf16 = Uint16Array;\n    exports.Buf32 = Int32Array;\n    exports.assign(exports, fnTyped);\n  } else {\n    exports.Buf8  = Array;\n    exports.Buf16 = Array;\n    exports.Buf32 = Array;\n    exports.assign(exports, fnUntyped);\n  }\n};\n\nexports.setTyped(TYPED_OK);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/pako/lib/utils/common.js\n// module id = 3\n// module chunks = 0","var util = require('lib/util');\r\n\r\n/**\r\n * @module create-element\r\n * @private\r\n */\r\n\r\n/**\r\n * Parse CSS selector and returns object with tag name, ID and array of class names.\r\n * \r\n * @private\r\n * @param {string} selector \r\n * @returns {object} \r\n */\r\nfunction parseSelector(selector) {\r\n    var token,\r\n        classList = [],\r\n        id,\r\n        tag,\r\n        re = /(^[^.#]+|\\.[^.#]+|#[^.#]+)/g;\r\n    while (re.exec(selector)) {\r\n        token = RegExp.$1;\r\n        switch (token.substring(0, 1)) {\r\n            case '.':\r\n                classList.push(token.substr(1));\r\n                break;\r\n            case '#':\r\n                id = token.substr(1);\r\n                break;\r\n            default:\r\n                tag = token;\r\n        }\r\n    }\r\n    return {\r\n        id: id,\r\n        classList: classList,\r\n        tag: tag || 'div'\r\n    };\r\n}\r\n\r\n\r\n/**\r\n * Create HTML elements from string.\r\n *\r\n * @param {string} syntax\r\n * @returns {HTMLElement[]}\r\n */\r\nfunction createElementsFromHTML(syntax) {\r\n    var div = document.createElement('div');\r\n    div.innerHTML = syntax;\r\n    return Array.prototype.slice.call(div.childNodes);\r\n}\r\n\r\n\r\n/**\r\n * Creates HTML element with given tag name, list of attributes and array of children.\r\n *\r\n * @param {string} name\r\n * @param {object} [options]\r\n * @param {*} [content]\r\n * @returns {HTMLElement}\r\n */\r\nfunction createElement(name, options, content) {\r\n    var el,\r\n        parsed = {},\r\n        isArray = function (o) { return util.isObject(o) && util.isFunction(o.forEach); },\r\n        hasOptions = util.isObject(options) && !isArray(options) && !(options instanceof Node);\r\n\r\n    parsed = parseSelector(name);\r\n    el = document.createElement(parsed.tag);\r\n\r\n    function addChild(child) {\r\n        if (util.isString(child)) {\r\n            el.append.apply(el, createElementsFromHTML(child));\r\n        } else if (isArray(child)) {\r\n            child.forEach(addChild);\r\n        } else {\r\n            el.append(child || '');\r\n        }\r\n    }\r\n\r\n    Array.prototype.slice.call(arguments, hasOptions ? 2 : 1).forEach(addChild);\r\n    \r\n    if (hasOptions) {\r\n        for (var key in options) {\r\n            if (!util.isUndefined(options[key])) {\r\n                if (options.hasOwnProperty(key)) {\r\n                    if (key === 'dataset' && util.isObject(options[key])) {\r\n                        for (var datakey in options.dataset) {\r\n                            if (!util.isUndefined(options.dataset[datakey])) {\r\n                                if (options.dataset.hasOwnProperty(datakey)) {\r\n                                    el.dataset[datakey] = options.dataset[datakey];\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    el[key] = options[key];\r\n                } else {\r\n                    el.setAttribute(key, options[key]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (parsed.id) {\r\n        el.id = parsed.id;\r\n    }\r\n    parsed.classList.forEach(function (cl) {\r\n        el.classList.add(cl);\r\n    });\r\n    return el;\r\n}\r\n\r\nmodule.exports = {\r\n    parseSelector: parseSelector,    \r\n    createElement: createElement,\r\n    createElementsFromHTML: createElementsFromHTML\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/create-element.js\n// module id = 4\n// module chunks = 0","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/css-loader/lib/css-base.js\n// module id = 5\n// module chunks = 0","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\nvar stylesInDom = {},\n\tmemoize = function(fn) {\n\t\tvar memo;\n\t\treturn function () {\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\t\treturn memo;\n\t\t};\n\t},\n\tisOldIE = memoize(function() {\n\t\treturn /msie [6-9]\\b/.test(self.navigator.userAgent.toLowerCase());\n\t}),\n\tgetHeadElement = memoize(function () {\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\n\t}),\n\tsingletonElement = null,\n\tsingletonCounter = 0,\n\tstyleElementsInsertedAtTop = [];\n\nmodule.exports = function(list, options) {\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the bottom of <head>.\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list);\n\taddStylesToDom(styles, options);\n\n\treturn function update(newList) {\n\t\tvar mayRemove = [];\n\t\tfor(var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\n\t\t\t\t\tdomStyle.parts[j]();\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n}\n\nfunction addStylesToDom(styles, options) {\n\tfor(var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles(list) {\n\tvar styles = [];\n\tvar newStyles = {};\n\tfor(var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\t\tif(!newStyles[id])\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse\n\t\t\tnewStyles[id].parts.push(part);\n\t}\n\treturn styles;\n}\n\nfunction insertStyleElement(options, styleElement) {\n\tvar head = getHeadElement();\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\n\tif (options.insertAt === \"top\") {\n\t\tif(!lastStyleElementInsertedAtTop) {\n\t\t\thead.insertBefore(styleElement, head.firstChild);\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\thead.appendChild(styleElement);\n\t\t}\n\t\tstyleElementsInsertedAtTop.push(styleElement);\n\t} else if (options.insertAt === \"bottom\") {\n\t\thead.appendChild(styleElement);\n\t} else {\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t}\n}\n\nfunction removeStyleElement(styleElement) {\n\tstyleElement.parentNode.removeChild(styleElement);\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\n\tif(idx >= 0) {\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement(options) {\n\tvar styleElement = document.createElement(\"style\");\n\tstyleElement.type = \"text/css\";\n\tinsertStyleElement(options, styleElement);\n\treturn styleElement;\n}\n\nfunction createLinkElement(options) {\n\tvar linkElement = document.createElement(\"link\");\n\tlinkElement.rel = \"stylesheet\";\n\tinsertStyleElement(options, linkElement);\n\treturn linkElement;\n}\n\nfunction addStyle(obj, options) {\n\tvar styleElement, update, remove;\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\n\t} else if(obj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\") {\n\t\tstyleElement = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, styleElement);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t\tif(styleElement.href)\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\n\t\t};\n\t} else {\n\t\tstyleElement = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, styleElement);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle(newObj) {\n\t\tif(newObj) {\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\n\t\t\t\treturn;\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = styleElement.childNodes;\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\n\t\tif (childNodes.length) {\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyleElement.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag(styleElement, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyleElement.setAttribute(\"media\", media)\n\t}\n\n\tif(styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = css;\n\t} else {\n\t\twhile(styleElement.firstChild) {\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\n\t\t}\n\t\tstyleElement.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink(linkElement, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\tif(sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = linkElement.href;\n\n\tlinkElement.href = URL.createObjectURL(blob);\n\n\tif(oldSrc)\n\t\tURL.revokeObjectURL(oldSrc);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/style-loader/addStyles.js\n// module id = 6\n// module chunks = 0","var Cortona3DSolo = require('solo');\nvar app = require('app').app;\nvar expand = require('lib/util').expand;\n\nrequire('drawing.css');\nvar SVGDrawing = require('drawing');\n\nvar usedModules = require('app').usedModules;\n\nvar m_isSVGVisible = false;\nvar m_urlDrawing = '';\n\nvar m_hotspotHightlightColor = '#FF0000';\nvar m_hotspotSelectionColor = '#FF0000';\n\nvar m_hoveredHotspot;\n\nvar css = Cortona3DSolo.app.ui.css();\n\n// SVGDrawing hooks\nexpand(SVGDrawing, {\n    delegate: {\n        onProgress: function (loaded, total) {\n            Cortona3DSolo.dispatch('app.onProgress', loaded, total);\n        },\n        didClickHotspot: function (name, keys) {\n            Cortona3DSolo.dispatch('app.drawing.didSelectHotspot', name, keys);\n        },\n        didEnterHotspot: function (name) {\n            SVGDrawing.toggleHotspotClass(name, 'hover', true);\n            Cortona3DSolo.dispatch('app.drawing.didEnterHotspot', name);\n            Cortona3DSolo.dispatch('app.drawing.didHoverHotspot', name, true);\n        },\n        didLeaveHotspot: function (name) {\n            SVGDrawing.toggleHotspotClass(name, 'hover', false);\n            Cortona3DSolo.dispatch('app.drawing.didLeaveHotspot', name);\n            Cortona3DSolo.dispatch('app.drawing.didHoverHotspot', name, false);\n        },\n        didCallContextMenu: function (name, offsetX, offsetY, target) {\n            Cortona3DSolo.dispatch('app.drawing.didCallContextMenu', name, offsetX, offsetY, target);\n        },\n        onZoomChange: function (zoom) {\n            Cortona3DSolo.dispatch('app.drawing.didChangeScale', zoom);\n        }\n    }\n});\n\n/**\n * @private\n */\nfunction attachSVGViewer(canvas) {\n    if (!SVGDrawing.svg) {\n        var svg = usedModules.drawing.config.element || usedModules.drawing.config.svg || (function () {\n            var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n            var beforeElement = canvas,\n                parentElement;\n            if (!canvas) {\n                require('core.css');\n                beforeElement = document.body.firstChild;\n                parentElement = document.body;\n            } else {\n                parentElement = canvas.parentNode;\n            }\n            parentElement.insertBefore(svg, beforeElement);\n            return svg;\n        })();\n\n        svg.parentNode.style.overflow = 'hidden';\n\n        SVGDrawing.initialize(svg);\n    }\n}\n\nfunction applyStyle() {\n    css.render({\n        '.cortona3dsolo-svg svg a[name]': {\n            '& .hover': {\n                stroke: m_hotspotHightlightColor,\n                strokeOpacity: 1\n            },\n            '& path.hover': {\n                strokeWidth: '2px',\n            },\n            '& text.hover': {\n                strokeWidth: '.1em',\n            },\n            '& path.selected': {\n                fill: m_hotspotSelectionColor,\n                fillOpacity: 0.8\n            }\n        }\n    });\n}\n\nvar getDocumentBaseURL = require('./util').getDocumentBaseURL;\n\nvar appExports = {\n    /**\n     * The namespace represents an application interface to manage interactive 2D graphics.\n     * \n     * Requires the use of the internal module `\"drawing\"`.\n     * \n     * @namespace\n     * @memberof module:solo.app\n     * @example\nCortona3DSolo.use('drawing', {\n    src: 'sample.svg'\n});\nCortona3DSolo.app.initialize();\n     */\n    drawing: {\n        /**\n         * Loads the 2D illustration file.\n         * Supported formats are SVG, JPG, PNG, GIF.\n         * \n         * @async\n         * @fires \"app.drawing.didStartLoadDrawing\"\n         * @fires \"app.drawing.didFinishLoadDrawing\"\n         * @fires \"app.drawing.didFailLoadDrawing\"\n         * @param {string} imageURL\n         * @returns {Promise} A promise \n         * @see external:Promise\n         */\n        load: function (imageURL) {\n            Cortona3DSolo.dispatch('app.drawing.didStartLoadDrawing', imageURL);\n            if (typeof app.drawing.willStartLoadDrawing === 'function') {\n                var shallBeURL = app.drawing.willStartLoadDrawing.call(app, imageURL);\n                if (typeof shallBeURL == 'string') imageURL = shallBeURL;\n            }\n            imageURL = imageURL.replace(/\\.(cgm|tiff?)$/i, '.svg');\n            if (imageURL == m_urlDrawing) {\n                Cortona3DSolo.dispatch('app.drawing.didFinishLoadDrawing', imageURL);\n                return Promise.resolve();\n            }\n            var url;\n            if (app.util && app.util.createResourceURL) url = app.util.createResourceURL(imageURL);\n            if (!url) {\n                url = imageURL;\n                if (!/^[^\\/]+:/.test(url)) {\n                    url = getDocumentBaseURL() + url;\n                }\n            }\n            return new Promise(function (resolve, reject) {\n                SVGDrawing.delegate.didCompleteLoad = function (url) {\n                    if (app.util && app.util.revokeResourceURL) app.util.revokeResourceURL(url);\n                    m_urlDrawing = imageURL;\n                    m_hoveredHotspot = null;\n                    Cortona3DSolo.dispatch('app.drawing.didFinishLoadDrawing', imageURL);\n                    if (!usedModules.core) {\n                        var arg = {\n                            type: 'drawing',\n                            baseURL: require('./util').getBaseURL(imageURL)\n                        };\n                        Cortona3DSolo.dispatch('app.didFinishLoadDocument', arg);\n                    }\n                    resolve();\n                };\n                SVGDrawing.delegate.failedLoadingDocument = function (url, status) {\n                    if (app.util && app.util.revokeResourceURL) app.util.revokeResourceURL(url);\n                    m_urlDrawing = imageURL;\n                    m_hoveredHotspot = null;\n                    SVGDrawing.unload();\n                    Cortona3DSolo.dispatch('app.drawing.didFailLoadDrawing', imageURL, status);\n                    if (!usedModules.core) {\n                        Cortona3DSolo.dispatch('app.didFailLoadDocument', status);\n                    }\n                    reject(new Error('Image loading failed: status ' + status));\n                };\n                SVGDrawing.load(url, /\\.(png|jpe?g|jpe|gif)$/i.test(imageURL));\n            });\n        },\n\n        /**\n         * Show or hides the 2D window.\n         * \n         * @param {boolean} [visible=true]\n         */\n        show: function (visible) {\n            visible = (typeof visible == 'undefined') ? true : !!visible;\n            SVGDrawing[visible ? 'show' : 'hide']();\n            m_isSVGVisible = !!visible;\n        },\n\n        /**\n         * Checks if the 2D window visible\n         * \n         * @returns {boolean}\n         */\n        isVisible: function () {\n            return m_isSVGVisible;\n        },\n\n        /**\n         * Selects the hotspot by its name.\n         * \n         * @param {string} name\n         * @param {HexColorString} [color] A string representing the color. Specify empty string to clear the selection. If omitted, the value specified in the options statement is used. See {@link module:solo.use use()} properties\n         */\n        selectHotspot: function (name, color) {\n            color = typeof color === 'undefined' ? m_hotspotSelectionColor : color;\n            if (color === '') {\n                SVGDrawing.unselect(name);\n            } else {\n                SVGDrawing.select(name, color);\n            }\n        },\n\n        /**\n         * Highlights the hotspot by its name.\n         * \n         * @param {string} name\n         * @param {HexColorString} [color] A string representing the color. Specify empty string to clear the selection. If omitted, the value specified in the options statement is used. See {@link module:solo.use use()} properties\n         */\n        highlightHotspot: function (name, color) {\n            color = typeof color === 'undefined' ? m_hotspotHightlightColor : color;\n            if (color === '') {\n                SVGDrawing.unhighlight(name);\n            } else {\n                SVGDrawing.highlight(name, color);\n            }\n        },\n\n        /**\n         * Highlights the hotspot by its name using the color specified in the options statement. See {@link module:solo.use use()} properties.\n         * Unlike of the method {@link module:solo.app.drawing.highlightHotspot app.drawing.highlightHotspot()}, this method clears the last selection.\n         * \n         * @param {string} name\n         */\n        hoverHotspot: function (name) {\n            if (m_hoveredHotspot) {\n                SVGDrawing.toggleHotspotClass(m_hoveredHotspot, 'hover', false);\n            }\n            if (name) {\n                SVGDrawing.toggleHotspotClass(name, 'hover', true);\n            }\n            m_hoveredHotspot = name;\n        },\n\n        /**\n         * Toggle the class value for all `SVGPathElement` and `SVGTextElement` inside a hotspot node; i.e., if the class exists then remove it and return `false`, if not, then add it and return `true`.\n         * When the `force` argument is present: If the `force` argument evaluates to `true`, add the specified class value, and if it evaluates to `false`, remove it.\n         * \n         * @param {string} name\n         * @param {string} className\n         * @param {boolean} [force]\n         * @returns {boolean}\n         */\n        toggleHotspotClass: function (name, className, force) {\n            return SVGDrawing.toggleHotspotClass(name, className, force);\n        },\n\n        /**\n         * Restores the default view.\n         * @since 1.4.3\n         */\n        reset: function () {\n            SVGDrawing.reset();\n        },\n\n        /**\n         * Change the scale to the specified value.\n         * @param {number} value \n         * @since 1.4.3\n         */\n        scaleBy: function (value) {\n            SVGDrawing.scaleBy(value);\n        },\n\n        /**\n         * Checks if hotspot with specified name exists in the 2D illustration.\n         * \n         * @param {string} name\n         * @since 1.5.0\n         */\n        hotspotExists: function (name) {\n            return Array.prototype.slice.call(SVGDrawing.svg.getElementsByTagName('a')).some(function (n) {\n                return (n.getAttribute('name') === name);\n            });\n        }\n    }\n};\n\n/**\n * The HTML `<svg>` element.\n * \n * @static\n * @member {SVGSVGElement} svg\n * @memberof module:solo.app.drawing\n * @since 1.4.3\n */\n\n/**\n * Gets or sets the color of the hovered hotspot in the 2D illustration.\n * \n * @static\n * @member {HexColorString} hoverColor\n * @memberof module:solo.app.drawing\n * @since 1.5.0\n */\n\n/**\n * Gets or sets the color of the selected hotspot in the 2D illustration.\n * \n * @static\n * @member {HexColorString} selectionColor\n * @memberof module:solo.app.drawing\n * @since 1.5.0\n */\n\n/**\n * Gets or sets the maximum scaling limit for the drawing.\n * \n * @static\n * @member {number} maxScale\n * @memberof module:solo.app.drawing\n * @since 1.6.0\n */\n\n/**\n * Gets or sets the minimum scaling limit for the drawing.\n * \n * @static\n * @member {number} minScale\n * @memberof module:solo.app.drawing\n * @since 1.6.0\n */\n\nObject.defineProperties(appExports.drawing, {\n    'svg': {\n        get: function () {\n            return SVGDrawing.svg;\n        },\n        enumerable: true\n    },\n    'hoverColor': {\n        get: function () {\n            return m_hotspotHightlightColor;\n        },\n        set: function (color) {\n            m_hotspotHightlightColor = color;\n            applyStyle();\n        },\n        enumerable: true\n    },\n    'selectionColor': {\n        get: function () {\n            return m_hotspotSelectionColor;\n        },\n        set: function (color) {\n            m_hotspotSelectionColor = color;\n            applyStyle();\n        },\n        enumerable: true\n    },\n    'maxScale': {\n        get: function () {\n            return SVGDrawing.maxScale;\n        },\n        set: function (value) {\n            SVGDrawing.maxScale = value;\n        },\n        enumerable: true\n    },\n    'minScale': {\n        get: function () {\n            return SVGDrawing.minScale;\n        },\n        set: function (value) {\n            SVGDrawing.minScale = value;\n        },\n        enumerable: true\n    }\n});\n\nmodule.exports = {\n    configure: function (options) {\n        options = options || {};\n        m_hotspotHightlightColor = options.hotspotHoverColor || options.hotspotHighlightColor || '#FF0000';\n        m_hotspotSelectionColor = options.hotspotSelectionColor || '#FF0000';\n        SVGDrawing.enableHoverFilling = (options.features || 0) & app.DRAWING_HOTSPOT_HIGHLIGHT_SOLID;\n        SVGDrawing.enableDrawingOptimization = !((options.features || 0) & app.DISABLE_DRAWING_INTERACTIVITY_OPTIMIZATION);\n        if (options.maxScale) SVGDrawing.maxScale = +options.maxScale;\n        if (options.minScale) SVGDrawing.minScale = +options.minScale;\n        applyStyle();\n        return appExports;\n    },\n\n    attach: attachSVGViewer,\n\n    getSVGViewer: function () {\n        return SVGDrawing;\n    }\n};\n\n/**\n * The hook method is invoked before loading the 2D illustartion file. \n * Must return the URL to the 2D illustration file that should be loaded.\n * \n * @function willStartLoadDrawing  \n * @abstract \n * @memberof module:solo.app.drawing\n * @param {string} imageURL Request URL to load 2D illustration\n * @returns {string} Returns URL to load 2D illustration\n */\n\n/**\n * The hook method is invoked before loading the 2D llustration.\n * \n * @function didStartLoadDrawing\n * @abstract \n * @memberof module:solo.app.drawing\n * @param {string} url Request URL to load 2D illustration\n * @see The corresponding event {@link event:\"app.drawing.didStartLoadDrawing\" \"app.drawing.didStartLoadDrawing\"}\n */\n/**\n * @event \"app.drawing.didStartLoadDrawing\"\n * @see The corresponding hook method {@link module:solo.app.drawing.didStartLoadDrawing app.drawing.didStartLoadDrawing()}\n */\n\n/**\n * The hook method is invoked when the 2D llustration is failed to load.\n * \n * @function didFailLoadDrawing\n * @abstract \n * @memberof module:solo.app.drawing\n * @param {string} url Request URL to load 2D illustration\n * @param {string} status Status code\n * @see The corresponding event {@link event:\"app.drawing.didFailLoadDrawing\" \"app.drawing.didFailLoadDrawing\"}\n */\n/**\n * @event \"app.drawing.didFailLoadDrawing\"\n * @see The corresponding hook method {@link module:solo.app.drawing.didFailLoadDrawing app.drawing.didFailLoadDrawing()}\n */\n\n/**\n * The hook method is invoked when the 2D llustration is loaded.\n * \n * @function didFinishLoadDrawing \n * @abstract \n * @memberof module:solo.app.drawing\n * @param {string} url Request URL to load 2D illustration\n * @see The corresponding event {@link event:\"app.drawing.didFinishLoadDrawing\" \"app.drawing.didFinishLoadDrawing\"}\n */\n/**\n * @event \"app.drawing.didFinishLoadDrawing\"\n * @see The corresponding hook method {@link module:solo.app.drawing.didFinishLoadDrawing app.drawing.didFinishLoadDrawing()}\n */\n\n/**\n * The hook is invoked when the hotspot is selected.\n * \n * @function didSelectHotspot \n * @abstract \n * @memberof module:solo.app.drawing\n * @param {string} name Name of the selected hotspot\n * @param {number} keys \n * @see The corresponding event {@link event:\"app.drawing.didSelectHotspot\" \"app.drawing.didSelectHotspot\"}\n */\n/**\n * @event \"app.drawing.didSelectHotspot\"\n * @see The corresponding hook method {@link module:solo.app.drawing.didSelectHotspot app.drawing.didSelectHotspot()}\n */\n\n/**\n * The hook is invoked when the hotspot is highlighted.\n * \n * @function didHoverHotspot \n * @abstract \n * @memberof module:solo.app.drawing\n * @param {string} name Name of the selected hotspot\n * @param {boolean} hover -\n * - true - Hotspot is highlighted\n * - false - Hotspot is not highlighted\n * @see The corresponding event {@link event:\"app.drawing.didHoverHotspot\" \"app.drawing.didHoverHotspot\"}\n */\n/**\n * @event \"app.drawing.didHoverHotspot\"\n * @see The corresponding hook method {@link module:solo.app.drawing.didHoverHotspot app.drawing.didHoverHotspot()}\n */\n\n/**\n * The hook method is invoked when the context menu is called in the 2D window. \n * The mouse uses secondary button click. The touch device uses long tap.\n * \n * @function didCallContextMenu \n * @abstract \n * @memberof module:solo.app.drawing\n * @param {string} name Name of the clicked hotspot or empty string\n * @param {number} offsetX The X coordinate relative to the target element \n * @param {number} offsetY The Y coordinate relative to the target element\n * @param {HTMLElement} target Target element (parent of the element `<svg>`)\n * @see The corresponding event {@link event:\"app.drawing.didCallContextMenu\" \"app.drawing.didCallContextMenu\"}\n */\n/**\n * @event \"app.drawing.didCallContextMenu\"\n * @see The corresponding hook method {@link module:solo.app.drawing.didCallContextMenu app.drawing.didCallContextMenu()}\n */\n\n/**\n * The hook method is invoked when the scale of 2D illustartion is changed.\n * \n * @function didChangeScale \n * @abstract \n * @memberof module:solo.app.drawing\n * @param {number} zoom The value of the scale\n * @see The corresponding event {@link event:\"app.drawing.didChangeScale\" \"app.drawing.didChangeScale\"}\n */\n/**\n * @event \"app.drawing.didChangeScale\"\n * @see The corresponding hook method {@link module:solo.app.drawing.didChangeScale app.drawing.didChangeScale()}\n */\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app.drawing.js\n// module id = 7\n// module chunks = 0","module.exports = function (metaValues) {\r\n    var metadata = {};\r\n    metaValues.forEach(function (value) {\r\n        var val = value.$text();\r\n        if (/^(Yes|No)$/.test(val)) {\r\n            val = (val == 'Yes');\r\n        }\r\n        metadata[value.$attr('decl-id')] = val;\r\n    });\r\n    return metadata;\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/interactivity.metadata.js\n// module id = 8\n// module chunks = 0","var getBaseURL = require('lib/util').getBaseURL;\n\n/**\n * Return base URL.\n * \n * @private\n * @returns {string}\n */\nmodule.exports = {\n    getBaseURL: getBaseURL,\n    getDocumentBaseURL: function () {\n        return getBaseURL(require('app').getDocumentURL());\n    },\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/util.js\n// module id = 9\n// module chunks = 0","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/events/events.js\n// module id = 10\n// module chunks = 0","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nmodule.exports = {\n  2:      'need dictionary',     /* Z_NEED_DICT       2  */\n  1:      'stream end',          /* Z_STREAM_END      1  */\n  0:      '',                    /* Z_OK              0  */\n  '-1':   'file error',          /* Z_ERRNO         (-1) */\n  '-2':   'stream error',        /* Z_STREAM_ERROR  (-2) */\n  '-3':   'data error',          /* Z_DATA_ERROR    (-3) */\n  '-4':   'insufficient memory', /* Z_MEM_ERROR     (-4) */\n  '-5':   'buffer error',        /* Z_BUF_ERROR     (-5) */\n  '-6':   'incompatible version' /* Z_VERSION_ERROR (-6) */\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/pako/lib/zlib/messages.js\n// module id = 11\n// module chunks = 0","module.exports = function (json) {\r\n    var options = {};\r\n\r\n    function valueIterator(value) {\r\n        var val = value.$text();\r\n        if (/^(Yes|No)$/.test(val)) {\r\n            val = (val == 'Yes');\r\n        }\r\n        options[value.$attr('name')] = val;\r\n    }\r\n\r\n    if (json.ipc) {\r\n        json.$('ipc/figure/media').filter(function (media) {\r\n            return media.$attr('id') == 1;\r\n        })[0].$('value').forEach(valueIterator);\r\n    } else if (json.SimulationInteractivity) {\r\n        json.$('SimulationInteractivity/SimulationInformation/Options/Value').forEach(valueIterator);\r\n\r\n        var SimulationInformation = json.SimulationInteractivity.SimulationInformation;\r\n        options.PublisherVersion = SimulationInformation.$text('ExporterVersionNumber');\r\n        options.SpecID = SimulationInformation.$text('SpecID');\r\n        options.SpecVersion = SimulationInformation.$text('SpecVersion');\r\n        options.SpecLang = SimulationInformation.$text('SpecLang');\r\n        options.ModificationDate = SimulationInformation.$text('ModificationDate');\r\n        options.DocumentFile = SimulationInformation.$text('DocumentFile');\r\n    }\r\n\r\n    return options;\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/interactivity.options.js\n// module id = 12\n// module chunks = 0","/*\r\n    millicolor('#FF0000') :color\r\n    millicolor({r: 10, g: 200, b: 2}) :color\r\n    millicolor({h: 60, s: 50, l: 20}) :color\r\n\r\n    color.toString() -> #...\r\n    color.toHSVString() -> hsv(...)\r\n    color.toRgbString() -> rgb(...)\r\n\r\n    color.toRgb() -> { r:, g:, b: }\r\n    color.toHsl() -> { h:, s:, l: } \r\n    color.getBrightness()\r\n    color.getLuminance()\r\n\r\n    color.desaturate(amount)\r\n    color.saturate(amount)\r\n    color.grayscale()\r\n    color.lighten(amount)\r\n    color.brighten(amount)\r\n    color.darken(amount)\r\n    color.spin(amount)\r\n    color.complement()\r\n\r\n    millicolor('#FF0000').darken().desaturate()\r\n*/\r\n\r\n/**\r\n * @classdesc A helper object to manipulate the HTML color.\r\n * @class\r\n * @hideconstructor\r\n * @param {number} r 0...255\r\n * @param {number} g 0...255\r\n * @param {number} b 0...255\r\n */\r\nfunction ColorObject(r, g, b) {\r\n\r\n    /**\r\n     * The red component, a number from 0 to 255.\r\n     * @type {number}\r\n     */\r\n    this.r = clamp255(Math.round(r || 0));\r\n    /**\r\n     * The blue component, a number from 0 to 255.\r\n     * @type {number}\r\n     */\r\n    this.b = clamp255(Math.round(b || 0));\r\n    /**\r\n     * The green component, a number from 0 to 255.\r\n     * @type {number}\r\n     */\r\n    this.g = clamp255(Math.round(g || 0));\r\n}\r\n\r\n/**\r\n * @returns {object} RGB object. The value of each RGB component is a number between 0 and 255.\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.toRgb() // { r: 255, g: 0, b: 0 }\r\n */\r\nColorObject.prototype.toRgb = function () {\r\n    return {\r\n        r: this.r,\r\n        g: this.g,\r\n        b: this.b\r\n    };\r\n};\r\n\r\n/**\r\n * @returns {object} HSL object. The value of each HSL component is a number between 0 and 1.\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.toHsl() // { h: 0, s: 1, l: 0.5 }\r\n */\r\nColorObject.prototype.toHsl = function () {\r\n    var r = bound01(this.r, 255),\r\n        g = bound01(this.g, 255),\r\n        b = bound01(this.b, 255),\r\n        max = Math.max(r, g, b),\r\n        min = Math.min(r, g, b);\r\n\r\n    var h = 0,\r\n        s = 0,\r\n        l = (max + min) / 2;\r\n\r\n    if (max !== min) {\r\n        var d = max - min;\r\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n        switch (max) {\r\n            case r:\r\n                h = (g - b) / d + (g < b ? 6 : 0);\r\n                break;\r\n            case g:\r\n                h = (b - r) / d + 2;\r\n                break;\r\n            case b:\r\n                h = (r - g) / d + 4;\r\n                break;\r\n        }\r\n\r\n        h /= 6;\r\n    }\r\n\r\n    return {\r\n        h: h * 360,\r\n        s: s * 100,\r\n        l: l * 100\r\n    };\r\n};\r\n\r\n/**\r\n * @returns {string} HTML hex string.\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.toString() // \"#ff0000\"\r\n */\r\nColorObject.prototype.toString = function () {\r\n    var hex = '000000' + ((this.r << 16) + (this.g << 8) + this.b).toString(16);\r\n    return '#' + hex.substring(hex.length - 6);\r\n};\r\n\r\n/**\r\n * @returns {string} HTML hsl string.\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.toHslString() // \"hsl(0, 100, 50)\"\r\n */\r\nColorObject.prototype.toHslString = function () {\r\n    var hsl = this.toHsl();\r\n    return 'hsl(' + Math.round(hsl.h) + ',' + Math.round(hsl.s) + ',' + Math.round(hsl.l) + ')';\r\n};\r\n\r\n/**\r\n * @returns {string} HTML rgb string.\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.toRgbString() // \"rgb(255, 0, 0)\"\r\n */\r\nColorObject.prototype.toRgbString = function () {\r\n    return 'rgb(' + this.r + ',' + this.g + ',' + this.b + ')';\r\n};\r\n\r\n/**\r\n * Returns the inverse color.\r\n * \r\n * @returns {ColorObject} \r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.inverse().toRgbString() // \"rgb(0, 255, 255)\"\r\n */\r\nColorObject.prototype.inverse = function () {\r\n    var rgb = this.toRgb();\r\n    rgb.r = 255 - rgb.r;\r\n    rgb.g = 255 - rgb.g;\r\n    rgb.b = 255 - rgb.b;\r\n    return millicolor(rgb);\r\n};\r\n\r\n/**\r\n * Returns the perceived brightness of a color, from 0 to 255.\r\n * \r\n * @returns {number} \r\n * @see {@link http://www.w3.org/TR/AERT#color-contrast}\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.getBrightness() // 76.245\r\n */\r\nColorObject.prototype.getBrightness = function () {\r\n    var rgb = this.toRgb();\r\n    return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;\r\n};\r\n\r\n/**\r\n * Returns the perceived luminance of a color, from 0 to 1.\r\n * \r\n * @returns {number} \r\n * @see {@link http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef}\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.getLuminance() // 0.2126\r\n */\r\nColorObject.prototype.getLuminance = function () {\r\n    var rgb = this.toRgb(),\r\n        R01 = rgb.r / 255,\r\n        G01 = rgb.g / 255,\r\n        B01 = rgb.b / 255,\r\n        R, G, B;\r\n\r\n    if (R01 <= 0.03928) {\r\n        R = R01 / 12.92;\r\n    } else {\r\n        R = Math.pow(((R01 + 0.055) / 1.055), 2.4);\r\n    }\r\n    if (G01 <= 0.03928) {\r\n        G = G01 / 12.92;\r\n    } else {\r\n        G = Math.pow(((G01 + 0.055) / 1.055), 2.4);\r\n    }\r\n    if (B01 <= 0.03928) {\r\n        B = B01 / 12.92;\r\n    } else {\r\n        B = Math.pow(((B01 + 0.055) / 1.055), 2.4);\r\n    }\r\n\r\n    return (0.2126 * R) + (0.7152 * G) + (0.0722 * B);\r\n};\r\n\r\n/**\r\n * Desaturate the color by the specified value, from 0 to 100. Setting 100 is equivalent to calling greyscale.\r\n * \r\n * @param {number} [amount=10] 0...100\r\n * @returns {ColorObject}\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.desaturate().toRgbString() // \"rgb(242, 13, 13)\"\r\n */\r\nColorObject.prototype.desaturate = function (amount) {\r\n    amount = (amount === 0) ? 0 : (amount || 10);\r\n    var hsl = this.toHsl();\r\n    hsl.s -= amount;\r\n    hsl.s = clamp01(hsl.s / 100) * 100;\r\n    return millicolor(hsl);\r\n};\r\n\r\n/**\r\n * Saturate the color by the specified value, from 0 to 100.\r\n * \r\n * @param {number} [amount=10] 0...100\r\n * @returns {ColorObject}\r\n * @example\r\nvar color = new ColorObject(242, 13, 13);\r\ncolor.saturate().toRgbString() // \"rgb(255, 0, 0)\"\r\n */\r\nColorObject.prototype.saturate = function (amount) {\r\n    amount = (amount === 0) ? 0 : (amount || 10);\r\n    var hsl = this.toHsl();\r\n    hsl.s += amount;\r\n    hsl.s = clamp01(hsl.s / 100) * 100;\r\n    return millicolor(hsl);\r\n};\r\n\r\n/**\r\n * Completely desaturates a color into greyscale. This is equivalent to calling desaturate(100).\r\n * \r\n * @returns {ColorObject}\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.grayscale().toRgbString() // \"rgb(128, 128, 128)\"\r\n */\r\nColorObject.prototype.grayscale = function () {\r\n    return this.desaturate(100);\r\n};\r\n\r\n/**\r\n * Returns a lighter by the specified value, from 0 to 100 (in percent). Use the value of 100 for the white color.\r\n * \r\n * @param {number} [amount=10] 0...100\r\n * @returns {ColorObject}\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.lighten().toRgbString() // \"rgb(255, 51, 51)\"\r\n */\r\nColorObject.prototype.lighten = function (amount) {\r\n    amount = (amount === 0) ? 0 : (amount || 10);\r\n    var hsl = this.toHsl();\r\n    hsl.l += amount;\r\n    hsl.l = clamp01(hsl.l / 100) * 100;\r\n    return millicolor(hsl);\r\n};\r\n\r\n/**\r\n * Returns a darker color by the specified value, from 0 to 100 (in percent). Use the value of 100 for the black color.\r\n * \r\n * @param {number} [amount=10] 0...100\r\n * @returns {ColorObject}\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.darken().toRgbString() // \"rgb(204, 0, 0)\"\r\n */\r\nColorObject.prototype.darken = function (amount) {\r\n    amount = (amount === 0) ? 0 : (amount || 10);\r\n    var hsl = this.toHsl();\r\n    hsl.l -= amount;\r\n    hsl.l = clamp01(hsl.l / 100) * 100;\r\n    return millicolor(hsl);\r\n};\r\n\r\n/**\r\n * Spin the hue by the specified value, from -360 to 360. \r\n * Calling with 0, 360, or -360 will do nothing (since it sets the hue back to what it was before).\r\n * \r\n * @param {number} amount --360...360\r\n * @returns {ColorObject}\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.spin(90).toHslString() // \"hsl(90, 100, 50)\"\r\n */\r\nColorObject.prototype.spin = function (amount) {\r\n    var hsl = this.toHsl();\r\n    var hue = (hsl.h + amount) % 360;\r\n    hsl.h = hue < 0 ? 360 + hue : hue;\r\n    return millicolor(hsl);\r\n};\r\n\r\n/**\r\n * Returns a brighter color by the specified value, from 0 to 100 (in percent).\r\n * \r\n * @param {number} [amount=10] 0...100\r\n * @returns {ColorObject}\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.brighten().toRgbString() // \"rgb(255, 25, 25)\"\r\n */\r\nColorObject.prototype.brighten = function (amount) {\r\n    amount = (amount === 0) ? 0 : (amount || 10);\r\n    var rgb = this.toRgb();\r\n    rgb.r = clamp255(rgb.r - Math.round(-255 * (amount / 100)));\r\n    rgb.g = clamp255(rgb.g - Math.round(-255 * (amount / 100)));\r\n    rgb.b = clamp255(rgb.b - Math.round(-255 * (amount / 100)));\r\n    return millicolor(rgb);\r\n};\r\n\r\n/**\r\n * Returns the complement color. This is equivalent to calling spin(180).\r\n * \r\n * @returns {ColorObject}\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.complement().toHslString() // \"hsl(180, 100, 50)\"\r\n */\r\nColorObject.prototype.complement = function () {\r\n    var hsl = this.toHsl();\r\n    hsl.h = (hsl.h + 180) % 360;\r\n    return millicolor(hsl);\r\n};\r\n\r\nfunction clamp01(value) {\r\n    return Math.max(0, Math.min(1, value));\r\n}\r\n\r\nfunction clamp255(value) {\r\n    return Math.max(0, Math.min(255, value));\r\n}\r\n\r\nfunction bound01(n, max) {\r\n    if ((Math.abs(n - max) < 0.000001)) {\r\n        return 1;\r\n    }\r\n    return (n % max) / parseFloat(max);\r\n}\r\n\r\nfunction hue2rgb(p, q, t) {\r\n    if (t < 0) t += 1;\r\n    if (t > 1) t -= 1;\r\n    if (t < 1 / 6) return p + (q - p) * 6 * t;\r\n    if (t < 1 / 2) return q;\r\n    if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\r\n    return p;\r\n}\r\n\r\n/**\r\n * Returns a new instance of ColorObject\r\n *\r\n * @private\r\n * @param {*} color\r\n * @returns {ColorObject}\r\n */\r\nfunction millicolor(color) {\r\n    var hex, r, g, b, a;\r\n    if (typeof color === 'string') {\r\n        a = color.match(/^#?([0-9A-F]{6})$/i);\r\n        if (a) {\r\n            hex = a[1];\r\n            r = parseInt(hex.substr(0, 2), 16);\r\n            g = parseInt(hex.substr(2, 2), 16);\r\n            b = parseInt(hex.substr(4, 2), 16);\r\n            return new ColorObject(r, g, b);\r\n        }\r\n        a = color.match(/^#?([0-9A-F]{3})$/i);\r\n        if (a) {\r\n            hex = a[1];\r\n            r = parseInt(hex.substr(0, 1) + hex.substr(0, 1), 16);\r\n            g = parseInt(hex.substr(1, 1) + hex.substr(1, 1), 16);\r\n            b = parseInt(hex.substr(2, 1) + hex.substr(2, 1), 16);\r\n            return new ColorObject(r, g, b);\r\n        }\r\n        throw new Error('Not a hex color: ' + color);\r\n    }\r\n\r\n    if (typeof color === 'object') {\r\n        if (color.r !== void 0 && color.g !== void 0 && color.b !== void 0) {\r\n            return new ColorObject(color.r, color.g, color.b);\r\n        }\r\n        if (color.h !== void 0 && color.s !== void 0 && color.l !== void 0) {\r\n            var h = bound01(color.h, 360),\r\n                s = bound01(color.s, 100),\r\n                l = bound01(color.l, 100);\r\n\r\n            if (s === 0) {\r\n                r = g = b = l; // achromatic\r\n            } else {\r\n                var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n                var p = 2 * l - q;\r\n                r = hue2rgb(p, q, h + 1 / 3);\r\n                g = hue2rgb(p, q, h);\r\n                b = hue2rgb(p, q, h - 1 / 3);\r\n            }\r\n\r\n            return new ColorObject(r * 255, g * 255, b * 255);\r\n        }\r\n        throw new Error('Can not recognize color object');\r\n    }\r\n\r\n    if (typeof color === 'number') {\r\n        r = color & 0xFF;\r\n        g = (color >> 8) & 0xFF;\r\n        b = (color >> 16) & 0xFF;\r\n        return new ColorObject(r, g, b);\r\n    }\r\n\r\n    return new ColorObject();\r\n}\r\n\r\nmodule.exports = millicolor;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/color-object.js\n// module id = 13\n// module chunks = 0","var util = require('lib/util');\r\n\r\nfunction camelToKebab(s) {\r\n    return s.replace(/(\\S)([A-Z])/g, function ($0, $1, $2) {\r\n        return $1 + '-' + $2.toLowerCase();\r\n    });\r\n}\r\n\r\n/*\r\n    css({\r\n        'selector': {                   // selector {}\r\n            backgroundColor: \"#FFF\"\r\n            '&': {\r\n                'child_selector': {},   // selector child_selector {}\r\n                '& > selector': {}      // selector > selector {}\r\n            },\r\n            '&:first-child': {}         // selector:first-child {}\r\n        },\r\n        '@media print': {               // @media print { selector {} }\r\n            'selector': {}\r\n        }\r\n    })\r\n*/\r\n\r\n/**\r\n * @classdesc A helper object for managing CSS rules.\r\n * @class\r\n * @hideconstructor\r\n * @param {object} [rules] An object with CSS rules.\r\n * @param {*} [parent]\r\n */\r\nfunction CSSObject(options, parent) {\r\n    if (parent) {\r\n        this.parent = parent;\r\n    }\r\n    /**\r\n     * The rules property contains the CSS rules as a JavaScript object. \r\n     * \r\n     * The CSS property name should be written as camelCased name instead of kebab-cased (hyphen-delimited) name.\r\n     * \r\n     * You can use '&' in CSS selector to indicate the selector of the parent rule.\r\n     * \r\n     * @type {object}\r\n     * @example\r\n{\r\n    body: {\r\n        color: 'darkgray',\r\n        backgroundColor: '#EDFFFF'\r\n        '& > div': {\r\n            fontWeight: 'bold',\r\n            opacity: 0.5\r\n        }\r\n    }\r\n}\r\n     * @example <caption>CSS</caption>\r\nbody {\r\n    color: darkgray;\r\n    background-color: #EDFFFF;\r\n}\r\nbody > div {\r\n    font-weight: bold;\r\n    opacity: 0.5;\r\n}\r\n     */\r\n    this.rules = options || {};\r\n    /**\r\n     * Reference to `<style>` element in which CSS rules are rendered.\r\n     * @type {HTMLElement}\r\n     */\r\n    this.style = null;\r\n}\r\n\r\n/**\r\n * Returns string representation for the CSS object.\r\n * \r\n * @return {string} CSS syntax\r\n * @example\r\nCortona3DSolo.app.ui.css({body: { backgroundColor: 'red' } }).toString()\r\n// -> \"body { background-color: red; }\"\r\n */\r\nCSSObject.prototype.toString = function () {\r\n    var syntax = '',\r\n        rule,\r\n        selector,\r\n        prop,\r\n        fullSelector,\r\n        parent = this.parent,\r\n        trim = /(^\\s+|\\s+$)/,\r\n        children;\r\n    for (selector in this.rules) {\r\n        var isMedia = selector.indexOf('@media') === 0 && !parent;\r\n        if (this.rules.hasOwnProperty(selector)) {\r\n            if (syntax) {\r\n                syntax += '\\n';\r\n            }\r\n            if (parent) {\r\n                fullSelector = selector.split(/\\s*,\\s*/).map(function (s) {\r\n                    s = s.replace(trim, '');\r\n                    return (s.indexOf('&') < 0) ? (parent + ' ' + s) : s.replace(/&/, parent);\r\n                }).join(',');\r\n            } else {\r\n                fullSelector = selector.replace(trim, '');\r\n            }\r\n            syntax += fullSelector + ' {';\r\n            if (isMedia) {\r\n                syntax += '\\n' + new CSSObject(this.rules[selector]);\r\n            } else {\r\n                children = [];\r\n                rule = this.rules[selector];\r\n                if (util.isObject(rule)) {\r\n                    for (prop in rule) {\r\n                        if (rule.hasOwnProperty(prop)) {\r\n                            if (prop.indexOf('&') < 0) {\r\n                                syntax += '\\n' + camelToKebab(prop) + ': ' + rule[prop] + ';';\r\n                            } else if (prop !== '&') {\r\n                                children.push(prop);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            syntax += '\\n}';\r\n            if (!isMedia) {\r\n                children.forEach(function (prop) {\r\n                    var o = {};\r\n                    o[prop] = rule[prop];\r\n                    syntax += '\\n' + new CSSObject(o, fullSelector);\r\n                });\r\n                if (util.isObject(rule['&'])) {\r\n                    syntax += '\\n' + new CSSObject(rule['&'], fullSelector);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return syntax;\r\n};\r\n\r\n/**\r\n * Apply CSS rules to an HTML page.\r\n * \r\n * @param {object} [rules] Additional rules for merging with existing ones. \r\n * @return {CSSObject}\r\n * @example\r\nvar css = Cortona3DSolo.app.ui.css({body: { backgroundColor: 'red' } });\r\ncss.render({ body: { color: 'white' } });\r\n// -> body { background-color: red; color: white; }\r\n */\r\nCSSObject.prototype.render = function (options) {\r\n    if (!this.style) {\r\n        this.style = document.head.appendChild(document.createElement('style'));\r\n        this.style.type = 'text/css';\r\n    }\r\n    if (options) {\r\n        util.expand(this.rules, options);\r\n    }\r\n    this.style.innerHTML = this.toString();\r\n    return this;\r\n};\r\n\r\n/**\r\n * Clears all CSS rules.\r\n * \r\n * @return {CSSObject}\r\n */\r\nCSSObject.prototype.clear = function () {\r\n    this.rules = {};\r\n    return this;\r\n};\r\n\r\n/**\r\n * Returns new instance of CSSObject.\r\n * \r\n * @private\r\n * @param {object} [rules]\r\n * @return {CSSObject}\r\n */\r\nfunction css(options) {\r\n    return new CSSObject(options);\r\n}\r\n\r\nmodule.exports = css;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/css-object.js\n// module id = 14\n// module chunks = 0","/**\n * XML to JSON converter\n *\n * @module xml2json\n * @author timduck@cortona3d.com\n */\n\nvar XMLNodeData = require('XMLNodeData');\n\n/**\n * Convert XML tree to JSON object\n * \n * <node att1=\"att1-value\" att2=\"att2-value\">\n *      <foo>Foo</foo>\n *      <bar>\n *          <![CDATA[Bar]]>\n *      </bar>\n *      <items>\n *          <item>i1</item>\n *          <item>i2</item>\n *          <item>i3</item>\n *          <item>i4</item>\n *      </items>\n * </node>\n * \n * {\n *  node: {\n *      \"@attributes\": {\n *          att1: \"att1-value\",\n *          att2: \"att2-value\"\n *      },\n *      foo: { \"#text\": \"Foo\" },\n *      bar: { \"#text\": \"Bar\" },\n *      items: {\n *          item: [\n *              { \"#text\": \"i1\" },\n *              { \"#text\": \"i2\" },\n *              { \"#text\": \"i3\" },\n *              { \"#text\": \"i4\" }\n *          ]\n *      }\n *  }\n * }\n * \n * @param {DOMNode} xml The XML DOMNode\n * @returns {XMLNodeData} The JavaScript object\n */\n\n/*\n * var json = xmlToJson(xmlNode);\n * /node/foo/text() --> json.node.foo['#text'] --> json.node.foo.$text()\n * /node/bar --> json.node.bar['#text'] --> json.node.bar.$text()\n * count(/node/children/item) --> json.$(json.node.children.item).length --> json.$('node/children/item').length\n * /node/children/item[2] --> json.node.children.item[1] --> json.$('node.children.item')[1]\n * /node/@att1 --> json.node['@attributes'].att1 --> json.node.$attr('att1')\n * \n */ \n\nfunction xmlToJson(xml) {\n    var obj = new XMLNodeData();\n\n    if (xml.nodeType == 1) { // element\n        // node name\n        obj[\"@name\"] = xml.nodeName;\n        // attributes\n        if (xml.attributes.length > 0) {\n            obj[\"@attributes\"] = {};\n            for (var j = 0; j < xml.attributes.length; j++) {\n                var attribute = xml.attributes.item(j);\n                obj[\"@attributes\"][attribute.nodeName] = attribute.nodeValue;\n            }\n        }\n    }\n\n    // children\n    var hasText = false;\n    var hasMultiText = false;\n    var hasNodes = false;\n    var hasCDATA = false;\n    if (xml.hasChildNodes()) {\n        obj['@children'] = [];\n        for (var i = 0; i < xml.childNodes.length; i++) {\n            var item = xml.childNodes.item(i);\n            var nodeName = item.nodeName;\n            var isElement = item.nodeType === 1;\n            var isText = item.nodeType === 3;\n            var child = xmlToJson(item);\n            hasText = hasText || isText;\n            hasNodes = hasNodes || !isText;\n            hasCDATA = hasCDATA || item.nodeType === 4;\n            if (typeof obj[nodeName] === \"undefined\") {\n                obj[nodeName] = child;\n            } else {\n                if (typeof obj[nodeName].push === \"undefined\") {\n                    hasMultiText = hasMultiText || isText;\n                    var old = obj[nodeName];\n                    obj[nodeName] = [];\n                    obj[nodeName].push(old);\n                }\n                obj[nodeName].push(child);\n            }\n            if (isElement || (isText && child)) obj['@children'].push(child);\n        }\n\n        if (hasMultiText) {\n            obj['#text'] = obj['#text'].join('').replace(/^[\\s\\r\\n]*$/, '');\n        }\n        if (hasText && hasNodes) {\n            delete obj['#text'];\n        }\n        if (hasCDATA) {\n            obj['#text'] = obj['#cdata-section'];\n            delete obj['#cdata-section'];\n        }\n    } else if (typeof xml.nodeValue === \"string\") {\n        obj = xml.nodeValue.replace(/^[\\s\\r\\n]*$/, '');\n    }\n\n    return obj;\n}\n\nmodule.exports = xmlToJson;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/xml2json.js\n// module id = 15\n// module chunks = 0","/*! Hammer.JS - v2.0.7 - 2016-04-22\n * http://hammerjs.github.io/\n *\n * Copyright (c) 2016 Jorik Tangelder;\n * Licensed under the MIT license */\n(function(window, document, exportName, undefined) {\n  'use strict';\n\nvar VENDOR_PREFIXES = ['', 'webkit', 'Moz', 'MS', 'ms', 'o'];\nvar TEST_ELEMENT = document.createElement('div');\n\nvar TYPE_FUNCTION = 'function';\n\nvar round = Math.round;\nvar abs = Math.abs;\nvar now = Date.now;\n\n/**\n * set a timeout with a given scope\n * @param {Function} fn\n * @param {Number} timeout\n * @param {Object} context\n * @returns {number}\n */\nfunction setTimeoutContext(fn, timeout, context) {\n    return setTimeout(bindFn(fn, context), timeout);\n}\n\n/**\n * if the argument is an array, we want to execute the fn on each entry\n * if it aint an array we don't want to do a thing.\n * this is used by all the methods that accept a single and array argument.\n * @param {*|Array} arg\n * @param {String} fn\n * @param {Object} [context]\n * @returns {Boolean}\n */\nfunction invokeArrayArg(arg, fn, context) {\n    if (Array.isArray(arg)) {\n        each(arg, context[fn], context);\n        return true;\n    }\n    return false;\n}\n\n/**\n * walk objects and arrays\n * @param {Object} obj\n * @param {Function} iterator\n * @param {Object} context\n */\nfunction each(obj, iterator, context) {\n    var i;\n\n    if (!obj) {\n        return;\n    }\n\n    if (obj.forEach) {\n        obj.forEach(iterator, context);\n    } else if (obj.length !== undefined) {\n        i = 0;\n        while (i < obj.length) {\n            iterator.call(context, obj[i], i, obj);\n            i++;\n        }\n    } else {\n        for (i in obj) {\n            obj.hasOwnProperty(i) && iterator.call(context, obj[i], i, obj);\n        }\n    }\n}\n\n/**\n * wrap a method with a deprecation warning and stack trace\n * @param {Function} method\n * @param {String} name\n * @param {String} message\n * @returns {Function} A new function wrapping the supplied method.\n */\nfunction deprecate(method, name, message) {\n    var deprecationMessage = 'DEPRECATED METHOD: ' + name + '\\n' + message + ' AT \\n';\n    return function() {\n        var e = new Error('get-stack-trace');\n        var stack = e && e.stack ? e.stack.replace(/^[^\\(]+?[\\n$]/gm, '')\n            .replace(/^\\s+at\\s+/gm, '')\n            .replace(/^Object.<anonymous>\\s*\\(/gm, '{anonymous}()@') : 'Unknown Stack Trace';\n\n        var log = window.console && (window.console.warn || window.console.log);\n        if (log) {\n            log.call(window.console, deprecationMessage, stack);\n        }\n        return method.apply(this, arguments);\n    };\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} target\n * @param {...Object} objects_to_assign\n * @returns {Object} target\n */\nvar assign;\nif (typeof Object.assign !== 'function') {\n    assign = function assign(target) {\n        if (target === undefined || target === null) {\n            throw new TypeError('Cannot convert undefined or null to object');\n        }\n\n        var output = Object(target);\n        for (var index = 1; index < arguments.length; index++) {\n            var source = arguments[index];\n            if (source !== undefined && source !== null) {\n                for (var nextKey in source) {\n                    if (source.hasOwnProperty(nextKey)) {\n                        output[nextKey] = source[nextKey];\n                    }\n                }\n            }\n        }\n        return output;\n    };\n} else {\n    assign = Object.assign;\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} dest\n * @param {Object} src\n * @param {Boolean} [merge=false]\n * @returns {Object} dest\n */\nvar extend = deprecate(function extend(dest, src, merge) {\n    var keys = Object.keys(src);\n    var i = 0;\n    while (i < keys.length) {\n        if (!merge || (merge && dest[keys[i]] === undefined)) {\n            dest[keys[i]] = src[keys[i]];\n        }\n        i++;\n    }\n    return dest;\n}, 'extend', 'Use `assign`.');\n\n/**\n * merge the values from src in the dest.\n * means that properties that exist in dest will not be overwritten by src\n * @param {Object} dest\n * @param {Object} src\n * @returns {Object} dest\n */\nvar merge = deprecate(function merge(dest, src) {\n    return extend(dest, src, true);\n}, 'merge', 'Use `assign`.');\n\n/**\n * simple class inheritance\n * @param {Function} child\n * @param {Function} base\n * @param {Object} [properties]\n */\nfunction inherit(child, base, properties) {\n    var baseP = base.prototype,\n        childP;\n\n    childP = child.prototype = Object.create(baseP);\n    childP.constructor = child;\n    childP._super = baseP;\n\n    if (properties) {\n        assign(childP, properties);\n    }\n}\n\n/**\n * simple function bind\n * @param {Function} fn\n * @param {Object} context\n * @returns {Function}\n */\nfunction bindFn(fn, context) {\n    return function boundFn() {\n        return fn.apply(context, arguments);\n    };\n}\n\n/**\n * let a boolean value also be a function that must return a boolean\n * this first item in args will be used as the context\n * @param {Boolean|Function} val\n * @param {Array} [args]\n * @returns {Boolean}\n */\nfunction boolOrFn(val, args) {\n    if (typeof val == TYPE_FUNCTION) {\n        return val.apply(args ? args[0] || undefined : undefined, args);\n    }\n    return val;\n}\n\n/**\n * use the val2 when val1 is undefined\n * @param {*} val1\n * @param {*} val2\n * @returns {*}\n */\nfunction ifUndefined(val1, val2) {\n    return (val1 === undefined) ? val2 : val1;\n}\n\n/**\n * addEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction addEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.addEventListener(type, handler, false);\n    });\n}\n\n/**\n * removeEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction removeEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.removeEventListener(type, handler, false);\n    });\n}\n\n/**\n * find if a node is in the given parent\n * @method hasParent\n * @param {HTMLElement} node\n * @param {HTMLElement} parent\n * @return {Boolean} found\n */\nfunction hasParent(node, parent) {\n    while (node) {\n        if (node == parent) {\n            return true;\n        }\n        node = node.parentNode;\n    }\n    return false;\n}\n\n/**\n * small indexOf wrapper\n * @param {String} str\n * @param {String} find\n * @returns {Boolean} found\n */\nfunction inStr(str, find) {\n    return str.indexOf(find) > -1;\n}\n\n/**\n * split string on whitespace\n * @param {String} str\n * @returns {Array} words\n */\nfunction splitStr(str) {\n    return str.trim().split(/\\s+/g);\n}\n\n/**\n * find if a array contains the object using indexOf or a simple polyFill\n * @param {Array} src\n * @param {String} find\n * @param {String} [findByKey]\n * @return {Boolean|Number} false when not found, or the index\n */\nfunction inArray(src, find, findByKey) {\n    if (src.indexOf && !findByKey) {\n        return src.indexOf(find);\n    } else {\n        var i = 0;\n        while (i < src.length) {\n            if ((findByKey && src[i][findByKey] == find) || (!findByKey && src[i] === find)) {\n                return i;\n            }\n            i++;\n        }\n        return -1;\n    }\n}\n\n/**\n * convert array-like objects to real arrays\n * @param {Object} obj\n * @returns {Array}\n */\nfunction toArray(obj) {\n    return Array.prototype.slice.call(obj, 0);\n}\n\n/**\n * unique array with objects based on a key (like 'id') or just by the array's value\n * @param {Array} src [{id:1},{id:2},{id:1}]\n * @param {String} [key]\n * @param {Boolean} [sort=False]\n * @returns {Array} [{id:1},{id:2}]\n */\nfunction uniqueArray(src, key, sort) {\n    var results = [];\n    var values = [];\n    var i = 0;\n\n    while (i < src.length) {\n        var val = key ? src[i][key] : src[i];\n        if (inArray(values, val) < 0) {\n            results.push(src[i]);\n        }\n        values[i] = val;\n        i++;\n    }\n\n    if (sort) {\n        if (!key) {\n            results = results.sort();\n        } else {\n            results = results.sort(function sortUniqueArray(a, b) {\n                return a[key] > b[key];\n            });\n        }\n    }\n\n    return results;\n}\n\n/**\n * get the prefixed property\n * @param {Object} obj\n * @param {String} property\n * @returns {String|Undefined} prefixed\n */\nfunction prefixed(obj, property) {\n    var prefix, prop;\n    var camelProp = property[0].toUpperCase() + property.slice(1);\n\n    var i = 0;\n    while (i < VENDOR_PREFIXES.length) {\n        prefix = VENDOR_PREFIXES[i];\n        prop = (prefix) ? prefix + camelProp : property;\n\n        if (prop in obj) {\n            return prop;\n        }\n        i++;\n    }\n    return undefined;\n}\n\n/**\n * get a unique id\n * @returns {number} uniqueId\n */\nvar _uniqueId = 1;\nfunction uniqueId() {\n    return _uniqueId++;\n}\n\n/**\n * get the window object of an element\n * @param {HTMLElement} element\n * @returns {DocumentView|Window}\n */\nfunction getWindowForElement(element) {\n    var doc = element.ownerDocument || element;\n    return (doc.defaultView || doc.parentWindow || window);\n}\n\nvar MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android/i;\n\nvar SUPPORT_TOUCH = ('ontouchstart' in window);\nvar SUPPORT_POINTER_EVENTS = prefixed(window, 'PointerEvent') !== undefined;\nvar SUPPORT_ONLY_TOUCH = SUPPORT_TOUCH && MOBILE_REGEX.test(navigator.userAgent);\n\nvar INPUT_TYPE_TOUCH = 'touch';\nvar INPUT_TYPE_PEN = 'pen';\nvar INPUT_TYPE_MOUSE = 'mouse';\nvar INPUT_TYPE_KINECT = 'kinect';\n\nvar COMPUTE_INTERVAL = 25;\n\nvar INPUT_START = 1;\nvar INPUT_MOVE = 2;\nvar INPUT_END = 4;\nvar INPUT_CANCEL = 8;\n\nvar DIRECTION_NONE = 1;\nvar DIRECTION_LEFT = 2;\nvar DIRECTION_RIGHT = 4;\nvar DIRECTION_UP = 8;\nvar DIRECTION_DOWN = 16;\n\nvar DIRECTION_HORIZONTAL = DIRECTION_LEFT | DIRECTION_RIGHT;\nvar DIRECTION_VERTICAL = DIRECTION_UP | DIRECTION_DOWN;\nvar DIRECTION_ALL = DIRECTION_HORIZONTAL | DIRECTION_VERTICAL;\n\nvar PROPS_XY = ['x', 'y'];\nvar PROPS_CLIENT_XY = ['clientX', 'clientY'];\n\n/**\n * create new input type manager\n * @param {Manager} manager\n * @param {Function} callback\n * @returns {Input}\n * @constructor\n */\nfunction Input(manager, callback) {\n    var self = this;\n    this.manager = manager;\n    this.callback = callback;\n    this.element = manager.element;\n    this.target = manager.options.inputTarget;\n\n    // smaller wrapper around the handler, for the scope and the enabled state of the manager,\n    // so when disabled the input events are completely bypassed.\n    this.domHandler = function(ev) {\n        if (boolOrFn(manager.options.enable, [manager])) {\n            self.handler(ev);\n        }\n    };\n\n    this.init();\n\n}\n\nInput.prototype = {\n    /**\n     * should handle the inputEvent data and trigger the callback\n     * @virtual\n     */\n    handler: function() { },\n\n    /**\n     * bind the events\n     */\n    init: function() {\n        this.evEl && addEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && addEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && addEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    },\n\n    /**\n     * unbind the events\n     */\n    destroy: function() {\n        this.evEl && removeEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && removeEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && removeEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    }\n};\n\n/**\n * create new input type manager\n * called by the Manager constructor\n * @param {Hammer} manager\n * @returns {Input}\n */\nfunction createInputInstance(manager) {\n    var Type;\n    var inputClass = manager.options.inputClass;\n\n    if (inputClass) {\n        Type = inputClass;\n    } else if (SUPPORT_POINTER_EVENTS) {\n        Type = PointerEventInput;\n    } else if (SUPPORT_ONLY_TOUCH) {\n        Type = TouchInput;\n    } else if (!SUPPORT_TOUCH) {\n        Type = MouseInput;\n    } else {\n        Type = TouchMouseInput;\n    }\n    return new (Type)(manager, inputHandler);\n}\n\n/**\n * handle input events\n * @param {Manager} manager\n * @param {String} eventType\n * @param {Object} input\n */\nfunction inputHandler(manager, eventType, input) {\n    var pointersLen = input.pointers.length;\n    var changedPointersLen = input.changedPointers.length;\n    var isFirst = (eventType & INPUT_START && (pointersLen - changedPointersLen === 0));\n    var isFinal = (eventType & (INPUT_END | INPUT_CANCEL) && (pointersLen - changedPointersLen === 0));\n\n    input.isFirst = !!isFirst;\n    input.isFinal = !!isFinal;\n\n    if (isFirst) {\n        manager.session = {};\n    }\n\n    // source event is the normalized value of the domEvents\n    // like 'touchstart, mouseup, pointerdown'\n    input.eventType = eventType;\n\n    // compute scale, rotation etc\n    computeInputData(manager, input);\n\n    // emit secret event\n    manager.emit('hammer.input', input);\n\n    manager.recognize(input);\n    manager.session.prevInput = input;\n}\n\n/**\n * extend the data with some usable properties like scale, rotate, velocity etc\n * @param {Object} manager\n * @param {Object} input\n */\nfunction computeInputData(manager, input) {\n    var session = manager.session;\n    var pointers = input.pointers;\n    var pointersLength = pointers.length;\n\n    // store the first input to calculate the distance and direction\n    if (!session.firstInput) {\n        session.firstInput = simpleCloneInputData(input);\n    }\n\n    // to compute scale and rotation we need to store the multiple touches\n    if (pointersLength > 1 && !session.firstMultiple) {\n        session.firstMultiple = simpleCloneInputData(input);\n    } else if (pointersLength === 1) {\n        session.firstMultiple = false;\n    }\n\n    var firstInput = session.firstInput;\n    var firstMultiple = session.firstMultiple;\n    var offsetCenter = firstMultiple ? firstMultiple.center : firstInput.center;\n\n    var center = input.center = getCenter(pointers);\n    input.timeStamp = now();\n    input.deltaTime = input.timeStamp - firstInput.timeStamp;\n\n    input.angle = getAngle(offsetCenter, center);\n    input.distance = getDistance(offsetCenter, center);\n\n    computeDeltaXY(session, input);\n    input.offsetDirection = getDirection(input.deltaX, input.deltaY);\n\n    var overallVelocity = getVelocity(input.deltaTime, input.deltaX, input.deltaY);\n    input.overallVelocityX = overallVelocity.x;\n    input.overallVelocityY = overallVelocity.y;\n    input.overallVelocity = (abs(overallVelocity.x) > abs(overallVelocity.y)) ? overallVelocity.x : overallVelocity.y;\n\n    input.scale = firstMultiple ? getScale(firstMultiple.pointers, pointers) : 1;\n    input.rotation = firstMultiple ? getRotation(firstMultiple.pointers, pointers) : 0;\n\n    input.maxPointers = !session.prevInput ? input.pointers.length : ((input.pointers.length >\n        session.prevInput.maxPointers) ? input.pointers.length : session.prevInput.maxPointers);\n\n    computeIntervalInputData(session, input);\n\n    // find the correct target\n    var target = manager.element;\n    if (hasParent(input.srcEvent.target, target)) {\n        target = input.srcEvent.target;\n    }\n    input.target = target;\n}\n\nfunction computeDeltaXY(session, input) {\n    var center = input.center;\n    var offset = session.offsetDelta || {};\n    var prevDelta = session.prevDelta || {};\n    var prevInput = session.prevInput || {};\n\n    if (input.eventType === INPUT_START || prevInput.eventType === INPUT_END) {\n        prevDelta = session.prevDelta = {\n            x: prevInput.deltaX || 0,\n            y: prevInput.deltaY || 0\n        };\n\n        offset = session.offsetDelta = {\n            x: center.x,\n            y: center.y\n        };\n    }\n\n    input.deltaX = prevDelta.x + (center.x - offset.x);\n    input.deltaY = prevDelta.y + (center.y - offset.y);\n}\n\n/**\n * velocity is calculated every x ms\n * @param {Object} session\n * @param {Object} input\n */\nfunction computeIntervalInputData(session, input) {\n    var last = session.lastInterval || input,\n        deltaTime = input.timeStamp - last.timeStamp,\n        velocity, velocityX, velocityY, direction;\n\n    if (input.eventType != INPUT_CANCEL && (deltaTime > COMPUTE_INTERVAL || last.velocity === undefined)) {\n        var deltaX = input.deltaX - last.deltaX;\n        var deltaY = input.deltaY - last.deltaY;\n\n        var v = getVelocity(deltaTime, deltaX, deltaY);\n        velocityX = v.x;\n        velocityY = v.y;\n        velocity = (abs(v.x) > abs(v.y)) ? v.x : v.y;\n        direction = getDirection(deltaX, deltaY);\n\n        session.lastInterval = input;\n    } else {\n        // use latest velocity info if it doesn't overtake a minimum period\n        velocity = last.velocity;\n        velocityX = last.velocityX;\n        velocityY = last.velocityY;\n        direction = last.direction;\n    }\n\n    input.velocity = velocity;\n    input.velocityX = velocityX;\n    input.velocityY = velocityY;\n    input.direction = direction;\n}\n\n/**\n * create a simple clone from the input used for storage of firstInput and firstMultiple\n * @param {Object} input\n * @returns {Object} clonedInputData\n */\nfunction simpleCloneInputData(input) {\n    // make a simple copy of the pointers because we will get a reference if we don't\n    // we only need clientXY for the calculations\n    var pointers = [];\n    var i = 0;\n    while (i < input.pointers.length) {\n        pointers[i] = {\n            clientX: round(input.pointers[i].clientX),\n            clientY: round(input.pointers[i].clientY)\n        };\n        i++;\n    }\n\n    return {\n        timeStamp: now(),\n        pointers: pointers,\n        center: getCenter(pointers),\n        deltaX: input.deltaX,\n        deltaY: input.deltaY\n    };\n}\n\n/**\n * get the center of all the pointers\n * @param {Array} pointers\n * @return {Object} center contains `x` and `y` properties\n */\nfunction getCenter(pointers) {\n    var pointersLength = pointers.length;\n\n    // no need to loop when only one touch\n    if (pointersLength === 1) {\n        return {\n            x: round(pointers[0].clientX),\n            y: round(pointers[0].clientY)\n        };\n    }\n\n    var x = 0, y = 0, i = 0;\n    while (i < pointersLength) {\n        x += pointers[i].clientX;\n        y += pointers[i].clientY;\n        i++;\n    }\n\n    return {\n        x: round(x / pointersLength),\n        y: round(y / pointersLength)\n    };\n}\n\n/**\n * calculate the velocity between two points. unit is in px per ms.\n * @param {Number} deltaTime\n * @param {Number} x\n * @param {Number} y\n * @return {Object} velocity `x` and `y`\n */\nfunction getVelocity(deltaTime, x, y) {\n    return {\n        x: x / deltaTime || 0,\n        y: y / deltaTime || 0\n    };\n}\n\n/**\n * get the direction between two points\n * @param {Number} x\n * @param {Number} y\n * @return {Number} direction\n */\nfunction getDirection(x, y) {\n    if (x === y) {\n        return DIRECTION_NONE;\n    }\n\n    if (abs(x) >= abs(y)) {\n        return x < 0 ? DIRECTION_LEFT : DIRECTION_RIGHT;\n    }\n    return y < 0 ? DIRECTION_UP : DIRECTION_DOWN;\n}\n\n/**\n * calculate the absolute distance between two points\n * @param {Object} p1 {x, y}\n * @param {Object} p2 {x, y}\n * @param {Array} [props] containing x and y keys\n * @return {Number} distance\n */\nfunction getDistance(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n\n    return Math.sqrt((x * x) + (y * y));\n}\n\n/**\n * calculate the angle between two coordinates\n * @param {Object} p1\n * @param {Object} p2\n * @param {Array} [props] containing x and y keys\n * @return {Number} angle\n */\nfunction getAngle(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n    return Math.atan2(y, x) * 180 / Math.PI;\n}\n\n/**\n * calculate the rotation degrees between two pointersets\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} rotation\n */\nfunction getRotation(start, end) {\n    return getAngle(end[1], end[0], PROPS_CLIENT_XY) + getAngle(start[1], start[0], PROPS_CLIENT_XY);\n}\n\n/**\n * calculate the scale factor between two pointersets\n * no scale is 1, and goes down to 0 when pinched together, and bigger when pinched out\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} scale\n */\nfunction getScale(start, end) {\n    return getDistance(end[0], end[1], PROPS_CLIENT_XY) / getDistance(start[0], start[1], PROPS_CLIENT_XY);\n}\n\nvar MOUSE_INPUT_MAP = {\n    mousedown: INPUT_START,\n    mousemove: INPUT_MOVE,\n    mouseup: INPUT_END\n};\n\nvar MOUSE_ELEMENT_EVENTS = 'mousedown';\nvar MOUSE_WINDOW_EVENTS = 'mousemove mouseup';\n\n/**\n * Mouse events input\n * @constructor\n * @extends Input\n */\nfunction MouseInput() {\n    this.evEl = MOUSE_ELEMENT_EVENTS;\n    this.evWin = MOUSE_WINDOW_EVENTS;\n\n    this.pressed = false; // mousedown state\n\n    Input.apply(this, arguments);\n}\n\ninherit(MouseInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function MEhandler(ev) {\n        var eventType = MOUSE_INPUT_MAP[ev.type];\n\n        // on start we want to have the left mouse button down\n        if (eventType & INPUT_START && ev.button === 0) {\n            this.pressed = true;\n        }\n\n        if (eventType & INPUT_MOVE && ev.which !== 1) {\n            eventType = INPUT_END;\n        }\n\n        // mouse must be down\n        if (!this.pressed) {\n            return;\n        }\n\n        if (eventType & INPUT_END) {\n            this.pressed = false;\n        }\n\n        this.callback(this.manager, eventType, {\n            pointers: [ev],\n            changedPointers: [ev],\n            pointerType: INPUT_TYPE_MOUSE,\n            srcEvent: ev\n        });\n    }\n});\n\nvar POINTER_INPUT_MAP = {\n    pointerdown: INPUT_START,\n    pointermove: INPUT_MOVE,\n    pointerup: INPUT_END,\n    pointercancel: INPUT_CANCEL,\n    pointerout: INPUT_CANCEL\n};\n\n// in IE10 the pointer types is defined as an enum\nvar IE10_POINTER_TYPE_ENUM = {\n    2: INPUT_TYPE_TOUCH,\n    3: INPUT_TYPE_PEN,\n    4: INPUT_TYPE_MOUSE,\n    5: INPUT_TYPE_KINECT // see https://twitter.com/jacobrossi/status/480596438489890816\n};\n\nvar POINTER_ELEMENT_EVENTS = 'pointerdown';\nvar POINTER_WINDOW_EVENTS = 'pointermove pointerup pointercancel';\n\n// IE10 has prefixed support, and case-sensitive\nif (window.MSPointerEvent && !window.PointerEvent) {\n    POINTER_ELEMENT_EVENTS = 'MSPointerDown';\n    POINTER_WINDOW_EVENTS = 'MSPointerMove MSPointerUp MSPointerCancel';\n}\n\n/**\n * Pointer events input\n * @constructor\n * @extends Input\n */\nfunction PointerEventInput() {\n    this.evEl = POINTER_ELEMENT_EVENTS;\n    this.evWin = POINTER_WINDOW_EVENTS;\n\n    Input.apply(this, arguments);\n\n    this.store = (this.manager.session.pointerEvents = []);\n}\n\ninherit(PointerEventInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function PEhandler(ev) {\n        var store = this.store;\n        var removePointer = false;\n\n        var eventTypeNormalized = ev.type.toLowerCase().replace('ms', '');\n        var eventType = POINTER_INPUT_MAP[eventTypeNormalized];\n        var pointerType = IE10_POINTER_TYPE_ENUM[ev.pointerType] || ev.pointerType;\n\n        var isTouch = (pointerType == INPUT_TYPE_TOUCH);\n\n        // get index of the event in the store\n        var storeIndex = inArray(store, ev.pointerId, 'pointerId');\n\n        // start and mouse must be down\n        if (eventType & INPUT_START && (ev.button === 0 || isTouch)) {\n            if (storeIndex < 0) {\n                store.push(ev);\n                storeIndex = store.length - 1;\n            }\n        } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n            removePointer = true;\n        }\n\n        // it not found, so the pointer hasn't been down (so it's probably a hover)\n        if (storeIndex < 0) {\n            return;\n        }\n\n        // update the event in the store\n        store[storeIndex] = ev;\n\n        this.callback(this.manager, eventType, {\n            pointers: store,\n            changedPointers: [ev],\n            pointerType: pointerType,\n            srcEvent: ev\n        });\n\n        if (removePointer) {\n            // remove from the store\n            store.splice(storeIndex, 1);\n        }\n    }\n});\n\nvar SINGLE_TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar SINGLE_TOUCH_TARGET_EVENTS = 'touchstart';\nvar SINGLE_TOUCH_WINDOW_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Touch events input\n * @constructor\n * @extends Input\n */\nfunction SingleTouchInput() {\n    this.evTarget = SINGLE_TOUCH_TARGET_EVENTS;\n    this.evWin = SINGLE_TOUCH_WINDOW_EVENTS;\n    this.started = false;\n\n    Input.apply(this, arguments);\n}\n\ninherit(SingleTouchInput, Input, {\n    handler: function TEhandler(ev) {\n        var type = SINGLE_TOUCH_INPUT_MAP[ev.type];\n\n        // should we handle the touch events?\n        if (type === INPUT_START) {\n            this.started = true;\n        }\n\n        if (!this.started) {\n            return;\n        }\n\n        var touches = normalizeSingleTouches.call(this, ev, type);\n\n        // when done, reset the started state\n        if (type & (INPUT_END | INPUT_CANCEL) && touches[0].length - touches[1].length === 0) {\n            this.started = false;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction normalizeSingleTouches(ev, type) {\n    var all = toArray(ev.touches);\n    var changed = toArray(ev.changedTouches);\n\n    if (type & (INPUT_END | INPUT_CANCEL)) {\n        all = uniqueArray(all.concat(changed), 'identifier', true);\n    }\n\n    return [all, changed];\n}\n\nvar TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar TOUCH_TARGET_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Multi-user touch events input\n * @constructor\n * @extends Input\n */\nfunction TouchInput() {\n    this.evTarget = TOUCH_TARGET_EVENTS;\n    this.targetIds = {};\n\n    Input.apply(this, arguments);\n}\n\ninherit(TouchInput, Input, {\n    handler: function MTEhandler(ev) {\n        var type = TOUCH_INPUT_MAP[ev.type];\n        var touches = getTouches.call(this, ev, type);\n        if (!touches) {\n            return;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction getTouches(ev, type) {\n    var allTouches = toArray(ev.touches);\n    var targetIds = this.targetIds;\n\n    // when there is only one touch, the process can be simplified\n    if (type & (INPUT_START | INPUT_MOVE) && allTouches.length === 1) {\n        targetIds[allTouches[0].identifier] = true;\n        return [allTouches, allTouches];\n    }\n\n    var i,\n        targetTouches,\n        changedTouches = toArray(ev.changedTouches),\n        changedTargetTouches = [],\n        target = this.target;\n\n    // get target touches from touches\n    targetTouches = allTouches.filter(function(touch) {\n        return hasParent(touch.target, target);\n    });\n\n    // collect touches\n    if (type === INPUT_START) {\n        i = 0;\n        while (i < targetTouches.length) {\n            targetIds[targetTouches[i].identifier] = true;\n            i++;\n        }\n    }\n\n    // filter changed touches to only contain touches that exist in the collected target ids\n    i = 0;\n    while (i < changedTouches.length) {\n        if (targetIds[changedTouches[i].identifier]) {\n            changedTargetTouches.push(changedTouches[i]);\n        }\n\n        // cleanup removed touches\n        if (type & (INPUT_END | INPUT_CANCEL)) {\n            delete targetIds[changedTouches[i].identifier];\n        }\n        i++;\n    }\n\n    if (!changedTargetTouches.length) {\n        return;\n    }\n\n    return [\n        // merge targetTouches with changedTargetTouches so it contains ALL touches, including 'end' and 'cancel'\n        uniqueArray(targetTouches.concat(changedTargetTouches), 'identifier', true),\n        changedTargetTouches\n    ];\n}\n\n/**\n * Combined touch and mouse input\n *\n * Touch has a higher priority then mouse, and while touching no mouse events are allowed.\n * This because touch devices also emit mouse events while doing a touch.\n *\n * @constructor\n * @extends Input\n */\n\nvar DEDUP_TIMEOUT = 2500;\nvar DEDUP_DISTANCE = 25;\n\nfunction TouchMouseInput() {\n    Input.apply(this, arguments);\n\n    var handler = bindFn(this.handler, this);\n    this.touch = new TouchInput(this.manager, handler);\n    this.mouse = new MouseInput(this.manager, handler);\n\n    this.primaryTouch = null;\n    this.lastTouches = [];\n}\n\ninherit(TouchMouseInput, Input, {\n    /**\n     * handle mouse and touch events\n     * @param {Hammer} manager\n     * @param {String} inputEvent\n     * @param {Object} inputData\n     */\n    handler: function TMEhandler(manager, inputEvent, inputData) {\n        var isTouch = (inputData.pointerType == INPUT_TYPE_TOUCH),\n            isMouse = (inputData.pointerType == INPUT_TYPE_MOUSE);\n\n        if (isMouse && inputData.sourceCapabilities && inputData.sourceCapabilities.firesTouchEvents) {\n            return;\n        }\n\n        // when we're in a touch event, record touches to  de-dupe synthetic mouse event\n        if (isTouch) {\n            recordTouches.call(this, inputEvent, inputData);\n        } else if (isMouse && isSyntheticEvent.call(this, inputData)) {\n            return;\n        }\n\n        this.callback(manager, inputEvent, inputData);\n    },\n\n    /**\n     * remove the event listeners\n     */\n    destroy: function destroy() {\n        this.touch.destroy();\n        this.mouse.destroy();\n    }\n});\n\nfunction recordTouches(eventType, eventData) {\n    if (eventType & INPUT_START) {\n        this.primaryTouch = eventData.changedPointers[0].identifier;\n        setLastTouch.call(this, eventData);\n    } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n        setLastTouch.call(this, eventData);\n    }\n}\n\nfunction setLastTouch(eventData) {\n    var touch = eventData.changedPointers[0];\n\n    if (touch.identifier === this.primaryTouch) {\n        var lastTouch = {x: touch.clientX, y: touch.clientY};\n        this.lastTouches.push(lastTouch);\n        var lts = this.lastTouches;\n        var removeLastTouch = function() {\n            var i = lts.indexOf(lastTouch);\n            if (i > -1) {\n                lts.splice(i, 1);\n            }\n        };\n        setTimeout(removeLastTouch, DEDUP_TIMEOUT);\n    }\n}\n\nfunction isSyntheticEvent(eventData) {\n    var x = eventData.srcEvent.clientX, y = eventData.srcEvent.clientY;\n    for (var i = 0; i < this.lastTouches.length; i++) {\n        var t = this.lastTouches[i];\n        var dx = Math.abs(x - t.x), dy = Math.abs(y - t.y);\n        if (dx <= DEDUP_DISTANCE && dy <= DEDUP_DISTANCE) {\n            return true;\n        }\n    }\n    return false;\n}\n\nvar PREFIXED_TOUCH_ACTION = prefixed(TEST_ELEMENT.style, 'touchAction');\nvar NATIVE_TOUCH_ACTION = PREFIXED_TOUCH_ACTION !== undefined;\n\n// magical touchAction value\nvar TOUCH_ACTION_COMPUTE = 'compute';\nvar TOUCH_ACTION_AUTO = 'auto';\nvar TOUCH_ACTION_MANIPULATION = 'manipulation'; // not implemented\nvar TOUCH_ACTION_NONE = 'none';\nvar TOUCH_ACTION_PAN_X = 'pan-x';\nvar TOUCH_ACTION_PAN_Y = 'pan-y';\nvar TOUCH_ACTION_MAP = getTouchActionProps();\n\n/**\n * Touch Action\n * sets the touchAction property or uses the js alternative\n * @param {Manager} manager\n * @param {String} value\n * @constructor\n */\nfunction TouchAction(manager, value) {\n    this.manager = manager;\n    this.set(value);\n}\n\nTouchAction.prototype = {\n    /**\n     * set the touchAction value on the element or enable the polyfill\n     * @param {String} value\n     */\n    set: function(value) {\n        // find out the touch-action by the event handlers\n        if (value == TOUCH_ACTION_COMPUTE) {\n            value = this.compute();\n        }\n\n        if (NATIVE_TOUCH_ACTION && this.manager.element.style && TOUCH_ACTION_MAP[value]) {\n            this.manager.element.style[PREFIXED_TOUCH_ACTION] = value;\n        }\n        this.actions = value.toLowerCase().trim();\n    },\n\n    /**\n     * just re-set the touchAction value\n     */\n    update: function() {\n        this.set(this.manager.options.touchAction);\n    },\n\n    /**\n     * compute the value for the touchAction property based on the recognizer's settings\n     * @returns {String} value\n     */\n    compute: function() {\n        var actions = [];\n        each(this.manager.recognizers, function(recognizer) {\n            if (boolOrFn(recognizer.options.enable, [recognizer])) {\n                actions = actions.concat(recognizer.getTouchAction());\n            }\n        });\n        return cleanTouchActions(actions.join(' '));\n    },\n\n    /**\n     * this method is called on each input cycle and provides the preventing of the browser behavior\n     * @param {Object} input\n     */\n    preventDefaults: function(input) {\n        var srcEvent = input.srcEvent;\n        var direction = input.offsetDirection;\n\n        // if the touch action did prevented once this session\n        if (this.manager.session.prevented) {\n            srcEvent.preventDefault();\n            return;\n        }\n\n        var actions = this.actions;\n        var hasNone = inStr(actions, TOUCH_ACTION_NONE) && !TOUCH_ACTION_MAP[TOUCH_ACTION_NONE];\n        var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y];\n        var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];\n\n        if (hasNone) {\n            //do not prevent defaults if this is a tap gesture\n\n            var isTapPointer = input.pointers.length === 1;\n            var isTapMovement = input.distance < 2;\n            var isTapTouchTime = input.deltaTime < 250;\n\n            if (isTapPointer && isTapMovement && isTapTouchTime) {\n                return;\n            }\n        }\n\n        if (hasPanX && hasPanY) {\n            // `pan-x pan-y` means browser handles all scrolling/panning, do not prevent\n            return;\n        }\n\n        if (hasNone ||\n            (hasPanY && direction & DIRECTION_HORIZONTAL) ||\n            (hasPanX && direction & DIRECTION_VERTICAL)) {\n            return this.preventSrc(srcEvent);\n        }\n    },\n\n    /**\n     * call preventDefault to prevent the browser's default behavior (scrolling in most cases)\n     * @param {Object} srcEvent\n     */\n    preventSrc: function(srcEvent) {\n        this.manager.session.prevented = true;\n        srcEvent.preventDefault();\n    }\n};\n\n/**\n * when the touchActions are collected they are not a valid value, so we need to clean things up. *\n * @param {String} actions\n * @returns {*}\n */\nfunction cleanTouchActions(actions) {\n    // none\n    if (inStr(actions, TOUCH_ACTION_NONE)) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X);\n    var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y);\n\n    // if both pan-x and pan-y are set (different recognizers\n    // for different directions, e.g. horizontal pan but vertical swipe?)\n    // we need none (as otherwise with pan-x pan-y combined none of these\n    // recognizers will work, since the browser would handle all panning\n    if (hasPanX && hasPanY) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    // pan-x OR pan-y\n    if (hasPanX || hasPanY) {\n        return hasPanX ? TOUCH_ACTION_PAN_X : TOUCH_ACTION_PAN_Y;\n    }\n\n    // manipulation\n    if (inStr(actions, TOUCH_ACTION_MANIPULATION)) {\n        return TOUCH_ACTION_MANIPULATION;\n    }\n\n    return TOUCH_ACTION_AUTO;\n}\n\nfunction getTouchActionProps() {\n    if (!NATIVE_TOUCH_ACTION) {\n        return false;\n    }\n    var touchMap = {};\n    var cssSupports = window.CSS && window.CSS.supports;\n    ['auto', 'manipulation', 'pan-y', 'pan-x', 'pan-x pan-y', 'none'].forEach(function(val) {\n\n        // If css.supports is not supported but there is native touch-action assume it supports\n        // all values. This is the case for IE 10 and 11.\n        touchMap[val] = cssSupports ? window.CSS.supports('touch-action', val) : true;\n    });\n    return touchMap;\n}\n\n/**\n * Recognizer flow explained; *\n * All recognizers have the initial state of POSSIBLE when a input session starts.\n * The definition of a input session is from the first input until the last input, with all it's movement in it. *\n * Example session for mouse-input: mousedown -> mousemove -> mouseup\n *\n * On each recognizing cycle (see Manager.recognize) the .recognize() method is executed\n * which determines with state it should be.\n *\n * If the recognizer has the state FAILED, CANCELLED or RECOGNIZED (equals ENDED), it is reset to\n * POSSIBLE to give it another change on the next cycle.\n *\n *               Possible\n *                  |\n *            +-----+---------------+\n *            |                     |\n *      +-----+-----+               |\n *      |           |               |\n *   Failed      Cancelled          |\n *                          +-------+------+\n *                          |              |\n *                      Recognized       Began\n *                                         |\n *                                      Changed\n *                                         |\n *                                  Ended/Recognized\n */\nvar STATE_POSSIBLE = 1;\nvar STATE_BEGAN = 2;\nvar STATE_CHANGED = 4;\nvar STATE_ENDED = 8;\nvar STATE_RECOGNIZED = STATE_ENDED;\nvar STATE_CANCELLED = 16;\nvar STATE_FAILED = 32;\n\n/**\n * Recognizer\n * Every recognizer needs to extend from this class.\n * @constructor\n * @param {Object} options\n */\nfunction Recognizer(options) {\n    this.options = assign({}, this.defaults, options || {});\n\n    this.id = uniqueId();\n\n    this.manager = null;\n\n    // default is enable true\n    this.options.enable = ifUndefined(this.options.enable, true);\n\n    this.state = STATE_POSSIBLE;\n\n    this.simultaneous = {};\n    this.requireFail = [];\n}\n\nRecognizer.prototype = {\n    /**\n     * @virtual\n     * @type {Object}\n     */\n    defaults: {},\n\n    /**\n     * set options\n     * @param {Object} options\n     * @return {Recognizer}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // also update the touchAction, in case something changed about the directions/enabled state\n        this.manager && this.manager.touchAction.update();\n        return this;\n    },\n\n    /**\n     * recognize simultaneous with an other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    recognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'recognizeWith', this)) {\n            return this;\n        }\n\n        var simultaneous = this.simultaneous;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (!simultaneous[otherRecognizer.id]) {\n            simultaneous[otherRecognizer.id] = otherRecognizer;\n            otherRecognizer.recognizeWith(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the simultaneous link. it doesnt remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRecognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRecognizeWith', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        delete this.simultaneous[otherRecognizer.id];\n        return this;\n    },\n\n    /**\n     * recognizer can only run when an other is failing\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    requireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'requireFailure', this)) {\n            return this;\n        }\n\n        var requireFail = this.requireFail;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (inArray(requireFail, otherRecognizer) === -1) {\n            requireFail.push(otherRecognizer);\n            otherRecognizer.requireFailure(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the requireFailure link. it does not remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRequireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRequireFailure', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        var index = inArray(this.requireFail, otherRecognizer);\n        if (index > -1) {\n            this.requireFail.splice(index, 1);\n        }\n        return this;\n    },\n\n    /**\n     * has require failures boolean\n     * @returns {boolean}\n     */\n    hasRequireFailures: function() {\n        return this.requireFail.length > 0;\n    },\n\n    /**\n     * if the recognizer can recognize simultaneous with an other recognizer\n     * @param {Recognizer} otherRecognizer\n     * @returns {Boolean}\n     */\n    canRecognizeWith: function(otherRecognizer) {\n        return !!this.simultaneous[otherRecognizer.id];\n    },\n\n    /**\n     * You should use `tryEmit` instead of `emit` directly to check\n     * that all the needed recognizers has failed before emitting.\n     * @param {Object} input\n     */\n    emit: function(input) {\n        var self = this;\n        var state = this.state;\n\n        function emit(event) {\n            self.manager.emit(event, input);\n        }\n\n        // 'panstart' and 'panmove'\n        if (state < STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n\n        emit(self.options.event); // simple 'eventName' events\n\n        if (input.additionalEvent) { // additional event(panleft, panright, pinchin, pinchout...)\n            emit(input.additionalEvent);\n        }\n\n        // panend and pancancel\n        if (state >= STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n    },\n\n    /**\n     * Check that all the require failure recognizers has failed,\n     * if true, it emits a gesture event,\n     * otherwise, setup the state to FAILED.\n     * @param {Object} input\n     */\n    tryEmit: function(input) {\n        if (this.canEmit()) {\n            return this.emit(input);\n        }\n        // it's failing anyway\n        this.state = STATE_FAILED;\n    },\n\n    /**\n     * can we emit?\n     * @returns {boolean}\n     */\n    canEmit: function() {\n        var i = 0;\n        while (i < this.requireFail.length) {\n            if (!(this.requireFail[i].state & (STATE_FAILED | STATE_POSSIBLE))) {\n                return false;\n            }\n            i++;\n        }\n        return true;\n    },\n\n    /**\n     * update the recognizer\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        // make a new copy of the inputData\n        // so we can change the inputData without messing up the other recognizers\n        var inputDataClone = assign({}, inputData);\n\n        // is is enabled and allow recognizing?\n        if (!boolOrFn(this.options.enable, [this, inputDataClone])) {\n            this.reset();\n            this.state = STATE_FAILED;\n            return;\n        }\n\n        // reset when we've reached the end\n        if (this.state & (STATE_RECOGNIZED | STATE_CANCELLED | STATE_FAILED)) {\n            this.state = STATE_POSSIBLE;\n        }\n\n        this.state = this.process(inputDataClone);\n\n        // the recognizer has recognized a gesture\n        // so trigger an event\n        if (this.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED | STATE_CANCELLED)) {\n            this.tryEmit(inputDataClone);\n        }\n    },\n\n    /**\n     * return the state of the recognizer\n     * the actual recognizing happens in this method\n     * @virtual\n     * @param {Object} inputData\n     * @returns {Const} STATE\n     */\n    process: function(inputData) { }, // jshint ignore:line\n\n    /**\n     * return the preferred touch-action\n     * @virtual\n     * @returns {Array}\n     */\n    getTouchAction: function() { },\n\n    /**\n     * called when the gesture isn't allowed to recognize\n     * like when another is being recognized or it is disabled\n     * @virtual\n     */\n    reset: function() { }\n};\n\n/**\n * get a usable string, used as event postfix\n * @param {Const} state\n * @returns {String} state\n */\nfunction stateStr(state) {\n    if (state & STATE_CANCELLED) {\n        return 'cancel';\n    } else if (state & STATE_ENDED) {\n        return 'end';\n    } else if (state & STATE_CHANGED) {\n        return 'move';\n    } else if (state & STATE_BEGAN) {\n        return 'start';\n    }\n    return '';\n}\n\n/**\n * direction cons to string\n * @param {Const} direction\n * @returns {String}\n */\nfunction directionStr(direction) {\n    if (direction == DIRECTION_DOWN) {\n        return 'down';\n    } else if (direction == DIRECTION_UP) {\n        return 'up';\n    } else if (direction == DIRECTION_LEFT) {\n        return 'left';\n    } else if (direction == DIRECTION_RIGHT) {\n        return 'right';\n    }\n    return '';\n}\n\n/**\n * get a recognizer by name if it is bound to a manager\n * @param {Recognizer|String} otherRecognizer\n * @param {Recognizer} recognizer\n * @returns {Recognizer}\n */\nfunction getRecognizerByNameIfManager(otherRecognizer, recognizer) {\n    var manager = recognizer.manager;\n    if (manager) {\n        return manager.get(otherRecognizer);\n    }\n    return otherRecognizer;\n}\n\n/**\n * This recognizer is just used as a base for the simple attribute recognizers.\n * @constructor\n * @extends Recognizer\n */\nfunction AttrRecognizer() {\n    Recognizer.apply(this, arguments);\n}\n\ninherit(AttrRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof AttrRecognizer\n     */\n    defaults: {\n        /**\n         * @type {Number}\n         * @default 1\n         */\n        pointers: 1\n    },\n\n    /**\n     * Used to check if it the recognizer receives valid input, like input.distance > 10.\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {Boolean} recognized\n     */\n    attrTest: function(input) {\n        var optionPointers = this.options.pointers;\n        return optionPointers === 0 || input.pointers.length === optionPointers;\n    },\n\n    /**\n     * Process the input and return the state for the recognizer\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {*} State\n     */\n    process: function(input) {\n        var state = this.state;\n        var eventType = input.eventType;\n\n        var isRecognized = state & (STATE_BEGAN | STATE_CHANGED);\n        var isValid = this.attrTest(input);\n\n        // on cancel input and we've recognized before, return STATE_CANCELLED\n        if (isRecognized && (eventType & INPUT_CANCEL || !isValid)) {\n            return state | STATE_CANCELLED;\n        } else if (isRecognized || isValid) {\n            if (eventType & INPUT_END) {\n                return state | STATE_ENDED;\n            } else if (!(state & STATE_BEGAN)) {\n                return STATE_BEGAN;\n            }\n            return state | STATE_CHANGED;\n        }\n        return STATE_FAILED;\n    }\n});\n\n/**\n * Pan\n * Recognized when the pointer is down and moved in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PanRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n\n    this.pX = null;\n    this.pY = null;\n}\n\ninherit(PanRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PanRecognizer\n     */\n    defaults: {\n        event: 'pan',\n        threshold: 10,\n        pointers: 1,\n        direction: DIRECTION_ALL\n    },\n\n    getTouchAction: function() {\n        var direction = this.options.direction;\n        var actions = [];\n        if (direction & DIRECTION_HORIZONTAL) {\n            actions.push(TOUCH_ACTION_PAN_Y);\n        }\n        if (direction & DIRECTION_VERTICAL) {\n            actions.push(TOUCH_ACTION_PAN_X);\n        }\n        return actions;\n    },\n\n    directionTest: function(input) {\n        var options = this.options;\n        var hasMoved = true;\n        var distance = input.distance;\n        var direction = input.direction;\n        var x = input.deltaX;\n        var y = input.deltaY;\n\n        // lock to axis?\n        if (!(direction & options.direction)) {\n            if (options.direction & DIRECTION_HORIZONTAL) {\n                direction = (x === 0) ? DIRECTION_NONE : (x < 0) ? DIRECTION_LEFT : DIRECTION_RIGHT;\n                hasMoved = x != this.pX;\n                distance = Math.abs(input.deltaX);\n            } else {\n                direction = (y === 0) ? DIRECTION_NONE : (y < 0) ? DIRECTION_UP : DIRECTION_DOWN;\n                hasMoved = y != this.pY;\n                distance = Math.abs(input.deltaY);\n            }\n        }\n        input.direction = direction;\n        return hasMoved && distance > options.threshold && direction & options.direction;\n    },\n\n    attrTest: function(input) {\n        return AttrRecognizer.prototype.attrTest.call(this, input) &&\n            (this.state & STATE_BEGAN || (!(this.state & STATE_BEGAN) && this.directionTest(input)));\n    },\n\n    emit: function(input) {\n\n        this.pX = input.deltaX;\n        this.pY = input.deltaY;\n\n        var direction = directionStr(input.direction);\n\n        if (direction) {\n            input.additionalEvent = this.options.event + direction;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Pinch\n * Recognized when two or more pointers are moving toward (zoom-in) or away from each other (zoom-out).\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PinchRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(PinchRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'pinch',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.scale - 1) > this.options.threshold || this.state & STATE_BEGAN);\n    },\n\n    emit: function(input) {\n        if (input.scale !== 1) {\n            var inOut = input.scale < 1 ? 'in' : 'out';\n            input.additionalEvent = this.options.event + inOut;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Press\n * Recognized when the pointer is down for x ms without any movement.\n * @constructor\n * @extends Recognizer\n */\nfunction PressRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    this._timer = null;\n    this._input = null;\n}\n\ninherit(PressRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PressRecognizer\n     */\n    defaults: {\n        event: 'press',\n        pointers: 1,\n        time: 251, // minimal time of the pointer to be pressed\n        threshold: 9 // a minimal movement is ok, but keep it low\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_AUTO];\n    },\n\n    process: function(input) {\n        var options = this.options;\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTime = input.deltaTime > options.time;\n\n        this._input = input;\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (!validMovement || !validPointers || (input.eventType & (INPUT_END | INPUT_CANCEL) && !validTime)) {\n            this.reset();\n        } else if (input.eventType & INPUT_START) {\n            this.reset();\n            this._timer = setTimeoutContext(function() {\n                this.state = STATE_RECOGNIZED;\n                this.tryEmit();\n            }, options.time, this);\n        } else if (input.eventType & INPUT_END) {\n            return STATE_RECOGNIZED;\n        }\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function(input) {\n        if (this.state !== STATE_RECOGNIZED) {\n            return;\n        }\n\n        if (input && (input.eventType & INPUT_END)) {\n            this.manager.emit(this.options.event + 'up', input);\n        } else {\n            this._input.timeStamp = now();\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Rotate\n * Recognized when two or more pointer are moving in a circular motion.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction RotateRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(RotateRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof RotateRecognizer\n     */\n    defaults: {\n        event: 'rotate',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.rotation) > this.options.threshold || this.state & STATE_BEGAN);\n    }\n});\n\n/**\n * Swipe\n * Recognized when the pointer is moving fast (velocity), with enough distance in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction SwipeRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(SwipeRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof SwipeRecognizer\n     */\n    defaults: {\n        event: 'swipe',\n        threshold: 10,\n        velocity: 0.3,\n        direction: DIRECTION_HORIZONTAL | DIRECTION_VERTICAL,\n        pointers: 1\n    },\n\n    getTouchAction: function() {\n        return PanRecognizer.prototype.getTouchAction.call(this);\n    },\n\n    attrTest: function(input) {\n        var direction = this.options.direction;\n        var velocity;\n\n        if (direction & (DIRECTION_HORIZONTAL | DIRECTION_VERTICAL)) {\n            velocity = input.overallVelocity;\n        } else if (direction & DIRECTION_HORIZONTAL) {\n            velocity = input.overallVelocityX;\n        } else if (direction & DIRECTION_VERTICAL) {\n            velocity = input.overallVelocityY;\n        }\n\n        return this._super.attrTest.call(this, input) &&\n            direction & input.offsetDirection &&\n            input.distance > this.options.threshold &&\n            input.maxPointers == this.options.pointers &&\n            abs(velocity) > this.options.velocity && input.eventType & INPUT_END;\n    },\n\n    emit: function(input) {\n        var direction = directionStr(input.offsetDirection);\n        if (direction) {\n            this.manager.emit(this.options.event + direction, input);\n        }\n\n        this.manager.emit(this.options.event, input);\n    }\n});\n\n/**\n * A tap is ecognized when the pointer is doing a small tap/click. Multiple taps are recognized if they occur\n * between the given interval and position. The delay option can be used to recognize multi-taps without firing\n * a single tap.\n *\n * The eventData from the emitted event contains the property `tapCount`, which contains the amount of\n * multi-taps being recognized.\n * @constructor\n * @extends Recognizer\n */\nfunction TapRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    // previous time and center,\n    // used for tap counting\n    this.pTime = false;\n    this.pCenter = false;\n\n    this._timer = null;\n    this._input = null;\n    this.count = 0;\n}\n\ninherit(TapRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'tap',\n        pointers: 1,\n        taps: 1,\n        interval: 300, // max time between the multi-tap taps\n        time: 250, // max time of the pointer to be down (like finger on the screen)\n        threshold: 9, // a minimal movement is ok, but keep it low\n        posThreshold: 10 // a multi-tap can be a bit off the initial position\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_MANIPULATION];\n    },\n\n    process: function(input) {\n        var options = this.options;\n\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTouchTime = input.deltaTime < options.time;\n\n        this.reset();\n\n        if ((input.eventType & INPUT_START) && (this.count === 0)) {\n            return this.failTimeout();\n        }\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (validMovement && validTouchTime && validPointers) {\n            if (input.eventType != INPUT_END) {\n                return this.failTimeout();\n            }\n\n            var validInterval = this.pTime ? (input.timeStamp - this.pTime < options.interval) : true;\n            var validMultiTap = !this.pCenter || getDistance(this.pCenter, input.center) < options.posThreshold;\n\n            this.pTime = input.timeStamp;\n            this.pCenter = input.center;\n\n            if (!validMultiTap || !validInterval) {\n                this.count = 1;\n            } else {\n                this.count += 1;\n            }\n\n            this._input = input;\n\n            // if tap count matches we have recognized it,\n            // else it has began recognizing...\n            var tapCount = this.count % options.taps;\n            if (tapCount === 0) {\n                // no failing requirements, immediately trigger the tap event\n                // or wait as long as the multitap interval to trigger\n                if (!this.hasRequireFailures()) {\n                    return STATE_RECOGNIZED;\n                } else {\n                    this._timer = setTimeoutContext(function() {\n                        this.state = STATE_RECOGNIZED;\n                        this.tryEmit();\n                    }, options.interval, this);\n                    return STATE_BEGAN;\n                }\n            }\n        }\n        return STATE_FAILED;\n    },\n\n    failTimeout: function() {\n        this._timer = setTimeoutContext(function() {\n            this.state = STATE_FAILED;\n        }, this.options.interval, this);\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function() {\n        if (this.state == STATE_RECOGNIZED) {\n            this._input.tapCount = this.count;\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Simple way to create a manager with a default set of recognizers.\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Hammer(element, options) {\n    options = options || {};\n    options.recognizers = ifUndefined(options.recognizers, Hammer.defaults.preset);\n    return new Manager(element, options);\n}\n\n/**\n * @const {string}\n */\nHammer.VERSION = '2.0.7';\n\n/**\n * default settings\n * @namespace\n */\nHammer.defaults = {\n    /**\n     * set if DOM events are being triggered.\n     * But this is slower and unused by simple implementations, so disabled by default.\n     * @type {Boolean}\n     * @default false\n     */\n    domEvents: false,\n\n    /**\n     * The value for the touchAction property/fallback.\n     * When set to `compute` it will magically set the correct value based on the added recognizers.\n     * @type {String}\n     * @default compute\n     */\n    touchAction: TOUCH_ACTION_COMPUTE,\n\n    /**\n     * @type {Boolean}\n     * @default true\n     */\n    enable: true,\n\n    /**\n     * EXPERIMENTAL FEATURE -- can be removed/changed\n     * Change the parent input target element.\n     * If Null, then it is being set the to main element.\n     * @type {Null|EventTarget}\n     * @default null\n     */\n    inputTarget: null,\n\n    /**\n     * force an input class\n     * @type {Null|Function}\n     * @default null\n     */\n    inputClass: null,\n\n    /**\n     * Default recognizer setup when calling `Hammer()`\n     * When creating a new Manager these will be skipped.\n     * @type {Array}\n     */\n    preset: [\n        // RecognizerClass, options, [recognizeWith, ...], [requireFailure, ...]\n        [RotateRecognizer, {enable: false}],\n        [PinchRecognizer, {enable: false}, ['rotate']],\n        [SwipeRecognizer, {direction: DIRECTION_HORIZONTAL}],\n        [PanRecognizer, {direction: DIRECTION_HORIZONTAL}, ['swipe']],\n        [TapRecognizer],\n        [TapRecognizer, {event: 'doubletap', taps: 2}, ['tap']],\n        [PressRecognizer]\n    ],\n\n    /**\n     * Some CSS properties can be used to improve the working of Hammer.\n     * Add them to this method and they will be set when creating a new Manager.\n     * @namespace\n     */\n    cssProps: {\n        /**\n         * Disables text selection to improve the dragging gesture. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userSelect: 'none',\n\n        /**\n         * Disable the Windows Phone grippers when pressing an element.\n         * @type {String}\n         * @default 'none'\n         */\n        touchSelect: 'none',\n\n        /**\n         * Disables the default callout shown when you touch and hold a touch target.\n         * On iOS, when you touch and hold a touch target such as a link, Safari displays\n         * a callout containing information about the link. This property allows you to disable that callout.\n         * @type {String}\n         * @default 'none'\n         */\n        touchCallout: 'none',\n\n        /**\n         * Specifies whether zooming is enabled. Used by IE10>\n         * @type {String}\n         * @default 'none'\n         */\n        contentZooming: 'none',\n\n        /**\n         * Specifies that an entire element should be draggable instead of its contents. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userDrag: 'none',\n\n        /**\n         * Overrides the highlight color shown when the user taps a link or a JavaScript\n         * clickable element in iOS. This property obeys the alpha value, if specified.\n         * @type {String}\n         * @default 'rgba(0,0,0,0)'\n         */\n        tapHighlightColor: 'rgba(0,0,0,0)'\n    }\n};\n\nvar STOP = 1;\nvar FORCED_STOP = 2;\n\n/**\n * Manager\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Manager(element, options) {\n    this.options = assign({}, Hammer.defaults, options || {});\n\n    this.options.inputTarget = this.options.inputTarget || element;\n\n    this.handlers = {};\n    this.session = {};\n    this.recognizers = [];\n    this.oldCssProps = {};\n\n    this.element = element;\n    this.input = createInputInstance(this);\n    this.touchAction = new TouchAction(this, this.options.touchAction);\n\n    toggleCssProps(this, true);\n\n    each(this.options.recognizers, function(item) {\n        var recognizer = this.add(new (item[0])(item[1]));\n        item[2] && recognizer.recognizeWith(item[2]);\n        item[3] && recognizer.requireFailure(item[3]);\n    }, this);\n}\n\nManager.prototype = {\n    /**\n     * set options\n     * @param {Object} options\n     * @returns {Manager}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // Options that need a little more setup\n        if (options.touchAction) {\n            this.touchAction.update();\n        }\n        if (options.inputTarget) {\n            // Clean up existing event listeners and reinitialize\n            this.input.destroy();\n            this.input.target = options.inputTarget;\n            this.input.init();\n        }\n        return this;\n    },\n\n    /**\n     * stop recognizing for this session.\n     * This session will be discarded, when a new [input]start event is fired.\n     * When forced, the recognizer cycle is stopped immediately.\n     * @param {Boolean} [force]\n     */\n    stop: function(force) {\n        this.session.stopped = force ? FORCED_STOP : STOP;\n    },\n\n    /**\n     * run the recognizers!\n     * called by the inputHandler function on every movement of the pointers (touches)\n     * it walks through all the recognizers and tries to detect the gesture that is being made\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        var session = this.session;\n        if (session.stopped) {\n            return;\n        }\n\n        // run the touch-action polyfill\n        this.touchAction.preventDefaults(inputData);\n\n        var recognizer;\n        var recognizers = this.recognizers;\n\n        // this holds the recognizer that is being recognized.\n        // so the recognizer's state needs to be BEGAN, CHANGED, ENDED or RECOGNIZED\n        // if no recognizer is detecting a thing, it is set to `null`\n        var curRecognizer = session.curRecognizer;\n\n        // reset when the last recognizer is recognized\n        // or when we're in a new session\n        if (!curRecognizer || (curRecognizer && curRecognizer.state & STATE_RECOGNIZED)) {\n            curRecognizer = session.curRecognizer = null;\n        }\n\n        var i = 0;\n        while (i < recognizers.length) {\n            recognizer = recognizers[i];\n\n            // find out if we are allowed try to recognize the input for this one.\n            // 1.   allow if the session is NOT forced stopped (see the .stop() method)\n            // 2.   allow if we still haven't recognized a gesture in this session, or the this recognizer is the one\n            //      that is being recognized.\n            // 3.   allow if the recognizer is allowed to run simultaneous with the current recognized recognizer.\n            //      this can be setup with the `recognizeWith()` method on the recognizer.\n            if (session.stopped !== FORCED_STOP && ( // 1\n                    !curRecognizer || recognizer == curRecognizer || // 2\n                    recognizer.canRecognizeWith(curRecognizer))) { // 3\n                recognizer.recognize(inputData);\n            } else {\n                recognizer.reset();\n            }\n\n            // if the recognizer has been recognizing the input as a valid gesture, we want to store this one as the\n            // current active recognizer. but only if we don't already have an active recognizer\n            if (!curRecognizer && recognizer.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED)) {\n                curRecognizer = session.curRecognizer = recognizer;\n            }\n            i++;\n        }\n    },\n\n    /**\n     * get a recognizer by its event name.\n     * @param {Recognizer|String} recognizer\n     * @returns {Recognizer|Null}\n     */\n    get: function(recognizer) {\n        if (recognizer instanceof Recognizer) {\n            return recognizer;\n        }\n\n        var recognizers = this.recognizers;\n        for (var i = 0; i < recognizers.length; i++) {\n            if (recognizers[i].options.event == recognizer) {\n                return recognizers[i];\n            }\n        }\n        return null;\n    },\n\n    /**\n     * add a recognizer to the manager\n     * existing recognizers with the same event name will be removed\n     * @param {Recognizer} recognizer\n     * @returns {Recognizer|Manager}\n     */\n    add: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'add', this)) {\n            return this;\n        }\n\n        // remove existing\n        var existing = this.get(recognizer.options.event);\n        if (existing) {\n            this.remove(existing);\n        }\n\n        this.recognizers.push(recognizer);\n        recognizer.manager = this;\n\n        this.touchAction.update();\n        return recognizer;\n    },\n\n    /**\n     * remove a recognizer by name or instance\n     * @param {Recognizer|String} recognizer\n     * @returns {Manager}\n     */\n    remove: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'remove', this)) {\n            return this;\n        }\n\n        recognizer = this.get(recognizer);\n\n        // let's make sure this recognizer exists\n        if (recognizer) {\n            var recognizers = this.recognizers;\n            var index = inArray(recognizers, recognizer);\n\n            if (index !== -1) {\n                recognizers.splice(index, 1);\n                this.touchAction.update();\n            }\n        }\n\n        return this;\n    },\n\n    /**\n     * bind event\n     * @param {String} events\n     * @param {Function} handler\n     * @returns {EventEmitter} this\n     */\n    on: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n        if (handler === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            handlers[event] = handlers[event] || [];\n            handlers[event].push(handler);\n        });\n        return this;\n    },\n\n    /**\n     * unbind event, leave emit blank to remove all handlers\n     * @param {String} events\n     * @param {Function} [handler]\n     * @returns {EventEmitter} this\n     */\n    off: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            if (!handler) {\n                delete handlers[event];\n            } else {\n                handlers[event] && handlers[event].splice(inArray(handlers[event], handler), 1);\n            }\n        });\n        return this;\n    },\n\n    /**\n     * emit event to the listeners\n     * @param {String} event\n     * @param {Object} data\n     */\n    emit: function(event, data) {\n        // we also want to trigger dom events\n        if (this.options.domEvents) {\n            triggerDomEvent(event, data);\n        }\n\n        // no handlers, so skip it all\n        var handlers = this.handlers[event] && this.handlers[event].slice();\n        if (!handlers || !handlers.length) {\n            return;\n        }\n\n        data.type = event;\n        data.preventDefault = function() {\n            data.srcEvent.preventDefault();\n        };\n\n        var i = 0;\n        while (i < handlers.length) {\n            handlers[i](data);\n            i++;\n        }\n    },\n\n    /**\n     * destroy the manager and unbinds all events\n     * it doesn't unbind dom events, that is the user own responsibility\n     */\n    destroy: function() {\n        this.element && toggleCssProps(this, false);\n\n        this.handlers = {};\n        this.session = {};\n        this.input.destroy();\n        this.element = null;\n    }\n};\n\n/**\n * add/remove the css properties as defined in manager.options.cssProps\n * @param {Manager} manager\n * @param {Boolean} add\n */\nfunction toggleCssProps(manager, add) {\n    var element = manager.element;\n    if (!element.style) {\n        return;\n    }\n    var prop;\n    each(manager.options.cssProps, function(value, name) {\n        prop = prefixed(element.style, name);\n        if (add) {\n            manager.oldCssProps[prop] = element.style[prop];\n            element.style[prop] = value;\n        } else {\n            element.style[prop] = manager.oldCssProps[prop] || '';\n        }\n    });\n    if (!add) {\n        manager.oldCssProps = {};\n    }\n}\n\n/**\n * trigger dom event\n * @param {String} event\n * @param {Object} data\n */\nfunction triggerDomEvent(event, data) {\n    var gestureEvent = document.createEvent('Event');\n    gestureEvent.initEvent(event, true, true);\n    gestureEvent.gesture = data;\n    data.target.dispatchEvent(gestureEvent);\n}\n\nassign(Hammer, {\n    INPUT_START: INPUT_START,\n    INPUT_MOVE: INPUT_MOVE,\n    INPUT_END: INPUT_END,\n    INPUT_CANCEL: INPUT_CANCEL,\n\n    STATE_POSSIBLE: STATE_POSSIBLE,\n    STATE_BEGAN: STATE_BEGAN,\n    STATE_CHANGED: STATE_CHANGED,\n    STATE_ENDED: STATE_ENDED,\n    STATE_RECOGNIZED: STATE_RECOGNIZED,\n    STATE_CANCELLED: STATE_CANCELLED,\n    STATE_FAILED: STATE_FAILED,\n\n    DIRECTION_NONE: DIRECTION_NONE,\n    DIRECTION_LEFT: DIRECTION_LEFT,\n    DIRECTION_RIGHT: DIRECTION_RIGHT,\n    DIRECTION_UP: DIRECTION_UP,\n    DIRECTION_DOWN: DIRECTION_DOWN,\n    DIRECTION_HORIZONTAL: DIRECTION_HORIZONTAL,\n    DIRECTION_VERTICAL: DIRECTION_VERTICAL,\n    DIRECTION_ALL: DIRECTION_ALL,\n\n    Manager: Manager,\n    Input: Input,\n    TouchAction: TouchAction,\n\n    TouchInput: TouchInput,\n    MouseInput: MouseInput,\n    PointerEventInput: PointerEventInput,\n    TouchMouseInput: TouchMouseInput,\n    SingleTouchInput: SingleTouchInput,\n\n    Recognizer: Recognizer,\n    AttrRecognizer: AttrRecognizer,\n    Tap: TapRecognizer,\n    Pan: PanRecognizer,\n    Swipe: SwipeRecognizer,\n    Pinch: PinchRecognizer,\n    Rotate: RotateRecognizer,\n    Press: PressRecognizer,\n\n    on: addEventListeners,\n    off: removeEventListeners,\n    each: each,\n    merge: merge,\n    extend: extend,\n    assign: assign,\n    inherit: inherit,\n    bindFn: bindFn,\n    prefixed: prefixed\n});\n\n// this prevents errors when Hammer is loaded in the presence of an AMD\n//  style loader but by script tag, not by the loader.\nvar freeGlobal = (typeof window !== 'undefined' ? window : (typeof self !== 'undefined' ? self : {})); // jshint ignore:line\nfreeGlobal.Hammer = Hammer;\n\nif (typeof define === 'function' && define.amd) {\n    define(function() {\n        return Hammer;\n    });\n} else if (typeof module != 'undefined' && module.exports) {\n    module.exports = Hammer;\n} else {\n    window[exportName] = Hammer;\n}\n\n})(window, document, 'Hammer');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/hammerjs/hammer.js\n// module id = 16\n// module chunks = 0","// String encode/decode helpers\n'use strict';\n\n\nvar utils = require('./common');\n\n\n// Quick check if we can use fast array to bin string conversion\n//\n// - apply(Array) can fail on Android 2.2\n// - apply(Uint8Array) can fail on iOS 5.1 Safari\n//\nvar STR_APPLY_OK = true;\nvar STR_APPLY_UIA_OK = true;\n\ntry { String.fromCharCode.apply(null, [ 0 ]); } catch (__) { STR_APPLY_OK = false; }\ntry { String.fromCharCode.apply(null, new Uint8Array(1)); } catch (__) { STR_APPLY_UIA_OK = false; }\n\n\n// Table with utf8 lengths (calculated by first byte of sequence)\n// Note, that 5 & 6-byte values and some 4-byte values can not be represented in JS,\n// because max possible codepoint is 0x10ffff\nvar _utf8len = new utils.Buf8(256);\nfor (var q = 0; q < 256; q++) {\n  _utf8len[q] = (q >= 252 ? 6 : q >= 248 ? 5 : q >= 240 ? 4 : q >= 224 ? 3 : q >= 192 ? 2 : 1);\n}\n_utf8len[254] = _utf8len[254] = 1; // Invalid sequence start\n\n\n// convert string to array (typed, when possible)\nexports.string2buf = function (str) {\n  var buf, c, c2, m_pos, i, str_len = str.length, buf_len = 0;\n\n  // count binary size\n  for (m_pos = 0; m_pos < str_len; m_pos++) {\n    c = str.charCodeAt(m_pos);\n    if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {\n      c2 = str.charCodeAt(m_pos + 1);\n      if ((c2 & 0xfc00) === 0xdc00) {\n        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n        m_pos++;\n      }\n    }\n    buf_len += c < 0x80 ? 1 : c < 0x800 ? 2 : c < 0x10000 ? 3 : 4;\n  }\n\n  // allocate buffer\n  buf = new utils.Buf8(buf_len);\n\n  // convert\n  for (i = 0, m_pos = 0; i < buf_len; m_pos++) {\n    c = str.charCodeAt(m_pos);\n    if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {\n      c2 = str.charCodeAt(m_pos + 1);\n      if ((c2 & 0xfc00) === 0xdc00) {\n        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n        m_pos++;\n      }\n    }\n    if (c < 0x80) {\n      /* one byte */\n      buf[i++] = c;\n    } else if (c < 0x800) {\n      /* two bytes */\n      buf[i++] = 0xC0 | (c >>> 6);\n      buf[i++] = 0x80 | (c & 0x3f);\n    } else if (c < 0x10000) {\n      /* three bytes */\n      buf[i++] = 0xE0 | (c >>> 12);\n      buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n      buf[i++] = 0x80 | (c & 0x3f);\n    } else {\n      /* four bytes */\n      buf[i++] = 0xf0 | (c >>> 18);\n      buf[i++] = 0x80 | (c >>> 12 & 0x3f);\n      buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n      buf[i++] = 0x80 | (c & 0x3f);\n    }\n  }\n\n  return buf;\n};\n\n// Helper (used in 2 places)\nfunction buf2binstring(buf, len) {\n  // On Chrome, the arguments in a function call that are allowed is `65534`.\n  // If the length of the buffer is smaller than that, we can use this optimization,\n  // otherwise we will take a slower path.\n  if (len < 65534) {\n    if ((buf.subarray && STR_APPLY_UIA_OK) || (!buf.subarray && STR_APPLY_OK)) {\n      return String.fromCharCode.apply(null, utils.shrinkBuf(buf, len));\n    }\n  }\n\n  var result = '';\n  for (var i = 0; i < len; i++) {\n    result += String.fromCharCode(buf[i]);\n  }\n  return result;\n}\n\n\n// Convert byte array to binary string\nexports.buf2binstring = function (buf) {\n  return buf2binstring(buf, buf.length);\n};\n\n\n// Convert binary string (typed, when possible)\nexports.binstring2buf = function (str) {\n  var buf = new utils.Buf8(str.length);\n  for (var i = 0, len = buf.length; i < len; i++) {\n    buf[i] = str.charCodeAt(i);\n  }\n  return buf;\n};\n\n\n// convert array to string\nexports.buf2string = function (buf, max) {\n  var i, out, c, c_len;\n  var len = max || buf.length;\n\n  // Reserve max possible length (2 words per char)\n  // NB: by unknown reasons, Array is significantly faster for\n  //     String.fromCharCode.apply than Uint16Array.\n  var utf16buf = new Array(len * 2);\n\n  for (out = 0, i = 0; i < len;) {\n    c = buf[i++];\n    // quick process ascii\n    if (c < 0x80) { utf16buf[out++] = c; continue; }\n\n    c_len = _utf8len[c];\n    // skip 5 & 6 byte codes\n    if (c_len > 4) { utf16buf[out++] = 0xfffd; i += c_len - 1; continue; }\n\n    // apply mask on first byte\n    c &= c_len === 2 ? 0x1f : c_len === 3 ? 0x0f : 0x07;\n    // join the rest\n    while (c_len > 1 && i < len) {\n      c = (c << 6) | (buf[i++] & 0x3f);\n      c_len--;\n    }\n\n    // terminated by end of string?\n    if (c_len > 1) { utf16buf[out++] = 0xfffd; continue; }\n\n    if (c < 0x10000) {\n      utf16buf[out++] = c;\n    } else {\n      c -= 0x10000;\n      utf16buf[out++] = 0xd800 | ((c >> 10) & 0x3ff);\n      utf16buf[out++] = 0xdc00 | (c & 0x3ff);\n    }\n  }\n\n  return buf2binstring(utf16buf, out);\n};\n\n\n// Calculate max possible position in utf8 buffer,\n// that will not break sequence. If that's not possible\n// - (very small limits) return max size as is.\n//\n// buf[] - utf8 bytes array\n// max   - length limit (mandatory);\nexports.utf8border = function (buf, max) {\n  var pos;\n\n  max = max || buf.length;\n  if (max > buf.length) { max = buf.length; }\n\n  // go back from last position, until start of sequence found\n  pos = max - 1;\n  while (pos >= 0 && (buf[pos] & 0xC0) === 0x80) { pos--; }\n\n  // Very small and broken sequence,\n  // return max, because we should return something anyway.\n  if (pos < 0) { return max; }\n\n  // If we came to start of buffer - that means buffer is too small,\n  // return max too.\n  if (pos === 0) { return max; }\n\n  return (pos + _utf8len[buf[pos]] > max) ? pos : max;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/pako/lib/utils/strings.js\n// module id = 17\n// module chunks = 0","'use strict';\n\n// Note: adler32 takes 12% for level 0 and 2% for level 6.\n// It isn't worth it to make additional optimizations as in original.\n// Small size is preferable.\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction adler32(adler, buf, len, pos) {\n  var s1 = (adler & 0xffff) |0,\n      s2 = ((adler >>> 16) & 0xffff) |0,\n      n = 0;\n\n  while (len !== 0) {\n    // Set limit ~ twice less than 5552, to keep\n    // s2 in 31-bits, because we force signed ints.\n    // in other case %= will fail.\n    n = len > 2000 ? 2000 : len;\n    len -= n;\n\n    do {\n      s1 = (s1 + buf[pos++]) |0;\n      s2 = (s2 + s1) |0;\n    } while (--n);\n\n    s1 %= 65521;\n    s2 %= 65521;\n  }\n\n  return (s1 | (s2 << 16)) |0;\n}\n\n\nmodule.exports = adler32;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/pako/lib/zlib/adler32.js\n// module id = 18\n// module chunks = 0","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nmodule.exports = {\n\n  /* Allowed flush values; see deflate() and inflate() below for details */\n  Z_NO_FLUSH:         0,\n  Z_PARTIAL_FLUSH:    1,\n  Z_SYNC_FLUSH:       2,\n  Z_FULL_FLUSH:       3,\n  Z_FINISH:           4,\n  Z_BLOCK:            5,\n  Z_TREES:            6,\n\n  /* Return codes for the compression/decompression functions. Negative values\n  * are errors, positive values are used for special but normal events.\n  */\n  Z_OK:               0,\n  Z_STREAM_END:       1,\n  Z_NEED_DICT:        2,\n  Z_ERRNO:           -1,\n  Z_STREAM_ERROR:    -2,\n  Z_DATA_ERROR:      -3,\n  //Z_MEM_ERROR:     -4,\n  Z_BUF_ERROR:       -5,\n  //Z_VERSION_ERROR: -6,\n\n  /* compression levels */\n  Z_NO_COMPRESSION:         0,\n  Z_BEST_SPEED:             1,\n  Z_BEST_COMPRESSION:       9,\n  Z_DEFAULT_COMPRESSION:   -1,\n\n\n  Z_FILTERED:               1,\n  Z_HUFFMAN_ONLY:           2,\n  Z_RLE:                    3,\n  Z_FIXED:                  4,\n  Z_DEFAULT_STRATEGY:       0,\n\n  /* Possible values of the data_type field (though see inflate()) */\n  Z_BINARY:                 0,\n  Z_TEXT:                   1,\n  //Z_ASCII:                1, // = Z_TEXT (deprecated)\n  Z_UNKNOWN:                2,\n\n  /* The deflate compression method */\n  Z_DEFLATED:               8\n  //Z_NULL:                 null // Use -1 or null inline, depending on var type\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/pako/lib/zlib/constants.js\n// module id = 19\n// module chunks = 0","'use strict';\n\n// Note: we can't get significant speed boost here.\n// So write code to minimize size - no pregenerated tables\n// and array tools dependencies.\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n// Use ordinary array, since untyped makes no boost here\nfunction makeTable() {\n  var c, table = [];\n\n  for (var n = 0; n < 256; n++) {\n    c = n;\n    for (var k = 0; k < 8; k++) {\n      c = ((c & 1) ? (0xEDB88320 ^ (c >>> 1)) : (c >>> 1));\n    }\n    table[n] = c;\n  }\n\n  return table;\n}\n\n// Create table on load. Just 255 signed longs. Not a problem.\nvar crcTable = makeTable();\n\n\nfunction crc32(crc, buf, len, pos) {\n  var t = crcTable,\n      end = pos + len;\n\n  crc ^= -1;\n\n  for (var i = pos; i < end; i++) {\n    crc = (crc >>> 8) ^ t[(crc ^ buf[i]) & 0xFF];\n  }\n\n  return (crc ^ (-1)); // >>> 0;\n}\n\n\nmodule.exports = crc32;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/pako/lib/zlib/crc32.js\n// module id = 20\n// module chunks = 0","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction ZStream() {\n  /* next input byte */\n  this.input = null; // JS specific, because we have no pointers\n  this.next_in = 0;\n  /* number of bytes available at input */\n  this.avail_in = 0;\n  /* total number of input bytes read so far */\n  this.total_in = 0;\n  /* next output byte should be put there */\n  this.output = null; // JS specific, because we have no pointers\n  this.next_out = 0;\n  /* remaining free space at output */\n  this.avail_out = 0;\n  /* total number of bytes output so far */\n  this.total_out = 0;\n  /* last error message, NULL if no error */\n  this.msg = ''/*Z_NULL*/;\n  /* not visible by applications */\n  this.state = null;\n  /* best guess about the data type: binary or text */\n  this.data_type = 2/*Z_UNKNOWN*/;\n  /* adler32 value of the uncompressed data */\n  this.adler = 0;\n}\n\nmodule.exports = ZStream;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/pako/lib/zlib/zstream.js\n// module id = 21\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/src/index.js??postcss!./core.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/src/index.js??postcss!./core.css\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/src/index.js??postcss!./core.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core.css\n// module id = 22\n// module chunks = 0","function deface(s) {\r\n    return s.replace(/Tiramisù(\\s+Emstrangen)?/g, 'Cortona3D Solo core');\r\n}\r\nmodule.exports = deface;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/deface.js\n// module id = 23\n// module chunks = 0","/**\r\n * Construct a new Vec3f object.<br><br>\r\n * \r\n * #### new Vec3f(x, y, z)\r\n * #### new Vec3f([x, y, z])\r\n * \r\n * where x, y, and z are the components of the vector.\r\n * \r\n * @class The Vec3f object corresponds to a VRML SFVec3f field. Each component of the vector can be accessed using the x, y, and z properties.\r\n */\r\nfunction Vec3f(/*x, y, z*/) {\r\n    if (arguments.length == 3 && typeof arguments[0] == 'number') {\r\n        /**\r\n         * First value of the vector.\r\n         * @type number\r\n         * @default 0\r\n         */\r\n        this.x = arguments[0];\r\n        /**\r\n         * Second value of the vector.\r\n         * @type number\r\n         * @default 0\r\n         */\r\n        this.y = arguments[1];\r\n        /**\r\n         * Third value of the vector.\r\n         * @type number\r\n         * @default 0\r\n         */\r\n        this.z = arguments[2];\r\n    } else if (arguments.length == 1 && typeof arguments[0] == 'object' && arguments[0] !== null  && arguments[0].length == 3) {\r\n        this.x = arguments[0][0];\r\n        this.y = arguments[0][1];\r\n        this.z = arguments[0][2];\r\n    } else {\r\n        this.x = 0;\r\n        this.y = 0;\r\n        this.z = 0;\r\n    }\r\n}\r\n\r\n/**\r\n * Returns array represents vectors fields [x, y, z]\r\n * @returns {number[]} Array of three float\r\n */\r\nVec3f.prototype.toArray =\r\n    function () {\r\n        return [this.x, this.y, this.z];\r\n    };\r\n\r\n /**\r\n * Returns a string containing the value of x, y, z separated by spaces.\r\n * @returns {string} \r\n */\r\nVec3f.prototype.toString =\r\n    function () {\r\n        return this.toArray().join(' ');\r\n    };\r\n\r\n/**\r\n * Returns the value of the passed value added, component-wise, to the object.\r\n * @param {Vec3f} oVec3f The Vec3f object\r\n * @returns {Vec3f}\r\n */\r\nVec3f.prototype.add =\r\n    function (oVec3f) {\r\n        return new Vec3f(oVec3f.x + this.x, oVec3f.y + this.y, oVec3f.z + this.z);\r\n    };\r\n\r\n/**\r\n * Returns the value of the passed value subtracted, component-wise, from the object.\r\n * @param {Vec3f} oVec3f The Vec3f object\r\n * @returns {Vec3f}\r\n */\r\nVec3f.prototype.subtract =\r\n    function (oVec3f) {\r\n        return new Vec3f(this.x - oVec3f.x, this.y - oVec3f.y, this.z - oVec3f.z);\r\n    };\r\n\r\n/**\r\n * Returns the dot product of this vector and the passed value.\r\n * @param {Vec3f} oVec3f The Vec3f object\r\n * @returns {number}\r\n */\r\nVec3f.prototype.dot =\r\n    function (oVec3f) {\r\n        return (oVec3f.x * this.x + oVec3f.y * this.y + oVec3f.z * this.z);\r\n    };\r\n\r\n/**\r\n * Returns the cross product of the object and the passed value.\r\n * @param {Vec3f} oVec3f The Vec3f object\r\n * @returns {Vec3f}\r\n */\r\nVec3f.prototype.cross =\r\n    function (oVec3f) {\r\n        return new Vec3f(this.y * oVec3f.z - oVec3f.y * this.z, this.z * oVec3f.x - oVec3f.z * this.x, this.x * oVec3f.y - oVec3f.x * this.y);\r\n    };\r\n\r\n/**\r\n * Returns the value of the object divided by the passed value.\r\n * @param {number} fValue\r\n * @returns {Vec3f}\r\n */\r\nVec3f.prototype.divide =\r\n    function (fValue) {\r\n        return new Vec3f(this.x / fValue, this.y / fValue, this.z / fValue);\r\n    };\r\n\r\n/**\r\n * Returns the value of the object multiplied by the passed value.\r\n * @param {number} fValue\r\n * @returns {Vec3f}\r\n */\r\nVec3f.prototype.multiply =\r\n    function (fValue) {\r\n        return new Vec3f(this.x * fValue, this.y * fValue, this.z * fValue);\r\n    };\r\n\r\n/**\r\n * Returns the geometric length of this vector.\r\n * @returns {number}\r\n */\r\nVec3f.prototype.length =\r\n    function () {\r\n        return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\r\n    };\r\n\r\n/**\r\n * Returns the object converted to unit length .\r\n * @returns {Vec3f}\r\n */\r\nVec3f.prototype.normalize =\r\n    function () {\r\n        var m = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\r\n        return m === 0 ? this : this.divide(m);\r\n    };\r\n\r\n/**\r\n * Returns the value of the component-wise negation of the object.\r\n * @returns {Vec3f}\r\n */\r\nVec3f.prototype.negate =\r\n    function () {\r\n        return new Vec3f(-this.x, -this.y, -this.z);\r\n    };\r\n\r\nmodule.exports = Vec3f;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/vec3f.js\n// module id = 24\n// module chunks = 0","var Cortona3DSolo = require('solo');\r\nvar checkConfigureOptions = require('app').checkConfigureOptions;\r\nvar expand = require('lib/util').expand;\r\n\r\nwindow.Module = expand(window.Module || {}, Cortona3DSolo.core || {});\r\nif (typeof Module.Tiramisu !== 'object') Module.Tiramisu = {};\r\n\r\nvar Arguments = {\r\n    toModule: function () {\r\n        Module.arguments = [];\r\n        for (var key in this) {\r\n            if (this.hasOwnProperty(key) && typeof this[key] !== 'function') {\r\n                Module.arguments.push(key);\r\n                Module.arguments.push(String(this[key]));\r\n            }\r\n        }\r\n    },\r\n    features: 0\r\n};\r\n\r\nfunction TiramisuLoadingError(message) {\r\n    this.name = 'TiramisuLoadingError';\r\n    this.message = message || '';\r\n}\r\nTiramisuLoadingError.prototype = Object.create(Error.prototype);\r\nTiramisuLoadingError.prototype.constructor = TiramisuLoadingError;\r\n\r\nfunction load() {\r\n    try {\r\n        var xhr = new window.XMLHttpRequest();\r\n\r\n        if (xhr.overrideMimeType) {\r\n            xhr.overrideMimeType('text/javascript');\r\n        }\r\n\r\n        var coreURL = checkConfigureOptions(Cortona3DSolo.app.ENABLE_VRML_TEXT_NODE) ? 'Cortona3DSoloCoreText.js' : 'Cortona3DSoloCore.js';\r\n\r\n        if (typeof Module.locateFile === 'function') {\r\n            coreURL = Module.locateFile(coreURL);\r\n        } else if (Module.memoryInitializerPrefixURL) {\r\n            coreURL = Module.memoryInitializerPrefixURL + coreURL;\r\n        } else {\r\n            console.log('No memory initializer prefix URL!');\r\n        }\r\n\r\n        xhr.open(\"GET\", coreURL, true);\r\n        xhr.onerror = function (e) {\r\n            if (Module.onprogress) {\r\n                Module.onprogress({\r\n                    loaded: 0,\r\n                    total: -1,\r\n                    type: e.type\r\n                });\r\n            }\r\n            Cortona3DSolo.emit('core.onError', new Error(coreURL + ' ' + xhr.statusText));\r\n        };\r\n        xhr.onprogress = function (e) {\r\n            if(Module.onprogress) {\r\n                Module.onprogress(e);\r\n            }\r\n        };\r\n        xhr.onload = function (e) {\r\n            if (Module.onprogress) {\r\n                Module.onprogress({\r\n                    loaded: 0,\r\n                    total: -1,\r\n                    type: e.type\r\n                });\r\n            }\r\n\r\n            if (xhr.status === 200 || xhr.status === 0) {\r\n                var script = document.createElement('script');\r\n                var DOMURL = window.URL || window.webkitURL || window;\r\n                var url = DOMURL.createObjectURL(new Blob([xhr.response]));\r\n                script.onload = function () {\r\n                    DOMURL.revokeObjectURL(url);\r\n                    Cortona3DSolo.emit('core.onLoad');\r\n                    window.addEventListener('error', function (messageOrEvent, source, lineno, colno, error) {\r\n                        if (source == url || messageOrEvent.filename == url) {\r\n                            Cortona3DSolo.emit('core.onError', error || messageOrEvent);\r\n                        }\r\n                    });\r\n                };\r\n                script.onerror = function (e) {\r\n                    DOMURL.revokeObjectURL(url);\r\n                    Cortona3DSolo.emit('core.onError', new Error(coreURL + ' ' + e));\r\n                };\r\n                script.src = url;\r\n                document.body.appendChild(script);\r\n            } else {\r\n                Cortona3DSolo.emit('core.onError', new Error(coreURL + ' ' + xhr.statusText));\r\n            }\r\n        };\r\n        xhr.send(null);\r\n    } catch (e) {\r\n        throw new TiramisuLoadingError(e.message || e);\r\n    }\r\n}\r\n\r\nmodule.exports = {\r\n    Arguments: Arguments,\r\n    load: load\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core.solo.js\n// module id = 25\n// module chunks = 0","// This file can be required in Browserify and Node.js for automatic polyfill\n// To use it:  require('es6-promise/auto');\n'use strict';\nmodule.exports = require('./').polyfill();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/es6-promise/auto.js\n// module id = 26\n// module chunks = 0","/**\r\n * Convert base64 encoded data into the Blob object\r\n * \r\n * @param {string} b64Data Base 64 encoded data or data URL\r\n * @param {string} contentType \r\n * @param {number} [sliceSize=1048576]\r\n * @returns Promise\r\n */\r\nvar defaultSliceSize = 1048576;\r\n\r\nvar atobStrict = false;\r\n\r\ntry {\r\n    void atob(' ');\r\n} catch (e) {\r\n    atobStrict = true;\r\n}\r\n\r\nfunction b64toBlob(b64Data, contentType, sliceSize) {\r\n    var s = b64Data,\r\n        type = '',\r\n        start = 0;\r\n    if (b64Data.substr(0, 5) === 'data:') {\r\n        start = 5;\r\n        while (b64Data.charAt(start++) !== ',') {\r\n            if (b64Data.charAt(start) !== ';') {\r\n                if (!type) {\r\n                    type = b64Data.substring(5, start);\r\n                }\r\n            }\r\n        }\r\n        s = b64Data.substring(start);\r\n        if (b64Data.substring(5, start).indexOf(';base64') === -1) {\r\n            return Promise.resolve(new Blob([s], {\r\n                type: contentType || type\r\n            }));\r\n        }\r\n    }\r\n    return new Promise(function (resolve, reject) {\r\n        function callback(result) {\r\n            resolve(new Blob(result, {\r\n                type: contentType || type\r\n            }));\r\n        }\r\n        function workerCode() {\r\n            var self = this;\r\n            self.onmessage = function (e) {\r\n                var byteCharacters = e.data[0],\r\n                    sliceSize = e.data[1],\r\n                    byteArrays = [];\r\n                for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\r\n                    var slice = byteCharacters.slice(offset, offset + sliceSize),\r\n                        byteNumbers = new Array(slice.length);\r\n                    for (var i = 0; i < slice.length; i++) {\r\n                        byteNumbers[i] = slice.charCodeAt(i);\r\n                    }\r\n                    byteArrays.push(new Uint8Array(byteNumbers));\r\n                }\r\n                self.postMessage(byteArrays);\r\n            };\r\n        }\r\n\r\n        var param;\r\n                \r\n        try {\r\n            param = [atob(atobStrict ? s.replace(/\\s/g, '') : s), sliceSize || defaultSliceSize];\r\n        } catch (e) {\r\n            reject(e);\r\n            return;\r\n        }\r\n    \r\n        try {\r\n            var code = ('(' + workerCode + ')();').replace('\"use strict\";', ''),\r\n                src = URL.createObjectURL(new Blob([code], {\r\n                    type: 'application/javascript'\r\n                })),\r\n                worker = new Worker(src);\r\n            worker.onmessage = function (e) {\r\n                URL.revokeObjectURL(src);\r\n                callback(e.data);\r\n            };\r\n            worker.postMessage(param);\r\n        } catch (e) {\r\n            try {\r\n                var self = {\r\n                    postMessage: callback\r\n                };\r\n                workerCode.call(self);\r\n                self.onmessage({\r\n                    data: param\r\n                });\r\n            } catch (e) {\r\n                reject(e);\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nmodule.exports = b64toBlob;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/b64ToBlob.js\n// module id = 27\n// module chunks = 0","var Cortona3DSolo = require('solo');\nvar Tiramisu = Module.Tiramisu;\nvar app = require('app').app;\nvar checkConfigureOptions = require('app').checkConfigureOptions;\nvar util = require('lib/util');\nvar expand = util.expand;\nvar getBaseURL = require('./util').getBaseURL;\nvar deface = require('lib/deface');\n\nvar SUPPORT_TOUCH = ('ontouchstart' in window);\nvar SUPPORT_ONLY_TOUCH = SUPPORT_TOUCH && /mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent);\n\nvar Hammer = require('hammerjs');\n\nvar PRESS_TIME = 750;\nvar DOUBLE_TAP_TIME = 250;\nvar m_isPressed = false;\n\nvar m_didFinishLoadDocument = false;\nvar m_firstFrameDidArrive = false;\nvar m_doc;\nvar m_hiddenObjects = {};\n\nfunction beforeFirstFrameRender() {\n    var didDrawScene = Module.PanelService.didDrawScene;\n    Module.PanelService.didDrawScene = function () {\n        Cortona3DSolo.dispatch(\"core.didDrawAnimationFrame\");\n        didDrawScene();\n    };\n    app.ui.showCanvas(true);\n    Cortona3DSolo.dispatch(\"core.didChangeLayout\");\n    app.ui.setBannerImage(app.util.fetchBannerImage());\n}\n\n// Tiramisu hooks\nexpand(Tiramisu, {\n    didFinishLoadDocument: function (doc) {\n        m_doc = doc;\n        attachCanvasListeners();\n\n        doc.baseURL = \"\";\n        if (!doc.bundleURL) {\n            doc.baseURL = getBaseURL(doc.companionFile || require('app').getDocumentURL());\n        }\n        attachInteractivityXML(doc).then(function () {\n            var type = doc.type;\n            m_didFinishLoadDocument = true;\n            Cortona3DSolo.dispatch('app.didFinishLoadDocument', doc);\n            Cortona3DSolo.dispatch('app.didAttachDocument', doc);\n            if (m_firstFrameDidArrive) {\n                beforeFirstFrameRender();\n                setTimeout(function () {\n                    Cortona3DSolo.dispatch('app.firstFrameDidArrive');\n                }, 0);\n            }\n        }).catch(function (error) {\n            Cortona3DSolo.dispatch('app.didFailLoadDocument', error);\n            console.error(error);\n        });\n    },\n    firstFrameDidArrive: function (timestamp) {\n        m_firstFrameDidArrive = true;\n        if (m_didFinishLoadDocument) {\n            beforeFirstFrameRender();\n            Cortona3DSolo.dispatch('app.firstFrameDidArrive', timestamp);\n        }\n    },\n    didFailLoadDocument: function (message) {\n        Cortona3DSolo.dispatch('app.didFailLoadDocument', deface(message));\n    },\n    didClickHyperlink: function (urls) {\n        Cortona3DSolo.dispatch('app.didClickHyperlink', urls);\n    },\n    willStartNavigateInScene: function () {\n        Cortona3DSolo.dispatch('app.willStartNavigateInScene');\n    }\n});\n\n// Tiramisu util\nexpand(Tiramisu, {\n    util: {\n        /*\n        unmarshalItemList: function (data) {\n            var count, items, item, i, list = data;\n            if (!data) return;\n            count = Module.getValue(list, \"i32\");\n            list += 4;\n            items = [];\n            for (i = 0; i < count; ++i, list += 44) {\n                item = {\n                    id: Module.getValue(list, \"i32\"),\n                    refPartId: Module.getValue(list + 4, \"i32\"),\n                    quantity: Module.getValue(list + 8, \"i32\"),\n                    item: Module.Pointer_stringify(getValue(list + 12, \"*\")),\n                    variant: Module.Pointer_stringify(getValue(list + 16, \"*\")),\n                    hotspotId: Module.Pointer_stringify(getValue(list + 20, \"*\")),\n                    indent: Module.getValue(list + 24, \"i32\"),\n                    visualIndent: Module.getValue(list + 28, \"i32\"),\n                    attach: Module.getValue(list + 32, \"i32\"),\n                    revised: Module.getValue(list + 36, \"i32\") !== 0,\n                    notIllustrated: Module.getValue(list + 40, \"i32\") !== 0\n                };\n                items.push(item);\n            }\n            Module._free(data);\n            return items;\n        },\n        */\n\n        /**\n         * Wrap string array\n         * \n         * @private\n         * @param {number} data - Emscripten pointer to data buffer\n         * @param {number} size - sets the total number of elements of data buffer \n         * @returns {string[]} Array of string\n         */\n        wrapStringArray: function (data, size) {\n            var strings = new Array(size);\n            for (var i = 0; i < size; ++i)\n                strings[i] = Module.Pointer_stringify(Module.getValue(data + i * 4, 'i32'));\n            return strings;\n        },\n        /**\n         * Wrap sheet array\n         * \n         * @private\n         * @param {number} data - Emscripten pointer\n         * @param {number} size - Array length\n         * @returns {object[]} Array of object\n         * ```\n         * {\n         *     id: <string>,\n         *     description: <string>,\n         *     indentationLevel: <number>\n         * }\n         * ```\n         */\n        wrapSheetArray: function (data, size) {\n            if (!size) return [];\n\n            var sheets = new Array(size);\n            for (var i = 0; i < size; ++i, data += 12) {\n                sheets[i] = {\n                    id: Module.Pointer_stringify(Module.getValue(data, 'i32')),\n                    description: Module.Pointer_stringify(Module.getValue(data + 4, 'i32')),\n                    indentationLevel: Module.getValue(data + 8, 'i32')\n                };\n            }\n            return sheets;\n        },\n\n        /**\n         * Unmarshal array of the 3D object.\n         * \n         * @private\n         * @param {Handle[]} handles - an array of 3D object handles\n         * @returns {Handle[]} an array of 3D objects\n         */\n        unmarshalObjectArray: function (handles) {\n            if (!handles) return [];\n            var i, handle,\n                objects = [];\n            for (i = 0;\n                (handle = Module.getValue(handles + i * 4, 'i32')); ++i)\n                objects[i] = handle;\n            return objects;\n        },\n\n        /**\n         * Unmarshal array of the floats.\n         * \n         * @private\n         * @param {number} floats - Emscripten pointer\n         * @param {number} count - Array length\n         * @returns {number|number[]} \n         */\n        unmarshalFloatArray: function (floats, count) {\n            switch (count) {\n                case 1:\n                    return getValue(floats, 'float');\n                case 2:\n                    return [getValue(floats, 'float'), getValue(floats + 4, 'float')];\n                case 3:\n                    return [getValue(floats, 'float'), getValue(floats + 4, 'float'), getValue(floats + 8, 'float')];\n                case 4:\n                    return [getValue(floats, 'float'), getValue(floats + 4, 'float'), getValue(floats + 8, 'float'), getValue(floats + 12, 'float')];\n                default:\n                    console.error(count);\n                    return null;\n            }\n        }\n    }\n});\n\n/**\n * \n * @private\n * @param {any} doc\n * @returns {Promise}\n * @see external:Promise\n */\nfunction attachInteractivityXML(doc) {\n    var src = doc.companionFile;\n    var isInteractivityXmlEmissionEnabled = !checkConfigureOptions(app.DISABLE_INTERACTIVITY_XML_EMISSION);\n    isInteractivityXmlEmissionEnabled = isInteractivityXmlEmissionEnabled && !!src;\n    isInteractivityXmlEmissionEnabled = isInteractivityXmlEmissionEnabled && (doc.type == 'ipc' || doc.type == 'procedure');\n\n    if (isInteractivityXmlEmissionEnabled) {\n        var url = app.util.createResourceURL(src) || src;\n        if (url) {\n            return app.loadCompanionFile(url).then(function (data) {\n                if (data && data.type) {\n                    var add = {};\n                    add[data.type] = {\n                        interactivity: data.interactivity\n                    };\n                    expand(app, add);\n                }\n            });\n        }\n    }\n    return Promise.resolve();\n}\n\n/**\n * Parse an HTML color from string.\n * \n * @private\n * @param {HexColorString} color HTML color string\n * @returns {number} \n */\nfunction parseHTMLColor(color) {\n    var m = color.match(/^#([0-9a-f]{6})$/i);\n    if (m) {\n        m = m[1];\n        return (parseInt(m.substr(0, 2), 16) << 16) | (parseInt(m.substr(2, 2), 16) << 8) | parseInt(m.substr(4, 2), 16);\n    }\n    m = color.match(/^#([0-9a-f]{3})$/i);\n    if (m) {\n        m = m[1];\n        return (parseInt(m.charAt(0), 16) * 0x11) << 16 | (parseInt(m.charAt(1), 16) * 0x11) << 8 | (parseInt(m.charAt(2), 16) * 0x11);\n    }\n    return -1;\n}\n\n/**\n * Convert color to the HTML color string.\n * \n * @private\n * @param {number} color 0x00RRGGBB\n * @returns {HexColorString} HTML color string\n */\nfunction toHTMLColor(color) {\n    return '#' + (color & 0x00FFFFFF).toString(16).toUpperCase();\n}\n\n/**\n * @private\n * @param {any} p \n */\nfunction getVec3fValue(p) {\n    return [Module.getValue(p, 'float'), Module.getValue(p + 4, 'float'), Module.getValue(p + 8, 'float')];\n}\n\n\n/**\n * (description)\n * \n * @private\n * @param {string} cname - Emscripten ccall name\n * @param {Handle[]} handles - an array of 3D object handles\n * @param {AnimatedMode} animated\n */\nfunction ccallWithObjectHandles(cname, handles, animated) {\n    var count = 0,\n        objects = 0;\n    if (handles) {\n        if (typeof handles === 'number')\n            handles = [handles];\n        objects = Module.allocate(handles.length * 4, 'i32', Module.ALLOC_STACK);\n        count = handles.length;\n        for (var i = 0; i < count; ++i)\n            Module.setValue(objects + i * 4, handles[i], 'i32');\n    }\n    var args = [objects, count].concat(Array.prototype.slice.call(arguments, 2).filter(function (item) {\n        return typeof item !== 'undefined';\n    }));\n    var typs = new Array(args.length).map(function () {\n        return 'number';\n    });\n    Module.ccall(cname, 'null', typs, args);\n}\n\n/**\n * Attaching some additional `<canvas>` listeners. \n * \n * @private\n */\nvar _t;\n\nfunction attachCanvasListeners() {\n    function eventStopper(event) {\n        event.stopPropagation();\n    }\n\n    Array.prototype.slice.call(document.getElementsByClassName('cortona3dsolo-popover')).forEach(function (popover) {\n        popover.addEventListener('contextmenu', function (event) {\n            event.preventDefault();\n        }, false);\n        popover.addEventListener('pointerdown', eventStopper, false);\n        popover.addEventListener('pointerup', eventStopper, false);\n    });\n\n    function contextmenu(e) {\n        if (m_isPressed) return;\n        var target = e.target,\n            rect = target.getBoundingClientRect(),\n            offsetX = e.clientX - rect.left,\n            offsetY = e.clientY - rect.top;\n\n        Cortona3DSolo.dispatch('app.didCallContextMenu', offsetX, offsetY, target);\n        if (e.preventDefault) e.preventDefault();\n        if (e.stopPropagation) e.stopPropagation();\n    }\n\n    function pressHandler(e) {\n        if (e.pointerType === 'mouse') return;\n        contextmenu(e);\n    }\n\n    function doubleTapHandler(e) {\n        var target = e.target,\n            rect = target.getBoundingClientRect(),\n            offsetX = e.clientX - rect.left,\n            offsetY = e.clientY - rect.top;\n        obj = app.pickObject(offsetX, offsetY);\n        clearTimeout(_t);\n        if (obj) {\n            app.fitObjectsInView([obj.handle], true);\n        } else {\n            app.fitSceneInView(true);\n        }\n        if (e.preventDefault) e.preventDefault();\n        if (e.stopPropagation) e.stopPropagation();\n    }\n\n    var isMSGestureEnabled = livingOnTheEdge();\n\n    Module.canvas.addEventListener('contextmenu', contextmenu);\n\n    if (checkConfigureOptions(app.ENABLE_NAVIGATION_FIT_TO_OBJECT)) {\n\n        Module.canvas.addEventListener('click', function (event) {\n            var keys = +(event.shiftKey && 1) | +(event.ctrlKey && 2) | +(event.altKey && 4);\n            if (keys === 4) {\n                var target = event.target || event.srcElement,\n                    rect = target.getBoundingClientRect(),\n                    offsetX = event.clientX - rect.left,\n                    offsetY = event.clientY - rect.top,\n                    obj = app.pickObject(offsetX, offsetY);\n\n                if (obj) {\n                    clearTimeout(_t);\n                    _t = setTimeout(function () {\n                        app.setRotationCenterToObjects([obj.handle], true);\n                    }, 100);\n                }\n            }\n        }, false);\n\n        var lastTapTime = 0,\n            lastTapPoint = {};\n\n        var distance = function (p1, p2) {\n            return Math.sqrt((p1.x - p2.x) * (p1.x - p2.x) + (p1.y - p2.y) * (p1.y - p2.y));\n        };\n\n        if (isMSGestureEnabled) {\n            Module.canvas.addEventListener('dblclick', doubleTapHandler);\n            Module.canvas.addEventListener('MSGestureTap', function (e) {\n                if (e.detail === (e.MSGESTURE_FLAG_BEGIN + e.MSGESTURE_FLAG_END)) {\n                    if (!lastTapTime) {\n                        lastTapTime = new Date().valueOf();\n                        lastTapPoint.x = e.screenX;\n                        lastTapPoint.y = e.screenY;\n                    } else if ((new Date().valueOf() - lastTapTime) <= DOUBLE_TAP_TIME) {\n                        lastTapTime = 0;\n                        if (distance(lastTapPoint, {\n                                x: e.screenX,\n                                y: e.screenY\n                            }) < 100) { // posThreshold\n                            doubleTapHandler(e);\n                        }\n                    } else {\n                        lastTapTime = 0;\n                    }\n                }\n            });\n            Module.canvas.addEventListener('MSGestureHold', function (e) {\n                if (e.detail & e.MSGESTURE_FLAG_BEGIN) {\n                    pressHandler(e);\n                    m_isPressed = true;\n                } else if (e.detail & e.MSGESTURE_FLAG_END) {\n                    setTimeout(function () {\n                        m_isPressed = false;\n                    }, 250);\n                }\n            });\n\n        } else {\n            var mcOptions = {};\n            if (navigator.pointerEnabled === false) {\n                if (SUPPORT_ONLY_TOUCH) {\n                    mcOptions.inputClass = Hammer.TouchInput;\n                } else if (!SUPPORT_TOUCH) {\n                    mcOptions.inputClass = Hammer.MouseInput;\n                } else {\n                    mcOptions.inputClass = Hammer.TouchMouseInput;\n                }\n            }\n            var mc = new Hammer.Manager(Module.canvas, mcOptions);\n            var press = new Hammer.Press({\n                time: PRESS_TIME\n            });\n            var doubletap = new Hammer.Tap({\n                event: 'doubletap',\n                taps: 2,\n                threshold: 5,\n                posThreshold: 100,\n                interval: DOUBLE_TAP_TIME\n            });\n            doubletap.recognizeWith(press);\n            press.requireFailure(doubletap);\n            mc.add(press);\n            mc.add(doubletap);\n            mc.set({\n                touchAction: 'none'\n            });\n            mc.on('press', function (e) {\n                pressHandler({\n                    target: e.target,\n                    clientX: e.center.x,\n                    clientY: e.center.y\n                });\n                m_isPressed = true;\n            });\n            mc.on('pressup', function () {\n                setTimeout(function () {\n                    m_isPressed = false;\n                }, 250);\n            });\n            mc.on('doubletap', function (e) {\n                doubleTapHandler({\n                    target: e.target,\n                    clientX: e.center.x,\n                    clientY: e.center.y\n                });\n            });\n        }\n    }\n}\n\n/**\n * Adapting to survive in Microsoft's neighbourhood. \n * \n * @private\n */\nfunction livingOnTheEdge() {\n    if (typeof window.MSGesture !== 'function')\n        return false;\n\n    console.log(\"Adapting to survive in Microsoft's neighbourhood.\");\n\n    var canvas = Module.canvas,\n        recognizer = new MSGesture();\n\n    recognizer.target = canvas;\n\n    function gestureHandler(event) {\n        microsoftGesture(event.translationX, event.translationY, event.scale, event.rotation, event.detail);\n    }\n\n    function microsoftGesture(x, y, scale, rotation, detail) {\n        Module.ccall('tiramisu_microsoftGesture', 'null', ['number', 'number', 'number', 'number', 'number'], arguments);\n    }\n\n    function microsoftPointerUp(pointerId, offsetX, offsetY) {\n        return Module.ccall('tiramisu_microsoftPointerUp', 'number', ['number'], arguments);\n    }\n\n    function microsoftPointerDown(pointerId, offsetX, offsetY) {\n        return Module.ccall('tiramisu_microsoftPointerDown', 'number', ['number', 'number', 'number'], arguments);\n    }\n\n    canvas.addEventListener('MSHoldVisual', function (event) {\n        event.preventDefault();\n    }, false);\n    canvas.addEventListener('MSGestureStart', gestureHandler, false);\n    canvas.addEventListener('MSGestureEnd', gestureHandler, false);\n    canvas.addEventListener('MSGestureChange', gestureHandler, false);\n    canvas.addEventListener('MSInertiaStart', gestureHandler, false);\n    canvas.addEventListener('MSGestureTap', gestureHandler, false);\n    canvas.addEventListener('MSGestureHold', gestureHandler, false);\n    canvas.addEventListener('pointerdown', function (event) {\n        if (event.pointerType == 'mouse') {\n            canvas.setPointerCapture(event.pointerId);\n            return;\n        }\n        if (microsoftPointerDown(event.pointerId, event.offsetX, event.offsetY)) {\n            canvas.setPointerCapture(event.pointerId);\n            if (!recognizer.target) {\n                recognizer.target = canvas;\n            }\n            recognizer.addPointer(event.pointerId);\n        }\n    }, false);\n    canvas.addEventListener('pointerup', function (event) {\n        if (event.pointerType == 'mouse') return;\n        event.stopPropagation();\n        microsoftPointerUp(event.pointerId, event.offsetX, event.offsetY);\n    }, false);\n    window.addEventListener('pointerup', function (event) {\n        if (event.pointerType == 'mouse') return;\n        var box = canvas.getBoundingClientRect(),\n            left = box.left + window.pageXOffset - document.body.clientLeft,\n            top = box.top + window.pageYOffset - document.body.clientTop;\n        microsoftPointerUp(event.pointerId, event.pageX - left, event.pageY - top);\n    }, false);\n\n    return true;\n}\n\nvar appExports = {\n    /**\n     * Returns Cortona3D Solo version string.\n     * \n     * @memberof module:solo.app\n     * @returns {string} Version string \n     */\n    version: function () {\n        var major = (Tiramisu.VERSION >> 24),\n            minor = (Tiramisu.VERSION >> 16) & 0xFF,\n            build = Tiramisu.VERSION & 0xFFFF,\n            buildTime = new Date(Tiramisu.BUILD_TIME * 1000);\n        return VERSION + \" (core: \" + [major, minor, build].join('.') + \")\";\n    },\n\n    /**\n     * Changes the `<canvas>` element size. This function must be called to resize 3D window.\n     * \n     * @memberof module:solo.app\n     * @param {number} width - pixels\n     * @param {number} height - pixels\n     * @see {@link module:solo.core.canvas core.canvas}\n     */\n    resize: function (width, height) {\n        Module.ccall('tiramisu_resize', 'null', ['number', 'number'], arguments);\n    },\n\n    /**\n     * Returns name of 3D object by its handle.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} handle - Handle of 3D object \n     * @returns {string} Name of 3D object \n     */\n    getObjectName: function (handle) {\n        return Module.ccall('tiramisu_getObjectName', 'string', ['number'], arguments);\n    },\n\n    /**\n     * Returns type of 3D object by its handle.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} handle - Handle of 3D object \n     * @returns {string} Type of 3D object \n     * @since 1.4.0\n     */\n    getObjectTypeName: function (handle) {\n        return Module.ccall('tiramisu_getObjectTypeName', 'string', ['number'], arguments);\n    },\n\n    /**\n     * Returns handle of 3D object by its name.\n     * \n     * @memberof module:solo.app\n     * @param {string} name - Name of 3D object\n     * @returns {Handle} Handle of 3D object\n     */\n    getObjectWithName: function (name) {\n        return Module.ccall('tiramisu_getObjectWithName', 'number', ['string'], arguments);\n    },\n\n    /**\n     * Checks whether a 3D object is ignored by the picker. \n     * \n     * @memberof module:solo.app\n     * @param {Handle} handle - Handle of 3D object\n     * @returns {boolean}\n     */\n    isObjectIgnorableByPicker: function (handle) {\n        return Module.ccall('tiramisu_isObjectIgnorableByPicker', 'number', ['number'], arguments) !== 0;\n    },\n\n    /**\n     * Sets whether a 3D object is ignored by picker.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} handle - Handle of 3D object\n     * @param {boolean} ignorable\n     */\n    setObjectIgnorableByPicker: function (handle, ignorable) {\n        Module.ccall('tiramisu_setObjectIgnorableByPicker', 'null', ['number', 'number'], arguments);\n    },\n\n    /**\n     * Sends a ray from the picked point in the 3D window and returns 3D object that was hit by the ray.\n     * \n     * @memberof module:solo.app\n     * @param {number} x - The X coordinate relative to the element `<canvas>`\n     * @param {number} y - The Y coordinate relative to the element `<canvas>`\n     * @param {boolean} [needsTopLevelParent] - \n     * - true - returns the topmost element in a picked chain of 3D objects\n     * - false - returns a 3D object that was hit by the ray\n     * @returns {PickedObjectInfo|null} Information about the picked 3D object or null if there are no picked 3D objects\n     */\n    pickObject: function (x, y, needsTopLevelParent) {\n        var mode = typeof needsTopLevelParent == 'undefined' ? 0 : needsTopLevelParent ? 2 : 1;\n        node = Module.ccall('tiramisu_pickObject', 'number', ['number', 'number', 'number'], [x, y, mode]);\n        return node ? {\n            handle: node,\n            name: Module.ccall('tiramisu_getObjectName', 'string', ['number'], [node])\n        } : null;\n    },\n\n    /**\n     * Sends a ray from the picked point in the 3D window and returns information about picked point and a chain of 3D objects.\n     * The method works with generic VRML file.\n     * \n     * > #### __NOTE__\n     * >\n     * > Required use of the {@link module:solo.app DISABLE_DISCARDABLE_GEOMETRY_DATA} flag when initializing the library.\n     * >```\n     * >    Cortona3DSolo.use('core', { \n     * >        features: Cortona3DSolo.app.DISABLE_DISCARDABLE_GEOMETRY_DATA\n     * >    });\n     * >```\n     * \n     * @memberof module:solo.app\n     * @param {number} x - The X coordinate relative to the element `<canvas>`\n     * @param {number} y - The Y coordinate relative to the element `<canvas>`\n     * @returns {PickedObjectChain|null} The object with result structure or null if there are no picked 3D objects\n     * @see {@link module:solo.use use()}\n     * @since 1.4.0\n     */\n    pickObjectChain: function (x, y) {\n        var result = Module._tiramisu_pickObjectChain(x, y),\n            obj = null;\n\n        if (result) {\n            // Fields of the result structure\n            //     Vec3f coord;\n            //     Vec3f normal;\n            //     Vec3f sceneCoord;\n            //     Vec3f sceneNormal;\n            //     Node* chain[];\n\n            obj = {\n                coord: getVec3fValue(result),\n                normal: getVec3fValue(result + 12),\n                sceneCoord: getVec3fValue(result + 24),\n                sceneNormal: getVec3fValue(result + 36),\n                chain: Tiramisu.util.unmarshalObjectArray(result + 48)\n            };\n\n            Module._free(result);\n        }\n\n        return obj;\n    },\n\n    /**\n     * Returns the transparency threshold used by picker.\n     * \n     * @memberof module:solo.app\n     * @returns {number} The transparency threshold\n     * @deprecated since version 1.5.0, use {@link module:solo.app.pickerTransparencyThreshold app.pickerTransparencyThreshold} instead\n     */\n    getPickerTransparencyThreshold: function () {\n        return Module.ccall('tiramisu_getPickerTransparencyThreshold', 'number');\n    },\n\n    /**\n     * Sets transparency threshold used by picker.\n     * \n     * @memberof module:solo.app\n     * @param {number} threshold - [0..1]\n     * @deprecated since version 1.5.0, use {@link module:solo.app.pickerTransparencyThreshold app.pickerTransparencyThreshold} instead\n     */\n    setPickerTransparencyThreshold: function (threshold) {\n        return Module.ccall('tiramisu_setPickerTransparencyThreshold', 'null', ['number'], arguments);\n    },\n\n    /**\n     * Adds 3D objects to selected objects.\n     * \n     * @memberof module:solo.app\n     * @param {Handle[]} handles - Array of 3D object handles\n     * @param {AnimatedMode} animated\n     * @fires \"app.didChangeSelection\"\n     */\n    addSelectedObjects: function (handles, animated) {\n        ccallWithObjectHandles('tiramisu_addSelectedObjects', handles, animated);\n        Cortona3DSolo.dispatch('app.didChangeSelection');\n    },\n\n    /**\n     * Sets 3D objects to selected state.\n     * \n     * @memberof module:solo.app\n     * @param {Handle[]} handles - Array of 3D object handles\n     * @param {AnimatedMode} animated\n     * @fires \"app.didChangeSelection\"\n     */\n    setSelectedObjects: function (handles, animated) {\n        ccallWithObjectHandles('tiramisu_setSelectedObjects', handles, animated);\n        Cortona3DSolo.dispatch('app.didChangeSelection');\n    },\n\n    /**\n     * Returns an array of selected 3D objects.\n     * \n     * @memberof module:solo.app\n     * @returns {Handle[]} An array of 3D object handles\n     */\n    getSelectedObjects: function () {\n        var handles = Module.ccall('tiramisu_getSelectedObjects', 'number'),\n            objects = Tiramisu.util.unmarshalObjectArray(handles);\n        Module._free(handles);\n        return objects;\n    },\n\n    /**\n     * Sets the default background color in the 3D scene.\n     * An array of color defines the gradient fill. \n     * \n     * @memberof module:solo.app\n     * @param {HexColorString|HexColorString[]} colors - A string representing the color or an array of colors\n     */\n    setDefaultBackgroundColors: function (colors) {\n        var count = 0,\n            colorArray = 0,\n            i,\n            sp = Module.Runtime.stackSave();\n        if (colors) {\n            if (typeof colors === 'string') {\n                colors = [colors];\n            }\n            count = colors.length;\n            colorArray = Module.allocate(count * 4, 'i32', Module.ALLOC_STACK);\n            for (i = 0; i < count; ++i) {\n                Module.setValue(colorArray + i * 4, parseHTMLColor(colors[i]), 'i32');\n            }\n        }\n        Module.ccall('tiramisu_setDefaultBackgroundColors', 'null', ['number', 'number'], [colorArray, count]);\n        Module.Runtime.stackRestore(sp);\n    },\n\n    /**\n     * Sets the mouse navigation mode.\n     * \n     * @memberof module:solo.app\n     * @param {MouseDragMode} mode - Mouse drag mode \n     */\n    setMouseDragMode: function (mode) {\n        Module.ccall('tiramisu_setMouseDragMode', 'null', ['number'], arguments);\n    },\n\n    /**\n     * Sets property for the 3D object.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} handle - Handle of the 3D object\n     * @param {ObjectProperty} property - Property code\n     * @param {AnimatedMode} animated\n     * @param {number} v0 - Parameter depending on the property\n     * @param {number} [v1] - Parameter depending on the property\n     * @param {number} [v2] - Parameter depending on the property\n     * @param {number} [v3] - Parameter depending on the property\n     * @returns {boolean} Return true if changed\n     * @see {@link module:solo.app.restoreObjectProperty app.restoreObjectProperty()}\n     */\n    setObjectPropertyf: function (handle, property, animated, v0, v1, v2, v3) {\n        if (property === app.PROPERTY_VISIBILITY && m_doc.type === 'generic') {\n            var visible = Module._tiramisu_isObjectVisibile(handle) !== 0,\n                render = !!v0;\n            if (!(handle in m_hiddenObjects)) {\n                m_hiddenObjects[handle] = visible;\n            }\n            if (visible !== render) {\n                Module._tiramisu_setObjectVisibility(handle, render);\n                return true;\n            }\n            return false;\n        }\n        return Module.ccall('tiramisu_setObjectPropertyf', 'number', ['number', 'number', 'number', 'number', 'number', 'number', 'number'], arguments) !== 0;\n    },\n\n    /**\n     * Gets property for the 3D object.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} handle - Handle of the 3D object\n     * @param {ObjectProperty} property - Property code\n     * @returns {number|number[]} Value of the requested property\n     * @see {@link module:solo.app.setObjectProperty app.setObjectProperty()}\n     * @since 1.6.3\n     */\n    getObjectPropertyf: function (handle, property) {\n        var sp = Runtime.stackSave(),\n            buffer = Module.allocate(4 * 4, 'float', Module.ALLOC_STACK),\n            count = Module._tiramisu_getObjectPropertyf(handle, property, buffer),\n            value = Tiramisu.util.unmarshalFloatArray(buffer, count);\n        Runtime.stackRestore(sp);\n        return value;\n    },\n\n    /**\n     * Restores property value for the 3D object.\n     * Pass handle = 0 to restore property of all dirty objects.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} handle - Handle of 3D object\n     * @param {ObjectProperty} property - Property\n     * @param {AnimatedMode} animated\n     * @returns {boolean} Returns true if changed\n     * @see {@link module:solo.app.setObjectPropertyf app.setObjectPropertyf()}\n     */\n    restoreObjectProperty: function (handle, property, animated) {\n        if (property === app.PROPERTY_VISIBILITY) {\n            if (m_doc.type === 'generic') {\n                if (handle) {\n                    if (handle in m_hiddenObjects) {\n                        var visible = Module._tiramisu_isObjectVisibile(handle) !== 0,\n                            render = m_hiddenObjects[handle];\n                        delete m_hiddenObjects[handle];\n                        if (visible !== render) {\n                            Module._tiramisu_setObjectVisibility(handle, render);\n                            return true;\n                        }\n                    }\n                    return false;\n                }\n                for (var h in m_hiddenObjects) {\n                    Module._tiramisu_setObjectVisibility(h, m_hiddenObjects[h]);\n                }\n                m_hiddenObjects = {};\n            }\n        }\n        return Module.ccall('tiramisu_restoreObjectProperty', 'number', ['number', 'number', 'number'], [handle || 0, property, animated]) !== 0;\n    },\n\n    /**\n     * Returns array of 3D objects with dirty property. \n     * \n     * @memberof module:solo.app\n     * @param {ObjectProperty} property - Property\n     * @returns {Handle[]} Array of 3D objects\n     * @see {@link module:solo.app.setObjectPropertyf app.setObjectPropertyf()}\n     */\n    getObjectsWithDirtyProperty: function (property) {\n        if (property === app.PROPERTY_VISIBILITY) {\n            if (m_doc.type === 'generic') {\n                var res = [];\n                for (var h in m_hiddenObjects) {\n                    res.push(h);\n                }\n                return res;\n            }\n        }\n        var handles = Module.ccall('tiramisu_getObjectsWithDirtyProperty', 'number', ['number'], arguments),\n            objects = Tiramisu.util.unmarshalObjectArray(handles);\n        Module._free(handles);\n        return objects;\n    },\n\n    /**\n     * Checks if the center of rotation is visible.\n     * \n     * @memberof module:solo.app\n     * @returns {boolean} \n     */\n    isRotationCenterVisible: function () {\n        return Module.ccall('tiramisu_isRotationCenterVisible', 'number') !== 0;\n    },\n\n    /**\n     * Toggles the visibility of the center of rotation.\n     * \n     * @memberof module:solo.app\n     * @param {boolean} visible - Flag\n     */\n    setRotationCenterVisibility: function (visible) {\n        Module.ccall('tiramisu_setRotationCenterVisibility', 'null', ['number'], arguments);\n    },\n\n    /**\n     * Restores the default camera position.\n     * \n     * @memberof module:solo.app\n     * @param {AnimatedMode} [animated]\n     */\n    setDefaultView: function (animated) {\n        Module.ccall('tiramisu_setDefaultView', 'null', ['number'], arguments);\n    },\n\n    /**\n     * Aligns the camera horizon.\n     * \n     * @memberof module:solo.app\n     * @param {AnimatedMode} [animated]\n     * @since 1.6.2\n     */\n    alignHorizon: function (animated) {\n        Module.ccall('tiramisu_alignHorizon', 'null', ['number'], arguments);\n    },\n\n    /**\n     * Sets standard view by name.\n     * \n     * @memberof module:solo.app\n     * @param {StandardViewName} viewName Name of standard view\n     * @param {AnimatedMode} animated\n     * @param {number} [factor=0.95]\n     */\n    jumpToStandardView: function (viewName, animated, factor) {\n        Module.ccall('tiramisu_jumpToStandardView', 'null', ['string', 'number', 'number'], [viewName, animated, factor || 0]);\n    },\n\n    /**\n     * Fit to visible part of the 3D scene.\n     * \n     * @memberof module:solo.app\n     * @param {AnimatedMode} animated\n     * @param {number} [factor=0.95]\n     */\n    fitSceneInView: function (animated, factor) {\n        Module.ccall('tiramisu_fitObjectsInView', 'null', ['number', 'number', 'number', 'number'], [0, -1, animated, factor || 0]);\n    },\n\n    /**\n     * Fit to selected 3D objects in the 3D scene.\n     * \n     * @memberof module:solo.app\n     * @param {AnimatedMode} animated\n     * @param {number} [factor=0.95]\n     */\n    fitSelectedObjectsInView: function (animated, factor) {\n        Module.ccall('tiramisu_fitObjectsInView', 'null', ['number', 'number', 'number', 'number'], [0, -2, animated, factor || 0]);\n    },\n\n    /**\n     * Fit to multiple 3D objects assigned in the array.\n     * \n     * @memberof module:solo.app\n     * @param {Handle[]} handles - Array of 3D object handles\n     * @param {AnimatedMode} animated\n     * @param {number} [factor=0.95]\n     */\n    fitObjectsInView: function (handles, animated, factor) {\n        ccallWithObjectHandles('tiramisu_fitObjectsInView', handles, animated, factor);\n    },\n\n    /**\n     * Sets the center of rotation in the center of the bounding box of visible part of the 3D scene.\n     * \n     * @memberof module:solo.app\n     */\n    setRotationCenterToScene: function () {\n        Module.ccall('tiramisu_setRotationCenterToObjects', 'null', ['number', 'number', 'number'], [0, -1, 0]);\n    },\n\n    /**\n     * Sets the center of rotation in the center of the bounding box of selected 3D objects.\n     * \n     * @memberof module:solo.app\n     */\n    setRotationCenterToSelectedObjects: function () {\n        Module.ccall('tiramisu_setRotationCenterToObjects', 'null', ['number', 'number', 'number'], [0, -2, 0]);\n    },\n\n    /**\n     * Sets the center of rotation in the center of the bounding box of 3D objects assigned in the array.\n     * \n     * @memberof module:solo.app\n     * @param {Handle[]} handles - Array of 3D object handles\n     * @param {AnimatedMode} animated\n     */\n    setRotationCenterToObjects: function (handles, animated) {\n        ccallWithObjectHandles('tiramisu_setRotationCenterToObjects', handles, animated);\n        if (animated) {\n            Module.ccall('tiramisu_centerRotationCenterInView', 'null', ['number'], [animated]);\n        }\n    },\n\n    /**\n     * Sets the center of rotation in the center of the screen.\n     * \n     * @memberof module:solo.app\n     * @param {AnimatedMode} animated\n     */\n    centerRotationCenterInView: function (animated) {\n        Module.ccall('tiramisu_centerRotationCenterInView', 'null', ['number'], arguments);\n    },\n\n    /**\n     * Sets the center of rotation to default position.\n     * \n     * @memberof module:solo.app\n     */\n    resetRotationCenter: function () {\n        Module.ccall('tiramisu_resetRotationCenter', 'null');\n    },\n\n    /**\n     * Gets a description of the loaded interactive model.\n     * Returns an object depending on the type of interactive model.\n     * \n     * @memberof module:solo.app\n     * @returns {DocumentInfo}\n     * @deprecated since version 1.5.0, use {@link module:solo.app.modelInfo app.modelInfo} instead\n     */\n    getDocumentInfo: function () {\n        return m_doc && expand({}, m_doc);\n    },\n\n    /**\n     * Returns options of the interactive model from the companion file *.interactivity.xml* in the form of an object with key/value pairs.\n     * \n     * @memberof module:solo.app\n     * @returns {KeyValuePairs}\n     * @since 1.4.0\n     */\n    getOptions: function () {\n        var pairs = Module.ccall('tiramisu_getOptions', 'number'),\n            dict,\n            name,\n            i = 0;\n        if (!pairs)\n            return;\n        dict = {};\n        for (i = 0;\n            (name = Module.getValue(pairs + i, 'i32')); i += 8)\n            dict[Module.Pointer_stringify(name)] = Module.Pointer_stringify(Module.getValue(pairs + i + 4, 'i32'));\n        Module._free(pairs);\n        return dict;\n    },\n\n    /**\n     * Returns the value of the option of the interactive model.\n     * \n     * @memberof module:solo.app\n     * @param {string} name - The name of the option\n     * @returns {string} The value of the option\n     * @since 1.4.0\n     */\n    getOption: function (name) {\n        var value = Module.ccall('tiramisu_getOption', 'number', ['string'], [name]);\n        if (!value)\n            return;\n        return Module.Pointer_stringify(value);\n    },\n\n    /**\n     * Sets the name of the 3D object.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} handle - A handle of 3D object \n     * @param {string} name - A name of 3D object\n     * @since 1.4.0\n     */\n    setObjectName: function (handle, name) {\n        Module.ccall('tiramisu_setObjectName', 'null', ['number', 'string'], arguments);\n    },\n\n    /**\n     * Returns the current color of the hovered 3D object in the interactive model.\n     * \n     * @memberof module:solo.app\n     * @returns {HexColorString}\n     * @since 1.4.0\n     * @deprecated since version 1.5.0, use {@link module:solo.app.hoverColor app.hoverColor} instead\n     */\n    getHoverColor: function () {\n        return toHTMLColor(Module._tiramisu_getHoverColor());\n    },\n\n    /**\n     * Sets the color of the hovered 3D object in the interactive model.\n     * \n     * @memberof module:solo.app\n     * @param {HexColorString}\n     * @since 1.4.0\n     * @deprecated since version 1.5.0, use {@link module:solo.app.hoverColor app.hoverColor} instead\n     */\n    setHoverColor: function (color) {\n        return Module._tiramisu_setHoverColor(parseHTMLColor(color));\n    },\n\n    /**\n     * Returns the current color of the selected 3D object in the interactive model.\n     * \n     * @memberof module:solo.app\n     * @returns {HexColorString}\n     * @since 1.4.0\n     * @deprecated since version 1.5.0, use {@link module:solo.app.selectionColor app.selectionColor} instead\n     */\n    getSelectionColor: function () {\n        return toHTMLColor(Module._tiramisu_getSelectionColor());\n    },\n\n    /**\n     * Sets the color of the selected 3D object in the interactive model.\n     * \n     * @memberof module:solo.app\n     * @param {HexColorString}\n     * @since 1.4.0\n     * @deprecated since version 1.5.0, use {@link module:solo.app.selectionColor app.selectionColor} instead\n     */\n    setSelectionColor: function (color) {\n        return Module._tiramisu_setSelectionColor(parseHTMLColor(color));\n    },\n\n    /**\n     * Gets list of the viewpoints in the VRML scene.\n     * \n     * @memberof module:solo.app\n     * @returns {ViewpointInfo[]} An array of viewpoints\n     * @since 1.4.0\n     */\n    getViewpoints: function () {\n        var bulk = Module._tiramisu_getViewpoints(),\n            viewpoints = [],\n            handle,\n            i;\n        if (bulk) {\n            for (i = 0;\n                (handle = Module.getValue(bulk + i, 'i32')); i += 12) {\n                viewpoints.push({\n                    handle: handle,\n                    name: Module.Pointer_stringify(Module.getValue(bulk + i + 4, 'i32')),\n                    description: Module.Pointer_stringify(Module.getValue(bulk + i + 8, 'i32'))\n                });\n            }\n            Module._free(bulk);\n        }\n        return viewpoints;\n    },\n\n    /**\n     * Returns active viewpoint.\n     * \n     * @memberof module:solo.app\n     * @returns {Handle} A handle of the 3D object \"viewpoint\"\n     * @since 1.4.0\n     * @deprecated since version 1.5.0, use {@link module:solo.app.activeViewpoint app.activeViewpoint} instead\n     */\n    getActiveViewpoint: function () {\n        return Module._tiramisu_getActiveViewpoint();\n    },\n\n    /**\n     * Sets active viewpoint.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} handle - A handle of the 3D object \"viewpoint\"\n     * @since 1.4.0\n     * @deprecated since version 1.5.0, use {@link module:solo.app.activeViewpoint app.activeViewpoint} instead\n     */\n    setActiveViewpoint: function (handle) {\n        Module._tiramisu_setActiveViewpoint(handle);\n    },\n\n    /**\n     * Adds new objects in the 3D scene.\n     * \n     * @memberof module:solo.app\n     * @param {Handle|Handle[]} handles - A handle of the 3D object or an array of 3D object handles \n     * @param {Handle} [parentHandle] - A handle of the parent 3D object\n     * @since 1.4.0\n     */\n    addObjects: function (handles, parentHandle) {\n        if (!util.isObject(handles) || !handles.forEach) {\n            handles = [handles];\n        }\n        handles.forEach(function (handle) {\n            Module.ccall('tiramisu_addObject', 'null', ['number', 'number'], [handle, parentHandle]);\n        });\n    },\n\n    /**\n     * Removes objects from the 3D scene.\n     * \n     * @memberof module:solo.app\n     * @param {Handle|Handle[]} handles - A handle of the 3D object or an array of 3D object handles \n     * @param {Handle} [parentHandle] - A handle of the parent 3D object\n     * @since 1.4.0\n     */\n    removeObjects: function (handles, parentHandle) {\n        if (!util.isObject(handles) || !handles.forEach) {\n            handles = [handles];\n        }\n        handles.forEach(function (handle) {\n            Module.ccall('tiramisu_removeObject', 'null', ['number', 'number'], [handle, parentHandle]);\n        });\n    },\n\n    /**\n     * Remove all objects from the 3D scene.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} [parentHandle] - Parent handle\n     * @since 1.4.0\n     */\n    removeAllObjects: function (parentHandle) {\n        Module.ccall('tiramisu_removeAllObjects', 'null', ['number'], arguments);\n    },\n\n    /**\n     * Gets child objects for the parent object.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} [parentHandle] - Parent handle\n     * @returns {Handle[]} An array of 3D object handles\n     * @since 1.5.0\n     */\n    getChildObjects: function (parentHandle) {\n        var handles = Module._tiramisu_getChildObjects(parentHandle),\n            objects = Tiramisu.util.unmarshalObjectArray(handles);\n        Module._free(handles);\n        return objects;\n    },\n\n    /**\n     * Sets child objects for the parent object.\n     * \n     * @memberof module:solo.app\n     * @param {Handle[]} children - An array of 3D object handles\n     * @param {Handle} [parentHandle] - Parent handle\n     * @returns {boolean}\n     * @since 1.5.0\n     */\n    setChildObjects: function (children, parentHandle) {\n        var count = 0,\n            objects = 0;\n        if (children) {\n            if (typeof children === 'number')\n                children = [children];\n            objectArray = Module.allocate(children.length * 4, 'i32', Module.ALLOC_STACK);\n            count = children.length;\n            for (var i = 0; i < count; ++i)\n                Module.setValue(objectArray + i * 4, children[i], 'i32');\n        }\n        return Module._tiramisu_setChildObjects(parentHandle, objectArray, count) !== 0;\n    },\n\n    /**\n     * Returns handle of the parent object.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} [handle] - Parent handle\n     * @returns {Handle} Handle of 3D object\n     * @since 1.5.1\n     */\n    getParentObject: function (handle) {\n        return Module._tiramisu_getParentObject(handle);\n    },\n\n    /**\n     * Returns the object visibility code.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} handle - Handle of 3D object\n     * @param {number} [flags=0] -\n     * @returns {ObjectVisibilityEnum} The object visibility code\n     * @since 1.5.2\n     */\n    getObjectVisibility: function (handle, flags) {\n        return Module._tiramisu_getObjectVisibility(handle, flags);\n    },\n\n    /**\n     * Returns flags of the 3D object.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} handle - Handle of 3D object\n     * @returns {number} Flags of 3D object\n     * @since 1.5.2\n     */\n    getObjectFlags: function (handle) {\n        return Module._tiramisu_getObjectFlags(handle);\n    },\n\n    /**\n     * Creates 3D objects from the string.\n     * \n     * @memberof module:solo.app\n     * @param {string} syntax - VRML syntax string\n     * @param {string} [baseUrl] - Base URL to load external resources\n     * @returns {Handle[]} An array of 3D object handles\n     * @since 1.4.0\n     */\n    createObjectsFromString: function (syntax, baseUrl) {\n        var nodes = Module.ccall('tiramisu_createObjects', 'number', ['string', 'number', 'string'], [syntax, 0, baseUrl || null]),\n            handles = Tiramisu.util.unmarshalObjectArray(nodes);\n        if (nodes) {\n            Module._free(nodes);\n        } else {\n            Module.printErr('createObjectsFromString() failed: \"' + syntax + '\"');\n        }\n        return handles;\n    },\n\n    /**\n     * _Asynchronous method_. Creates 3D objects from url.\n     * \n     * @async\n     * @memberof module:solo.app\n     * @param {string} url - URl to load VRML file\n     * @returns {Promise<Handle[]>} `Promise` whose fulfillment handler receives an array of 3D object handles\n     * @see external:Promise\n     * @since 1.4.0\n     */\n    createObjectsFromURL: function (url) {\n        return util.loadResource(url, '', 'arraybuffer').then(function (xhr) {\n            var arrayBuffer = xhr.response,\n                byteArray,\n                buffer,\n                nodes;\n            if (arrayBuffer) {\n                byteArray = new Uint8Array(arrayBuffer);\n                buffer = Module._malloc(byteArray.byteLength);\n                Module.writeArrayToMemory(byteArray, buffer);\n                nodes = Module.ccall('tiramisu_createObjects', 'number', ['number', 'number', 'string'], [buffer, byteArray.byteLength, url]);\n                handles = Tiramisu.util.unmarshalObjectArray(nodes);\n                Module._free(buffer);\n                if (nodes) {\n                    Module._free(nodes);\n                    return Promise.resolve(handles);\n                }\n            }\n            return Promise.reject(new Error('createObjectsFromURL() failed: \"' + url + '\"'));\n        });\n    },\n\n    /**\n     * Creates 3D objects from the VRML file in the *.cortona3d* bundle.\n     * \n     * @memberof module:solo.app\n     * @param {string} itemName - The name of the VRML file in the document bundle\n     * @returns {Handle[]} An array of 3D object handles\n     * @since 1.4.0\n     */\n    createObjectsFromDocumentBundle: function (fileName) {\n        var nodes = Module.ccall('tiramisu_createObjectsFromBundleItem', 'number', ['string'], [fileName]),\n            handles = Tiramisu.util.unmarshalObjectArray(nodes);\n        if (nodes) {\n            Module._free(nodes);\n        } else {\n            Module.printErr('createObjectsFromDocumentBundle() failed: \"' + fileName + '\"');\n        }\n        return handles;\n    },\n\n    /**\n     * Sets camera position, orientation, field of view and center of rotation.\n     * \n     * @param {number[]} position Array of 3 float \n     * @param {number[]} orientation Array of 4 float\n     * @param {number} scalarParam Field of view. If <0 preserve current value\n     * @param {number[]|null} rotationCenter Array of 3 float\n     * @param {boolean} animated\n     * @memberof module:solo.app\n     * @private\n     * @since 1.5.3\n     */\n    setCameraPosition: function (position, orientation, scalarParam, rotationCenter, animated) {\n        var sp = Module.Runtime.stackSave(),\n            _location = Module.allocate(3, 'float', Module.ALLOC_STACK),\n            _orientation = Module.allocate(4, 'float', Module.ALLOC_STACK),\n            _rotationCenter = rotationCenter ? Module.allocate(3, 'float', Module.ALLOC_STACK) : 0;\n\n        Module.setValue(_location, position[0], 'float');\n        Module.setValue(_location + 4, position[1], 'float');\n        Module.setValue(_location + 8, position[2], 'float');\n        Module.setValue(_orientation, orientation[0], 'float');\n        Module.setValue(_orientation + 4, orientation[1], 'float');\n        Module.setValue(_orientation + 8, orientation[2], 'float');\n        Module.setValue(_orientation + 12, orientation[3], 'float');\n        if (rotationCenter) {\n            Module.setValue(_rotationCenter, rotationCenter[0], 'float');\n            Module.setValue(_rotationCenter + 4, rotationCenter[1], 'float');\n            Module.setValue(_rotationCenter + 8, rotationCenter[2], 'float');\n        }\n        Module._tiramisu_setCameraPosition(_location, _orientation, scalarParam, _rotationCenter, animated);\n        Module.Runtime.stackRestore(sp);\n    },\n\n    /**\n     * Sets the transparency for objects.\n     * \n     * @memberof module:solo.app\n     * @param {Handle[]} handles - Array of 3D object handles\n     * @param {number} value \n     * @param {AnimatedMode} [animated=false]\n     * @since 1.6.4\n     */\n    setObjectsTransparency: function (handles, value, animated) {\n        var objs = handles || [];\n        if (typeof objs === 'number') {\n            objs = [objs];\n        }\n        objs.forEach(function (handle) {\n            app.setObjectPropertyf(handle, app.PROPERTY_TRANSPARENCY, animated, value);\n        });\n    },\n    \n    /**\n     * Gets the transparency value for objects.\n     * \n     * @memberof module:solo.app\n     * @param {Handle[]} handles - Array of 3D object handles\n     * @returns {number}\n     * @since 1.6.4\n     */\n    getObjectsTransparency: function (handles) {\n        var objs = handles || [];\n        if (typeof objs === 'number') {\n            objs = [objs];\n        }\n        return objs.reduce(function (acc, handle) {\n            return Math.max(app.getObjectPropertyf(handle, app.PROPERTY_TRANSPARENCY), acc);\n        }, 0);\n    },\n\n    /**\n     * Toggles the visibility state for objects.\n     * \n     * @memberof module:solo.app\n     * @param {boolean} [force]\n     * @returns {boolean}\n     * @since 1.6.4\n     */\n    toggleObjectsVisibility: function (handles, force) {\n        var objs = handles || [],\n            isVisible = !force;\n        if (typeof objs === 'number') {\n            objs = [objs];\n        }\n\n        if (typeof force === 'undefined') {\n            isVisible = !handles.some(function (handle) {\n                return !!app.getObjectVisibility(handle);\n            });\n        }\n        \n        handles.forEach(function (handle) {\n            if (isVisible) {\n                app.setObjectPropertyf(handle, app.PROPERTY_VISIBILITY, false, -1);\n            } else {\n                app.restoreObjectProperty(handle, app.PROPERTY_VISIBILITY, false);\n            }\n        });\n\n        return !isVisible;\n    }\n};\n\n/**\n * Enables or disables the use of the ambient occlusion in the scene.\n * \n * > #### __NOTE__\n * >\n * > To use the ambient occlusion, you must set the {@link module:solo.app ENABLE_GLES3} and {@link module:solo.app DISABLE_ANTIALIASING_GLES3} flags before the library is initialized.\n * >```\n * >    Cortona3DSolo.use('core', { \n * >        features: Cortona3DSolo.app.ENABLE_GLES3 | Cortona3DSolo.app.DISABLE_ANTIALIASING_GLES3\n * >    });\n * >    Cortona3DSolo.app.initialize('scene.wrl');\n * >```\n *\n * @static\n * @member {boolean} ambientOcclusionEnabled\n * @memberof module:solo.app\n * @since 1.5.0\n */\n\n/**\n * Checks if the ambient occlusion available for use.\n * \n * @static\n * @member {boolean} ambientOcclusionSupported\n * @memberof module:solo.app\n * @since 1.5.0\n */\n\n/**\n * Gets or sets the global color for drawing edges.\n * \n * @static\n * @member {HexColorString} globalEdgeColor\n * @memberof module:solo.app\n * @since 1.5.7\n */\n\n/**\n * Gets or sets the weights for the drawing edges as an array of three float numbers. Default value is `[0, 0, 0]`.\n * \n * The color is calculated by the formula:\n * \n * `edgeColor = globalEdgeColor * weights[0] + material.diffuseColor * weights[1] + material.emissiveColor * weights[2]`\n * \n * If the value is `[0, 0, 0]` then edge drawing will be disabled.\n * \n * @static\n * @member {number[]} edgeColorWeights\n * @memberof module:solo.app\n * @since 1.5.7\n * @see {@link module:solo.app.globalEdgeColor app.globalEdgeColor}\n */\n\n/**\n * Gets or sets the color of the hovered 3D object in the interactive model.\n * \n * @static\n * @member {HexColorString} hoverColor\n * @memberof module:solo.app\n * @since 1.5.0\n */\n\n/**\n * Gets or sets the color of the selected 3D object in the interactive model.\n * \n * @static\n * @member {HexColorString} selectionColor\n * @memberof module:solo.app\n * @since 1.5.0\n */\n\n/**\n * Gets or sets the transparency threshold used by the picker. The value is [0..1].\n * \n * @static\n * @member {number} pickerTransparencyThreshold\n * @memberof module:solo.app\n * @since 1.5.0\n */\n\n/**\n * Gets a description of the loaded interactive model.\n * \n * @static\n * @member {DocumentInfo} modelInfo\n * @memberof module:solo.app\n * @since 1.5.0\n */\n\n/**\n * Gets or sets the active viewpoint in the 3D scene.\n * \n * @static\n * @member {Handle} activeViewpoint\n * @memberof module:solo.app\n * @since 1.5.0\n */\n\n/**\n * Gets or sets a flag for recursive object lookup. \n * It must be set to `true` if the hierarchy of 3D objects is kept in VRML.\n * Default value is `false` for the catalog and `true` for the procedure.\n * \n * @static\n * @member {boolean} recursiveObjectLookup\n * @memberof module:solo.app\n * @since 1.6.0\n */\n\nObject.defineProperties(app, {\n    'globalEdgeColor': {\n        get: function () {\n            return toHTMLColor(Module._tiramisu_getGlobalEdgeColor());\n        },\n        set: function (color) {\n            Module._tiramisu_setGlobalEdgeColor(parseHTMLColor(color));\n        },\n        enumerable: true\n    },\n    'edgeColorWeights': {\n        get: function () {\n            return getVec3fValue(Module._tiramisu_getEdgeColorWeights());\n        },\n        set: function (weights) {\n            var sp = Module.Runtime.stackSave(),\n                weightArray = Module.allocate(3 * 4, 'float', Module.ALLOC_STACK),\n                i;\n            for (i = 0; i < 3; ++i)\n                Module.setValue(weightArray + i * 4, weights[i], 'float');\n            Module._tiramisu_setEdgeColorWeights(weightArray);\n            Module.Runtime.stackRestore(sp);\n        },\n        enumerable: true\n    },\n    'ambientOcclusionEnabled': {\n        get: function () {\n            return !!Module._tiramisu_isAmbientOcclusionEnabled();\n        },\n        set: function (enabled) {\n            Module._tiramisu_enableAmbientOcclusion(enabled);\n        },\n        enumerable: true\n    },\n    'ambientOcclusionSupported': {\n        get: function () {\n            return !!Module._tiramisu_isAmbientOcclusionSupported();\n        },\n        enumerable: true\n    },\n    'hoverColor': {\n        get: function () {\n            return toHTMLColor(Module._tiramisu_getHoverColor());\n        },\n        set: function (color) {\n            Module._tiramisu_setHoverColor(parseHTMLColor(color));\n        },\n        enumerable: true\n    },\n    'selectionColor': {\n        get: function () {\n            return toHTMLColor(Module._tiramisu_getSelectionColor());\n        },\n        set: function (color) {\n            Module._tiramisu_setSelectionColor(parseHTMLColor(color));\n        },\n        enumerable: true\n    },\n    'pickerTransparencyThreshold': {\n        get: function () {\n            return Module.ccall('tiramisu_getPickerTransparencyThreshold', 'number');\n        },\n        set: function (value) {\n            Module.ccall('tiramisu_setPickerTransparencyThreshold', 'null', ['number'], arguments);\n        },\n        enumerable: true\n    },\n    'modelInfo': {\n        get: function () {\n            return m_doc && expand({}, m_doc);\n        },\n        enumerable: true\n    },\n    'activeViewpoint': {\n        get: function () {\n            return Module._tiramisu_getActiveViewpoint();\n        },\n        set: function (handle) {\n            Module._tiramisu_setActiveViewpoint(handle);\n        },\n        enumerable: true\n    },\n    'recursiveObjectLookup': {\n        get: function () {\n            return !!Module._tiramisu_isRecursiveObjectLookupEnabled();\n        },\n        set: function (enabled) {\n            Module._tiramisu_enableRecursiveObjectLookup(enabled);\n        },\n        enumerable: true\n    }\n});\n\nObject.defineProperty(app, 'MOUSE_DRAG_MODE_SPIN', {\n    value: 0,\n    writable: false\n});\nObject.defineProperty(app, 'MOUSE_DRAG_MODE_PAN', {\n    value: 1,\n    writable: false\n});\nObject.defineProperty(app, 'MOUSE_DRAG_MODE_ZOOM', {\n    value: 2,\n    writable: false\n});\nObject.defineProperty(app, 'MOUSE_DRAG_MODE_DEFAULT', {\n    value: 0,\n    writable: false\n});\n\nObject.defineProperty(app, 'PROPERTY_DIFFUSE_COLOR', {\n    value: 0,\n    writable: false\n});\nObject.defineProperty(app, 'PROPERTY_EMISSIVE_COLOR', {\n    value: 1,\n    writable: false\n});\nObject.defineProperty(app, 'PROPERTY_TRANSPARENCY', {\n    value: 2,\n    writable: false\n});\nObject.defineProperty(app, 'PROPERTY_VISIBILITY', {\n    value: 3,\n    writable: false\n});\nObject.defineProperty(app, 'PROPERTY_TRANSLATION', {\n    value: 4,\n    writable: false\n});\nObject.defineProperty(app, 'PROPERTY_ROTATION', {\n    value: 5,\n    writable: false\n});\nObject.defineProperty(app, 'PROPERTY_SCALE', {\n    value: 6,\n    writable: false\n});\n\nObject.defineProperty(app, 'MR_PARTNUMBER', {\n    value: 1,\n    writable: false\n});\nObject.defineProperty(app, 'MR_PARTDESC', {\n    value: 2,\n    writable: false\n});\nObject.defineProperty(app, 'MR_ITEM', {\n    value: 3,\n    writable: false\n});\nObject.defineProperty(app, 'MR_ITEMVAR', {\n    value: 4,\n    writable: false\n});\nObject.defineProperty(app, 'MR_INDENT', {\n    value: 5,\n    writable: false\n});\nObject.defineProperty(app, 'MR_UPA', {\n    value: 6,\n    writable: false\n});\nObject.defineProperty(app, 'MR_TOTALQTY', {\n    value: 7,\n    writable: false\n});\n\nObject.defineProperty(app, 'OBJECT_VISIBILITY_VISIBLE', {\n    value: 0,\n    writable: false\n});\nObject.defineProperty(app, 'OBJECT_VISIBILITY_HIDDEN', {\n    value: 1,\n    writable: false\n});\nObject.defineProperty(app, 'OBJECT_VISIBILITY_TRANSPARENT', {\n    value: 2,\n    writable: false\n});\nObject.defineProperty(app, 'OBJECT_VISIBILITY_IMPLICITLY_HIDDEN', {\n    value: 3,\n    writable: false\n});\n\n\nmodule.exports = {\n    app: appExports\n};\n\n/**\n * Unique identifier of the 3D object in the core.\n * @typedef {number} Handle\n */\n\n/**\n * Object property code.\n * @prop {number} app.PROPERTY_DIFFUSE_COLOR=0\n * @prop {number} app.PROPERTY_EMISSIVE_COLOR=1\n * @prop {number} app.PROPERTY_TRANSPARENCY=2\n * @prop {number} app.PROPERTY_VISIBILITY=3\n * @prop {number} app.PROPERTY_TRANSLATION=4\n * @prop {number} app.PROPERTY_ROTATION=5\n * @prop {number} app.PROPERTY_SCALE=6\n * @typedef {number} ObjectProperty\n * @see {@link module:solo.app.setObjectPropertyf app.setObjectPropertyf()}\n */\n\n/**\n * Metadata role code.\n * @prop {number} app.MR_PARTNUMBER=1\n * @prop {number} app.MR_PARTDESC=2\n * @prop {number} app.MR_ITEM=3\n * @prop {number} app.MR_ITEMVAR=4\n * @prop {number} app.MR_INDENT=5\n * @prop {number} app.MR_UPA=6\n * @prop {number} app.MR_TOTALQTY=7\n * @typedef {number} MetadataRoleCode\n * @see CatalogItemInfo\n */\n\n/**\n * Mouse drag mode.\n * @prop {number} app.MOUSE_DRAG_MODE_SPIN=0\n * @prop {number} app.MOUSE_DRAG_MODE_PAN=1\n * @prop {number} app.MOUSE_DRAG_MODE_ZOOM=2\n * @prop {number} app.MOUSE_DRAG_MODE_DEFAULT=0 MOUSE_DRAG_MODE_SPIN\n * @typedef {number} MouseDragMode\n * @see {@link module:solo.app.setMouseDragMode app.setMouseDragMode()}\n */\n\n/**\n * A hexadecimal html-color string \"#RRGGBB\".\n * @typedef {string} HexColorString\n */\n\n/**\n * A method parameter that sets the Animated transition mode.\n * - `true` - transition effect is on\n * - `false` - transition effect is off\n * @typedef {boolean} AnimatedMode\n */\n\n/**\n * Name of standard view:\n * - `\"front\"`\n * - `\"back\"`\n * - `\"left\"`\n * - `\"right\"`\n * - `\"top\"`\n * - `\"bottom\"`\n * - `\"isometric\"`\n * @typedef {string} StandardViewName\n * @see {@link module:solo.app.jumpToStandardView app.jumpToStandardView()}\n */\n\n/**\n * Information about the picked 3D object, for example:\n * ```\n * { \n *     handle: 7210488, \n *     name: \"PPM005350_46\" \n * }\n * ```\n * @typedef {object} PickedObjectInfo\n * @prop {Handle} handle A handle of the picked 3D object.\n * @prop {string} name DEF name of the picked 3D object.\n * @see {@link module:solo.app.pickObject app.pickObject()}\n */\n\n/**\n * Information about the picked chain of 3D objects, for example:\n * ```\n * { \n *     coord: [-0.027441510930657387,-0.7154514789581299,-0.03601783514022827], \n *     normal: [-0.21847587823867798,-0.000531829718966037,-0.09742648154497146],\n *     sceneCoord: [1.715429425239563,-0.028011199086904526,-0.03601783514022827],\n *     sceneNormal: [0.0014959870604798197,-0.9133041501045227,-0.4072754681110382],\n *     chain: [5698800,6100248,6100664,6101200,6101848]\n * }\n * ```\n * @typedef {object} PickedObjectChain\n * @prop {number[]} coord The point on the surface of the picked geometry. An array of three numbers [x, y, z].\n * @prop {number[]} normal The vector of the normal to the surface of the picked geometry. An array of three numbers [x, y, z].\n * @prop {number[]} sceneCoord The point on the surface of the picked geometry in the gloabl coordinates. An array of three numbers [x, y, z].\n * @prop {number[]} sceneNormal The vector of the normal to the surface of the picked geometry in the gloabl coordinates. An array of three numbers [x, y, z].\n * @prop {Handle[]} chain An array of picked 3D objects. Starting with the root element of the scene.\n * @see {@link module:solo.app.pickObjectChain app.pickObjectChain()}\n */\n\n/**\n * Information about the 3D object \"viewpoint\", for example:\n * ```\n * { \n *     handle: 5670488, \n *     name: \"\",\n *     description: \"Top\"\n * }\n * ```\n * @typedef {object} ViewpointInfo\n * @prop {Handle} handle A handle of the 3D object \"viewpoint\".\n * @prop {string} name DEF name of the 3D object \"viewpoint\".\n * @prop {string} description Description string from the 3D object \"viewpoint\".\n * @see {@link module:solo.app.getViewpoints app.getViewpoints()}\n */\n\n/**\n * Information about loaded document, for example:\n * ```\n * { \n *      type: \"ipc\", \n *      baseURL\t\"\",\n *      companionFile: \"pump-catalog.interactivity.xml\",\n *      bundleURL: \"http://.../pump-catalog.cortona3d\",\n *      specificationName: \"GENERIC_IPC\",\n *      ...\n * }\n * ```\n * @typedef {DocumentCatalogInfo|DocumentProcedureInfo|DocumentGenericInfo|DocumentDrawingInfo} DocumentInfo\n * @prop {string} type - The type of the 3D model: \n * - `\"procedure\"`\n * - `\"ipc\"`\n * - `\"generic\"`\n * - `\"drawing\"`\n * @prop {string} baseURL - A base path to the loaded file or the empty string if the model loaded from the bundle file.\n * @prop {string|null} bundleURL - The URL to the loaded bundle file *.cortona3d* or __null__ if the model is loaded not from the bundle. \n * @prop {string} companionFile - The filename of the companion file *.interactivity.xml* in the loaded bundle or the URL if the model is loaded not from the bundle.\n * @prop {string} specificationName - Identifier of the specification component.\n * @see {@link module:solo.app.didFinishLoadDocument app.didFinishLoadDocument()}\n * @see {@link module:solo.app.modelInfo app.modelInfo}\n */\n\n/**\n * Catalog information object, for example:\n * ```\n * {\n *      type: \"ipc\",\n *      baseURL: \"http://.../\",\n *      bundleURL: null,\n *      companionFile: \"http://.../pump-catalog.interactivity.xml\"\n *      specificationName: \"GENERIC_IPC\",\n *      sheet: {\n *          description: \"Assembled View\",\n *          dplTable: \"<table id=\\\"dpl-table\\\" class=\\\"dpl-table\\\">..</table>\",\n *          dplTableWidth: 69,\n *          drawing: \"http://.../pump-catalog-1.svg\",\n *          id: \"view_0\"\n *      },\n *      sheets: [\n *          {\n *              description: \"Assembled View\",\n *              drawing: \"http://.../pump-catalog-1.svg\"\n *              id: \"view_0\",\n *              indentationLevel: 0\n *          },\n *          ...\n *      ]\n * }\n * ```\n * @prop {string} type=ipc - See {@link DocumentInfo}\n * @prop {string} baseURL - See {@link DocumentInfo}\n * @prop {string|null} bundleURL - See {@link DocumentInfo}\n * @prop {string} companionFile - See {@link DocumentInfo}\n * @prop {string} specificationName - See {@link DocumentInfo}\n * @prop {CatalogCurrentSheetInfo} sheet - The object represents information about the first IPC sheet.\n * @prop {CatalogSheetInfo[]} sheets - An array of objects represents information about IPC sheets.\n * @typedef {object} DocumentCatalogInfo\n * @see DocumentInfo\n */\n\n/**\n * Drawing information object, for example:\n * ```\n * {\n *      type:\t\"drawing\",\n *      baseURL: \"http://.../\"\n * }\n * ```\n * @prop {string} type=drawing - See {@link DocumentInfo}\n * @prop {string} baseURL - A base path to the loaded image file. See {@link DocumentInfo}.\n * @typedef {object} DocumentDrawingInfo\n * @see DocumentInfo\n */\n\n/**\n * Generic VRML information object, for example:\n * ```\n * {\n *      type:\t\"generic\"\n *      baseURL: \"http://.../\",\n * }\n * ```\n * @prop {string} type=generic - See {@link DocumentInfo}.\n * @prop {string} baseURL - A base path to the loaded VRML file. See {@link DocumentInfo}.\n * @typedef {object} DocumentGenericInfo\n * @see DocumentInfo\n */\n\n/**\n * Procedure information object, for example:\n * ```\n * doc = {\n *      type: \"procedure\",\n *      baseURL: \"\",\n *      bundleURL\t\"http://.../pump-catalog.cortona3d\",\n *      companionFile: \"pump-procedure.interactivity.xml\",\n *      specificationName: \"GENERIC_PRC\",\n *      duration: 71.45999908447265,\n *      autoStartPlayback: 0,\n *      comments: \"<div class=\\\"tiramisu-proc-title\\\">...</div>\"\n * }\n * ```\n * @prop {string} type=procedure - See {@link DocumentInfo}.\n * @prop {string} baseURL - See {@link DocumentInfo}.\n * @prop {string|null} bundleURL - See {@link DocumentInfo}.\n * @prop {string} companionFile - See {@link DocumentInfo}.\n * @prop {string} specificationName - See {@link DocumentInfo}.\n * @prop {number} duration - The duration of the interactive procedure in seconds.\n * @prop {number} autoStartPlayback - Automatic start of the procedure playback:\n * - `0` - auto start is off\n * - `1` - auto start is on\n * @prop {string} comments - The HTML string represents a textual description of the procedure steps.\n * @typedef {object} DocumentProcedureInfo\n * @see DocumentInfo\n */\n\n/**\n * The hook method is invoked when the Cortona3D Solo core will be loaded and initialized.\n * \n * @memberof module:solo.app\n * @abstract \n * @function onReady\n * @see The corresponding event {@link event:\"app.onReady\" \"app.onReady\"}\n */\n/**\n * @event \"app.onReady\"\n * @see The corresponding hook method {@link module:solo.app.onReady app.onReady()}\n */\n\n/**\n *  The hook method is invoked when the 3D scene is loaded.\n *  \n * @memberof module:solo.app\n * @abstract \n * @function didFinishLoadDocument\n * @param {DocumentInfo} doc - Information object depending on the type of loaded interactive scene. \n * @see The corresponding event {@link event:\"app.didFinishLoadDocument\" \"app.didFinishLoadDocument\"}\n */\n/**\n * @event \"app.didFinishLoadDocument\"\n * @see The corresponding hook method {@link module:solo.app.didFinishLoadDocument app.didFinishLoadDocument()}\n */\n\n/**\n *  The hook method is invoked when 3D scene is ready for rendering the first frame.\n * \n * @memberof module:solo.app\n * @abstract \n * @function firstFrameDidArrive\n * @param {number} timestamp\n * @see The corresponding event {@link event:\"app.firstFrameDidArrive\" \"app.firstFrameDidArrive\"}\n */\n/**\n * @event \"app.firstFrameDidArrive\"\n * @see The corresponding hook method {@link module:solo.app.firstFrameDidArrive app.firstFrameDidArrive()}\n */\n\n/**\n *  The hook method is invoked when 3D scene is failed to load.\n * \n * @memberof module:solo.app\n * @abstract \n * @function didFailLoadDocument\n * @param {string} message Reason\n * @see The corresponding event {@link event:\"app.didFailLoadDocument\" \"app.didFailLoadDocument\"}\n */\n/**\n * @event \"app.didFailLoadDocument\"\n * @see The corresponding hook method {@link module:solo.app.didFailLoadDocument app.didFailLoadDocument()}\n */\n\n/**\n * The hook method is invoked when anchor in the 3D scene is clicked.\n * \n * @memberof module:solo.app\n * @abstract \n * @function didClickHyperlink\n * @param {string[]} urls - Array of strings \n * @see The corresponding event {@link event:\"app.didClickHyperlink\" \"app.didClickHyperlink\"}\n */\n/**\n * @event \"app.didClickHyperlink\"\n * @see The corresponding hook method {@link module:solo.app.didClickHyperlink app.didClickHyperlink()}\n */\n\n/**\n * The hook method is invoked when the navigation in the 3D window is started.\n * \n * @memberof module:solo.app\n * @abstract \n * @function willStartNavigateInScene\n * @see The corresponding event {@link event:\"app.willStartNavigateInScene\" \"app.willStartNavigateInScene\"}\n */\n/**\n * @event \"app.willStartNavigateInScene\"\n * @see The corresponding hook method {@link module:solo.app.willStartNavigateInScene app.willStartNavigateInScene()}\n */\n\n/**\n * The hook method is invoked to indicate that loading operation is in progress.\n * When the download is complete, the parameter `total` is -1.\n * \n * @memberof module:solo.app\n * @abstract \n * @function onProgress \n * @param {number} position The amount of data currently transferred\n * @param {number} total The total amount of data to be transferred\n * @param {string} type The event's type:\n * - \"progress\"\n * - \"load\"\n * - \"error\"\n * - \"abort\"\n * @see The corresponding event {@link event:\"app.onProgress\" \"app.onProgress\"}\n */\n/**\n * @event \"app.onProgress\"\n * @see The corresponding hook method {@link module:solo.app.onProgress app.onProgress()}\n */\n\n/**\n * The hook method is invoked when context menu is called in the 3D window. \n * The mouse uses secondary button click. The touch device uses long tap.\n * \n * @memberof module:solo.app\n * @abstract \n * @function didCallContextMenu\n * @param {number} offsetX The X coordinate relative to the target element \n * @param {number} offsetY The Y coordinate relative to the target element \n * @param {HTMLElement} target  Target element (`<canvas>`)\n * @see {@link module:solo.core.canvas core.canvas}\n * @see The corresponding event {@link event:\"app.didCallContextMenu\" \"app.didCallContextMenu\"}\n */\n/**\n * @event \"app.didCallContextMenu\"\n * @see The corresponding hook method {@link module:solo.app.didCallContextMenu app.didCallContextMenu()}\n */\n\n/**\n * The hook method is invoked when selection of 3D objects is changed in the 3D window. \n * \n * @memberof module:solo.app\n * @abstract \n * @function didChangeSelection\n * @see {@link module:solo.core.app.setSelectedObjects app.setSelectedObjects()}\n * @see {@link module:solo.core.app.addSelectedObjects app.addSelectedObjects()}\n * @see The corresponding event {@link event:\"app.didChangeSelection\" \"app.didChangeSelection\"}\n * @since 1.6.4\n */\n/**\n * @event \"app.didChangeSelection\"\n * @see The corresponding hook method {@link module:solo.app.didChangeSelection app.didChangeSelection()}\n */\n\n/**\n * The object with key/value pairs, for example:\n * ```\n * {\n *     C3DCOLLECTION: \"Generic IPC\",\n *     TITLE: \"Pump IPC - Complete\"\n * }\n * ```\n * @typedef {object} KeyValuePairs\n */\n\n/**\n * The object visibility code.\n * @prop {number} app.OBJECT_VISIBILITY_VISIBLE=0\n * @prop {number} app.OBJECT_VISIBILITY_HIDDEN=1\n * @prop {number} app.OBJECT_VISIBILITY_TRANSPARENT=2\n * @prop {number} app.OBJECT_VISIBILITY_IMPLICITLY_HIDDEN=3\n * @typedef {number} ObjectVisibilityEnum\n * @see {@link module:solo.app.getObjectVisibility app.getObjectVisibility()}\n */\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app.base.js\n// module id = 28\n// module chunks = 0","var Cortona3DSolo = require('solo');\nvar Tiramisu = Module.Tiramisu;\nvar app = require('app').app;\nvar expand = require('lib/util').expand;\nvar checkConfigureOptions = require('app').checkConfigureOptions;\nvar usedModules = require('app').usedModules;\n\nvar m_currentSheet = {};\nvar m_sheets = [];\n\nfunction unmarshalIndexArray(indexArray) {\n    var itemCount = Module.getValue(indexArray, 'i32'),\n        i,\n        res = new Array(itemCount);\n    for (i = 1; i <= itemCount; ++i) {\n        res[i - 1] = Module.getValue(indexArray + i * 4, 'i32');\n    }\n    return res;\n}\n\n// Cortona3DSolo hooks\nCortona3DSolo.once(\"app.didAttachDocument\", function (doc) {\n    if (doc.type == 'ipc') {\n        m_sheets = doc.sheets;\n        m_currentSheet = expand({}, doc.sheet);\n        delete m_currentSheet.drawing;\n        Cortona3DSolo.once(\"app.firstFrameDidArrive\", function () {\n            Tiramisu.ipc.didSelectSheet(m_currentSheet);\n        });\n        if (usedModules.core.config.ipcHoverColor) {\n            app.setHoverColor(usedModules.core.config.ipcHoverColor);\n        }\n        if (usedModules.core.config.ipcSelectionColor) {\n            app.setSelectionColor(usedModules.core.config.ipcSelectionColor);\n        }\n    }\n});\n\n// Tiramisu hooks\nexpand(Tiramisu, {\n    ipc: {\n        didSelectSheet: function (sheet) {\n            if (app.ipc.interactivity) {\n                sheet.drawing = app.ipc.interactivity.getDrawingForIPCView(sheet.id);\n            }\n            if (app.drawing) {\n                app.drawing.load(sheet.drawing)\n                    .catch(function () {\n                        if (checkConfigureOptions(app.ENABLE_AUTO_SWITCHING_DISPLAY_MODE)) {\n                            if (app.ui.isDrawingDisplayMode()) {\n                                app.ipc.toggleDrawingDisplayMode();\n                            }\n                        }\n                    });\n            }\n            m_currentSheet = sheet;\n            Cortona3DSolo.dispatch('app.ipc.didSelectSheet', sheet);\n        },\n        didHoverItem: function (index, items) {\n            Cortona3DSolo.dispatch('app.ipc.didHoverItem', index, unmarshalIndexArray(items));\n        },\n        didSelectItem: function (index, items) {\n            Cortona3DSolo.dispatch('app.ipc.didSelectItem', index, unmarshalIndexArray(items));\n        },\n        didChangeItemVisibility: function (isHidden, items, itemCount) {\n            var rows = new Array(itemCount),\n                row, i;\n            for (i = 0; i < itemCount; ++i) {\n                rows[i] = Module.getValue(items + i * 4, 'i32');\n            }\n            Cortona3DSolo.dispatch('app.ipc.didChangeItemVisibility', isHidden, rows);\n        },\n        willStartSheetTransitionAnimation: function (sheet) {\n            Cortona3DSolo.dispatch('app.ipc.willStartSheetTransitionAnimation', sheet.id);\n        },\n        didStopSheetTransitionAnimation: function (sheet) {\n            Cortona3DSolo.dispatch('app.ipc.didStopSheetTransitionAnimation', sheet.id);\n        }\n    },\n});\n\nvar appExports = {\n    /**\n     * The namespace represents an application interface to manage the interactive parts catalog (IPC).\n     * \n     * @namespace\n     * @memberof module:solo.app\n     * @prop {number} DEFAULT_TRANSITION_STEP_DURATION=1 Default value of transition rate between of IPC sheets.\n     */\n    ipc: {\n        /**\n         * Activates IPC sheet by ID.\n         * \n         * @param {string} sheetId - IPC sheet ID\n         * @param {AnimatedMode} animated\n         */\n        setCurrentSheet: function (sheetId, animated) {\n            Module.ccall('ipc_setCurrentSheet', 'null', ['string', 'number'], [sheetId, app.ui.isDrawingDisplayMode() ? false : animated]);\n        },\n\n        /**\n         * Toggles 3D IPC item visibility.\n         * \n         * @param {number} index - The row number on the current IPC sheet\n         */\n        toggleItemVisibility: function (index) {\n            Module.ccall('ipc_toggleItemVisibility', 'null', ['number'], arguments);\n        },\n\n        /**\n         * Select 3D IPC item.\n         * \n         * @param {number} index - The row number on the current IPC sheet\n         * @param {AnimatedMode} [animated=true]\n         * @returns {number[]} indices - An array of selected row numbers excluding attaching parts\n         */\n        selectItem: function (index, animated) {\n            return unmarshalIndexArray(Module.ccall('ipc_selectItem', 'number', ['number'], [index, typeof animated === 'undefined' ? true : animated]));\n        },\n\n        /**\n         * Highlight 3D IPC item.\n         * \n         * @param {number} index - The row number on the current IPC sheet\n         * @param {AnimatedMode} [animated=true]\n         * @returns {number[]} indices - An array of highlighted row numbers excluding attaching parts\n         */\n        hoverItem: function (index, animated) {\n            return unmarshalIndexArray(Module.ccall('ipc_hoverItem', 'null', ['number'], [index, typeof animated === 'undefined' ? true : animated]));\n        },\n\n        /**\n         * Restore view of the current IPC sheet by default.\n         * \n         * @param {AnimatedMode} animated\n         */\n        resetCurrentSheet: function (animated) {\n            if (app.drawing) {\n                require('app.drawing').getSVGViewer().reset(animated);\n            }\n            Module.ccall('ipc_resetCurrentSheet', 'null', ['number'], arguments);\n        },\n\n        /**\n         * Get current IPC sheet items.\n         * @private\n         * @returns {object[]} An array of items\n         */\n        /*\n        getCurrentSheetItems: function () {\n            var items = Module.ccall('ipc_getCurrentSheetItems', 'number');\n            return Tiramisu.util.unmarshalItemList(items);\n        },\n        */\n\n        /**\n         * Get an item with the hotspot name.\n         * \n         * @param {string} hotspotName - The name of the hospot\n         * @returns {number} The row number on the current IPC sheet\n         */\n        getItemWithHotspot: function (hotspotName) {\n            return Module.ccall('ipc_getItemWithHotspot', 'number', ['string'], arguments);\n        },\n\n        /**\n         * Returns an object that represents information about the current IPC sheet.\n         * \n         * @returns {CatalogCurrentSheetInfo} The object represents IPC sheet information\n         * @deprecated since version 1.5.0, use {@link module:solo.app.ipc.currentSheetInfo app.currentSheetInfo} instead\n         */\n        getCurrentSheet: function () {\n            return m_currentSheet;\n        },\n\n        /**\n         * Toggles display between 2D and 3D views.\n         * \n         * @param {boolean} [forceVisible2D] - Forced display of the 2D window\n         * @returns {boolean} \n         * @fires \"app.ipc.didDrawingDisplayMode\"\n         */\n        toggleDrawingDisplayMode: function (drawingMode) {\n            if (!app.drawing) return false;\n            drawingMode = (typeof drawingMode === 'undefined') ? !app.drawing.isVisible() : drawingMode;\n            app.drawing.show(drawingMode);\n            app.ui.showCanvas(!drawingMode);\n            Cortona3DSolo.dispatch(\"app.ipc.didDrawingDisplayMode\", drawingMode);\n            return drawingMode;\n        },\n    }\n};\n\n\n/**\n * Gets a description of the current IPC sheet.\n * \n * @static\n * @member {CatalogCurrentSheetInfo} currentSheetInfo\n * @memberof module:solo.app.ipc\n * @since 1.5.0\n */\n\nObject.defineProperty(appExports.ipc, 'currentSheetInfo', {\n    get: function () {\n        return m_currentSheet;\n    },\n    enumerable: true\n});\n\n/**\n * Gets or sets transition rate between of IPC sheets.\n * \n * @static\n * @member {number} sheetTransitionRate\n * @memberof module:solo.app.ipc\n * @since 1.5.9\n */\n\nObject.defineProperties(appExports.ipc, {\n    'sheetTransitionRate': {\n        get: function () {\n            return 1 / Module.getValue(Module._ipc_getSheetTransitionAnimationDurations() + 4, 'float');\n        },\n        set: function (value) {\n            if (value > 0) Module._ipc_setSheetTransitionAnimationDurations(1 / value, 1 / value);\n        },\n        enumerable: true\n    },\n    'DEFAULT_TRANSITION_STEP_DURATION': {\n        value: 1,\n        enumerable: true\n    },\n});\n\nappExports.ipc.dpl = require('app.ipc.dpl');\n\nmodule.exports = {\n    app: appExports\n};\n\n/**\n * The hook method is invoked when the IPC sheet is activated.\n * \n * @memberof module:solo.app.ipc\n * @abstract \n * @function didSelectSheet\n * @param {CatalogCurrentSheetInfo} sheet - The object represents the IPC sheet information\n * @see The corresponding event {@link event:\"app.ipc.didSelectSheet\" \"app.ipc.didSelectSheet\"}\n */\n/**\n * @event \"app.ipc.didSelectSheet\"\n * @see The corresponding hook method {@link module:solo.app.ipc.didSelectSheet app.ipc.didSelectSheet()}\n */\n\n/**\n * The hook method is invoked when the 3D IPC item is hovered.\n * \n * @memberof module:solo.app.ipc\n * @abstract \n * @function didHoverItem\n * @param {number} index The row number on the current IPC sheet \n * @param {number[]} indices An array of highlighted row numbers excluding attaching parts\n * @see The corresponding event {@link event:\"app.ipc.didHoverItem\" \"app.ipc.didHoverItem\"}\n */\n/**\n * @event \"app.ipc.didHoverItem\"\n * @see The corresponding hook method {@link module:solo.app.ipc.didHoverItem app.ipc.didHoverItem()}\n */\n\n/**\n * The hook method is invoked when the 3D IPC item is selected.\n * \n * @memberof module:solo.app.ipc\n * @abstract \n * @function didSelectItem\n * @param {number} index The row number on the current IPC sheet\n * @param {number[]} indices An array of highlighted row numbers excluding attaching parts\n * @see The corresponding event {@link event:\"app.ipc.didSelectItem\" \"app.ipc.didSelectItem\"}\n */\n/**\n * @event \"app.ipc.didSelectItem\"\n * @see The corresponding hook method {@link module:solo.app.ipc.didSelectItem app.ipc.didSelectItem()}\n */\n\n/**\n * The hook method is invoked when the visibility state of the 3D IPC item is toggled.\n * \n * @memberof module:solo.app.ipc\n * @abstract \n * @function didChangeItemVisibility\n * @param {boolean} isHidden - \n * - true - hidden\n * - false - visible\n * @param {number[]} indices - Array of index numbers on the current IPC sheet\n * @see The corresponding event {@link event:\"app.ipc.didChangeItemVisibility\" \"app.ipc.didChangeItemVisibility\"}\n */\n/**\n * @event \"app.ipc.didChangeItemVisibility\"\n * @see The corresponding hook method {@link module:solo.app.ipc.didChangeItemVisibility app.ipc.didChangeItemVisibility()}\n */\n\n/**\n * The hook method is invoked when the display mode of the catalog is changed.\n * \n * @memberof module:solo.app.ipc\n * @abstract \n * @function didDrawingDisplayMode\n * @param {boolean} drawingMode - \n * - true - 2D display mode\n * - false - 3D display mode\n * @see The corresponding event {@link event:\"app.ipc.didDrawingDisplayMode\" \"app.ipc.didDrawingDisplayMode\"}\n * @since 1.4.0\n */\n/**\n * @event \"app.ipc.didDrawingDisplayMode\"\n * @see The corresponding hook method {@link module:solo.app.ipc.didDrawingDisplayMode app.ipc.didDrawingDisplayMode()}\n */\n\n/**\n * The hook method is invoked when the transition animation to the IPC sheet is started.\n * \n * @memberof module:solo.app.ipc\n * @abstract \n * @function willStartSheetTransitionAnimation\n * @param {string} sheetId - IPC sheet ID\n * @see The corresponding event {@link event:\"app.ipc.willStartSheetTransitionAnimation\" \"app.ipc.willStartSheetTransitionAnimation\"}\n * @since 1.6.4\n */\n/**\n * @event \"app.ipc.willStartSheetTransitionAnimation\"\n * @see The corresponding hook method {@link module:solo.app.ipc.willStartSheetTransitionAnimation app.ipc.willStartSheetTransitionAnimation()}\n */\n\n/**\n * The hook method is invoked when the transition animation to the IPC sheet is finished.\n * \n * @memberof module:solo.app.ipc\n * @abstract \n * @function didStopSheetTransitionAnimation\n * @param {string} sheetId - IPC sheet ID\n * @see The corresponding event {@link event:\"app.ipc.didStopSheetTransitionAnimation\" \"app.ipc.didStopSheetTransitionAnimation\"}\n * @since 1.6.4\n */\n/**\n * @event \"app.ipc.didStopSheetTransitionAnimation\"\n * @see The corresponding hook method {@link module:solo.app.ipc.didStopSheetTransitionAnimation app.ipc.didStopSheetTransitionAnimation()}\n */\n\n/**\n * The object represents information about the current IPC sheet, for example:\n * ```\n * {\n *      id: \"view_2\",\n *      description: \"Backplate Assy View\",\n *      drawing: \"http://.../pump-catalog-2.svg\",\n *      dplTableWidth: 69,\n *      dplTable: \"<table id=\\\"dpl-table\\\" class=\\\"dpl-table\\\">...</table>\"\n * }\n * ```\n * @prop {string} id - IPC sheet ID. \n * @prop {string} description - IPC sheet description.\n * @prop {string} drawing - The name of the file for 2D illustration.\n * @prop {number} dplTableWidth - DPL table width.\n * @prop {string} dplTable - The HTML string is a detailed parts list (DPL) in the form of an HTML table.\n * @typedef {object} CatalogCurrentSheetInfo\n * @see {@link module:solo.app.ipc.didSelectSheet app.ipc.didSelectSheet()}\n * @see {@link module:solo.app.ipc.getCurrentSheet app.ipc.getCurrentSheet()}\n */\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app.ipc.js\n// module id = 29\n// module chunks = 0","var Cortona3DSolo = require('solo');\nvar Tiramisu = Module.Tiramisu;\nvar app = require('app').app;\nvar expand = require('lib/util').expand;\n\n// Tiramisu hooks\nexpand(Tiramisu, {\n    procedure: {\n        didFireEvent: function (type, id, title, info) {\n            Cortona3DSolo.dispatch('app.procedure.didFireEvent', type, id, title, info);\n        },\n        didChangePlayerState: function (position, state) {\n            Cortona3DSolo.dispatch('app.procedure.didChangePlayerState', position, state);\n        },\n        didEnterSubstep: function (substepPath) {\n            Cortona3DSolo.dispatch('app.procedure.didEnterSubstep', substepPath);\n        },\n        didEnterSubstepWithName: function (substepId) {\n            Cortona3DSolo.dispatch('app.procedure.didEnterSubstepWithName', substepId);\n        }\n    },\n});\n\nvar appExports = {\n    /**\n     * The namespace represents an application interface to manage interactive procedure.\n     *  \n     * @namespace\n     * @memberof module:solo.app\n     */\n    procedure: {\n        /**\n         * The duration of the interactive procedure in seconds.\n         * \n         * @static\n         * @member {number} duration\n         * @memberof module:solo.app.procedure\n         * @since 1.4.3\n         */\n\n        /**\n         * Gets or sets default seek mode.\n         * \n         * @static\n         * @member {ProcedureSeekMode} defaultSeekMode\n         * @memberof module:solo.app.procedure\n         * @since 1.5.3\n         */\n\n        /**\n         * Moves the playback marker of the procedure to the start of the specified step/substep.\n         * \n         * @param {string} id - Step/Substep ID\n         * @param {ProcedureSeekMode} [seekMode=SEEK_DEFAULT]\n         */\n        seekToSubstep: function (id, seekMode) {\n            Module.ccall('procedure_seekToSubstep', 'null', ['string', 'number'], [id, typeof(seekMode) === 'number' ? seekMode : -1]);\n        },\n\n        /**\n         * Sets the playback speed ratio.\n         * \n         * @param {number} playbackSpeed - The playback speed ratio\n         */\n        setPlaybackSpeed: function (playbackSpeed) {\n            Module.ccall('procedure_setPlaybackSpeed', 'null', ['number'], arguments);\n        },\n\n        /**\n         * Specifies whether the camera position is changed during the playback of the procedure. \n         * \n         * @param {boolean} freezeCamera\n         * - `true` - the camera does not change\n         * - `false` - the camera position is changed in accordance with the procedure \n         */\n        freezeCamera: function (freezeCamera) {\n            Module.ccall('procedure_freezeCamera', 'null', ['number'], arguments);\n        },\n\n        /**\n         * Sets a new playback position of the procedure.\n         * \n         * @param {number} playPosition - The playback marker position, in seconds\n         * @param {boolean} requestState - \n         * - `true` - request {@link module:solo.app.procedure.didEnterSubstep didEnterSubstep()} callbak after position is changed\n         * - `false` - a callback is not required\n         */\n        setPlayPosition: function (playPosition, requestState) {\n            Module.ccall('procedure_setPlayPosition', 'null', ['number', 'number'], arguments);\n        },\n\n        /**\n         * Move the playback marker position to the previous step.\n         * @param {ProcedureSeekMode} [seekMode=SEEK_DEFAULT]\n         */\n        backward: function (seekMode) {\n            Module.ccall('procedure_backward', 'null', ['number'], [typeof(seekMode) === 'number' ? seekMode : -1]);\n        },\n\n        /**\n         * Move the playback marker position to the next step.\n         * @param {ProcedureSeekMode} [seekMode=SEEK_DEFAULT]\n         */\n        forward: function (seekMode) {\n            Module.ccall('procedure_forward', 'null', ['number'], [typeof(seekMode) === 'number' ? seekMode : -1]);\n        },\n\n        /**\n         * Stops the playback of the procedure.\n         */\n        stop: function () {\n            Module.ccall('procedure_stop', 'null');\n        },\n\n        /**\n         * Starts the playback of the procedure.\n         * \n         * @param {boolean} [doNotAutoRewind=false] -\n         * - `true` - do not set the playback marker at the beginning of the procedure when the procedure is finished running\n         * - `false` - reset the playback to the beginning\n         */\n        play: function (doNotAutoRewind) {\n            Module.ccall('procedure_play', 'null', ['number'], arguments);\n        },\n\n        /**\n         * Pauses the playback of the procedure.\n         */\n        pause: function () {\n            Module.ccall('procedure_pause', 'null');\n        },\n\n        /**\n         * Sets the playback range of the procedure on the timeline.\n         * \n         * @param {string|ProcedureRangeKeyword} firstPlayable - Step/substep ID or the keyword of the range\n         * @param {string|ProcedureRangeKeyword} lastPlayable - Step/substep ID or the keyword of the range\n         * @param {ProcedureRangeFlags} [flags=0] - Flags bitmask\n         * @see Properties in the {@link module:solo.app.procedure app.procedure} namespace\n         */\n        setPlayRange: function (firstPlayable, lastPlayable, flags) {\n            Module.ccall('procedure_setPlayRange', 'null', ['string', 'string', 'number'], [firstPlayable, lastPlayable || firstPlayable, flags || 0]);\n        },\n\n        /**\n         * Returns the playable range start time. \n         * \n         * @returns {number} seconds  \n         */\n        getPlayableRangeStartTime: function () {\n            return Module.ccall('procedure_getPlayableRangeStartTime', 'number');\n        },\n\n        /**\n         * Returns the playable range stop time. \n         * \n         * @returns {number} seconds  \n         */\n        getPlayableRangeStopTime: function () {\n            return Module.ccall('procedure_getPlayableRangeStopTime', 'number');\n        },\n\n        /**\n         * Query the state of the procedure playback and its current step.\n         */\n        requestPlayerState: function () {\n            Module.ccall('procedure_requestPlayerState', 'null');\n        },\n\n        /**\n         * Returns the procedure options from the companion file *.interactivity.xml* in the form of an object with key/value pairs.\n         * \n         * @deprecated Use {@link module:solo.app.getOptions app.getOptions()} istead.\n         * @returns {KeyValuePairs}\n         */\n        getOptions: function () {\n            return app.getOptions();\n        },\n\n        /**\n         * Returns the value of the procedure option.\n         * \n         * @deprecated Use {@link module:solo.app.getOption app.getOption()} istead.\n         * @param {string} name - Option name\n         * @returns {string} Option value\n         */\n        getOption: function (name) {\n            return app.getOption(name);\n        },\n\n        /**\n         * Sets the new animation sequence (procedure) from the array of identifiers step/substep.\n         * \n         * @param {string[]} [items] Array of identifiers step/substep. Leave empty to restore the procedure to its original sequence.\n         * @returns {boolean} Success flag\n         * @since 1.4.3\n         */\n        setPlayableItemList: function (items) {\n            var count = items ? items.length : 0,\n                itemArray = 0,\n                i,\n                sp = Module.Runtime.stackSave(),\n                res;\n            if (count) {\n                itemArray = Module.allocate(count * 4, '*', Module.ALLOC_STACK);\n                for (i = 0; i < count; ++i)\n                    Module.setValue(itemArray + i * 4, Module.allocate(Module.intArrayFromString(items[i]), 'i8', Module.ALLOC_STACK), '*');\n            }\n            res = Module._procedure_setPlayableItemList(itemArray, count);\n            Module.Runtime.stackRestore(sp);\n            return res !== 0;\n        }\n    }\n};\n\nObject.defineProperty(appExports.procedure, 'defaultSeekMode', {\n    get: function () {\n        return Module._procedure_getDefaultSeekMode();\n    },\n    set: function (mode) {\n        Module._procedure_setDefaultSeekMode(mode);\n    },\n    enumerable: true,\n    configurable: true\n});\n\nObject.defineProperty(appExports.procedure, 'duration', {\n    get: function () {\n        return Module._procedure_getDuration();\n    },\n    enumerable: true,\n    configurable: true\n});\n\nObject.defineProperty(appExports.procedure, 'RANGE_FLAGS_SEEK_TO_START', {\n    value: 1,\n    writable: false\n});\nObject.defineProperty(appExports.procedure, 'RANGE_FLAGS_SEEK_TO_END', {\n    value: 2,\n    writable: false\n});\nObject.defineProperty(appExports.procedure, 'RANGE_FLAGS_REQUEST_NOTIFICATION', {\n    value: 4,\n    writable: false\n});\nObject.defineProperty(appExports.procedure, 'RANGE_FLAGS_DO_NOT_RECALCULATE_POSITION', {\n    value: 8,\n    writable: false\n});\n\nObject.defineProperty(appExports.procedure, 'SEEK_DEFAULT', {\n    value: -1,\n    writable: false\n});\nObject.defineProperty(appExports.procedure, 'SEEK_TO_BEGIN', {\n    value: 0,\n    writable: false\n});\nObject.defineProperty(appExports.procedure, 'SEEK_TO_CUE_POINT', {\n    value: 1,\n    writable: false\n});\nObject.defineProperty(appExports.procedure, 'SEEK_TO_END', {\n    value: 2,\n    writable: false\n});\n\n\nObject.defineProperty(appExports.procedure, 'RANGE_VALUE_CURRENT_STEP', {\n    value: '%%CURRENT_STEP%%',\n    writable: false\n});\nObject.defineProperty(appExports.procedure, 'RANGE_VALUE_CURRENT_SUBSTEP', {\n    value: '%%CURRENT_SUBSTEP%%',\n    writable: false\n});\n\nmodule.exports = {\n    app: appExports\n};\n\n/**\n * The hook method is invoked when the alert message is fired in the procedure.\n * \n * @memberof module:solo.app.procedure\n * @abstract \n * @function didFireEvent\n * @param {string} type - Type of alert:\n * - `\"WARNING\"` \n * - `\"CAUTION\"`\n * - `\"NOTE\"`\n * - custom alert type\n * @param {string} id - Alert mesage ID from intercativity.xml\n * @param {string} title - Alert message title\n * @param {string} info - Alert message text\n * @see The corresponding event {@link event:\"app.procedure.didFireEvent\" \"app.procedure.didFireEvent\"}\n */\n/**\n * @event \"app.procedure.didFireEvent\"\n * @see The corresponding hook method {@link module:solo.app.procedure.didFireEvent app.procedure.didFireEvent()}\n */\n\n/**\n * The hook method is invoked when the alert message is fired in the procedure.\n * \n * @memberof module:solo.app.procedure\n * @abstract \n * @function willShowNotification\n * @param {string} type - Type of alert:\n * - `\"WARNING\"` \n * - `\"CAUTION\"`\n * - `\"NOTE\"`\n * - custom alert type\n * @param {string} text - Alert message text\n * @see The corresponding event {@link event:\"app.procedure.willShowNotification\" \"app.procedure.willShowNotification\"}\n */\n/**\n * @event \"app.procedure.willShowNotification\"\n * @see The corresponding hook method {@link module:solo.app.procedure.willShowNotification app.procedure.willShowNotification()}\n */\n\n/**\n * The hook method is invoked when the state of the procedure is changed.\n * \n * @memberof module:solo.app.procedure\n * @abstract \n * @function didChangePlayerState\n * @param {number} position - Current playback position on the timeline (seconds)\n * @param {number} state - Current procedure state as a bitmask\n * \n * Flags bitmask:\n * - `0x001` - procedure is played\n * - `0x100` - fastforward is available\n * - `0x200` - rewind is available\n * - `0x400` - sound is played in the 3D procedure\n * @see The corresponding event {@link event:\"app.procedure.didChangePlayerState\" \"app.procedure.didChangePlayerState\"}\n */\n/**\n * @event \"app.procedure.didChangePlayerState\"\n * @see The corresponding hook method {@link module:solo.app.procedure.didChangePlayerState app.procedure.didChangePlayerState()}\n */\n\n/**\n * The hook method is invoked when the playback of the next substep starts.\n * \n * > #### __NOTE__\n * >\n * > This method is called only for the steps/substeps with a non-empty comment field.\n * \n * @memberof module:solo.app.procedure\n * @abstract \n * @function didEnterSubstep\n * @param {string[]} substepPath - An array of step/substep ID contains current substep and its ancestors\n * @see The corresponding event {@link event:\"app.procedure.didEnterSubstep\" \"app.procedure.didEnterSubstep\"}\n */\n/**\n * @event \"app.procedure.didEnterSubstep\"\n * @see The corresponding hook method {@link module:solo.app.procedure.didEnterSubstep app.procedure.didEnterSubstep()}\n */\n\n/**\n * The hook method is invoked when the playback of the substep with substepId is starting.    \n * \n * @memberof module:solo.app.procedure\n * @abstract \n * @function didEnterSubstepWithName\n * @param {string} substepId - Substep ID\n * @see The corresponding event {@link event:\"app.procedure.didEnterSubstepWithName\" \"app.procedure.didEnterSubstepWithName\"}\n */\n/**\n * @event \"app.procedure.didEnterSubstepWithName\"\n * @see The corresponding hook method {@link module:solo.app.procedure.didEnterSubstepWithName app.procedure.didEnterSubstepWithName()}\n */\n\n/**\n * Procedure playback range flags.\n * @prop {number} app.procedure.RANGE_FLAGS_SEEK_TO_START=1\n * @prop {number} app.procedure.RANGE_FLAGS_SEEK_TO_END=2\n * @prop {number} app.procedure.RANGE_FLAGS_REQUEST_NOTIFICATION=4\n * @prop {number} app.procedure.RANGE_FLAGS_DO_NOT_RECALCULATE_POSITION=8\n * @typedef {number} ProcedureRangeFlags\n * @see {@link module:solo.app.procedure.setPlayRange app.procedure.setPlayRange()}\n */\n\n/**\n * Procedure playback range constants.\n * @prop {string} app.procedure.RANGE_VALUE_CURRENT_STEP=%%CURRENT_STEP%%\n * @prop {string} app.procedure.RANGE_VALUE_CURRENT_SUBSTEP=%%CURRENT_SUBSTEP%%\n * @typedef {number} ProcedureRangeKeyword\n * @see {@link module:solo.app.procedure.setPlayRange app.procedure.setPlayRange()}\n */\n\n/**\n * Seek mode constants.\n * @prop {number} app.procedure.SEEK_DEFAULT=-1\n * @prop {number} app.procedure.SEEK_TO_BEGIN=0\n * @prop {number} app.procedure.SEEK_TO_CUE_POINT=1 The __setViewpoint__ command is skipped (if any) at the beginning of the substep when calculating seek position.\n * @prop {number} app.procedure.SEEK_TO_END=2\n * @typedef {number} ProcedureSeekMode\n * @see {@link module:solo.app.procedure.forward app.procedure.forward()}\n * @see {@link module:solo.app.procedure.backward app.procedure.backward()}\n * @see {@link module:solo.app.procedure.seekToSubstep app.procedure.seekToSubstep()}\n * @since 1.5.3\n */\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app.procedure.js\n// module id = 30\n// module chunks = 0","var m_speakerIcon = null;\nvar app = require('app').app;\n\nvar m_isCanvasVisible = false;\n\nvar appExports = {\n    /**\n     * The namespace represents an auxilary interface.\n     * \n     * @namespace\n     * @memberof module:solo.app\n     */\n    ui: {\n        /**\n         * Set banner image over the 3D window.\n         * \n         * @param {BannerImageInfo|HTMLImageElement} image - Banner image data (see {@link module:solo.app.util.fetchBannerImage app.util.fetchBannerImage()}) or Image object\n         * @see {@link module:solo.app.util.fetchBannerImage app.util.fetchBannerImage()}\n         * @see external:HTMLImageElement\n         */\n        setBannerImage: function (image) {\n            if (!Module.PanelService) return;\n            if (image) Module.PanelService.setBannerImage(image);\n        },\n\n        /**\n         * Shows or hides the 3D window.\n         * \n         * @param {boolean} [visible=true]\n         */\n        showCanvas: function (visible) {\n            if (!Module.canvas) return;\n            visible = (typeof visible == 'undefined') ? true : !!visible;\n            Module.canvas.style.display = visible ? 'block' : 'none';\n            var group = Module.canvas.parentNode.querySelector('#tiramisu-panel-group');\n            if (group) {\n                group.style.display = visible ? '' : 'none';\n            }\n            app.ui.showPanels(visible);\n            m_isCanvasVisible = visible;\n            if (visible) Cortona3DSolo.dispatch(\"core.didChangeLayout\");\n        },\n\n        /**\n         * Shows or hides the HTML panels in the 3D window.\n         * \n         * @param {boolean} [visible=true]\n         */\n        showPanels: function (visible) {\n            if (!Module.PanelService) return;\n            visible = (typeof visible == 'undefined') ? true : !!visible;\n            Module.PanelService.showPanels(visible);\n        },\n\n        /**\n         * Checks the 2D illustration display mode.\n         * \n         * @returns {boolean}\n         */\n        isDrawingDisplayMode: function () {\n            var result = false;\n            if (app.drawing) {\n                result = app.drawing.isVisible() && !m_isCanvasVisible;\n            }\n            return result;\n        },\n\n        /**\n         * Checks if the 3D window visible.\n         * \n         * @returns {boolean}\n         */\n        isCanvasVisible: function () {\n            return m_isCanvasVisible;\n        },\n\n        /**\n         * Shows or hides the speaker icon.\n         * \n         * @param {boolean} [visible]\n         * @returns {boolean}\n         */\n        toggleSpeakerIcon: function (visible) {\n            if (!Module.PanelService) return;\n            var div;\n            visible = (typeof visible === 'undefined') ? !m_speakerIcon : visible;\n            if (visible) {\n                if (m_speakerIcon) return;\n                div = document.createElement('div');\n                div.className = 'tiramisu-speaker';\n                div.appendChild(document.createElement('div'));\n                div.appendChild(document.createElement('span'));\n                div.appendChild(document.createElement('span'));\n                div.appendChild(document.createElement('span'));\n                Module.PanelService.appendChild(div);\n                m_speakerIcon = div;\n                window.setTimeout(function () {\n                    div.style.opacity = 1;\n                }, 300);\n            } else {\n                div = m_speakerIcon;\n                if (div) {\n                    div.style.opacity = 0;\n                    window.setTimeout(function () {\n                        div.parentNode.removeChild(div);\n                    }, 300);\n                }\n                m_speakerIcon = null;\n            }\n            return visible;\n        }\n    }\n};\n\nmodule.exports = {\n    app: appExports\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app.ui.js\n// module id = 31\n// module chunks = 0","/* global unescape */\n\nvar baseURL = require('./util').getBaseURL();\n\n/**\n * (description)\n * \n * @private\n * @param {number} chunk - Emscripten pointer\n * @param {Image} image - Image object\n * @param {object} options\n * @param {number} [autoRevokeTimeout=0]\n * @returns {HTMLImageElement} Image object\n */\nfunction createImageFromData(chunk, image, options, autoRevokeTimeout) {\n    if (chunk === 0) return;\n\n    if (typeof autoRevokeTimeout === 'undefined') {\n        autoRevokeTimeout = !image ? -1 : 0;\n    }\n\n    var size = Module.getValue(chunk, 'i32'),\n        data = Module.HEAPU8.subarray(chunk + 4, chunk + size + 4),\n        DOMURL = window.URL || window.webkitURL || window,\n        options = options || {},\n        url = DOMURL.createObjectURL(new Blob([data], options));\n\n    Module._free(chunk);\n\n    if (!image) image = new Image();\n\n    if (autoRevokeTimeout >= 0) {\n        function completeHandler() {\n            if (!autoRevokeTimeout) {\n                DOMURL.revokeObjectURL(url);\n            } else {\n                setTimeout(function () {\n                    try {\n                        DOMURL.revokeObjectURL(url);\n                    } catch (e) {}\n                }, autoRevokeTimeout);\n            }\n            image.removeEventListener('load', completeHandler, false);\n            image.removeEventListener('error', completeHandler, false);\n        }\n        image.addEventListener('load', completeHandler, false);\n        image.addEventListener('error', completeHandler, false);\n    }\n\n    image.src = url;\n    return image;\n}\n\n/**\n * @private\n * @param {*} typedArray\n * @returns TypedArray\n */\nfunction marshallTypedArray(typedArray)\n{\n    var dataSize = typedArray.BYTES_PER_ELEMENT * typedArray.length,\n        dataOffset = Module._malloc(dataSize),\n        result = new Uint8Array(Module.HEAPU8.buffer, dataOffset, dataSize);\n    result.set(new Uint8Array(typedArray.buffer));\n    return result;\n}\n\nvar appExports = {\n    /**\n     * The namespace represents an auxilary interface.\n     * \n     * @namespace\n     * @memberof module:solo.app\n     */\n    util: {\n        /**\n         * Fetches resource from the *.cortona3d* bundle using {@link https://developer.mozilla.org/en-US/docs/Web/API/URL URL API} and returns a string containing an object URL representing given resource.\n         * You must explicitly release the object URL after its use by calling {@link module:solo.app.util.revokeResourceURL app.util.revokeResourceURL()}.\n         * \n         * @param {string} name - Name of resource in the *.cortona3d* bundle\n         * @returns {string} An object URL\n         * @see external:URL\n         * @see {@link module:solo.app.util.revokeResourceURL app.util.revokeResourceURL()}\n         */\n        createResourceURL: function (name) {\n            if (!Module.ccall) return;\n\n            var chunk = Module.ccall('tiramisu_copyResourceFromBundle', 'number', ['string'], arguments);\n\n            if (chunk === 0) return;\n\n            var size = Module.getValue(chunk, 'i32'),\n                data = Module.HEAPU8.subarray(chunk + 4, chunk + size + 4),\n                DOMURL = window.URL || window.webkitURL || window,\n                options = /\\.svg$/i.test(name) ? {\n                    type: 'image/svg+xml'\n                } : {},\n                url = DOMURL.createObjectURL(new Blob([data], options));\n\n            Module._free(chunk);\n\n            return url;\n        },\n\n        /**\n         * Releases the existing object URL, which was previously created by calling {@link module:solo.app.util.createResourceURL}.\n         * \n         * @param {URL} url - The object URL\n         * @see external:URL\n         * @see {@link module:solo.app.util.createResourceURL app.util.createResourceURL()}\n         */\n        revokeResourceURL: function (url) {\n            if (!url || !/^blob:/i.test(url)) return;\n            var DOMURL = window.URL || window.webkitURL || window;\n            DOMURL.revokeObjectURL(url);\n        },\n\n        /**\n         * Fetches an image from the *.cortona3d* bundle and returns an Image object.\n         * \n         * @param {HTMLImageElement|string} image - The HTML image element with 'src' attribute equals to the name of the image in the bundle or the name of the image itself\n         * @param {number} [autoRevokeTimeout=0] - The lifetime of an object URL in milliseconds. A value less than zero disables auto revoke\n         * @returns {HTMLImageElement} Image object\n         */\n        fetchImageFromDocumentBundle: function (image, autoRevokeTimeout) {\n            var img,\n                name,\n                options;\n\n            if (typeof image === 'string') {\n                img = new Image();\n                name = image;\n            } else {\n                img = image;\n                name = img.getAttribute('src');\n                if (name.lastIndexOf(baseURL, 0) === 0) {\n                    name = name.slice(baseURL.length);\n                }\n            }\n\n            name = decodeURI(name).replace(/\\.cgm$/i, '.svg');\n            options = /\\.svg$/i.test(name) ? {\n                type: 'image/svg+xml'\n            } : {};\n\n            return createImageFromData(Module.ccall('tiramisu_copyResourceFromBundle', 'number', ['string'], [name]), img, options, autoRevokeTimeout);\n        },\n\n        /**\n         * Fetch banner image from the VRML file.\n         *\n         * @returns {BannerImageInfo} An object that represents the information for the banner image\n         */\n        fetchBannerImage: function () {\n            var sp = Module.Runtime.stackSave(),\n                params = Module.allocate(8, 'i32', Module.ALLOC_STACK),\n                image = createImageFromData(Module.ccall('tiramisu_copyBannerImage', 'number', ['number'], [params])),\n                result;\n            if (image) {\n                result = {\n                    image: image,\n                    frameCount: Module.getValue(params, 'i32'),\n                    frameDuration: Module.getValue(params + 4, 'i32') / 1000\n                };\n            }\n            Module.Runtime.stackRestore(sp);\n            return result;\n        },\n        /**\n         * @class The constructor creates an instance of {@link Vec3f} object corresponds to a VRML SFVec3f field.\n         * @see Vec3f\n         * @since 1.4.0\n         */\n        Vec3f: require('lib/vec3f'),\n        /**\n         * @class The constructor creates an instance of {@link Rotation} object corresponds to a VRML SFRotation field.\n         * @see Rotation\n         * @since 1.4.0\n         */\n        Rotation: require('lib/rotation'),\n        /**\n         * Decompress typedArray with inflate/ungzip.\n         * \n         * @param {Uint8Array} typedArray\n         * @returns {Uint8Array|null} Decompressed data or null\n         * @see {@link module:solo.app.util.freeTypedArray app.util.freeTypedArray()}\n         * @since 1.6.6\n         */\n        inflate: function (typedArray) {\n            var data = marshallTypedArray(typedArray),\n                chunk = Module._tiramisu_utility_inflate(data.byteOffset, data.length);\n            Module._free(data.byteOffset);\n            return chunk ? HEAPU8.subarray(chunk + 4, chunk + 4 + getValue(chunk, 'i32')) : null;\n        },\n        /**\n         * Free the existing TypedArray data, which was previously created by calling {@link module:solo.app.util.inflate app.util.inflate()}.\n         * \n         * @param {Uint8Array} typedArray\n         * @see {@link module:solo.app.util.inflate app.util.inflate()}\n         * @since 1.6.6\n         */\n        freeTypedArray: function (typedArray) {\n            if (typedArray) {\n                Module._free(typedArray.byteOffset - 4);\n            }\n        }\n    },\n};\n\nmodule.exports = {\n    app: appExports\n};\n\n/**\n * The object represents a banner image from a VRML file, for example:\n * ```\n * {\n *      image: <Image object>,\n *      frameCount: 0,\n *      frameDuration: 0\n * }\n * ```\n * @prop {HTMLImageElement} image - An image object. \n * @prop {number} frameCount - Number of frames for animation. \n * @prop {number} frameDuration - Duration of animation of one frame.\n * @typedef {object} BannerImageInfo\n * @see {@link module:solo.app.util.fetchBannerImage app.util.fetchBannerImage()}\n */\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app.util.js\n// module id = 32\n// module chunks = 0","var Cortona3DSolo = require('solo');\r\n\r\nvar app = require('app').app;\r\nvar expand = require('lib/util').expand;\r\nvar b64toBlob = Cortona3DSolo.app.util.b64toBlob;\r\nvar deface = require('lib/deface');\r\n\r\nrequire('@cortona3d/solo-core/src/res/tiramisu.css');\r\nrequire('tiramisu.css');\r\n\r\nvar m_runtimeReady = false;\r\n\r\nCortona3DSolo.core = expand(Cortona3DSolo.core || {}, Cortona3DSolo.config || {});\r\n\r\n/**\r\n * The namespace corresponds to the Emscripten {@link external:Module Module object} of core application.\r\n * \r\n * Requires the use of the internal module `\"core\"`.\r\n * \r\n * @namespace\r\n * @memberof module:solo\r\n * @see {@link external:Module Module object}\r\n * @example\r\nCortona3DSolo.use('core', {\r\n    totalMemory: 64,\r\n    features: Cortona3DSolo.app.DISABLE_DISCARDABLE_GEOMETRY_DATA,\r\n    src: 'sample.wrl'\r\n});\r\nCortona3DSolo.app.initialize();\r\n */\r\nvar core = Cortona3DSolo.core = expand({\r\n    /**\r\n     * The hook method is called when core application prints to standard error.\r\n     * \r\n     * @memberof module:solo.core\r\n     * @param {string} text\r\n     * @see {@link http://kripken.github.io/emscripten-site/docs/api_reference/module.html#Module.printErr Module.printErr()}\r\n     */\r\n    printErr: function (text) {\r\n        text = deface(Array.prototype.slice.call(arguments).join(' '));\r\n        console.error(text);\r\n        Cortona3DSolo.core.lastErrorText = text;\r\n    },\r\n\r\n    /**\r\n     * The hook method is called when core application prints to standard output.\r\n     * \r\n     * @memberof module:solo.core\r\n     * @param {string} text\r\n     * @see {@link http://kripken.github.io/emscripten-site/docs/api_reference/module.html#Module.print Module.print()}\r\n     */\r\n    print: function () {\r\n        text = deface(Array.prototype.slice.call(arguments).join(' '));\r\n        console.log(text);\r\n    },\r\n\r\n    /**\r\n     * The HTML `<canvas>` element.\r\n     * \r\n     * @static\r\n     * @member {HTMLCanvasElement} canvas\r\n     * @memberof module:solo.core\r\n     * @see external:HTMLCanvasElement\r\n     */\r\n\r\n    /**\r\n     * The property is true when the Emscripten Module is initialized.\r\n     * \r\n     * @static\r\n     * @member {boolean} runtimeReady\r\n     * @memberof module:solo.core\r\n     * @since 1.5.6\r\n     */\r\n\r\n    /**\r\n     * The hook method is called when core application sets a message in the status bar.\r\n     * \r\n     * @memberof module:solo.core\r\n     * @method\r\n     * @param {string} text - Message text\r\n     */\r\n    setStatus: function (text) {},\r\n\r\n    /**\r\n     * The hook method is invoked when layout is changed to resize the 3D window (the `<canvas>` element).\r\n     * \r\n     * *This method can be overridden if necessary.*\r\n     * \r\n     * @memberof module:solo.core\r\n     * @function didChangeLayout\r\n     * @see {@link module:solo.app.resize app.resize()}\r\n     * @see The corresponding event {@link event:\"core.didChangeLayout\" \"core.didChangeLayout\"}\r\n     */\r\n    /**\r\n     * @event \"core.didChangeLayout\"\r\n     * @see The corresponding hook method {@link module:solo.core.didChangeLayout core.didChangeLayout()}\r\n     */\r\n    didChangeLayout: function () {\r\n        if (m_runtimeReady) {\r\n            var pane = Cortona3DSolo.core.canvas,\r\n                w = pane.clientWidth,\r\n                h = pane.clientHeight;\r\n            Cortona3DSolo.app.resize(w, h);\r\n        }\r\n    }\r\n}, Cortona3DSolo.core);\r\n\r\nexpand(Cortona3DSolo.core, {\r\n    /**\r\n     * The hook method is invoked to indicate that loading operation is in progress.\r\n     * \r\n     * @private \r\n     * @param {ProgressEvent} e XMLHttpRequest onprogress event\r\n     */\r\n    onprogress: function (e) {\r\n        var total = e.lengthComputable || e.lengthComputable === undefined ? e.total : 0;\r\n        var loaded = e.loaded;\r\n        Cortona3DSolo.dispatch(\"app.onProgress\", loaded, total, e.type);\r\n    },\r\n\r\n    /**\r\n     * Check if the Emscripten Module is initialized.\r\n     * \r\n     * @memberof module:solo.core\r\n     * @returns {boolean}\r\n     * @deprecated since version 1.5.6, use {@link module:solo.core.runtimeReady core.runtimeReady} instead\r\n     */\r\n    isRuntimeReady: function () {\r\n        return m_runtimeReady;\r\n    },\r\n    /**\r\n     * @private\r\n     */\r\n    onRuntimeInitialized: function () {\r\n        setTimeout(function () {\r\n            var Tiramisu = Module.Tiramisu;\r\n            var major = (Tiramisu.VERSION >> 24),\r\n                minor = (Tiramisu.VERSION >> 16) & 0xFF,\r\n                build = Tiramisu.VERSION & 0xFFFF,\r\n                buildTime = new Date(Tiramisu.BUILD_TIME * 1000);\r\n        }, 10);\r\n\r\n        m_runtimeReady = true;\r\n        if (typeof core.didChangeLayout == 'function') {\r\n            window.addEventListener('resize', function () {\r\n                Cortona3DSolo.dispatch(\"core.didChangeLayout\");\r\n            }, false);\r\n            core.didChangeLayout();\r\n            Cortona3DSolo.dispatch(\"core.didChangeLayout\");\r\n        }\r\n        if (app.ui) {\r\n            app.ui.showCanvas(false);\r\n        }\r\n        Cortona3DSolo.emit(\"core.onRuntimeInitialized\");\r\n        Cortona3DSolo.dispatch(\"app.onReady\");\r\n    }\r\n});\r\n\r\nvar DEFAULT_TOTAL_MEMORY = 64;\r\n\r\nfunction resolveSceneURL(options) {\r\n    options = options || {};\r\n    options.features = options.features || 0;\r\n\r\n    var DOMURL = window.URL || window.webkitURL || window,\r\n        syntax,\r\n        src = options.src,\r\n        dataScript;\r\n\r\n    if (!src) {\r\n        dataScript = document.querySelector(\"script[type^='application/solo']\");\r\n        if (dataScript) {\r\n            options.totalMemory = options.totalMemory || +dataScript.getAttribute('data-total-memory') || DEFAULT_TOTAL_MEMORY;\r\n            options.features = options.features | +dataScript.getAttribute('data-features');\r\n            src = dataScript.getAttribute('src');\r\n            if (src) {\r\n                options.src = src;\r\n                dataScript.parentNode.removeChild(dataScript);\r\n            } else {\r\n                return b64toBlob(dataScript.textContent, 'application/zip')\r\n                    .then(function (blob) {\r\n                        options.src = DOMURL.createObjectURL(blob);\r\n                        dataScript.parentNode.removeChild(dataScript);\r\n                        return options;\r\n                    });\r\n            }\r\n        } else {\r\n            dataScript = document.querySelector(\"script[type='model/vrml']\");\r\n            if (dataScript) {\r\n                src = dataScript.getAttribute('src');\r\n                if (src) {\r\n                    options.src = src;\r\n                } else {\r\n                    syntax = dataScript.textContent.replace(/^\\s+/, '');\r\n                    if (syntax.indexOf('#VRML V2.0 utf8') !== 0) {\r\n                        syntax = '#VRML V2.0 utf8\\n' + syntax;\r\n                    }\r\n                    options.isRAContent = /PROTO\\s+ObjectVM/.test(syntax);\r\n                    options.isViewpointInScene = /Viewpoint\\s*{/.test(syntax);\r\n                    options.isTextInScene = /Text\\s*{/.test(syntax);\r\n                    options.src = DOMURL.createObjectURL(new Blob([syntax], {\r\n                        type: \"model/vrml\"\r\n                    }));\r\n                }\r\n                options.totalMemory = options.totalMemory || +dataScript.getAttribute('data-total-memory') || DEFAULT_TOTAL_MEMORY;\r\n                options.features = options.features | +dataScript.getAttribute('data-features');\r\n                if (!options.isRAContent) {\r\n                    options.features |= +Cortona3DSolo.app.DISABLE_DISCARDABLE_GEOMETRY_DATA;\r\n                }\r\n                if (options.isTextInScene) {\r\n                    options.features |= +Cortona3DSolo.app.ENABLE_VRML_TEXT_NODE;\r\n                }\r\n                dataScript.parentNode.removeChild(dataScript);\r\n            }\r\n        }\r\n    }\r\n    return Promise.resolve(options);\r\n}\r\n\r\nmodule.exports = {\r\n    configure: function (options) {\r\n        // Module configutration\r\n        options = options || {};\r\n        var config = {},\r\n            canvasElement;\r\n\r\n        if (Cortona3DSolo.baseURL) {\r\n            config.memoryInitializerPrefixURL = Cortona3DSolo.baseURL;\r\n            config.filePackagePrefixURL = Cortona3DSolo.baseURL;\r\n        }\r\n\r\n        canvasElement = options.element || options.canvas || (function () {\r\n            var canvas = document.createElement('canvas');\r\n            require('core.css');\r\n            document.body.insertBefore(canvas, document.body.firstChild);\r\n            return canvas;\r\n        })();\r\n\r\n        canvasElement.classList.add('cortona3dsolo-canvas');\r\n\r\n        var coreSolo = require('core.solo'),\r\n            moduleArguments = coreSolo.Arguments;\r\n\r\n        Object.defineProperty(Module, 'canvas', {\r\n            value: canvasElement,\r\n            enumerable: true\r\n        });\r\n\r\n        Object.defineProperty(Module, 'runtimeReady', {\r\n            get: function () {\r\n                return m_runtimeReady;\r\n            },\r\n            enumerable: true\r\n        });\r\n\r\n        resolveSceneURL(options)\r\n            .then(function (options) {\r\n                if (options.prefixURL) {\r\n                    config.memoryInitializerPrefixURL = options.prefixURL;\r\n                    config.filePackagePrefixURL = options.prefixURL;\r\n                }\r\n                if (typeof options.totalMemory == 'number') {\r\n                    config.TOTAL_MEMORY = options.totalMemory * 1024 * 1024;\r\n                }\r\n                if (options.features) {\r\n                    app.configureInstance(options.features);\r\n                }\r\n\r\n                expand(Cortona3DSolo.core, config);\r\n\r\n                if (options.src) {\r\n                    moduleArguments.document = Cortona3DSolo.app.util.toUrl(options.src);\r\n                }\r\n                if (options.features) {\r\n                    moduleArguments.features = options.features & 32767;\r\n                }\r\n\r\n                moduleArguments.toModule();\r\n\r\n                coreSolo.load();\r\n            })\r\n            .catch(function (e) {\r\n                Cortona3DSolo.emit('core.onError', e);\r\n            });\r\n\r\n        return Module;\r\n    }\r\n};\r\n\r\n/**\r\n *  The hook method is invoked when animation frame is drawn on the canvas.\r\n * \r\n * @memberof module:solo.core\r\n * @abstract \r\n * @function didDrawAnimationFrame\r\n * @since 1.4.0\r\n * @see The corresponding event {@link event:\"core.didDrawAnimationFrame\" \"core.didDrawAnimationFrame\"}\r\n */\r\n/**\r\n * @event \"core.didDrawAnimationFrame\"\r\n * @see The corresponding hook method {@link module:solo.core.didDrawAnimationFrame core.didDrawAnimationFrame()}\r\n */\r\n//didDrawAnimationFrame: nop, // ()\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core.base.js\n// module id = 33\n// module chunks = 0","var deepmerge = require('lib/deepmerge');\r\nvar isFunction = require('lib/util').isFunction;\r\n\r\n// https://github.com/just-boris/require-mini\r\n\r\nfunction safeGet(global, value) {\r\n    return value.split('.').reduce(function (obj, prop) {\r\n        return obj && obj[prop];\r\n    }, global);\r\n}\r\n\r\nfunction defer() {\r\n    var result = {};\r\n    result.promise = new Promise(function (resolve, reject) {\r\n        result.resolve = resolve;\r\n        result.reject = reject;\r\n    });\r\n    return result;\r\n}\r\n\r\nfunction invokeLater(context, fn) {\r\n    lastTask = lastTask.then(function () {\r\n        pendingModule = context;\r\n        return fn();\r\n    }).then(cleanup, cleanup);\r\n\r\n    function cleanup() {\r\n        pendingModule = null;\r\n    }\r\n}\r\n\r\nfunction appendJs(name) {\r\n    return /^\\/|:|\\?|\\.js$/.test(name) ? name : name + '.js';\r\n}\r\n\r\nfunction pathName(name, path) {\r\n    var pathname = name,\r\n        re = /^\\.+\\//,\r\n        a = path.slice(0, path.length - 1),\r\n        component;\r\n    while (a.length && re.test(pathname)) {\r\n        component = a.pop();\r\n        component = component.substr(component.indexOf('!') + 1);\r\n        pathname = component.substr(0, component.lastIndexOf('/') + 1) + pathname;\r\n    }\r\n    return pathname;\r\n}\r\n\r\nvar contexts = {},\r\n    lastTask = Promise.resolve(),\r\n    pendingModule = null;\r\n\r\nfunction createContext(contextName, contextOptions) {\r\n\r\n    contextOptions = contextOptions || {};\r\n\r\n    if (!contexts[contextName]) {\r\n\r\n        function loadDep(name, path) {\r\n            if (config.shim[name]) {\r\n                return loadByShim(name, path);\r\n            } else {\r\n                var deferred = defer();\r\n                deferred.name = name;\r\n                deferred.path = path;\r\n                deferred.context = contextName;\r\n                invokeLater(deferred, function () {\r\n                    return loadScript(name, path).catch(function () {\r\n                        deferred.reject(new Error('Error while loading module \"' + name + '\"'));\r\n                    });\r\n                });\r\n                return deferred.promise;\r\n            }\r\n        }\r\n\r\n        function loadByShim(name, path) {\r\n            var shim = config.shim[name];\r\n            return _require(shim.deps || [], function () {\r\n                return loadScript(name, path).then(shim.exportsFn || function () {\r\n                    return (shim.init && shim.init()) || safeGet(window, shim.exports);\r\n                });\r\n            }, null, path);\r\n        }\r\n\r\n        function loadScript(name, path) {\r\n            return new Promise(function (resolve, reject) {\r\n                var el = requirejs.load(null, name, toUrl(name, path, true));\r\n                el.onerror = reject;\r\n                el.onload = resolve;\r\n            });\r\n        }\r\n\r\n        function loadWithPlugin(dependency, path) {\r\n            var index = dependency.indexOf('!'),\r\n                plugin = dependency.substr(0, index),\r\n                context = createContext(null).getContext();\r\n            dependency = dependency.substr(index + 1);\r\n            return context._require([plugin], function (plugin) {\r\n                return new Promise(function (resolve, reject) {\r\n                    function localRequire() {\r\n                        if (!resolved) {\r\n                            return requirejs.apply(null, arguments);\r\n                        }\r\n                    }\r\n                    Object.keys(requirejs).forEach(function (key) {\r\n                        localRequire[key] = requirejs[key];\r\n                    });\r\n                    var resolved = false;\r\n                    resolve.error = reject;\r\n                    resolve.fromText = function (name, text) {\r\n                        if (!text) {\r\n                            text = name;\r\n                        }\r\n                        var previousModule = pendingModule;\r\n                        pendingModule = {\r\n                            name: name,\r\n                            resolve: resolve,\r\n                            reject: reject,\r\n                            path: path\r\n                        };\r\n                        /* jshint -W054 */\r\n                        (new Function(text))();\r\n                        /* jshint +W054 */\r\n                        pendingModule = previousModule;\r\n                        resolved = true;\r\n                    };\r\n                    plugin.load(pathName(dependency, path), localRequire, resolve, config);\r\n                });\r\n            }, null, path);\r\n        }\r\n\r\n        var commentRegExp = /(\\/\\*([\\s\\S]*?)\\*\\/|([^:]|^)\\/\\/(.*)$)/mg,\r\n            cjsRequireRegExp = /[^.]\\s*require\\s*\\(\\s*[\"']([^!'\"\\s][^'\"\\s]*)[\"']\\s*\\)/g;\r\n\r\n        function wrapCommonJS(name, factory, path) {\r\n            var deps = [];\r\n            factory.toString()\r\n                .replace(commentRegExp, '')\r\n                .replace(cjsRequireRegExp, function (match, dep) {\r\n                    deps.push(dep);\r\n                });\r\n\r\n            return {\r\n                deps: deps,\r\n                factory: function () {\r\n                    var args = arguments,\r\n                        modules = deps.reduce(function (modules, name, index) {\r\n                            modules[name] = args[index];\r\n                            return modules;\r\n                        }, {});\r\n\r\n                    function localRequire(name) {\r\n                        if (!modules[name]) {\r\n                            throw new Error('Module \"' + deps + '\" has not been loaded yet');\r\n                        }\r\n                        return modules[name];\r\n                    }\r\n\r\n                    localRequire.toUrl = function (name) {\r\n                        return toUrl(name, path);\r\n                    };\r\n\r\n                    return factory(\r\n                        localRequire,\r\n                        locals.exports(name),\r\n                        locals.module(name)\r\n                    );\r\n                }\r\n            };\r\n        }\r\n\r\n\r\n        function _require(deps, factory, errback, path) {\r\n            var currentModule = path.slice(-1)[0];\r\n            return new Promise(function (resolve, reject) {\r\n                Promise.all(deps.map(function (dependency) {\r\n                    if (path.indexOf(dependency) > -1) {\r\n                        return Promise.reject(new Error('Circular dependency: ' + path.concat(dependency).join(' -> ')));\r\n                    }\r\n                    var newPath = path.concat(dependency);\r\n                    if (locals[dependency]) {\r\n                        return locals[dependency](currentModule);\r\n                    }\r\n                    if (dependency.indexOf('!') > -1) {\r\n                        modules[dependency] = loadWithPlugin(dependency, newPath);\r\n                    }\r\n                    if (predefines[dependency]) {\r\n                        modules[dependency] = Promise.resolve().then(function () {\r\n                            return _require.apply(null, predefines[dependency].concat([newPath]));\r\n                        });\r\n                    } else if (!modules[dependency]) {\r\n                        modules[dependency] = loadDep(dependency, newPath);\r\n                    }\r\n                    return modules[dependency];\r\n                })).then(resolve, reject);\r\n            }).then(function (instances) {\r\n                if (isFunction(factory)) {\r\n                    var result = factory.apply(null, instances);\r\n                    return currentModule && safeGet(modules[currentModule], 'module.exports') || result;\r\n                } else {\r\n                    return factory;\r\n                }\r\n            }, function (reason) {\r\n                if (isFunction(errback)) {\r\n                    errback(reason);\r\n                }\r\n                requirejs.onError(reason);\r\n                return Promise.reject(reason);\r\n            });\r\n        }\r\n\r\n        function requirejs(deps, factory, errback) {\r\n            return _require(deps, factory, errback, []);\r\n        }\r\n\r\n        var modules,\r\n            predefines,\r\n            config,\r\n            locals = {\r\n                require: function (moduleName) {\r\n                    return requirejs;\r\n                },\r\n                module: function (moduleName) {\r\n                    var module = modules[moduleName];\r\n                    if (!module) {\r\n                        throw new Error('Module \"module\" should be required only by modules');\r\n                    }\r\n                    return (module.module = module.module || {\r\n                        id: moduleName,\r\n                        config: function () {\r\n                            return config.config[moduleName] || {};\r\n                        }\r\n                    });\r\n                },\r\n                exports: function (moduleName) {\r\n                    return (locals.module(moduleName).exports = {});\r\n                }\r\n            };\r\n\r\n        requirejs.resetContext = function () {\r\n            config = {\r\n                urlArgs: '',\r\n                baseUrl: './',\r\n                paths: {},\r\n                shim: {},\r\n                bundles: {},\r\n                config: {}\r\n            };\r\n            modules = {};\r\n            predefines = {};\r\n        };\r\n\r\n        requirejs.config = function (options) {\r\n            if (!options.context) {\r\n                config = deepmerge(config, options);\r\n            } else {\r\n                return createContext(options.context, options);\r\n            }\r\n        };\r\n\r\n        requirejs.load = function (context, name, url) {\r\n            var el = document.createElement(\"script\");\r\n            el.src = url;\r\n            el.async = true;\r\n            document.getElementsByTagName('body')[0].appendChild(el);\r\n            return el;\r\n        };\r\n\r\n        function toUrl(name, path, appendJS) {\r\n            var bundle = Object.keys(config.bundles).filter(function (bundle) {\r\n                return config.bundles[bundle].indexOf(name) > -1;\r\n            })[0];\r\n            if (bundle) {\r\n                return requirejs.toUrl(bundle);\r\n            }\r\n            if (config.paths[name]) {\r\n                name = config.paths[name];\r\n                if (appendJS) {\r\n                    name += '.js';\r\n                }\r\n            } else {\r\n                if (appendJS) {\r\n                    name = appendJs(name);\r\n                }\r\n                if (path) {\r\n                    name = pathName(name, path);\r\n                }\r\n            }\r\n            if (!/^([\\w\\+\\.\\-]+:)?\\//.test(name)) {\r\n                name = config.baseUrl + name;\r\n            }\r\n            if (config.urlArgs) {\r\n                name += '?' + config.urlArgs;\r\n            }\r\n            return name;\r\n        }\r\n\r\n        requirejs.toUrl = function (name) {\r\n            return toUrl(name);\r\n        };\r\n\r\n        requirejs.specified = function (name) {\r\n            return modules.hasOwnProperty(name);\r\n        };\r\n\r\n        requirejs.onError = function (reason) {\r\n            console.error(reason);\r\n        };\r\n\r\n        requirejs.resetContext();\r\n\r\n        requirejs.getContext = function () {\r\n            return {\r\n                config: config,\r\n                modules: modules,\r\n                predefines: predefines,\r\n                wrapCommonJS: wrapCommonJS,\r\n                _require: _require\r\n            };\r\n\r\n        };\r\n\r\n        contexts[contextName] = requirejs;\r\n    }\r\n\r\n    var options = deepmerge({}, contextOptions);\r\n    delete options.context;\r\n    contexts[contextName].config(options);\r\n\r\n    return contexts[contextName];\r\n}\r\n\r\nfunction define(name, deps, factory) {\r\n    if (typeof name !== 'string') {\r\n        factory = deps;\r\n        deps = name;\r\n        name = null;\r\n    }\r\n    if (!Array.isArray(deps)) {\r\n        factory = deps;\r\n        deps = [];\r\n    }\r\n\r\n    var deferred = pendingModule,\r\n        context = createContext(name ? null : (deferred && deferred.context)).getContext();\r\n\r\n    if (name === null && !deferred) {\r\n        throw new Error('Unexpected define!');\r\n    }\r\n\r\n    if (deps.length === 0 && factory.length > 0) {\r\n        var wrapped = context.wrapCommonJS(name || deferred.name, factory, [].concat(deferred.path, ''));\r\n        deps = wrapped.deps;\r\n        factory = wrapped.factory;\r\n    }\r\n\r\n    if (name === null || deferred && deferred.name === name) {\r\n        var module = context._require(deps, factory, deferred.reject, deferred.path);\r\n        deferred.resolve(module);\r\n    } else {\r\n        context.predefines[name] = [deps, factory, null];\r\n    }\r\n}\r\n\r\ndefine.amd = {};\r\n\r\nvar requirejs = createContext(null);\r\n\r\nmodule.exports = {\r\n    define: define,\r\n    require: requirejs,\r\n    requirejs: requirejs\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/require-mini.js\n// module id = 34\n// module chunks = 0","define('css', function () {\r\n    return {\r\n        load: function (name, require, onload, config) {\r\n            var linkElement = document.createElement('link');\r\n            linkElement.href = require.toUrl(name);\r\n\r\n            var isLoaded = Array.prototype.slice.call(\r\n                document.getElementsByTagName('head')[0].querySelectorAll('link[rel=stylesheet]')\r\n            ).some(function (link) {\r\n                return link.href === linkElement.href;\r\n            });\r\n\r\n            if (!isLoaded) {\r\n                linkElement.rel = 'stylesheet';\r\n                linkElement.type = 'text/css';\r\n                linkElement.onload = onload;\r\n                linkElement.onerror = onload.error;\r\n                document.getElementsByTagName('head')[0].appendChild(linkElement);\r\n            } else {\r\n                onload({});\r\n            }\r\n        }\r\n    };\r\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/require-plugin-css.js\n// module id = 35\n// module chunks = 0","define('file', function () {\r\n    return {\r\n        load: function (name, require, onload, config) {\r\n            onload(require.toUrl(name));\r\n        }\r\n    };\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/require-plugin-file.js\n// module id = 36\n// module chunks = 0","define('json', function () {\r\n    return {\r\n        load: function (name, require, onload, config) {\r\n            Cortona3DSolo.app.util.loadResource(require.toUrl(name), 'application/json', 'json')\r\n                .then(function (xhr) {\r\n                    if (xhr.response === null) {\r\n                        throw new Error('Failed parsing JSON file \"' + name + '\"');\r\n                    } else if (typeof xhr.response === 'string') {\r\n                        var json = JSON.parse(xhr.response);\r\n                        if (json) {\r\n                            onload(json);\r\n                        } else {\r\n                            throw new Error('Failed parsing JSON file \"' + name + '\"');\r\n                        }\r\n                    } else {\r\n                        onload(xhr.response);\r\n                    }\r\n                })\r\n                .catch(onload.error);\r\n        }\r\n    };\r\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/require-plugin-json.js\n// module id = 37\n// module chunks = 0","define('res', function () {\r\n    return {\r\n        load: function (name, require, onload, config) {\r\n            onload(require.toUrl(name));\r\n        }\r\n    };\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/require-plugin-res.js\n// module id = 38\n// module chunks = 0","define('xml', function () {\r\n    return {\r\n        load: function (name, require, onload, config) {\r\n            Cortona3DSolo.app.util.loadResource(require.toUrl(name), 'text/xml')\r\n                .then(function (xhr) {\r\n                    if (xhr.responseXML) {\r\n                        onload(Cortona3DSolo.app.util.xmlToJSON(xhr.responseXML));\r\n                    } else {\r\n                        throw new Error(url + \" empty content\");\r\n                    }\r\n                })\r\n                .catch(onload.error);\r\n        }\r\n    };\r\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/require-plugin-xml.js\n// module id = 39\n// module chunks = 0","require('./skin/skin.less');\n\nvar Cortona3DSolo = require('solo');\n\nvar usedSkins = {},\n    UISkinController = require('./skin/UISkinController'),\n    util = require('lib/util');\n\nvar m_options = {};\n\n\n/**\n * A simple User Interface (UI) helper object.\n * \n * Requires the use of the internal module `\"skin\"`.\n * \n * @namespace\n * @memberof module:solo\n * @since 1.6.0\n * @example\nCortona3DSolo.use('skin', {\n    baseUrl: 'uniview/'\n});\nCortona3DSolo.skin.create('app').use('solo-uniview', {\n    src: 'procedure.interactivity.xml'\n});\n */\nvar skin = {\n    /**\n     * @class The constructor creates an instance of {@link UISkinController} object.\n     * @see UISkinController\n     */\n    UISkinController: UISkinController,\n\n    /**\n     * Creates a new skin area with given name in the coordinates of the base element.\n     * \n     * @param {string} name\n     * @param {HTMLElement|CSSSelector} [baseElement=document.body] HTML node or CSS selector\n     * @returns {UISkinController}\n     */\n    create: function (name, baseElement) {\n        if (!usedSkins[name]) {\n            usedSkins[name] = new skin.UISkinController(name, (typeof baseElement === 'string' ? document.querySelector(baseElement) : baseElement));\n        }\n        return usedSkins[name];\n    },\n\n    /**\n     * Removes the skin area with the given name.\n     * \n     * @param {string} name\n     */\n    remove: function (name) {\n        if (usedSkins[name]) {\n            // detach?\n            delete usedSkins[name];\n        }\n    },\n\n    /**\n     * Gets the skin area controller with the given name.\n     * \n     * @param {string} name\n     * @returns {UISkinController}\n     */\n    get: function (name) {\n        return usedSkins[name];\n    },\n\n    /**\n     * Loads the component module using `requirejs` configured with the `\"skin\"` module options and returns the factory function of the component.\n     * \n     * @async\n     * @param {string} name\n     * @returns {Promise.<UISkinComponentFactory>} The Promise object whose fulfillment handler receives the factory function when the requested external component file has successfully been loaded.\n     */\n    require: function (name) {\n        return Cortona3DSolo.app.util.requirePromise(name, window.requirejs.config(m_options));\n    }\n};\n\nmodule.exports = {\n    configure: function (options) {\n        m_options = util.expand({}, options || {});\n        return {\n            skin: skin\n        };\n    }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/skin.js\n// module id = 40\n// module chunks = 0","// Require pointer events polifill\r\nrequire('pepjs');\r\n\r\nvar Cortona3DSolo = require('solo');\r\nvar util = require('lib/util');\r\n\r\nvar options = {\r\n    MOUSE_CLICK_THRESHOLD: 3,\r\n    FEATURE_PICK_TOPMOST: true\r\n};\r\n\r\nvar DOUBLE_TAP_TIME = 250;\r\n\r\nvar debounceTimeout = {};\r\n\r\nvar whichToButtons = [0, 1, 4, 2];\r\nvar buttonToButtons = [1, 4, 2, 8, 16];\r\n\r\nvar getMouseEventArguments = function (event, isMove) {\r\n    var keys = +(event.shiftKey && 1) | +(event.ctrlKey && 2) | +(event.altKey && 4);\r\n    //var buttons = (event.which !== undefined) ? whichToButton[event.which] : event.button;\r\n    var buttons;\r\n    if (isMove) {\r\n        buttons = (event.buttons !== undefined) ? event.buttons : ((event.which !== undefined) ? whichToButtons[event.which] : buttonToButtons[event.button]);\r\n    } else {\r\n        buttons = (event.which !== undefined) ? whichToButtons[event.which] : buttonToButtons[event.button];\r\n    }\r\n\r\n    var target = event.target || event.srcElement,\r\n        rect = target.getBoundingClientRect(),\r\n        offsetX = event.clientX - rect.left,\r\n        offsetY = event.clientY - rect.top;\r\n\r\n    return [offsetX, offsetY, buttons, keys, event];\r\n};\r\n\r\nvar distance = function (aVec1, aVec2) {\r\n    var dx = aVec1[0] - aVec2[0],\r\n        dy = aVec1[1] - aVec2[1];\r\n    return Math.sqrt(dx * dx + dy * dy);\r\n};\r\n\r\nvar args;\r\n\r\nvar isMouseMoved = function (mouseArgs1, mouseArgs2) {\r\n    if (!mouseArgs1 || !mouseArgs2) return false;\r\n    return distance(mouseArgs1, mouseArgs2) > options.MOUSE_CLICK_THRESHOLD;\r\n};\r\n\r\nvar overObject = null;\r\nvar lastMouseArguments = null;\r\nvar lastMouseMove = null;\r\n\r\nvar FEATURE_PICK_TOPMOST = true;\r\n\r\n/* Firefox title changes issue */\r\nvar stealthyLayer = null;\r\nvar isFF = navigator.userAgent.lastIndexOf(\"Firefox\") > 0;\r\nvar createStealthyLayer = function () {\r\n    if (isFF) {\r\n        stealthyLayer = document.createElement('div');\r\n        stealthyLayer.style.position = 'absolute';\r\n        stealthyLayer.style.top = '0';\r\n        stealthyLayer.style.bottom = '0';\r\n        stealthyLayer.style.left = '0';\r\n        stealthyLayer.style.right = '0';\r\n        stealthyLayer.style.zIndex = 10000;\r\n        stealthyLayer.onmousemove = function (e) {\r\n            e = e || window.event;\r\n            document.body.removeChild(e.target);\r\n            stealthyLayer = null;\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            return false;\r\n        };\r\n        setTimeout(function () {\r\n            if (stealthyLayer) {\r\n                document.body.removeChild(stealthyLayer);\r\n                stealthyLayer = null;\r\n            }\r\n        }, 100);\r\n        document.body.appendChild(stealthyLayer);\r\n    }\r\n};\r\n\r\nvar m_lastPickInfo;\r\n\r\nvar eventHandlers = {\r\n    pointermove: function (event) {\r\n        var target = event.target || event.srcElement,\r\n            rect = target.getBoundingClientRect(),\r\n            offsetX = event.clientX - rect.left,\r\n            offsetY = event.clientY - rect.top,\r\n            mouseArguments = getMouseEventArguments(event, true);\r\n\r\n        var handleOld = overObject ? overObject.handle : null;\r\n\r\n        if (lastMouseMove && !isMouseMoved(lastMouseMove, mouseArguments)) return;\r\n\r\n        lastMouseMove = mouseArguments;\r\n\r\n        if (!mouseArguments[2]) { // buttons === 0\r\n\r\n            m_lastPickInfo = pickObjectChain(offsetX, offsetY, options.FEATURE_PICK_TOPMOST);\r\n\r\n            var obj = m_lastPickInfo.picked;\r\n\r\n            if (obj) {\r\n                Cortona3DSolo.dispatch('touch.didObjectMove', obj.handle, obj.name);\r\n            }\r\n\r\n            var handleNew = obj ? obj.handle : null;\r\n\r\n            if (handleOld !== handleNew) {\r\n                if (overObject) {\r\n                    createStealthyLayer();\r\n                    Cortona3DSolo.dispatch('touch.didObjectOut', handleOld, overObject.name);\r\n                }\r\n                if (obj) {\r\n                    Cortona3DSolo.dispatch('touch.didObjectEnter', handleNew, obj.name);\r\n                }\r\n            }\r\n\r\n            overObject = obj;\r\n        } else {\r\n            if (overObject) {\r\n                createStealthyLayer();\r\n                Cortona3DSolo.dispatch('touch.didObjectOut', handleOld, overObject.name);\r\n                overObject = null;\r\n            }\r\n        }\r\n        args = ['touch.didPointerMove'].concat(mouseArguments);\r\n        Cortona3DSolo.dispatch.apply(Cortona3DSolo, args);\r\n    },\r\n    pointerenter: function (event) {\r\n        if (stealthyLayer) return;\r\n        Cortona3DSolo.dispatch('touch.didPointerEnter');\r\n        lastMouseMove = null;\r\n    },\r\n    pointerout: function (event) {\r\n        if (stealthyLayer) return;\r\n        if (overObject) {\r\n            Cortona3DSolo.dispatch('touch.didObjectOut', overObject.handle, overObject.name);\r\n            overObject = null;\r\n            createStealthyLayer();\r\n        }\r\n        Cortona3DSolo.dispatch('touch.didPointerOut');\r\n        lastMouseMove = null;\r\n    },\r\n    pointerdown: function (event) {\r\n        lastMouseArguments = getMouseEventArguments(event);\r\n        args = ['touch.didPointerDown'].concat(lastMouseArguments);\r\n        Cortona3DSolo.dispatch.apply(Cortona3DSolo, args);\r\n    },\r\n    pointerup: function (event) {\r\n        var target = event.target || event.srcElement,\r\n            rect = target.getBoundingClientRect(),\r\n            offsetX = event.clientX - rect.left,\r\n            offsetY = event.clientY - rect.top,\r\n            mouseArguments = getMouseEventArguments(event);\r\n\r\n        m_lastPickInfo = pickObjectChain(offsetX, offsetY, options.FEATURE_PICK_TOPMOST);\r\n\r\n        var obj = m_lastPickInfo.picked;\r\n\r\n        if (!isMouseMoved(lastMouseArguments, mouseArguments)) {\r\n            if (!obj) obj = {\r\n                handle: 0,\r\n                name: ''\r\n            };\r\n            if (!debounceTimeout[obj.name]) {\r\n                debounceTimeout[obj.name] = {\r\n                    lpi: m_lastPickInfo,\r\n                    t: setTimeout(function () {\r\n                        var currentLastPickInfo = m_lastPickInfo;\r\n                        m_lastPickInfo = debounceTimeout[obj.name].lpi;\r\n                        delete debounceTimeout[obj.name];\r\n                        args = ['touch.didObjectClick', obj.handle, obj.name].concat(mouseArguments);\r\n                        Cortona3DSolo.dispatch.apply(Cortona3DSolo, args);\r\n                        m_lastPickInfo = currentLastPickInfo;\r\n                    }, DOUBLE_TAP_TIME)\r\n                };\r\n            } else {\r\n                clearTimeout(debounceTimeout[obj.name].t);\r\n                delete debounceTimeout[obj.name];\r\n            }\r\n        }\r\n\r\n        var handleOld = overObject ? overObject.handle : null,\r\n            handleNew = obj ? obj.handle : null;\r\n\r\n        if (handleOld !== handleNew) {\r\n            if (overObject) {\r\n                createStealthyLayer();\r\n                Cortona3DSolo.dispatch('touch.didObjectOut', handleOld, overObject.name);\r\n            }\r\n            if (obj) {\r\n                Cortona3DSolo.dispatch('touch.didObjectEnter', handleNew, obj.name);\r\n            }\r\n        }\r\n\r\n        overObject = obj;\r\n\r\n        args = ['touch.didPointerUp'].concat(mouseArguments);\r\n        Cortona3DSolo.dispatch.apply(Cortona3DSolo, args);\r\n\r\n        lastMouseArguments = null;\r\n    }\r\n};\r\n\r\nif (navigator.pointerEnabled === false) {\r\n    for (var eventName in eventHandlers) {\r\n        if (eventName.indexOf('pointer') === 0) {\r\n            eventHandlers[eventName.replace(/^pointer/, 'mouse')] = eventHandlers[eventName];\r\n            delete eventHandlers[eventName];\r\n        }\r\n    }\r\n}\r\n\r\nfunction attach() {\r\n    if (Cortona3DSolo.core && Cortona3DSolo.core.runtimeReady && Cortona3DSolo.core.canvas) {\r\n        var canvas = Cortona3DSolo.core.canvas;\r\n        for (eventName in eventHandlers) {\r\n            canvas.addEventListener(eventName, eventHandlers[eventName], false);\r\n        }\r\n    } else {\r\n        Cortona3DSolo.on('app.firstFrameDidArrive', attach);\r\n    }\r\n}\r\n\r\nattach();\r\n\r\n/**\r\n * Search for all 3D objects through which the beam passes from a given point on the 3D window in the direction of the camera.\r\n * \r\n * @function pickObjectsRightThrough\r\n * @memberof module:solo.touch\r\n * @param {number} x - The X coordinate relative to the element `<canvas>`\r\n * @param {number} y - The Y coordinate relative to the element `<canvas>`\r\n * @returns {Handle[]} An array of all found 3D objects\r\n */\r\nfunction pickObjectsRightThrough(x, y) {\r\n    var chain = [],\r\n        obj;\r\n\r\n    obj = Cortona3DSolo.app.pickObject(x, y, false);\r\n\r\n    while (obj) {\r\n        chain.push(obj.handle);\r\n        Cortona3DSolo.app.setObjectIgnorableByPicker(obj.handle, true);\r\n        obj = Cortona3DSolo.app.pickObject(x, y, false);\r\n    }\r\n\r\n    chain.forEach(function (handle) {\r\n        Cortona3DSolo.app.setObjectIgnorableByPicker(handle, false);\r\n    });\r\n\r\n    return chain;\r\n}\r\n\r\nfunction pickObjectChain(x, y, topMost) {\r\n    var chain = [],\r\n        handle,\r\n        obj = Cortona3DSolo.app.pickObject(x, y, !!topMost);\r\n\r\n    if (obj) {\r\n        for (handle = obj.handle; handle; handle = Cortona3DSolo.app.getParentObject(handle)) {\r\n            chain.push(handle);\r\n        }\r\n    }\r\n    return {\r\n        x: x,\r\n        y: y,\r\n        picked: obj,\r\n        chain: chain\r\n    };\r\n}\r\n\r\n\r\nvar soloExports = {\r\n    /**\r\n     * The namespace to work with pointer-events in the 3D window.\r\n     * \r\n     * Requires the use of internal modules `\"touch\"` and `\"core\"`.\r\n     * \r\n     * @requires touch\r\n     * @requires core\r\n     * @namespace\r\n     * @memberof module:solo\r\n     * @since 1.5.6\r\n     * @example\r\nCortona3DSolo.use('core');\r\nCortona3DSolo.use('touch');\r\nCortona3DSolo.on('touch.didObjectClick', function () {\r\n    Cortona3DSolo.app.procedure.play();\r\n});\r\nCortona3DSolo.initialize('procedure.wrl');\r\n     */\r\n    touch: {\r\n        /**\r\n         * @static\r\n         * @member {object} options\r\n         * @property {number} options.MOUSE_CLICK_THRESHOLD=3 \r\n         * @property {boolean} options.FEATURE_PICK_TOPMOST=true You must use `false` in case of an interactive procedure.\r\n         * @memberof module:solo.touch\r\n         */\r\n        options: options,\r\n        pickObjectsRightThrough: pickObjectsRightThrough,\r\n        pickObjectChain: pickObjectChain\r\n\r\n        //didObjectEnter\r\n        //didObjectOut\r\n        //didObjectMove\r\n        //didObjectClick\r\n\r\n        //didPointerMove\r\n        //didPointerEnter\r\n        //didPointerDown\r\n        //didPointerUp\r\n    }\r\n};\r\n\r\n/**\r\n * Gets the information about the process of the last selection of a 3D object when pointer-events occur.\r\n * \r\n * @static\r\n * @member {PickInfo} lastPickInfo\r\n * @memberof module:solo.touch\r\n */\r\n\r\nObject.defineProperty(soloExports.touch, 'lastPickInfo', {\r\n    get: function () {\r\n        return m_lastPickInfo;\r\n    },\r\n    enumerable: true\r\n});\r\n\r\nmodule.exports = {\r\n    configure: function (options) {\r\n        util.expand(soloExports.touch.options, options);\r\n        return soloExports;\r\n    }\r\n};\r\n\r\n/**\r\n * The hook method is invoked when a pointer is moved over the object in the 3D window.\r\n * \r\n * @function didObjectEnter\r\n * @abstract \r\n * @memberof module:solo.touch\r\n * @param {Handle} handle - Handle of the object in the 3D window\r\n * @param {string} name - Name of the object in the 3D window\r\n * @see The corresponding event {@link event:\"touch.didObjectEnter\" \"touch.didObjectEnter\"}\r\n */\r\n/**\r\n * @event \"touch.didObjectEnter\"\r\n * @see The corresponding hook method {@link module:solo.touch.didObjectEnter touch.didObjectEnter()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked when a pointer is moved off the object in the 3D window.\r\n * \r\n * @function didObjectOut\r\n * @abstract \r\n * @memberof module:solo.touch\r\n * @param {Handle} handle - Handle of the object in the 3D window\r\n * @param {string} name - Name of the object in the 3D window\r\n * @see The corresponding event {@link event:\"touch.didObjectOut\" \"touch.didObjectOut\"}\r\n */\r\n/**\r\n * @event \"touch.didObjectOut\"\r\n * @see The corresponding hook method {@link module:solo.touch.didObjectOut touch.didObjectOut()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked when a pointer is moved while over an object in the 3D window.\r\n * \r\n * @function didObjectMove\r\n * @abstract \r\n * @memberof module:solo.touch\r\n * @param {Handle} handle - Handle of the object in the 3D window\r\n * @param {string} name - Name of the object in the 3D window\r\n * @see The corresponding event {@link event:\"touch.didObjectMove\" \"touch.didObjectMove\"}\r\n */\r\n/**\r\n * @event \"touch.didObjectMove\"\r\n * @see The corresponding hook method {@link module:solo.touch.didObjectMove touch.didObjectMove()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked when the pointer was in a “pressed” and then “released” state on an object in the 3D window.\r\n * \r\n * @function didObjectClick\r\n * @abstract \r\n * @memberof module:solo.touch\r\n * @param {Handle} handle - Handle of the object in the 3D window\r\n * @param {string} name - Name of the object in the 3D window\r\n * @param {number} x - The X coordinate of the pointer in local (canvas) coordinates\r\n * @param {number} y - The Y coordinate of the pointer in local (canvas) coordinates\r\n * @param {number} buttons - Bitwise flags of the buttons depressed when the event was fired: \r\n * - Left=1 \r\n * - Right=2 \r\n * - Middle (wheel)=4 \r\n * @param {number} keys - Bitwise control key flags that were pressed when the event was fired: \r\n * - Shift=1\r\n * - Ctrl=2\r\n * - Alt=4\r\n * @param {object} event - Source PointerEvent or MouseEvent object\r\n * @see The corresponding event {@link event:\"touch.didObjectClick\" \"touch.didObjectClick\"}\r\n */\r\n/**\r\n * @event \"touch.didObjectClick\"\r\n * @see The corresponding hook method {@link module:solo.touch.didObjectClick touch.didObjectClick()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked when a pointer is moved in the 3D window.\r\n * \r\n * @function didPointerMove\r\n * @abstract \r\n * @memberof module:solo.touch\r\n * @param {number} x - The X coordinate of the pointer in local (canvas) coordinates\r\n * @param {number} y - The Y coordinate of the pointer in local (canvas) coordinates\r\n * @param {number} buttons - Bitwise flags of the buttons depressed when the event was fired:\r\n * - Left=1\r\n * - Right=2\r\n * - Middle (wheel)=4 \r\n * @param {number} keys - Bitwise control key flags that were pressed when the event was fired: \r\n * - Shift=1\r\n * - Ctrl=2\r\n * - Alt=4\r\n * @param {object} event - Source PointerEvent or MouseEvent object\r\n * @see The corresponding event {@link event:\"touch.didPointerMove\" \"touch.didPointerMove\"}\r\n */\r\n/**\r\n * @event \"touch.didPointerMove\"\r\n * @see The corresponding hook method {@link module:solo.touch.didPointerMove touch.didPointerMove()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked when a pointer is moved over the 3D window.\r\n * \r\n * @function didPointerEnter\r\n * @abstract \r\n * @memberof module:solo.touch\r\n * @see The corresponding event {@link event:\"touch.didPointerEnter\" \"touch.didPointerEnter\"}\r\n */\r\n/**\r\n * @event \"touch.didPointerEnter\"\r\n * @see The corresponding hook method {@link module:solo.touch.didPointerEnter touch.didPointerEnter()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked when a pointer is moved off the 3D window.\r\n * \r\n * @function didPointerOut\r\n * @abstract \r\n * @memberof module:solo.touch\r\n * @see The corresponding event {@link event:\"touch.didPointerOut\" \"touch.didPointerOut\"}\r\n */\r\n/**\r\n * @event \"touch.didPointerOut\"\r\n * @see The corresponding hook method {@link module:solo.touch.didPointerOut touch.didPointerOut()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked when a pointing device button is pressed on the 3D window.\r\n * \r\n * @function didPointerDown\r\n * @abstract \r\n * @memberof module:solo.touch\r\n * @param {number} x - The X coordinate of the pointer in local (canvas) coordinates\r\n * @param {number} y - The Y coordinate of the pointer in local (canvas) coordinates\r\n * @param {number} buttons - The button number that was pressed when the event was fired: \r\n * - Left=1\r\n * - Right=2\r\n * - Middle (wheel)=4\r\n * @param {number} keys - Bitwise control key flags that were pressed when the event was fired:\r\n * - Shift=1\r\n * - Ctrl=2\r\n * - Alt=4\r\n * @param {object} event - Source PointerEvent or MouseEvent object\r\n * @see The corresponding event {@link event:\"touch.didPointerDown\" \"touch.didPointerDown\"}\r\n */\r\n/**\r\n * @event \"touch.didPointerDown\"\r\n * @see The corresponding hook method {@link module:solo.touch.didPointerDown touch.didPointerDown()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked when a pointing device button is released over the 3D window.\r\n * \r\n * @function didPointerUp\r\n * @abstract \r\n * @memberof module:solo.touch\r\n * @param {number} x - The X coordinate of the pointer in local (canvas) coordinates\r\n * @param {number} y - The Y coordinate of the pointer in local (canvas) coordinates\r\n * @param {number} buttons - Bitwise flags of the buttons depressed when the event was fired:\r\n * - Left=1\r\n * - Right=2\r\n * - Middle (wheel)=4 \r\n * @param {number} keys - Bitwise control key flags that were pressed when the event was fired:\r\n * - Shift=1\r\n * - Ctrl=2\r\n * - Alt=4\r\n * @param {object} event - Source PointerEvent or MouseEvent object\r\n * @see The corresponding event {@link event:\"touch.didPointerUp\" \"touch.didPointerUp\"}\r\n */\r\n/**\r\n * @event \"touch.didPointerUp\"\r\n * @see The corresponding hook method {@link module:solo.touch.didPointerUp touch.didPointerUp()}\r\n */\r\n\r\n/**\r\n * Information about the pick process of a 3D object, for example:\r\n * ```\r\n * { \r\n *     x: 153,\r\n *     y: 27,\r\n *     picked: 5698800,\r\n *     chain: [5698800,6100248,6100664,6101200,6101848]\r\n * }\r\n * ```\r\n * @typedef {object} PickInfo\r\n * @param {number} x - The X coordinate of 3D window\r\n * @param {number} y - The Y coordinate of 3D window\r\n * @prop {Handle} picked A handle of the picked 3D object\r\n * @prop {Handle[]} chain The picked 3D object and its ancestors. The ancestors of the picked 3D object consist of the parent of the picked 3D object and the parent's parent and so on. The root element is last.\r\n * @see {@link module:solo.touch.lastPickInfo touch.lastPickInfo}\r\n */\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/touch.js\n// module id = 41\n// module chunks = 0","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".skin-holder{position:absolute;height:100%;width:100%;overflow:hidden;pointer-events:none;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-touch-action:none;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.skin-holder>*{pointer-events:auto}.skin-holder button,.skin-holder input[type=button],.skin-holder input[type=checkbox],.skin-holder select{display:inline-block;border:none;padding:.4em;cursor:pointer;font-family:inherit;font-size:inherit;color:inherit}.skin-holder button,.skin-holder input[type=button]{min-width:4em}.skin-holder input[type=range]{width:100%;margin:0;padding:0}.skin-holder label{font-weight:700;margin-right:.5em}.skin-holder label>*{margin-left:.5em}.skin-holder .skin-container{display:-ms-flexbox;display:flex}.skin-holder .skin-container.row{-ms-flex-direction:row;flex-direction:row}.skin-holder .skin-container.col{-ms-flex-direction:column;flex-direction:column}.skin-holder .skin-toolbar{z-index:100;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center;white-space:nowrap;padding:0 .5em;height:3em;min-height:3em;-ms-flex:0 0 auto;flex:0 0 auto}.skin-holder .skin-toolbar .skin-container{-ms-flex-align:center;align-items:center;-ms-flex-positive:1;flex-grow:1;margin:0 .5em}.skin-holder .skin-toolbar .skin-container.left{-ms-flex-pack:start;justify-content:flex-start;-ms-flex-order:-1;order:-1;-ms-flex-positive:0;flex-grow:0;margin-left:0}.skin-holder .skin-toolbar .skin-container.right{-ms-flex-pack:end;justify-content:flex-end;-ms-flex-order:1;order:1;-ms-flex-positive:0;flex-grow:0;margin-right:0}.skin-holder .skin-toolbar .skin-control{margin-right:.5em}.skin-holder .skin-panel{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;padding:0 1em}.skin-holder .skin-img-button{background-repeat:no-repeat;margin:0;display:inline-block;vertical-align:top}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/css-loader!C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/postcss-loader/src?{\"ident\":\"postcss\",\"plugins\":[null,null]}!C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/less-loader/dist/cjs.js!./src/skin/skin.less\n// module id = 42\n// module chunks = 0","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"body,html{margin:0;height:100%}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/css-loader!C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/postcss-loader/src?{\"ident\":\"postcss\",\"plugins\":[null,null]}!./src/core.css\n// module id = 43\n// module chunks = 0","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cortona3dsolo-svg{width:100%;height:100%;display:block;position:absolute}.cortona3dsolo-svg a:hover{cursor:pointer;text-decoration:none}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/css-loader!C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/postcss-loader/src?{\"ident\":\"postcss\",\"plugins\":[null,null]}!./src/drawing.css\n// module id = 44\n// module chunks = 0","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cortona3dsolo-canvas{position:absolute;width:100%;height:100%;display:block}.cortona3dsolo-popover{-ms-touch-action:none;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.tiramisu-speaker{display:inline-block;box-sizing:content-box}.tiramisu-panel{white-space:normal;word-wrap:break-word}.dpl-table{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:100%;padding:0;border-spacing:0;border-collapse:collapse;cursor:default;border:1px solid grey}.dpl-table td{padding:4px;vertical-align:top;border-right:1px solid grey}.dpl-table thead{font-size:10pt}.dpl-table tbody{margin:0;padding:0;font-size:10pt}.dpl-table thead td{border-bottom:1px solid grey;background:linear-gradient(180deg,#fff 0,#f8f8f8)}.dpl-table tbody tr.selected{background:linear-gradient(180deg,#abd3ee 0,#89c3eb)}.dpl-table tbody td.hover{background-color:#c8e8ff}.dpl-table tbody tr.hidden{display:none}.dpl-table thead pre{font-family:sans;padding:0;margin:0}.dpl-table td.strut{padding:0 4px}.dpl-table td.strut div{height:1px;overflow:hidden;white-space:nowrap}.dpl-table tr{transition:all .3s}.dpl-table tr.hover,.dpl-table tr:hover{background-color:#c8e8ff}.dpl-table td:last-of-type{border-right:0}.dpl-table tr:last-child td{border-bottom:1px solid grey}.dpl-table pre,pre.dpl-table-measure{margin-top:0;margin-bottom:0}.dpl-checkbox{padding:0;margin:0 .4em 0 0;display:inline}.dpl-checkbox:hover{color:#367ebd}.tiramisu-proc-title{font-weight:700}.tiramisu-proc-item,.tiramisu-proc-title{display:block;padding:4px;margin-bottom:2px;cursor:default}.tiramisu-proc-item{border-radius:10px;border:1px solid transparent;transition:background-color .3s ease-out,border-color .3s ease-out}.tiramisu-proc-item.highlighted{background-color:#e5f4ff;border:1px solid #c8e8ff}.tiramisu-proc-item.selected{background-color:#c8e8ff;border:1px solid #80a2bc}.tiramisu-proc-item:hover{background-color:#e5f4ff;border:1px solid #c8e8ff}.tiramisu-proc-item.selected:hover{background-color:#a3daff;border:1px solid #80a2bc}.tiramisu-proc-item-number{display:table-cell;width:24px;padding-right:6pt;cursor:default}.tiramisu-proc-item-content{display:table-cell;width:100%;cursor:default}.thumbnail{max-width:100%;max-height:100%;margin-top:3pt}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/css-loader!C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/postcss-loader/src?{\"ident\":\"postcss\",\"plugins\":[null,null]}!./src/tiramisu.css\n// module id = 45\n// module chunks = 0","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".tiramisu-panel-group{position:absolute;left:0;top:0;width:100%;height:100%;overflow:hidden;visibility:hidden}.tiramisu-panel{position:absolute;box-sizing:border-box;overflow:hidden;pointer-events:none;font-family:serif;font-size:10pt;padding:0;margin:0;border-style:solid;transform-style:preserve-3d}.tiramisu-panel>div{position:relative;top:50%;transform:translateY(-50%)}.tiramisu-panel>div>img{height:auto;transform:translateY(-50%)}.tiramisu-panel>div>canvas,.tiramisu-panel>div>img{display:block;max-height:100%;max-width:100%;margin:auto;position:relative;top:50%}.tiramisu-panel>div>canvas{transform:translateY(-50%) scaleY(-1)}.tiramisu-panel p{margin:0;padding:0}.tiramisu-panel-measure{position:absolute;font-family:serif;font-size:10pt;visibility:hidden;padding:0;margin:0;left:0;top:0}.tiramisu-banner{right:8px;overflow:hidden;padding:0;margin:0;z-index:10}.tiramisu-banner,.tiramisu-speaker{position:absolute;bottom:8px;visibility:visible;pointer-events:none}.tiramisu-speaker{display:block-inline;z-index:100;background-color:hsla(0,0%,94%,.5);border-radius:50%;padding:6px;left:8px;width:26px;height:26px;opacity:0;transition:opacity .3s ease-in-out}.tiramisu-speaker div{width:0;height:0;border:6px solid transparent;border-right-color:inherit;border-left:none;box-shadow:inset 10px 0;display:inline-block;padding:5px 3px;margin:2px}.tiramisu-speaker span{position:absolute;display:inline-block;border:1px solid transparent;border-right:1px solid #444;border-radius:50%;margin:auto;top:0;bottom:0;right:0;animation:tiramisu-wave-animation 1s linear 0s infinite alternate}.tiramisu-speaker span:nth-child(2){width:13px;height:13px;left:1px}.tiramisu-speaker span:nth-child(3){width:19px;height:19px;left:1px;animation-delay:.3s}.tiramisu-speaker span:last-child{width:25px;height:25px;left:0;animation-delay:.6s}@keyframes tiramisu-wave-animation{0%{opacity:1}to{opacity:.1}}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/css-loader!C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/postcss-loader/src?{\"ident\":\"postcss\",\"plugins\":[null,null]}!../solo-core/src/res/tiramisu.css\n// module id = 46\n// module chunks = 0","/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE\n * @version   v4.2.8+1e68dce6\n */\n\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.ES6Promise = factory());\n}(this, (function () { 'use strict';\n\nfunction objectOrFunction(x) {\n  var type = typeof x;\n  return x !== null && (type === 'object' || type === 'function');\n}\n\nfunction isFunction(x) {\n  return typeof x === 'function';\n}\n\n\n\nvar _isArray = void 0;\nif (Array.isArray) {\n  _isArray = Array.isArray;\n} else {\n  _isArray = function (x) {\n    return Object.prototype.toString.call(x) === '[object Array]';\n  };\n}\n\nvar isArray = _isArray;\n\nvar len = 0;\nvar vertxNext = void 0;\nvar customSchedulerFn = void 0;\n\nvar asap = function asap(callback, arg) {\n  queue[len] = callback;\n  queue[len + 1] = arg;\n  len += 2;\n  if (len === 2) {\n    // If len is 2, that means that we need to schedule an async flush.\n    // If additional callbacks are queued before the queue is flushed, they\n    // will be processed by this flush that we are scheduling.\n    if (customSchedulerFn) {\n      customSchedulerFn(flush);\n    } else {\n      scheduleFlush();\n    }\n  }\n};\n\nfunction setScheduler(scheduleFn) {\n  customSchedulerFn = scheduleFn;\n}\n\nfunction setAsap(asapFn) {\n  asap = asapFn;\n}\n\nvar browserWindow = typeof window !== 'undefined' ? window : undefined;\nvar browserGlobal = browserWindow || {};\nvar BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;\nvar isNode = typeof self === 'undefined' && typeof process !== 'undefined' && {}.toString.call(process) === '[object process]';\n\n// test for web worker but not in IE10\nvar isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';\n\n// node\nfunction useNextTick() {\n  // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n  // see https://github.com/cujojs/when/issues/410 for details\n  return function () {\n    return process.nextTick(flush);\n  };\n}\n\n// vertx\nfunction useVertxTimer() {\n  if (typeof vertxNext !== 'undefined') {\n    return function () {\n      vertxNext(flush);\n    };\n  }\n\n  return useSetTimeout();\n}\n\nfunction useMutationObserver() {\n  var iterations = 0;\n  var observer = new BrowserMutationObserver(flush);\n  var node = document.createTextNode('');\n  observer.observe(node, { characterData: true });\n\n  return function () {\n    node.data = iterations = ++iterations % 2;\n  };\n}\n\n// web worker\nfunction useMessageChannel() {\n  var channel = new MessageChannel();\n  channel.port1.onmessage = flush;\n  return function () {\n    return channel.port2.postMessage(0);\n  };\n}\n\nfunction useSetTimeout() {\n  // Store setTimeout reference so es6-promise will be unaffected by\n  // other code modifying setTimeout (like sinon.useFakeTimers())\n  var globalSetTimeout = setTimeout;\n  return function () {\n    return globalSetTimeout(flush, 1);\n  };\n}\n\nvar queue = new Array(1000);\nfunction flush() {\n  for (var i = 0; i < len; i += 2) {\n    var callback = queue[i];\n    var arg = queue[i + 1];\n\n    callback(arg);\n\n    queue[i] = undefined;\n    queue[i + 1] = undefined;\n  }\n\n  len = 0;\n}\n\nfunction attemptVertx() {\n  try {\n    var vertx = Function('return this')().require('vertx');\n    vertxNext = vertx.runOnLoop || vertx.runOnContext;\n    return useVertxTimer();\n  } catch (e) {\n    return useSetTimeout();\n  }\n}\n\nvar scheduleFlush = void 0;\n// Decide what async method to use to triggering processing of queued callbacks:\nif (isNode) {\n  scheduleFlush = useNextTick();\n} else if (BrowserMutationObserver) {\n  scheduleFlush = useMutationObserver();\n} else if (isWorker) {\n  scheduleFlush = useMessageChannel();\n} else if (browserWindow === undefined && typeof require === 'function') {\n  scheduleFlush = attemptVertx();\n} else {\n  scheduleFlush = useSetTimeout();\n}\n\nfunction then(onFulfillment, onRejection) {\n  var parent = this;\n\n  var child = new this.constructor(noop);\n\n  if (child[PROMISE_ID] === undefined) {\n    makePromise(child);\n  }\n\n  var _state = parent._state;\n\n\n  if (_state) {\n    var callback = arguments[_state - 1];\n    asap(function () {\n      return invokeCallback(_state, child, callback, parent._result);\n    });\n  } else {\n    subscribe(parent, child, onFulfillment, onRejection);\n  }\n\n  return child;\n}\n\n/**\n  `Promise.resolve` returns a promise that will become resolved with the\n  passed `value`. It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    resolve(1);\n  });\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.resolve(1);\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  @method resolve\n  @static\n  @param {Any} value value that the returned promise will be resolved with\n  Useful for tooling.\n  @return {Promise} a promise that will become fulfilled with the given\n  `value`\n*/\nfunction resolve$1(object) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (object && typeof object === 'object' && object.constructor === Constructor) {\n    return object;\n  }\n\n  var promise = new Constructor(noop);\n  resolve(promise, object);\n  return promise;\n}\n\nvar PROMISE_ID = Math.random().toString(36).substring(2);\n\nfunction noop() {}\n\nvar PENDING = void 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\n\nfunction selfFulfillment() {\n  return new TypeError(\"You cannot resolve a promise with itself\");\n}\n\nfunction cannotReturnOwn() {\n  return new TypeError('A promises callback cannot return that same promise.');\n}\n\nfunction tryThen(then$$1, value, fulfillmentHandler, rejectionHandler) {\n  try {\n    then$$1.call(value, fulfillmentHandler, rejectionHandler);\n  } catch (e) {\n    return e;\n  }\n}\n\nfunction handleForeignThenable(promise, thenable, then$$1) {\n  asap(function (promise) {\n    var sealed = false;\n    var error = tryThen(then$$1, thenable, function (value) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n      if (thenable !== value) {\n        resolve(promise, value);\n      } else {\n        fulfill(promise, value);\n      }\n    }, function (reason) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n\n      reject(promise, reason);\n    }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n    if (!sealed && error) {\n      sealed = true;\n      reject(promise, error);\n    }\n  }, promise);\n}\n\nfunction handleOwnThenable(promise, thenable) {\n  if (thenable._state === FULFILLED) {\n    fulfill(promise, thenable._result);\n  } else if (thenable._state === REJECTED) {\n    reject(promise, thenable._result);\n  } else {\n    subscribe(thenable, undefined, function (value) {\n      return resolve(promise, value);\n    }, function (reason) {\n      return reject(promise, reason);\n    });\n  }\n}\n\nfunction handleMaybeThenable(promise, maybeThenable, then$$1) {\n  if (maybeThenable.constructor === promise.constructor && then$$1 === then && maybeThenable.constructor.resolve === resolve$1) {\n    handleOwnThenable(promise, maybeThenable);\n  } else {\n    if (then$$1 === undefined) {\n      fulfill(promise, maybeThenable);\n    } else if (isFunction(then$$1)) {\n      handleForeignThenable(promise, maybeThenable, then$$1);\n    } else {\n      fulfill(promise, maybeThenable);\n    }\n  }\n}\n\nfunction resolve(promise, value) {\n  if (promise === value) {\n    reject(promise, selfFulfillment());\n  } else if (objectOrFunction(value)) {\n    var then$$1 = void 0;\n    try {\n      then$$1 = value.then;\n    } catch (error) {\n      reject(promise, error);\n      return;\n    }\n    handleMaybeThenable(promise, value, then$$1);\n  } else {\n    fulfill(promise, value);\n  }\n}\n\nfunction publishRejection(promise) {\n  if (promise._onerror) {\n    promise._onerror(promise._result);\n  }\n\n  publish(promise);\n}\n\nfunction fulfill(promise, value) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n\n  promise._result = value;\n  promise._state = FULFILLED;\n\n  if (promise._subscribers.length !== 0) {\n    asap(publish, promise);\n  }\n}\n\nfunction reject(promise, reason) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n  promise._state = REJECTED;\n  promise._result = reason;\n\n  asap(publishRejection, promise);\n}\n\nfunction subscribe(parent, child, onFulfillment, onRejection) {\n  var _subscribers = parent._subscribers;\n  var length = _subscribers.length;\n\n\n  parent._onerror = null;\n\n  _subscribers[length] = child;\n  _subscribers[length + FULFILLED] = onFulfillment;\n  _subscribers[length + REJECTED] = onRejection;\n\n  if (length === 0 && parent._state) {\n    asap(publish, parent);\n  }\n}\n\nfunction publish(promise) {\n  var subscribers = promise._subscribers;\n  var settled = promise._state;\n\n  if (subscribers.length === 0) {\n    return;\n  }\n\n  var child = void 0,\n      callback = void 0,\n      detail = promise._result;\n\n  for (var i = 0; i < subscribers.length; i += 3) {\n    child = subscribers[i];\n    callback = subscribers[i + settled];\n\n    if (child) {\n      invokeCallback(settled, child, callback, detail);\n    } else {\n      callback(detail);\n    }\n  }\n\n  promise._subscribers.length = 0;\n}\n\nfunction invokeCallback(settled, promise, callback, detail) {\n  var hasCallback = isFunction(callback),\n      value = void 0,\n      error = void 0,\n      succeeded = true;\n\n  if (hasCallback) {\n    try {\n      value = callback(detail);\n    } catch (e) {\n      succeeded = false;\n      error = e;\n    }\n\n    if (promise === value) {\n      reject(promise, cannotReturnOwn());\n      return;\n    }\n  } else {\n    value = detail;\n  }\n\n  if (promise._state !== PENDING) {\n    // noop\n  } else if (hasCallback && succeeded) {\n    resolve(promise, value);\n  } else if (succeeded === false) {\n    reject(promise, error);\n  } else if (settled === FULFILLED) {\n    fulfill(promise, value);\n  } else if (settled === REJECTED) {\n    reject(promise, value);\n  }\n}\n\nfunction initializePromise(promise, resolver) {\n  try {\n    resolver(function resolvePromise(value) {\n      resolve(promise, value);\n    }, function rejectPromise(reason) {\n      reject(promise, reason);\n    });\n  } catch (e) {\n    reject(promise, e);\n  }\n}\n\nvar id = 0;\nfunction nextId() {\n  return id++;\n}\n\nfunction makePromise(promise) {\n  promise[PROMISE_ID] = id++;\n  promise._state = undefined;\n  promise._result = undefined;\n  promise._subscribers = [];\n}\n\nfunction validationError() {\n  return new Error('Array Methods must be provided an Array');\n}\n\nvar Enumerator = function () {\n  function Enumerator(Constructor, input) {\n    this._instanceConstructor = Constructor;\n    this.promise = new Constructor(noop);\n\n    if (!this.promise[PROMISE_ID]) {\n      makePromise(this.promise);\n    }\n\n    if (isArray(input)) {\n      this.length = input.length;\n      this._remaining = input.length;\n\n      this._result = new Array(this.length);\n\n      if (this.length === 0) {\n        fulfill(this.promise, this._result);\n      } else {\n        this.length = this.length || 0;\n        this._enumerate(input);\n        if (this._remaining === 0) {\n          fulfill(this.promise, this._result);\n        }\n      }\n    } else {\n      reject(this.promise, validationError());\n    }\n  }\n\n  Enumerator.prototype._enumerate = function _enumerate(input) {\n    for (var i = 0; this._state === PENDING && i < input.length; i++) {\n      this._eachEntry(input[i], i);\n    }\n  };\n\n  Enumerator.prototype._eachEntry = function _eachEntry(entry, i) {\n    var c = this._instanceConstructor;\n    var resolve$$1 = c.resolve;\n\n\n    if (resolve$$1 === resolve$1) {\n      var _then = void 0;\n      var error = void 0;\n      var didError = false;\n      try {\n        _then = entry.then;\n      } catch (e) {\n        didError = true;\n        error = e;\n      }\n\n      if (_then === then && entry._state !== PENDING) {\n        this._settledAt(entry._state, i, entry._result);\n      } else if (typeof _then !== 'function') {\n        this._remaining--;\n        this._result[i] = entry;\n      } else if (c === Promise$1) {\n        var promise = new c(noop);\n        if (didError) {\n          reject(promise, error);\n        } else {\n          handleMaybeThenable(promise, entry, _then);\n        }\n        this._willSettleAt(promise, i);\n      } else {\n        this._willSettleAt(new c(function (resolve$$1) {\n          return resolve$$1(entry);\n        }), i);\n      }\n    } else {\n      this._willSettleAt(resolve$$1(entry), i);\n    }\n  };\n\n  Enumerator.prototype._settledAt = function _settledAt(state, i, value) {\n    var promise = this.promise;\n\n\n    if (promise._state === PENDING) {\n      this._remaining--;\n\n      if (state === REJECTED) {\n        reject(promise, value);\n      } else {\n        this._result[i] = value;\n      }\n    }\n\n    if (this._remaining === 0) {\n      fulfill(promise, this._result);\n    }\n  };\n\n  Enumerator.prototype._willSettleAt = function _willSettleAt(promise, i) {\n    var enumerator = this;\n\n    subscribe(promise, undefined, function (value) {\n      return enumerator._settledAt(FULFILLED, i, value);\n    }, function (reason) {\n      return enumerator._settledAt(REJECTED, i, reason);\n    });\n  };\n\n  return Enumerator;\n}();\n\n/**\n  `Promise.all` accepts an array of promises, and returns a new promise which\n  is fulfilled with an array of fulfillment values for the passed promises, or\n  rejected with the reason of the first passed promise to be rejected. It casts all\n  elements of the passed iterable to promises as it runs this algorithm.\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = resolve(2);\n  let promise3 = resolve(3);\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // The array here would be [ 1, 2, 3 ];\n  });\n  ```\n\n  If any of the `promises` given to `all` are rejected, the first promise\n  that is rejected will be given as an argument to the returned promises's\n  rejection handler. For example:\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = reject(new Error(\"2\"));\n  let promise3 = reject(new Error(\"3\"));\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // Code here never runs because there are rejected promises!\n  }, function(error) {\n    // error.message === \"2\"\n  });\n  ```\n\n  @method all\n  @static\n  @param {Array} entries array of promises\n  @param {String} label optional string for labeling the promise.\n  Useful for tooling.\n  @return {Promise} promise that is fulfilled when all `promises` have been\n  fulfilled, or rejected if any of them become rejected.\n  @static\n*/\nfunction all(entries) {\n  return new Enumerator(this, entries).promise;\n}\n\n/**\n  `Promise.race` returns a new promise which is settled in the same way as the\n  first passed promise to settle.\n\n  Example:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 2');\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // result === 'promise 2' because it was resolved before promise1\n    // was resolved.\n  });\n  ```\n\n  `Promise.race` is deterministic in that only the state of the first\n  settled promise matters. For example, even if other promises given to the\n  `promises` array argument are resolved, but the first settled promise has\n  become rejected before the other promises became fulfilled, the returned\n  promise will become rejected:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      reject(new Error('promise 2'));\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // Code here never runs\n  }, function(reason){\n    // reason.message === 'promise 2' because promise 2 became rejected before\n    // promise 1 became fulfilled\n  });\n  ```\n\n  An example real-world use case is implementing timeouts:\n\n  ```javascript\n  Promise.race([ajax('foo.json'), timeout(5000)])\n  ```\n\n  @method race\n  @static\n  @param {Array} promises array of promises to observe\n  Useful for tooling.\n  @return {Promise} a promise which settles in the same way as the first passed\n  promise to settle.\n*/\nfunction race(entries) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (!isArray(entries)) {\n    return new Constructor(function (_, reject) {\n      return reject(new TypeError('You must pass an array to race.'));\n    });\n  } else {\n    return new Constructor(function (resolve, reject) {\n      var length = entries.length;\n      for (var i = 0; i < length; i++) {\n        Constructor.resolve(entries[i]).then(resolve, reject);\n      }\n    });\n  }\n}\n\n/**\n  `Promise.reject` returns a promise rejected with the passed `reason`.\n  It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    reject(new Error('WHOOPS'));\n  });\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.reject(new Error('WHOOPS'));\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  @method reject\n  @static\n  @param {Any} reason value that the returned promise will be rejected with.\n  Useful for tooling.\n  @return {Promise} a promise rejected with the given `reason`.\n*/\nfunction reject$1(reason) {\n  /*jshint validthis:true */\n  var Constructor = this;\n  var promise = new Constructor(noop);\n  reject(promise, reason);\n  return promise;\n}\n\nfunction needsResolver() {\n  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n}\n\nfunction needsNew() {\n  throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n}\n\n/**\n  Promise objects represent the eventual result of an asynchronous operation. The\n  primary way of interacting with a promise is through its `then` method, which\n  registers callbacks to receive either a promise's eventual value or the reason\n  why the promise cannot be fulfilled.\n\n  Terminology\n  -----------\n\n  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n  - `thenable` is an object or function that defines a `then` method.\n  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n  - `exception` is a value that is thrown using the throw statement.\n  - `reason` is a value that indicates why a promise was rejected.\n  - `settled` the final resting state of a promise, fulfilled or rejected.\n\n  A promise can be in one of three states: pending, fulfilled, or rejected.\n\n  Promises that are fulfilled have a fulfillment value and are in the fulfilled\n  state.  Promises that are rejected have a rejection reason and are in the\n  rejected state.  A fulfillment value is never a thenable.\n\n  Promises can also be said to *resolve* a value.  If this value is also a\n  promise, then the original promise's settled state will match the value's\n  settled state.  So a promise that *resolves* a promise that rejects will\n  itself reject, and a promise that *resolves* a promise that fulfills will\n  itself fulfill.\n\n\n  Basic Usage:\n  ------------\n\n  ```js\n  let promise = new Promise(function(resolve, reject) {\n    // on success\n    resolve(value);\n\n    // on failure\n    reject(reason);\n  });\n\n  promise.then(function(value) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Advanced Usage:\n  ---------------\n\n  Promises shine when abstracting away asynchronous interactions such as\n  `XMLHttpRequest`s.\n\n  ```js\n  function getJSON(url) {\n    return new Promise(function(resolve, reject){\n      let xhr = new XMLHttpRequest();\n\n      xhr.open('GET', url);\n      xhr.onreadystatechange = handler;\n      xhr.responseType = 'json';\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send();\n\n      function handler() {\n        if (this.readyState === this.DONE) {\n          if (this.status === 200) {\n            resolve(this.response);\n          } else {\n            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n          }\n        }\n      };\n    });\n  }\n\n  getJSON('/posts.json').then(function(json) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Unlike callbacks, promises are great composable primitives.\n\n  ```js\n  Promise.all([\n    getJSON('/posts'),\n    getJSON('/comments')\n  ]).then(function(values){\n    values[0] // => postsJSON\n    values[1] // => commentsJSON\n\n    return values;\n  });\n  ```\n\n  @class Promise\n  @param {Function} resolver\n  Useful for tooling.\n  @constructor\n*/\n\nvar Promise$1 = function () {\n  function Promise(resolver) {\n    this[PROMISE_ID] = nextId();\n    this._result = this._state = undefined;\n    this._subscribers = [];\n\n    if (noop !== resolver) {\n      typeof resolver !== 'function' && needsResolver();\n      this instanceof Promise ? initializePromise(this, resolver) : needsNew();\n    }\n  }\n\n  /**\n  The primary way of interacting with a promise is through its `then` method,\n  which registers callbacks to receive either a promise's eventual value or the\n  reason why the promise cannot be fulfilled.\n   ```js\n  findUser().then(function(user){\n    // user is available\n  }, function(reason){\n    // user is unavailable, and you are given the reason why\n  });\n  ```\n   Chaining\n  --------\n   The return value of `then` is itself a promise.  This second, 'downstream'\n  promise is resolved with the return value of the first promise's fulfillment\n  or rejection handler, or rejected if the handler throws an exception.\n   ```js\n  findUser().then(function (user) {\n    return user.name;\n  }, function (reason) {\n    return 'default name';\n  }).then(function (userName) {\n    // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n    // will be `'default name'`\n  });\n   findUser().then(function (user) {\n    throw new Error('Found user, but still unhappy');\n  }, function (reason) {\n    throw new Error('`findUser` rejected and we're unhappy');\n  }).then(function (value) {\n    // never reached\n  }, function (reason) {\n    // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n    // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n  });\n  ```\n  If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n   ```js\n  findUser().then(function (user) {\n    throw new PedagogicalException('Upstream error');\n  }).then(function (value) {\n    // never reached\n  }).then(function (value) {\n    // never reached\n  }, function (reason) {\n    // The `PedgagocialException` is propagated all the way down to here\n  });\n  ```\n   Assimilation\n  ------------\n   Sometimes the value you want to propagate to a downstream promise can only be\n  retrieved asynchronously. This can be achieved by returning a promise in the\n  fulfillment or rejection handler. The downstream promise will then be pending\n  until the returned promise is settled. This is called *assimilation*.\n   ```js\n  findUser().then(function (user) {\n    return findCommentsByAuthor(user);\n  }).then(function (comments) {\n    // The user's comments are now available\n  });\n  ```\n   If the assimliated promise rejects, then the downstream promise will also reject.\n   ```js\n  findUser().then(function (user) {\n    return findCommentsByAuthor(user);\n  }).then(function (comments) {\n    // If `findCommentsByAuthor` fulfills, we'll have the value here\n  }, function (reason) {\n    // If `findCommentsByAuthor` rejects, we'll have the reason here\n  });\n  ```\n   Simple Example\n  --------------\n   Synchronous Example\n   ```javascript\n  let result;\n   try {\n    result = findResult();\n    // success\n  } catch(reason) {\n    // failure\n  }\n  ```\n   Errback Example\n   ```js\n  findResult(function(result, err){\n    if (err) {\n      // failure\n    } else {\n      // success\n    }\n  });\n  ```\n   Promise Example;\n   ```javascript\n  findResult().then(function(result){\n    // success\n  }, function(reason){\n    // failure\n  });\n  ```\n   Advanced Example\n  --------------\n   Synchronous Example\n   ```javascript\n  let author, books;\n   try {\n    author = findAuthor();\n    books  = findBooksByAuthor(author);\n    // success\n  } catch(reason) {\n    // failure\n  }\n  ```\n   Errback Example\n   ```js\n   function foundBooks(books) {\n   }\n   function failure(reason) {\n   }\n   findAuthor(function(author, err){\n    if (err) {\n      failure(err);\n      // failure\n    } else {\n      try {\n        findBoooksByAuthor(author, function(books, err) {\n          if (err) {\n            failure(err);\n          } else {\n            try {\n              foundBooks(books);\n            } catch(reason) {\n              failure(reason);\n            }\n          }\n        });\n      } catch(error) {\n        failure(err);\n      }\n      // success\n    }\n  });\n  ```\n   Promise Example;\n   ```javascript\n  findAuthor().\n    then(findBooksByAuthor).\n    then(function(books){\n      // found books\n  }).catch(function(reason){\n    // something went wrong\n  });\n  ```\n   @method then\n  @param {Function} onFulfilled\n  @param {Function} onRejected\n  Useful for tooling.\n  @return {Promise}\n  */\n\n  /**\n  `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n  as the catch block of a try/catch statement.\n  ```js\n  function findAuthor(){\n  throw new Error('couldn't find that author');\n  }\n  // synchronous\n  try {\n  findAuthor();\n  } catch(reason) {\n  // something went wrong\n  }\n  // async with promises\n  findAuthor().catch(function(reason){\n  // something went wrong\n  });\n  ```\n  @method catch\n  @param {Function} onRejection\n  Useful for tooling.\n  @return {Promise}\n  */\n\n\n  Promise.prototype.catch = function _catch(onRejection) {\n    return this.then(null, onRejection);\n  };\n\n  /**\n    `finally` will be invoked regardless of the promise's fate just as native\n    try/catch/finally behaves\n  \n    Synchronous example:\n  \n    ```js\n    findAuthor() {\n      if (Math.random() > 0.5) {\n        throw new Error();\n      }\n      return new Author();\n    }\n  \n    try {\n      return findAuthor(); // succeed or fail\n    } catch(error) {\n      return findOtherAuther();\n    } finally {\n      // always runs\n      // doesn't affect the return value\n    }\n    ```\n  \n    Asynchronous example:\n  \n    ```js\n    findAuthor().catch(function(reason){\n      return findOtherAuther();\n    }).finally(function(){\n      // author was either found, or not\n    });\n    ```\n  \n    @method finally\n    @param {Function} callback\n    @return {Promise}\n  */\n\n\n  Promise.prototype.finally = function _finally(callback) {\n    var promise = this;\n    var constructor = promise.constructor;\n\n    if (isFunction(callback)) {\n      return promise.then(function (value) {\n        return constructor.resolve(callback()).then(function () {\n          return value;\n        });\n      }, function (reason) {\n        return constructor.resolve(callback()).then(function () {\n          throw reason;\n        });\n      });\n    }\n\n    return promise.then(callback, callback);\n  };\n\n  return Promise;\n}();\n\nPromise$1.prototype.then = then;\nPromise$1.all = all;\nPromise$1.race = race;\nPromise$1.resolve = resolve$1;\nPromise$1.reject = reject$1;\nPromise$1._setScheduler = setScheduler;\nPromise$1._setAsap = setAsap;\nPromise$1._asap = asap;\n\n/*global self*/\nfunction polyfill() {\n  var local = void 0;\n\n  if (typeof global !== 'undefined') {\n    local = global;\n  } else if (typeof self !== 'undefined') {\n    local = self;\n  } else {\n    try {\n      local = Function('return this')();\n    } catch (e) {\n      throw new Error('polyfill failed because global object is unavailable in this environment');\n    }\n  }\n\n  var P = local.Promise;\n\n  if (P) {\n    var promiseToString = null;\n    try {\n      promiseToString = Object.prototype.toString.call(P.resolve());\n    } catch (e) {\n      // silently ignored\n    }\n\n    if (promiseToString === '[object Promise]' && !P.cast) {\n      return;\n    }\n  }\n\n  local.Promise = Promise$1;\n}\n\n// Strange compat..\nPromise$1.polyfill = polyfill;\nPromise$1.Promise = Promise$1;\n\nreturn Promise$1;\n\n})));\n\n\n\n//# sourceMappingURL=es6-promise.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/es6-promise/dist/es6-promise.js\n// module id = 47\n// module chunks = 0","// Top level file is just a mixin of submodules & constants\n'use strict';\n\nvar assign    = require('./lib/utils/common').assign;\n\nvar deflate   = require('./lib/deflate');\nvar inflate   = require('./lib/inflate');\nvar constants = require('./lib/zlib/constants');\n\nvar pako = {};\n\nassign(pako, deflate, inflate, constants);\n\nmodule.exports = pako;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/pako/index.js\n// module id = 48\n// module chunks = 0","'use strict';\n\n\nvar zlib_deflate = require('./zlib/deflate');\nvar utils        = require('./utils/common');\nvar strings      = require('./utils/strings');\nvar msg          = require('./zlib/messages');\nvar ZStream      = require('./zlib/zstream');\n\nvar toString = Object.prototype.toString;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nvar Z_NO_FLUSH      = 0;\nvar Z_FINISH        = 4;\n\nvar Z_OK            = 0;\nvar Z_STREAM_END    = 1;\nvar Z_SYNC_FLUSH    = 2;\n\nvar Z_DEFAULT_COMPRESSION = -1;\n\nvar Z_DEFAULT_STRATEGY    = 0;\n\nvar Z_DEFLATED  = 8;\n\n/* ===========================================================================*/\n\n\n/**\n * class Deflate\n *\n * Generic JS-style wrapper for zlib calls. If you don't need\n * streaming behaviour - use more simple functions: [[deflate]],\n * [[deflateRaw]] and [[gzip]].\n **/\n\n/* internal\n * Deflate.chunks -> Array\n *\n * Chunks of output data, if [[Deflate#onData]] not overridden.\n **/\n\n/**\n * Deflate.result -> Uint8Array|Array\n *\n * Compressed result, generated by default [[Deflate#onData]]\n * and [[Deflate#onEnd]] handlers. Filled after you push last chunk\n * (call [[Deflate#push]] with `Z_FINISH` / `true` param)  or if you\n * push a chunk with explicit flush (call [[Deflate#push]] with\n * `Z_SYNC_FLUSH` param).\n **/\n\n/**\n * Deflate.err -> Number\n *\n * Error code after deflate finished. 0 (Z_OK) on success.\n * You will not need it in real life, because deflate errors\n * are possible only on wrong options or bad `onData` / `onEnd`\n * custom handlers.\n **/\n\n/**\n * Deflate.msg -> String\n *\n * Error message, if [[Deflate.err]] != 0\n **/\n\n\n/**\n * new Deflate(options)\n * - options (Object): zlib deflate options.\n *\n * Creates new deflator instance with specified params. Throws exception\n * on bad params. Supported options:\n *\n * - `level`\n * - `windowBits`\n * - `memLevel`\n * - `strategy`\n * - `dictionary`\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Additional options, for internal needs:\n *\n * - `chunkSize` - size of generated data chunks (16K by default)\n * - `raw` (Boolean) - do raw deflate\n * - `gzip` (Boolean) - create gzip wrapper\n * - `to` (String) - if equal to 'string', then result will be \"binary string\"\n *    (each char code [0..255])\n * - `header` (Object) - custom header for gzip\n *   - `text` (Boolean) - true if compressed data believed to be text\n *   - `time` (Number) - modification time, unix timestamp\n *   - `os` (Number) - operation system code\n *   - `extra` (Array) - array of bytes with extra data (max 65536)\n *   - `name` (String) - file name (binary string)\n *   - `comment` (String) - comment (binary string)\n *   - `hcrc` (Boolean) - true if header crc should be added\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , chunk1 = Uint8Array([1,2,3,4,5,6,7,8,9])\n *   , chunk2 = Uint8Array([10,11,12,13,14,15,16,17,18,19]);\n *\n * var deflate = new pako.Deflate({ level: 3});\n *\n * deflate.push(chunk1, false);\n * deflate.push(chunk2, true);  // true -> last chunk\n *\n * if (deflate.err) { throw new Error(deflate.err); }\n *\n * console.log(deflate.result);\n * ```\n **/\nfunction Deflate(options) {\n  if (!(this instanceof Deflate)) return new Deflate(options);\n\n  this.options = utils.assign({\n    level: Z_DEFAULT_COMPRESSION,\n    method: Z_DEFLATED,\n    chunkSize: 16384,\n    windowBits: 15,\n    memLevel: 8,\n    strategy: Z_DEFAULT_STRATEGY,\n    to: ''\n  }, options || {});\n\n  var opt = this.options;\n\n  if (opt.raw && (opt.windowBits > 0)) {\n    opt.windowBits = -opt.windowBits;\n  }\n\n  else if (opt.gzip && (opt.windowBits > 0) && (opt.windowBits < 16)) {\n    opt.windowBits += 16;\n  }\n\n  this.err    = 0;      // error code, if happens (0 = Z_OK)\n  this.msg    = '';     // error message\n  this.ended  = false;  // used to avoid multiple onEnd() calls\n  this.chunks = [];     // chunks of compressed data\n\n  this.strm = new ZStream();\n  this.strm.avail_out = 0;\n\n  var status = zlib_deflate.deflateInit2(\n    this.strm,\n    opt.level,\n    opt.method,\n    opt.windowBits,\n    opt.memLevel,\n    opt.strategy\n  );\n\n  if (status !== Z_OK) {\n    throw new Error(msg[status]);\n  }\n\n  if (opt.header) {\n    zlib_deflate.deflateSetHeader(this.strm, opt.header);\n  }\n\n  if (opt.dictionary) {\n    var dict;\n    // Convert data if needed\n    if (typeof opt.dictionary === 'string') {\n      // If we need to compress text, change encoding to utf8.\n      dict = strings.string2buf(opt.dictionary);\n    } else if (toString.call(opt.dictionary) === '[object ArrayBuffer]') {\n      dict = new Uint8Array(opt.dictionary);\n    } else {\n      dict = opt.dictionary;\n    }\n\n    status = zlib_deflate.deflateSetDictionary(this.strm, dict);\n\n    if (status !== Z_OK) {\n      throw new Error(msg[status]);\n    }\n\n    this._dict_set = true;\n  }\n}\n\n/**\n * Deflate#push(data[, mode]) -> Boolean\n * - data (Uint8Array|Array|ArrayBuffer|String): input data. Strings will be\n *   converted to utf8 byte sequence.\n * - mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE modes.\n *   See constants. Skipped or `false` means Z_NO_FLUSH, `true` means Z_FINISH.\n *\n * Sends input data to deflate pipe, generating [[Deflate#onData]] calls with\n * new compressed chunks. Returns `true` on success. The last data block must have\n * mode Z_FINISH (or `true`). That will flush internal pending buffers and call\n * [[Deflate#onEnd]]. For interim explicit flushes (without ending the stream) you\n * can use mode Z_SYNC_FLUSH, keeping the compression context.\n *\n * On fail call [[Deflate#onEnd]] with error code and return false.\n *\n * We strongly recommend to use `Uint8Array` on input for best speed (output\n * array format is detected automatically). Also, don't skip last param and always\n * use the same type in your code (boolean or number). That will improve JS speed.\n *\n * For regular `Array`-s make sure all elements are [0..255].\n *\n * ##### Example\n *\n * ```javascript\n * push(chunk, false); // push one of data chunks\n * ...\n * push(chunk, true);  // push last chunk\n * ```\n **/\nDeflate.prototype.push = function (data, mode) {\n  var strm = this.strm;\n  var chunkSize = this.options.chunkSize;\n  var status, _mode;\n\n  if (this.ended) { return false; }\n\n  _mode = (mode === ~~mode) ? mode : ((mode === true) ? Z_FINISH : Z_NO_FLUSH);\n\n  // Convert data if needed\n  if (typeof data === 'string') {\n    // If we need to compress text, change encoding to utf8.\n    strm.input = strings.string2buf(data);\n  } else if (toString.call(data) === '[object ArrayBuffer]') {\n    strm.input = new Uint8Array(data);\n  } else {\n    strm.input = data;\n  }\n\n  strm.next_in = 0;\n  strm.avail_in = strm.input.length;\n\n  do {\n    if (strm.avail_out === 0) {\n      strm.output = new utils.Buf8(chunkSize);\n      strm.next_out = 0;\n      strm.avail_out = chunkSize;\n    }\n    status = zlib_deflate.deflate(strm, _mode);    /* no bad return value */\n\n    if (status !== Z_STREAM_END && status !== Z_OK) {\n      this.onEnd(status);\n      this.ended = true;\n      return false;\n    }\n    if (strm.avail_out === 0 || (strm.avail_in === 0 && (_mode === Z_FINISH || _mode === Z_SYNC_FLUSH))) {\n      if (this.options.to === 'string') {\n        this.onData(strings.buf2binstring(utils.shrinkBuf(strm.output, strm.next_out)));\n      } else {\n        this.onData(utils.shrinkBuf(strm.output, strm.next_out));\n      }\n    }\n  } while ((strm.avail_in > 0 || strm.avail_out === 0) && status !== Z_STREAM_END);\n\n  // Finalize on the last chunk.\n  if (_mode === Z_FINISH) {\n    status = zlib_deflate.deflateEnd(this.strm);\n    this.onEnd(status);\n    this.ended = true;\n    return status === Z_OK;\n  }\n\n  // callback interim results if Z_SYNC_FLUSH.\n  if (_mode === Z_SYNC_FLUSH) {\n    this.onEnd(Z_OK);\n    strm.avail_out = 0;\n    return true;\n  }\n\n  return true;\n};\n\n\n/**\n * Deflate#onData(chunk) -> Void\n * - chunk (Uint8Array|Array|String): output data. Type of array depends\n *   on js engine support. When string output requested, each chunk\n *   will be string.\n *\n * By default, stores data blocks in `chunks[]` property and glue\n * those in `onEnd`. Override this handler, if you need another behaviour.\n **/\nDeflate.prototype.onData = function (chunk) {\n  this.chunks.push(chunk);\n};\n\n\n/**\n * Deflate#onEnd(status) -> Void\n * - status (Number): deflate status. 0 (Z_OK) on success,\n *   other if not.\n *\n * Called once after you tell deflate that the input stream is\n * complete (Z_FINISH) or should be flushed (Z_SYNC_FLUSH)\n * or if an error happened. By default - join collected chunks,\n * free memory and fill `results` / `err` properties.\n **/\nDeflate.prototype.onEnd = function (status) {\n  // On success - join\n  if (status === Z_OK) {\n    if (this.options.to === 'string') {\n      this.result = this.chunks.join('');\n    } else {\n      this.result = utils.flattenChunks(this.chunks);\n    }\n  }\n  this.chunks = [];\n  this.err = status;\n  this.msg = this.strm.msg;\n};\n\n\n/**\n * deflate(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * Compress `data` with deflate algorithm and `options`.\n *\n * Supported options are:\n *\n * - level\n * - windowBits\n * - memLevel\n * - strategy\n * - dictionary\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Sugar (options):\n *\n * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify\n *   negative windowBits implicitly.\n * - `to` (String) - if equal to 'string', then result will be \"binary string\"\n *    (each char code [0..255])\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , data = Uint8Array([1,2,3,4,5,6,7,8,9]);\n *\n * console.log(pako.deflate(data));\n * ```\n **/\nfunction deflate(input, options) {\n  var deflator = new Deflate(options);\n\n  deflator.push(input, true);\n\n  // That will never happens, if you don't cheat with options :)\n  if (deflator.err) { throw deflator.msg || msg[deflator.err]; }\n\n  return deflator.result;\n}\n\n\n/**\n * deflateRaw(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * The same as [[deflate]], but creates raw data, without wrapper\n * (header and adler32 crc).\n **/\nfunction deflateRaw(input, options) {\n  options = options || {};\n  options.raw = true;\n  return deflate(input, options);\n}\n\n\n/**\n * gzip(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * The same as [[deflate]], but create gzip wrapper instead of\n * deflate one.\n **/\nfunction gzip(input, options) {\n  options = options || {};\n  options.gzip = true;\n  return deflate(input, options);\n}\n\n\nexports.Deflate = Deflate;\nexports.deflate = deflate;\nexports.deflateRaw = deflateRaw;\nexports.gzip = gzip;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/pako/lib/deflate.js\n// module id = 49\n// module chunks = 0","'use strict';\n\n\nvar zlib_inflate = require('./zlib/inflate');\nvar utils        = require('./utils/common');\nvar strings      = require('./utils/strings');\nvar c            = require('./zlib/constants');\nvar msg          = require('./zlib/messages');\nvar ZStream      = require('./zlib/zstream');\nvar GZheader     = require('./zlib/gzheader');\n\nvar toString = Object.prototype.toString;\n\n/**\n * class Inflate\n *\n * Generic JS-style wrapper for zlib calls. If you don't need\n * streaming behaviour - use more simple functions: [[inflate]]\n * and [[inflateRaw]].\n **/\n\n/* internal\n * inflate.chunks -> Array\n *\n * Chunks of output data, if [[Inflate#onData]] not overridden.\n **/\n\n/**\n * Inflate.result -> Uint8Array|Array|String\n *\n * Uncompressed result, generated by default [[Inflate#onData]]\n * and [[Inflate#onEnd]] handlers. Filled after you push last chunk\n * (call [[Inflate#push]] with `Z_FINISH` / `true` param) or if you\n * push a chunk with explicit flush (call [[Inflate#push]] with\n * `Z_SYNC_FLUSH` param).\n **/\n\n/**\n * Inflate.err -> Number\n *\n * Error code after inflate finished. 0 (Z_OK) on success.\n * Should be checked if broken data possible.\n **/\n\n/**\n * Inflate.msg -> String\n *\n * Error message, if [[Inflate.err]] != 0\n **/\n\n\n/**\n * new Inflate(options)\n * - options (Object): zlib inflate options.\n *\n * Creates new inflator instance with specified params. Throws exception\n * on bad params. Supported options:\n *\n * - `windowBits`\n * - `dictionary`\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Additional options, for internal needs:\n *\n * - `chunkSize` - size of generated data chunks (16K by default)\n * - `raw` (Boolean) - do raw inflate\n * - `to` (String) - if equal to 'string', then result will be converted\n *   from utf8 to utf16 (javascript) string. When string output requested,\n *   chunk length can differ from `chunkSize`, depending on content.\n *\n * By default, when no options set, autodetect deflate/gzip data format via\n * wrapper header.\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , chunk1 = Uint8Array([1,2,3,4,5,6,7,8,9])\n *   , chunk2 = Uint8Array([10,11,12,13,14,15,16,17,18,19]);\n *\n * var inflate = new pako.Inflate({ level: 3});\n *\n * inflate.push(chunk1, false);\n * inflate.push(chunk2, true);  // true -> last chunk\n *\n * if (inflate.err) { throw new Error(inflate.err); }\n *\n * console.log(inflate.result);\n * ```\n **/\nfunction Inflate(options) {\n  if (!(this instanceof Inflate)) return new Inflate(options);\n\n  this.options = utils.assign({\n    chunkSize: 16384,\n    windowBits: 0,\n    to: ''\n  }, options || {});\n\n  var opt = this.options;\n\n  // Force window size for `raw` data, if not set directly,\n  // because we have no header for autodetect.\n  if (opt.raw && (opt.windowBits >= 0) && (opt.windowBits < 16)) {\n    opt.windowBits = -opt.windowBits;\n    if (opt.windowBits === 0) { opt.windowBits = -15; }\n  }\n\n  // If `windowBits` not defined (and mode not raw) - set autodetect flag for gzip/deflate\n  if ((opt.windowBits >= 0) && (opt.windowBits < 16) &&\n      !(options && options.windowBits)) {\n    opt.windowBits += 32;\n  }\n\n  // Gzip header has no info about windows size, we can do autodetect only\n  // for deflate. So, if window size not set, force it to max when gzip possible\n  if ((opt.windowBits > 15) && (opt.windowBits < 48)) {\n    // bit 3 (16) -> gzipped data\n    // bit 4 (32) -> autodetect gzip/deflate\n    if ((opt.windowBits & 15) === 0) {\n      opt.windowBits |= 15;\n    }\n  }\n\n  this.err    = 0;      // error code, if happens (0 = Z_OK)\n  this.msg    = '';     // error message\n  this.ended  = false;  // used to avoid multiple onEnd() calls\n  this.chunks = [];     // chunks of compressed data\n\n  this.strm   = new ZStream();\n  this.strm.avail_out = 0;\n\n  var status  = zlib_inflate.inflateInit2(\n    this.strm,\n    opt.windowBits\n  );\n\n  if (status !== c.Z_OK) {\n    throw new Error(msg[status]);\n  }\n\n  this.header = new GZheader();\n\n  zlib_inflate.inflateGetHeader(this.strm, this.header);\n\n  // Setup dictionary\n  if (opt.dictionary) {\n    // Convert data if needed\n    if (typeof opt.dictionary === 'string') {\n      opt.dictionary = strings.string2buf(opt.dictionary);\n    } else if (toString.call(opt.dictionary) === '[object ArrayBuffer]') {\n      opt.dictionary = new Uint8Array(opt.dictionary);\n    }\n    if (opt.raw) { //In raw mode we need to set the dictionary early\n      status = zlib_inflate.inflateSetDictionary(this.strm, opt.dictionary);\n      if (status !== c.Z_OK) {\n        throw new Error(msg[status]);\n      }\n    }\n  }\n}\n\n/**\n * Inflate#push(data[, mode]) -> Boolean\n * - data (Uint8Array|Array|ArrayBuffer|String): input data\n * - mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE modes.\n *   See constants. Skipped or `false` means Z_NO_FLUSH, `true` means Z_FINISH.\n *\n * Sends input data to inflate pipe, generating [[Inflate#onData]] calls with\n * new output chunks. Returns `true` on success. The last data block must have\n * mode Z_FINISH (or `true`). That will flush internal pending buffers and call\n * [[Inflate#onEnd]]. For interim explicit flushes (without ending the stream) you\n * can use mode Z_SYNC_FLUSH, keeping the decompression context.\n *\n * On fail call [[Inflate#onEnd]] with error code and return false.\n *\n * We strongly recommend to use `Uint8Array` on input for best speed (output\n * format is detected automatically). Also, don't skip last param and always\n * use the same type in your code (boolean or number). That will improve JS speed.\n *\n * For regular `Array`-s make sure all elements are [0..255].\n *\n * ##### Example\n *\n * ```javascript\n * push(chunk, false); // push one of data chunks\n * ...\n * push(chunk, true);  // push last chunk\n * ```\n **/\nInflate.prototype.push = function (data, mode) {\n  var strm = this.strm;\n  var chunkSize = this.options.chunkSize;\n  var dictionary = this.options.dictionary;\n  var status, _mode;\n  var next_out_utf8, tail, utf8str;\n\n  // Flag to properly process Z_BUF_ERROR on testing inflate call\n  // when we check that all output data was flushed.\n  var allowBufError = false;\n\n  if (this.ended) { return false; }\n  _mode = (mode === ~~mode) ? mode : ((mode === true) ? c.Z_FINISH : c.Z_NO_FLUSH);\n\n  // Convert data if needed\n  if (typeof data === 'string') {\n    // Only binary strings can be decompressed on practice\n    strm.input = strings.binstring2buf(data);\n  } else if (toString.call(data) === '[object ArrayBuffer]') {\n    strm.input = new Uint8Array(data);\n  } else {\n    strm.input = data;\n  }\n\n  strm.next_in = 0;\n  strm.avail_in = strm.input.length;\n\n  do {\n    if (strm.avail_out === 0) {\n      strm.output = new utils.Buf8(chunkSize);\n      strm.next_out = 0;\n      strm.avail_out = chunkSize;\n    }\n\n    status = zlib_inflate.inflate(strm, c.Z_NO_FLUSH);    /* no bad return value */\n\n    if (status === c.Z_NEED_DICT && dictionary) {\n      status = zlib_inflate.inflateSetDictionary(this.strm, dictionary);\n    }\n\n    if (status === c.Z_BUF_ERROR && allowBufError === true) {\n      status = c.Z_OK;\n      allowBufError = false;\n    }\n\n    if (status !== c.Z_STREAM_END && status !== c.Z_OK) {\n      this.onEnd(status);\n      this.ended = true;\n      return false;\n    }\n\n    if (strm.next_out) {\n      if (strm.avail_out === 0 || status === c.Z_STREAM_END || (strm.avail_in === 0 && (_mode === c.Z_FINISH || _mode === c.Z_SYNC_FLUSH))) {\n\n        if (this.options.to === 'string') {\n\n          next_out_utf8 = strings.utf8border(strm.output, strm.next_out);\n\n          tail = strm.next_out - next_out_utf8;\n          utf8str = strings.buf2string(strm.output, next_out_utf8);\n\n          // move tail\n          strm.next_out = tail;\n          strm.avail_out = chunkSize - tail;\n          if (tail) { utils.arraySet(strm.output, strm.output, next_out_utf8, tail, 0); }\n\n          this.onData(utf8str);\n\n        } else {\n          this.onData(utils.shrinkBuf(strm.output, strm.next_out));\n        }\n      }\n    }\n\n    // When no more input data, we should check that internal inflate buffers\n    // are flushed. The only way to do it when avail_out = 0 - run one more\n    // inflate pass. But if output data not exists, inflate return Z_BUF_ERROR.\n    // Here we set flag to process this error properly.\n    //\n    // NOTE. Deflate does not return error in this case and does not needs such\n    // logic.\n    if (strm.avail_in === 0 && strm.avail_out === 0) {\n      allowBufError = true;\n    }\n\n  } while ((strm.avail_in > 0 || strm.avail_out === 0) && status !== c.Z_STREAM_END);\n\n  if (status === c.Z_STREAM_END) {\n    _mode = c.Z_FINISH;\n  }\n\n  // Finalize on the last chunk.\n  if (_mode === c.Z_FINISH) {\n    status = zlib_inflate.inflateEnd(this.strm);\n    this.onEnd(status);\n    this.ended = true;\n    return status === c.Z_OK;\n  }\n\n  // callback interim results if Z_SYNC_FLUSH.\n  if (_mode === c.Z_SYNC_FLUSH) {\n    this.onEnd(c.Z_OK);\n    strm.avail_out = 0;\n    return true;\n  }\n\n  return true;\n};\n\n\n/**\n * Inflate#onData(chunk) -> Void\n * - chunk (Uint8Array|Array|String): output data. Type of array depends\n *   on js engine support. When string output requested, each chunk\n *   will be string.\n *\n * By default, stores data blocks in `chunks[]` property and glue\n * those in `onEnd`. Override this handler, if you need another behaviour.\n **/\nInflate.prototype.onData = function (chunk) {\n  this.chunks.push(chunk);\n};\n\n\n/**\n * Inflate#onEnd(status) -> Void\n * - status (Number): inflate status. 0 (Z_OK) on success,\n *   other if not.\n *\n * Called either after you tell inflate that the input stream is\n * complete (Z_FINISH) or should be flushed (Z_SYNC_FLUSH)\n * or if an error happened. By default - join collected chunks,\n * free memory and fill `results` / `err` properties.\n **/\nInflate.prototype.onEnd = function (status) {\n  // On success - join\n  if (status === c.Z_OK) {\n    if (this.options.to === 'string') {\n      // Glue & convert here, until we teach pako to send\n      // utf8 aligned strings to onData\n      this.result = this.chunks.join('');\n    } else {\n      this.result = utils.flattenChunks(this.chunks);\n    }\n  }\n  this.chunks = [];\n  this.err = status;\n  this.msg = this.strm.msg;\n};\n\n\n/**\n * inflate(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * Decompress `data` with inflate/ungzip and `options`. Autodetect\n * format via wrapper header by default. That's why we don't provide\n * separate `ungzip` method.\n *\n * Supported options are:\n *\n * - windowBits\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information.\n *\n * Sugar (options):\n *\n * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify\n *   negative windowBits implicitly.\n * - `to` (String) - if equal to 'string', then result will be converted\n *   from utf8 to utf16 (javascript) string. When string output requested,\n *   chunk length can differ from `chunkSize`, depending on content.\n *\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , input = pako.deflate([1,2,3,4,5,6,7,8,9])\n *   , output;\n *\n * try {\n *   output = pako.inflate(input);\n * } catch (err)\n *   console.log(err);\n * }\n * ```\n **/\nfunction inflate(input, options) {\n  var inflator = new Inflate(options);\n\n  inflator.push(input, true);\n\n  // That will never happens, if you don't cheat with options :)\n  if (inflator.err) { throw inflator.msg || msg[inflator.err]; }\n\n  return inflator.result;\n}\n\n\n/**\n * inflateRaw(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * The same as [[inflate]], but creates raw data, without wrapper\n * (header and adler32 crc).\n **/\nfunction inflateRaw(input, options) {\n  options = options || {};\n  options.raw = true;\n  return inflate(input, options);\n}\n\n\n/**\n * ungzip(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * Just shortcut to [[inflate]], because it autodetects format\n * by header.content. Done for convenience.\n **/\n\n\nexports.Inflate = Inflate;\nexports.inflate = inflate;\nexports.inflateRaw = inflateRaw;\nexports.ungzip  = inflate;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/pako/lib/inflate.js\n// module id = 50\n// module chunks = 0","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar utils   = require('../utils/common');\nvar trees   = require('./trees');\nvar adler32 = require('./adler32');\nvar crc32   = require('./crc32');\nvar msg     = require('./messages');\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\n\n/* Allowed flush values; see deflate() and inflate() below for details */\nvar Z_NO_FLUSH      = 0;\nvar Z_PARTIAL_FLUSH = 1;\n//var Z_SYNC_FLUSH    = 2;\nvar Z_FULL_FLUSH    = 3;\nvar Z_FINISH        = 4;\nvar Z_BLOCK         = 5;\n//var Z_TREES         = 6;\n\n\n/* Return codes for the compression/decompression functions. Negative values\n * are errors, positive values are used for special but normal events.\n */\nvar Z_OK            = 0;\nvar Z_STREAM_END    = 1;\n//var Z_NEED_DICT     = 2;\n//var Z_ERRNO         = -1;\nvar Z_STREAM_ERROR  = -2;\nvar Z_DATA_ERROR    = -3;\n//var Z_MEM_ERROR     = -4;\nvar Z_BUF_ERROR     = -5;\n//var Z_VERSION_ERROR = -6;\n\n\n/* compression levels */\n//var Z_NO_COMPRESSION      = 0;\n//var Z_BEST_SPEED          = 1;\n//var Z_BEST_COMPRESSION    = 9;\nvar Z_DEFAULT_COMPRESSION = -1;\n\n\nvar Z_FILTERED            = 1;\nvar Z_HUFFMAN_ONLY        = 2;\nvar Z_RLE                 = 3;\nvar Z_FIXED               = 4;\nvar Z_DEFAULT_STRATEGY    = 0;\n\n/* Possible values of the data_type field (though see inflate()) */\n//var Z_BINARY              = 0;\n//var Z_TEXT                = 1;\n//var Z_ASCII               = 1; // = Z_TEXT\nvar Z_UNKNOWN             = 2;\n\n\n/* The deflate compression method */\nvar Z_DEFLATED  = 8;\n\n/*============================================================================*/\n\n\nvar MAX_MEM_LEVEL = 9;\n/* Maximum value for memLevel in deflateInit2 */\nvar MAX_WBITS = 15;\n/* 32K LZ77 window */\nvar DEF_MEM_LEVEL = 8;\n\n\nvar LENGTH_CODES  = 29;\n/* number of length codes, not counting the special END_BLOCK code */\nvar LITERALS      = 256;\n/* number of literal bytes 0..255 */\nvar L_CODES       = LITERALS + 1 + LENGTH_CODES;\n/* number of Literal or Length codes, including the END_BLOCK code */\nvar D_CODES       = 30;\n/* number of distance codes */\nvar BL_CODES      = 19;\n/* number of codes used to transfer the bit lengths */\nvar HEAP_SIZE     = 2 * L_CODES + 1;\n/* maximum heap size */\nvar MAX_BITS  = 15;\n/* All codes must not exceed MAX_BITS bits */\n\nvar MIN_MATCH = 3;\nvar MAX_MATCH = 258;\nvar MIN_LOOKAHEAD = (MAX_MATCH + MIN_MATCH + 1);\n\nvar PRESET_DICT = 0x20;\n\nvar INIT_STATE = 42;\nvar EXTRA_STATE = 69;\nvar NAME_STATE = 73;\nvar COMMENT_STATE = 91;\nvar HCRC_STATE = 103;\nvar BUSY_STATE = 113;\nvar FINISH_STATE = 666;\n\nvar BS_NEED_MORE      = 1; /* block not completed, need more input or more output */\nvar BS_BLOCK_DONE     = 2; /* block flush performed */\nvar BS_FINISH_STARTED = 3; /* finish started, need only more output at next deflate */\nvar BS_FINISH_DONE    = 4; /* finish done, accept no more input or output */\n\nvar OS_CODE = 0x03; // Unix :) . Don't detect, use this default.\n\nfunction err(strm, errorCode) {\n  strm.msg = msg[errorCode];\n  return errorCode;\n}\n\nfunction rank(f) {\n  return ((f) << 1) - ((f) > 4 ? 9 : 0);\n}\n\nfunction zero(buf) { var len = buf.length; while (--len >= 0) { buf[len] = 0; } }\n\n\n/* =========================================================================\n * Flush as much pending output as possible. All deflate() output goes\n * through this function so some applications may wish to modify it\n * to avoid allocating a large strm->output buffer and copying into it.\n * (See also read_buf()).\n */\nfunction flush_pending(strm) {\n  var s = strm.state;\n\n  //_tr_flush_bits(s);\n  var len = s.pending;\n  if (len > strm.avail_out) {\n    len = strm.avail_out;\n  }\n  if (len === 0) { return; }\n\n  utils.arraySet(strm.output, s.pending_buf, s.pending_out, len, strm.next_out);\n  strm.next_out += len;\n  s.pending_out += len;\n  strm.total_out += len;\n  strm.avail_out -= len;\n  s.pending -= len;\n  if (s.pending === 0) {\n    s.pending_out = 0;\n  }\n}\n\n\nfunction flush_block_only(s, last) {\n  trees._tr_flush_block(s, (s.block_start >= 0 ? s.block_start : -1), s.strstart - s.block_start, last);\n  s.block_start = s.strstart;\n  flush_pending(s.strm);\n}\n\n\nfunction put_byte(s, b) {\n  s.pending_buf[s.pending++] = b;\n}\n\n\n/* =========================================================================\n * Put a short in the pending buffer. The 16-bit value is put in MSB order.\n * IN assertion: the stream state is correct and there is enough room in\n * pending_buf.\n */\nfunction putShortMSB(s, b) {\n//  put_byte(s, (Byte)(b >> 8));\n//  put_byte(s, (Byte)(b & 0xff));\n  s.pending_buf[s.pending++] = (b >>> 8) & 0xff;\n  s.pending_buf[s.pending++] = b & 0xff;\n}\n\n\n/* ===========================================================================\n * Read a new buffer from the current input stream, update the adler32\n * and total number of bytes read.  All deflate() input goes through\n * this function so some applications may wish to modify it to avoid\n * allocating a large strm->input buffer and copying from it.\n * (See also flush_pending()).\n */\nfunction read_buf(strm, buf, start, size) {\n  var len = strm.avail_in;\n\n  if (len > size) { len = size; }\n  if (len === 0) { return 0; }\n\n  strm.avail_in -= len;\n\n  // zmemcpy(buf, strm->next_in, len);\n  utils.arraySet(buf, strm.input, strm.next_in, len, start);\n  if (strm.state.wrap === 1) {\n    strm.adler = adler32(strm.adler, buf, len, start);\n  }\n\n  else if (strm.state.wrap === 2) {\n    strm.adler = crc32(strm.adler, buf, len, start);\n  }\n\n  strm.next_in += len;\n  strm.total_in += len;\n\n  return len;\n}\n\n\n/* ===========================================================================\n * Set match_start to the longest match starting at the given string and\n * return its length. Matches shorter or equal to prev_length are discarded,\n * in which case the result is equal to prev_length and match_start is\n * garbage.\n * IN assertions: cur_match is the head of the hash chain for the current\n *   string (strstart) and its distance is <= MAX_DIST, and prev_length >= 1\n * OUT assertion: the match length is not greater than s->lookahead.\n */\nfunction longest_match(s, cur_match) {\n  var chain_length = s.max_chain_length;      /* max hash chain length */\n  var scan = s.strstart; /* current string */\n  var match;                       /* matched string */\n  var len;                           /* length of current match */\n  var best_len = s.prev_length;              /* best match length so far */\n  var nice_match = s.nice_match;             /* stop if match long enough */\n  var limit = (s.strstart > (s.w_size - MIN_LOOKAHEAD)) ?\n      s.strstart - (s.w_size - MIN_LOOKAHEAD) : 0/*NIL*/;\n\n  var _win = s.window; // shortcut\n\n  var wmask = s.w_mask;\n  var prev  = s.prev;\n\n  /* Stop when cur_match becomes <= limit. To simplify the code,\n   * we prevent matches with the string of window index 0.\n   */\n\n  var strend = s.strstart + MAX_MATCH;\n  var scan_end1  = _win[scan + best_len - 1];\n  var scan_end   = _win[scan + best_len];\n\n  /* The code is optimized for HASH_BITS >= 8 and MAX_MATCH-2 multiple of 16.\n   * It is easy to get rid of this optimization if necessary.\n   */\n  // Assert(s->hash_bits >= 8 && MAX_MATCH == 258, \"Code too clever\");\n\n  /* Do not waste too much time if we already have a good match: */\n  if (s.prev_length >= s.good_match) {\n    chain_length >>= 2;\n  }\n  /* Do not look for matches beyond the end of the input. This is necessary\n   * to make deflate deterministic.\n   */\n  if (nice_match > s.lookahead) { nice_match = s.lookahead; }\n\n  // Assert((ulg)s->strstart <= s->window_size-MIN_LOOKAHEAD, \"need lookahead\");\n\n  do {\n    // Assert(cur_match < s->strstart, \"no future\");\n    match = cur_match;\n\n    /* Skip to next match if the match length cannot increase\n     * or if the match length is less than 2.  Note that the checks below\n     * for insufficient lookahead only occur occasionally for performance\n     * reasons.  Therefore uninitialized memory will be accessed, and\n     * conditional jumps will be made that depend on those values.\n     * However the length of the match is limited to the lookahead, so\n     * the output of deflate is not affected by the uninitialized values.\n     */\n\n    if (_win[match + best_len]     !== scan_end  ||\n        _win[match + best_len - 1] !== scan_end1 ||\n        _win[match]                !== _win[scan] ||\n        _win[++match]              !== _win[scan + 1]) {\n      continue;\n    }\n\n    /* The check at best_len-1 can be removed because it will be made\n     * again later. (This heuristic is not always a win.)\n     * It is not necessary to compare scan[2] and match[2] since they\n     * are always equal when the other bytes match, given that\n     * the hash keys are equal and that HASH_BITS >= 8.\n     */\n    scan += 2;\n    match++;\n    // Assert(*scan == *match, \"match[2]?\");\n\n    /* We check for insufficient lookahead only every 8th comparison;\n     * the 256th check will be made at strstart+258.\n     */\n    do {\n      /*jshint noempty:false*/\n    } while (_win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             scan < strend);\n\n    // Assert(scan <= s->window+(unsigned)(s->window_size-1), \"wild scan\");\n\n    len = MAX_MATCH - (strend - scan);\n    scan = strend - MAX_MATCH;\n\n    if (len > best_len) {\n      s.match_start = cur_match;\n      best_len = len;\n      if (len >= nice_match) {\n        break;\n      }\n      scan_end1  = _win[scan + best_len - 1];\n      scan_end   = _win[scan + best_len];\n    }\n  } while ((cur_match = prev[cur_match & wmask]) > limit && --chain_length !== 0);\n\n  if (best_len <= s.lookahead) {\n    return best_len;\n  }\n  return s.lookahead;\n}\n\n\n/* ===========================================================================\n * Fill the window when the lookahead becomes insufficient.\n * Updates strstart and lookahead.\n *\n * IN assertion: lookahead < MIN_LOOKAHEAD\n * OUT assertions: strstart <= window_size-MIN_LOOKAHEAD\n *    At least one byte has been read, or avail_in == 0; reads are\n *    performed for at least two bytes (required for the zip translate_eol\n *    option -- not supported here).\n */\nfunction fill_window(s) {\n  var _w_size = s.w_size;\n  var p, n, m, more, str;\n\n  //Assert(s->lookahead < MIN_LOOKAHEAD, \"already enough lookahead\");\n\n  do {\n    more = s.window_size - s.lookahead - s.strstart;\n\n    // JS ints have 32 bit, block below not needed\n    /* Deal with !@#$% 64K limit: */\n    //if (sizeof(int) <= 2) {\n    //    if (more == 0 && s->strstart == 0 && s->lookahead == 0) {\n    //        more = wsize;\n    //\n    //  } else if (more == (unsigned)(-1)) {\n    //        /* Very unlikely, but possible on 16 bit machine if\n    //         * strstart == 0 && lookahead == 1 (input done a byte at time)\n    //         */\n    //        more--;\n    //    }\n    //}\n\n\n    /* If the window is almost full and there is insufficient lookahead,\n     * move the upper half to the lower one to make room in the upper half.\n     */\n    if (s.strstart >= _w_size + (_w_size - MIN_LOOKAHEAD)) {\n\n      utils.arraySet(s.window, s.window, _w_size, _w_size, 0);\n      s.match_start -= _w_size;\n      s.strstart -= _w_size;\n      /* we now have strstart >= MAX_DIST */\n      s.block_start -= _w_size;\n\n      /* Slide the hash table (could be avoided with 32 bit values\n       at the expense of memory usage). We slide even when level == 0\n       to keep the hash table consistent if we switch back to level > 0\n       later. (Using level 0 permanently is not an optimal usage of\n       zlib, so we don't care about this pathological case.)\n       */\n\n      n = s.hash_size;\n      p = n;\n      do {\n        m = s.head[--p];\n        s.head[p] = (m >= _w_size ? m - _w_size : 0);\n      } while (--n);\n\n      n = _w_size;\n      p = n;\n      do {\n        m = s.prev[--p];\n        s.prev[p] = (m >= _w_size ? m - _w_size : 0);\n        /* If n is not on any hash chain, prev[n] is garbage but\n         * its value will never be used.\n         */\n      } while (--n);\n\n      more += _w_size;\n    }\n    if (s.strm.avail_in === 0) {\n      break;\n    }\n\n    /* If there was no sliding:\n     *    strstart <= WSIZE+MAX_DIST-1 && lookahead <= MIN_LOOKAHEAD - 1 &&\n     *    more == window_size - lookahead - strstart\n     * => more >= window_size - (MIN_LOOKAHEAD-1 + WSIZE + MAX_DIST-1)\n     * => more >= window_size - 2*WSIZE + 2\n     * In the BIG_MEM or MMAP case (not yet supported),\n     *   window_size == input_size + MIN_LOOKAHEAD  &&\n     *   strstart + s->lookahead <= input_size => more >= MIN_LOOKAHEAD.\n     * Otherwise, window_size == 2*WSIZE so more >= 2.\n     * If there was sliding, more >= WSIZE. So in all cases, more >= 2.\n     */\n    //Assert(more >= 2, \"more < 2\");\n    n = read_buf(s.strm, s.window, s.strstart + s.lookahead, more);\n    s.lookahead += n;\n\n    /* Initialize the hash value now that we have some input: */\n    if (s.lookahead + s.insert >= MIN_MATCH) {\n      str = s.strstart - s.insert;\n      s.ins_h = s.window[str];\n\n      /* UPDATE_HASH(s, s->ins_h, s->window[str + 1]); */\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[str + 1]) & s.hash_mask;\n//#if MIN_MATCH != 3\n//        Call update_hash() MIN_MATCH-3 more times\n//#endif\n      while (s.insert) {\n        /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n        s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[str + MIN_MATCH - 1]) & s.hash_mask;\n\n        s.prev[str & s.w_mask] = s.head[s.ins_h];\n        s.head[s.ins_h] = str;\n        str++;\n        s.insert--;\n        if (s.lookahead + s.insert < MIN_MATCH) {\n          break;\n        }\n      }\n    }\n    /* If the whole input has less than MIN_MATCH bytes, ins_h is garbage,\n     * but this is not important since only literal bytes will be emitted.\n     */\n\n  } while (s.lookahead < MIN_LOOKAHEAD && s.strm.avail_in !== 0);\n\n  /* If the WIN_INIT bytes after the end of the current data have never been\n   * written, then zero those bytes in order to avoid memory check reports of\n   * the use of uninitialized (or uninitialised as Julian writes) bytes by\n   * the longest match routines.  Update the high water mark for the next\n   * time through here.  WIN_INIT is set to MAX_MATCH since the longest match\n   * routines allow scanning to strstart + MAX_MATCH, ignoring lookahead.\n   */\n//  if (s.high_water < s.window_size) {\n//    var curr = s.strstart + s.lookahead;\n//    var init = 0;\n//\n//    if (s.high_water < curr) {\n//      /* Previous high water mark below current data -- zero WIN_INIT\n//       * bytes or up to end of window, whichever is less.\n//       */\n//      init = s.window_size - curr;\n//      if (init > WIN_INIT)\n//        init = WIN_INIT;\n//      zmemzero(s->window + curr, (unsigned)init);\n//      s->high_water = curr + init;\n//    }\n//    else if (s->high_water < (ulg)curr + WIN_INIT) {\n//      /* High water mark at or above current data, but below current data\n//       * plus WIN_INIT -- zero out to current data plus WIN_INIT, or up\n//       * to end of window, whichever is less.\n//       */\n//      init = (ulg)curr + WIN_INIT - s->high_water;\n//      if (init > s->window_size - s->high_water)\n//        init = s->window_size - s->high_water;\n//      zmemzero(s->window + s->high_water, (unsigned)init);\n//      s->high_water += init;\n//    }\n//  }\n//\n//  Assert((ulg)s->strstart <= s->window_size - MIN_LOOKAHEAD,\n//    \"not enough room for search\");\n}\n\n/* ===========================================================================\n * Copy without compression as much as possible from the input stream, return\n * the current block state.\n * This function does not insert new strings in the dictionary since\n * uncompressible data is probably not useful. This function is used\n * only for the level=0 compression option.\n * NOTE: this function should be optimized to avoid extra copying from\n * window to pending_buf.\n */\nfunction deflate_stored(s, flush) {\n  /* Stored blocks are limited to 0xffff bytes, pending_buf is limited\n   * to pending_buf_size, and each stored block has a 5 byte header:\n   */\n  var max_block_size = 0xffff;\n\n  if (max_block_size > s.pending_buf_size - 5) {\n    max_block_size = s.pending_buf_size - 5;\n  }\n\n  /* Copy as much as possible from input to output: */\n  for (;;) {\n    /* Fill the window as much as possible: */\n    if (s.lookahead <= 1) {\n\n      //Assert(s->strstart < s->w_size+MAX_DIST(s) ||\n      //  s->block_start >= (long)s->w_size, \"slide too late\");\n//      if (!(s.strstart < s.w_size + (s.w_size - MIN_LOOKAHEAD) ||\n//        s.block_start >= s.w_size)) {\n//        throw  new Error(\"slide too late\");\n//      }\n\n      fill_window(s);\n      if (s.lookahead === 0 && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n\n      if (s.lookahead === 0) {\n        break;\n      }\n      /* flush the current block */\n    }\n    //Assert(s->block_start >= 0L, \"block gone\");\n//    if (s.block_start < 0) throw new Error(\"block gone\");\n\n    s.strstart += s.lookahead;\n    s.lookahead = 0;\n\n    /* Emit a stored block if pending_buf will be full: */\n    var max_start = s.block_start + max_block_size;\n\n    if (s.strstart === 0 || s.strstart >= max_start) {\n      /* strstart == 0 is possible when wraparound on 16-bit machine */\n      s.lookahead = s.strstart - max_start;\n      s.strstart = max_start;\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n\n\n    }\n    /* Flush if we may have to slide, otherwise block_start may become\n     * negative and the data will be gone:\n     */\n    if (s.strstart - s.block_start >= (s.w_size - MIN_LOOKAHEAD)) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n\n  s.insert = 0;\n\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n\n  if (s.strstart > s.block_start) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n\n  return BS_NEED_MORE;\n}\n\n/* ===========================================================================\n * Compress as much as possible from the input stream, return the current\n * block state.\n * This function does not perform lazy evaluation of matches and inserts\n * new strings in the dictionary only for unmatched strings or for short\n * matches. It is used only for the fast compression options.\n */\nfunction deflate_fast(s, flush) {\n  var hash_head;        /* head of the hash chain */\n  var bflush;           /* set if current block must be flushed */\n\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the next match, plus MIN_MATCH bytes to insert the\n     * string following the next match.\n     */\n    if (s.lookahead < MIN_LOOKAHEAD) {\n      fill_window(s);\n      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) {\n        break; /* flush the current block */\n      }\n    }\n\n    /* Insert the string window[strstart .. strstart+2] in the\n     * dictionary, and set hash_head to the head of the hash chain:\n     */\n    hash_head = 0/*NIL*/;\n    if (s.lookahead >= MIN_MATCH) {\n      /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n      s.head[s.ins_h] = s.strstart;\n      /***/\n    }\n\n    /* Find the longest match, discarding those <= prev_length.\n     * At this point we have always match_length < MIN_MATCH\n     */\n    if (hash_head !== 0/*NIL*/ && ((s.strstart - hash_head) <= (s.w_size - MIN_LOOKAHEAD))) {\n      /* To simplify the code, we prevent matches with the string\n       * of window index 0 (in particular we have to avoid a match\n       * of the string with itself at the start of the input file).\n       */\n      s.match_length = longest_match(s, hash_head);\n      /* longest_match() sets match_start */\n    }\n    if (s.match_length >= MIN_MATCH) {\n      // check_match(s, s.strstart, s.match_start, s.match_length); // for debug only\n\n      /*** _tr_tally_dist(s, s.strstart - s.match_start,\n                     s.match_length - MIN_MATCH, bflush); ***/\n      bflush = trees._tr_tally(s, s.strstart - s.match_start, s.match_length - MIN_MATCH);\n\n      s.lookahead -= s.match_length;\n\n      /* Insert new strings in the hash table only if the match length\n       * is not too large. This saves time but degrades compression.\n       */\n      if (s.match_length <= s.max_lazy_match/*max_insert_length*/ && s.lookahead >= MIN_MATCH) {\n        s.match_length--; /* string at strstart already in table */\n        do {\n          s.strstart++;\n          /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n          s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n          s.head[s.ins_h] = s.strstart;\n          /***/\n          /* strstart never exceeds WSIZE-MAX_MATCH, so there are\n           * always MIN_MATCH bytes ahead.\n           */\n        } while (--s.match_length !== 0);\n        s.strstart++;\n      } else\n      {\n        s.strstart += s.match_length;\n        s.match_length = 0;\n        s.ins_h = s.window[s.strstart];\n        /* UPDATE_HASH(s, s.ins_h, s.window[s.strstart+1]); */\n        s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + 1]) & s.hash_mask;\n\n//#if MIN_MATCH != 3\n//                Call UPDATE_HASH() MIN_MATCH-3 more times\n//#endif\n        /* If lookahead < MIN_MATCH, ins_h is garbage, but it does not\n         * matter since it will be recomputed at next deflate call.\n         */\n      }\n    } else {\n      /* No match, output a literal byte */\n      //Tracevv((stderr,\"%c\", s.window[s.strstart]));\n      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n      bflush = trees._tr_tally(s, 0, s.window[s.strstart]);\n\n      s.lookahead--;\n      s.strstart++;\n    }\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = ((s.strstart < (MIN_MATCH - 1)) ? s.strstart : MIN_MATCH - 1);\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n}\n\n/* ===========================================================================\n * Same as above, but achieves better compression. We use a lazy\n * evaluation for matches: a match is finally adopted only if there is\n * no better match at the next window position.\n */\nfunction deflate_slow(s, flush) {\n  var hash_head;          /* head of hash chain */\n  var bflush;              /* set if current block must be flushed */\n\n  var max_insert;\n\n  /* Process the input block. */\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the next match, plus MIN_MATCH bytes to insert the\n     * string following the next match.\n     */\n    if (s.lookahead < MIN_LOOKAHEAD) {\n      fill_window(s);\n      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) { break; } /* flush the current block */\n    }\n\n    /* Insert the string window[strstart .. strstart+2] in the\n     * dictionary, and set hash_head to the head of the hash chain:\n     */\n    hash_head = 0/*NIL*/;\n    if (s.lookahead >= MIN_MATCH) {\n      /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n      s.head[s.ins_h] = s.strstart;\n      /***/\n    }\n\n    /* Find the longest match, discarding those <= prev_length.\n     */\n    s.prev_length = s.match_length;\n    s.prev_match = s.match_start;\n    s.match_length = MIN_MATCH - 1;\n\n    if (hash_head !== 0/*NIL*/ && s.prev_length < s.max_lazy_match &&\n        s.strstart - hash_head <= (s.w_size - MIN_LOOKAHEAD)/*MAX_DIST(s)*/) {\n      /* To simplify the code, we prevent matches with the string\n       * of window index 0 (in particular we have to avoid a match\n       * of the string with itself at the start of the input file).\n       */\n      s.match_length = longest_match(s, hash_head);\n      /* longest_match() sets match_start */\n\n      if (s.match_length <= 5 &&\n         (s.strategy === Z_FILTERED || (s.match_length === MIN_MATCH && s.strstart - s.match_start > 4096/*TOO_FAR*/))) {\n\n        /* If prev_match is also MIN_MATCH, match_start is garbage\n         * but we will ignore the current match anyway.\n         */\n        s.match_length = MIN_MATCH - 1;\n      }\n    }\n    /* If there was a match at the previous step and the current\n     * match is not better, output the previous match:\n     */\n    if (s.prev_length >= MIN_MATCH && s.match_length <= s.prev_length) {\n      max_insert = s.strstart + s.lookahead - MIN_MATCH;\n      /* Do not insert strings in hash table beyond this. */\n\n      //check_match(s, s.strstart-1, s.prev_match, s.prev_length);\n\n      /***_tr_tally_dist(s, s.strstart - 1 - s.prev_match,\n                     s.prev_length - MIN_MATCH, bflush);***/\n      bflush = trees._tr_tally(s, s.strstart - 1 - s.prev_match, s.prev_length - MIN_MATCH);\n      /* Insert in hash table all strings up to the end of the match.\n       * strstart-1 and strstart are already inserted. If there is not\n       * enough lookahead, the last two strings are not inserted in\n       * the hash table.\n       */\n      s.lookahead -= s.prev_length - 1;\n      s.prev_length -= 2;\n      do {\n        if (++s.strstart <= max_insert) {\n          /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n          s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n          s.head[s.ins_h] = s.strstart;\n          /***/\n        }\n      } while (--s.prev_length !== 0);\n      s.match_available = 0;\n      s.match_length = MIN_MATCH - 1;\n      s.strstart++;\n\n      if (bflush) {\n        /*** FLUSH_BLOCK(s, 0); ***/\n        flush_block_only(s, false);\n        if (s.strm.avail_out === 0) {\n          return BS_NEED_MORE;\n        }\n        /***/\n      }\n\n    } else if (s.match_available) {\n      /* If there was no match at the previous position, output a\n       * single literal. If there was a match but the current match\n       * is longer, truncate the previous match to a single literal.\n       */\n      //Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n      /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/\n      bflush = trees._tr_tally(s, 0, s.window[s.strstart - 1]);\n\n      if (bflush) {\n        /*** FLUSH_BLOCK_ONLY(s, 0) ***/\n        flush_block_only(s, false);\n        /***/\n      }\n      s.strstart++;\n      s.lookahead--;\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n    } else {\n      /* There is no previous match to compare with, wait for\n       * the next step to decide.\n       */\n      s.match_available = 1;\n      s.strstart++;\n      s.lookahead--;\n    }\n  }\n  //Assert (flush != Z_NO_FLUSH, \"no flush?\");\n  if (s.match_available) {\n    //Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n    /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/\n    bflush = trees._tr_tally(s, 0, s.window[s.strstart - 1]);\n\n    s.match_available = 0;\n  }\n  s.insert = s.strstart < MIN_MATCH - 1 ? s.strstart : MIN_MATCH - 1;\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n\n  return BS_BLOCK_DONE;\n}\n\n\n/* ===========================================================================\n * For Z_RLE, simply look for runs of bytes, generate matches only of distance\n * one.  Do not maintain a hash table.  (It will be regenerated if this run of\n * deflate switches away from Z_RLE.)\n */\nfunction deflate_rle(s, flush) {\n  var bflush;            /* set if current block must be flushed */\n  var prev;              /* byte at distance one to match */\n  var scan, strend;      /* scan goes up to strend for length of run */\n\n  var _win = s.window;\n\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the longest run, plus one for the unrolled loop.\n     */\n    if (s.lookahead <= MAX_MATCH) {\n      fill_window(s);\n      if (s.lookahead <= MAX_MATCH && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) { break; } /* flush the current block */\n    }\n\n    /* See how many times the previous byte repeats */\n    s.match_length = 0;\n    if (s.lookahead >= MIN_MATCH && s.strstart > 0) {\n      scan = s.strstart - 1;\n      prev = _win[scan];\n      if (prev === _win[++scan] && prev === _win[++scan] && prev === _win[++scan]) {\n        strend = s.strstart + MAX_MATCH;\n        do {\n          /*jshint noempty:false*/\n        } while (prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 scan < strend);\n        s.match_length = MAX_MATCH - (strend - scan);\n        if (s.match_length > s.lookahead) {\n          s.match_length = s.lookahead;\n        }\n      }\n      //Assert(scan <= s->window+(uInt)(s->window_size-1), \"wild scan\");\n    }\n\n    /* Emit match if have run of MIN_MATCH or longer, else emit literal */\n    if (s.match_length >= MIN_MATCH) {\n      //check_match(s, s.strstart, s.strstart - 1, s.match_length);\n\n      /*** _tr_tally_dist(s, 1, s.match_length - MIN_MATCH, bflush); ***/\n      bflush = trees._tr_tally(s, 1, s.match_length - MIN_MATCH);\n\n      s.lookahead -= s.match_length;\n      s.strstart += s.match_length;\n      s.match_length = 0;\n    } else {\n      /* No match, output a literal byte */\n      //Tracevv((stderr,\"%c\", s->window[s->strstart]));\n      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n      bflush = trees._tr_tally(s, 0, s.window[s.strstart]);\n\n      s.lookahead--;\n      s.strstart++;\n    }\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = 0;\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n}\n\n/* ===========================================================================\n * For Z_HUFFMAN_ONLY, do not look for matches.  Do not maintain a hash table.\n * (It will be regenerated if this run of deflate switches away from Huffman.)\n */\nfunction deflate_huff(s, flush) {\n  var bflush;             /* set if current block must be flushed */\n\n  for (;;) {\n    /* Make sure that we have a literal to write. */\n    if (s.lookahead === 0) {\n      fill_window(s);\n      if (s.lookahead === 0) {\n        if (flush === Z_NO_FLUSH) {\n          return BS_NEED_MORE;\n        }\n        break;      /* flush the current block */\n      }\n    }\n\n    /* Output a literal byte */\n    s.match_length = 0;\n    //Tracevv((stderr,\"%c\", s->window[s->strstart]));\n    /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n    bflush = trees._tr_tally(s, 0, s.window[s.strstart]);\n    s.lookahead--;\n    s.strstart++;\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = 0;\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n}\n\n/* Values for max_lazy_match, good_match and max_chain_length, depending on\n * the desired pack level (0..9). The values given below have been tuned to\n * exclude worst case performance for pathological files. Better values may be\n * found for specific files.\n */\nfunction Config(good_length, max_lazy, nice_length, max_chain, func) {\n  this.good_length = good_length;\n  this.max_lazy = max_lazy;\n  this.nice_length = nice_length;\n  this.max_chain = max_chain;\n  this.func = func;\n}\n\nvar configuration_table;\n\nconfiguration_table = [\n  /*      good lazy nice chain */\n  new Config(0, 0, 0, 0, deflate_stored),          /* 0 store only */\n  new Config(4, 4, 8, 4, deflate_fast),            /* 1 max speed, no lazy matches */\n  new Config(4, 5, 16, 8, deflate_fast),           /* 2 */\n  new Config(4, 6, 32, 32, deflate_fast),          /* 3 */\n\n  new Config(4, 4, 16, 16, deflate_slow),          /* 4 lazy matches */\n  new Config(8, 16, 32, 32, deflate_slow),         /* 5 */\n  new Config(8, 16, 128, 128, deflate_slow),       /* 6 */\n  new Config(8, 32, 128, 256, deflate_slow),       /* 7 */\n  new Config(32, 128, 258, 1024, deflate_slow),    /* 8 */\n  new Config(32, 258, 258, 4096, deflate_slow)     /* 9 max compression */\n];\n\n\n/* ===========================================================================\n * Initialize the \"longest match\" routines for a new zlib stream\n */\nfunction lm_init(s) {\n  s.window_size = 2 * s.w_size;\n\n  /*** CLEAR_HASH(s); ***/\n  zero(s.head); // Fill with NIL (= 0);\n\n  /* Set the default configuration parameters:\n   */\n  s.max_lazy_match = configuration_table[s.level].max_lazy;\n  s.good_match = configuration_table[s.level].good_length;\n  s.nice_match = configuration_table[s.level].nice_length;\n  s.max_chain_length = configuration_table[s.level].max_chain;\n\n  s.strstart = 0;\n  s.block_start = 0;\n  s.lookahead = 0;\n  s.insert = 0;\n  s.match_length = s.prev_length = MIN_MATCH - 1;\n  s.match_available = 0;\n  s.ins_h = 0;\n}\n\n\nfunction DeflateState() {\n  this.strm = null;            /* pointer back to this zlib stream */\n  this.status = 0;            /* as the name implies */\n  this.pending_buf = null;      /* output still pending */\n  this.pending_buf_size = 0;  /* size of pending_buf */\n  this.pending_out = 0;       /* next pending byte to output to the stream */\n  this.pending = 0;           /* nb of bytes in the pending buffer */\n  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip */\n  this.gzhead = null;         /* gzip header information to write */\n  this.gzindex = 0;           /* where in extra, name, or comment */\n  this.method = Z_DEFLATED; /* can only be DEFLATED */\n  this.last_flush = -1;   /* value of flush param for previous deflate call */\n\n  this.w_size = 0;  /* LZ77 window size (32K by default) */\n  this.w_bits = 0;  /* log2(w_size)  (8..16) */\n  this.w_mask = 0;  /* w_size - 1 */\n\n  this.window = null;\n  /* Sliding window. Input bytes are read into the second half of the window,\n   * and move to the first half later to keep a dictionary of at least wSize\n   * bytes. With this organization, matches are limited to a distance of\n   * wSize-MAX_MATCH bytes, but this ensures that IO is always\n   * performed with a length multiple of the block size.\n   */\n\n  this.window_size = 0;\n  /* Actual size of window: 2*wSize, except when the user input buffer\n   * is directly used as sliding window.\n   */\n\n  this.prev = null;\n  /* Link to older string with same hash index. To limit the size of this\n   * array to 64K, this link is maintained only for the last 32K strings.\n   * An index in this array is thus a window index modulo 32K.\n   */\n\n  this.head = null;   /* Heads of the hash chains or NIL. */\n\n  this.ins_h = 0;       /* hash index of string to be inserted */\n  this.hash_size = 0;   /* number of elements in hash table */\n  this.hash_bits = 0;   /* log2(hash_size) */\n  this.hash_mask = 0;   /* hash_size-1 */\n\n  this.hash_shift = 0;\n  /* Number of bits by which ins_h must be shifted at each input\n   * step. It must be such that after MIN_MATCH steps, the oldest\n   * byte no longer takes part in the hash key, that is:\n   *   hash_shift * MIN_MATCH >= hash_bits\n   */\n\n  this.block_start = 0;\n  /* Window position at the beginning of the current output block. Gets\n   * negative when the window is moved backwards.\n   */\n\n  this.match_length = 0;      /* length of best match */\n  this.prev_match = 0;        /* previous match */\n  this.match_available = 0;   /* set if previous match exists */\n  this.strstart = 0;          /* start of string to insert */\n  this.match_start = 0;       /* start of matching string */\n  this.lookahead = 0;         /* number of valid bytes ahead in window */\n\n  this.prev_length = 0;\n  /* Length of the best match at previous step. Matches not greater than this\n   * are discarded. This is used in the lazy match evaluation.\n   */\n\n  this.max_chain_length = 0;\n  /* To speed up deflation, hash chains are never searched beyond this\n   * length.  A higher limit improves compression ratio but degrades the\n   * speed.\n   */\n\n  this.max_lazy_match = 0;\n  /* Attempt to find a better match only when the current match is strictly\n   * smaller than this value. This mechanism is used only for compression\n   * levels >= 4.\n   */\n  // That's alias to max_lazy_match, don't use directly\n  //this.max_insert_length = 0;\n  /* Insert new strings in the hash table only if the match length is not\n   * greater than this length. This saves time but degrades compression.\n   * max_insert_length is used only for compression levels <= 3.\n   */\n\n  this.level = 0;     /* compression level (1..9) */\n  this.strategy = 0;  /* favor or force Huffman coding*/\n\n  this.good_match = 0;\n  /* Use a faster search when the previous match is longer than this */\n\n  this.nice_match = 0; /* Stop searching when current match exceeds this */\n\n              /* used by trees.c: */\n\n  /* Didn't use ct_data typedef below to suppress compiler warning */\n\n  // struct ct_data_s dyn_ltree[HEAP_SIZE];   /* literal and length tree */\n  // struct ct_data_s dyn_dtree[2*D_CODES+1]; /* distance tree */\n  // struct ct_data_s bl_tree[2*BL_CODES+1];  /* Huffman tree for bit lengths */\n\n  // Use flat array of DOUBLE size, with interleaved fata,\n  // because JS does not support effective\n  this.dyn_ltree  = new utils.Buf16(HEAP_SIZE * 2);\n  this.dyn_dtree  = new utils.Buf16((2 * D_CODES + 1) * 2);\n  this.bl_tree    = new utils.Buf16((2 * BL_CODES + 1) * 2);\n  zero(this.dyn_ltree);\n  zero(this.dyn_dtree);\n  zero(this.bl_tree);\n\n  this.l_desc   = null;         /* desc. for literal tree */\n  this.d_desc   = null;         /* desc. for distance tree */\n  this.bl_desc  = null;         /* desc. for bit length tree */\n\n  //ush bl_count[MAX_BITS+1];\n  this.bl_count = new utils.Buf16(MAX_BITS + 1);\n  /* number of codes at each bit length for an optimal tree */\n\n  //int heap[2*L_CODES+1];      /* heap used to build the Huffman trees */\n  this.heap = new utils.Buf16(2 * L_CODES + 1);  /* heap used to build the Huffman trees */\n  zero(this.heap);\n\n  this.heap_len = 0;               /* number of elements in the heap */\n  this.heap_max = 0;               /* element of largest frequency */\n  /* The sons of heap[n] are heap[2*n] and heap[2*n+1]. heap[0] is not used.\n   * The same heap array is used to build all trees.\n   */\n\n  this.depth = new utils.Buf16(2 * L_CODES + 1); //uch depth[2*L_CODES+1];\n  zero(this.depth);\n  /* Depth of each subtree used as tie breaker for trees of equal frequency\n   */\n\n  this.l_buf = 0;          /* buffer index for literals or lengths */\n\n  this.lit_bufsize = 0;\n  /* Size of match buffer for literals/lengths.  There are 4 reasons for\n   * limiting lit_bufsize to 64K:\n   *   - frequencies can be kept in 16 bit counters\n   *   - if compression is not successful for the first block, all input\n   *     data is still in the window so we can still emit a stored block even\n   *     when input comes from standard input.  (This can also be done for\n   *     all blocks if lit_bufsize is not greater than 32K.)\n   *   - if compression is not successful for a file smaller than 64K, we can\n   *     even emit a stored file instead of a stored block (saving 5 bytes).\n   *     This is applicable only for zip (not gzip or zlib).\n   *   - creating new Huffman trees less frequently may not provide fast\n   *     adaptation to changes in the input data statistics. (Take for\n   *     example a binary file with poorly compressible code followed by\n   *     a highly compressible string table.) Smaller buffer sizes give\n   *     fast adaptation but have of course the overhead of transmitting\n   *     trees more frequently.\n   *   - I can't count above 4\n   */\n\n  this.last_lit = 0;      /* running index in l_buf */\n\n  this.d_buf = 0;\n  /* Buffer index for distances. To simplify the code, d_buf and l_buf have\n   * the same number of elements. To use different lengths, an extra flag\n   * array would be necessary.\n   */\n\n  this.opt_len = 0;       /* bit length of current block with optimal trees */\n  this.static_len = 0;    /* bit length of current block with static trees */\n  this.matches = 0;       /* number of string matches in current block */\n  this.insert = 0;        /* bytes at end of window left to insert */\n\n\n  this.bi_buf = 0;\n  /* Output buffer. bits are inserted starting at the bottom (least\n   * significant bits).\n   */\n  this.bi_valid = 0;\n  /* Number of valid bits in bi_buf.  All bits above the last valid bit\n   * are always zero.\n   */\n\n  // Used for window memory init. We safely ignore it for JS. That makes\n  // sense only for pointers and memory check tools.\n  //this.high_water = 0;\n  /* High water mark offset in window for initialized bytes -- bytes above\n   * this are set to zero in order to avoid memory check warnings when\n   * longest match routines access bytes past the input.  This is then\n   * updated to the new high water mark.\n   */\n}\n\n\nfunction deflateResetKeep(strm) {\n  var s;\n\n  if (!strm || !strm.state) {\n    return err(strm, Z_STREAM_ERROR);\n  }\n\n  strm.total_in = strm.total_out = 0;\n  strm.data_type = Z_UNKNOWN;\n\n  s = strm.state;\n  s.pending = 0;\n  s.pending_out = 0;\n\n  if (s.wrap < 0) {\n    s.wrap = -s.wrap;\n    /* was made negative by deflate(..., Z_FINISH); */\n  }\n  s.status = (s.wrap ? INIT_STATE : BUSY_STATE);\n  strm.adler = (s.wrap === 2) ?\n    0  // crc32(0, Z_NULL, 0)\n  :\n    1; // adler32(0, Z_NULL, 0)\n  s.last_flush = Z_NO_FLUSH;\n  trees._tr_init(s);\n  return Z_OK;\n}\n\n\nfunction deflateReset(strm) {\n  var ret = deflateResetKeep(strm);\n  if (ret === Z_OK) {\n    lm_init(strm.state);\n  }\n  return ret;\n}\n\n\nfunction deflateSetHeader(strm, head) {\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  if (strm.state.wrap !== 2) { return Z_STREAM_ERROR; }\n  strm.state.gzhead = head;\n  return Z_OK;\n}\n\n\nfunction deflateInit2(strm, level, method, windowBits, memLevel, strategy) {\n  if (!strm) { // === Z_NULL\n    return Z_STREAM_ERROR;\n  }\n  var wrap = 1;\n\n  if (level === Z_DEFAULT_COMPRESSION) {\n    level = 6;\n  }\n\n  if (windowBits < 0) { /* suppress zlib wrapper */\n    wrap = 0;\n    windowBits = -windowBits;\n  }\n\n  else if (windowBits > 15) {\n    wrap = 2;           /* write gzip wrapper instead */\n    windowBits -= 16;\n  }\n\n\n  if (memLevel < 1 || memLevel > MAX_MEM_LEVEL || method !== Z_DEFLATED ||\n    windowBits < 8 || windowBits > 15 || level < 0 || level > 9 ||\n    strategy < 0 || strategy > Z_FIXED) {\n    return err(strm, Z_STREAM_ERROR);\n  }\n\n\n  if (windowBits === 8) {\n    windowBits = 9;\n  }\n  /* until 256-byte window bug fixed */\n\n  var s = new DeflateState();\n\n  strm.state = s;\n  s.strm = strm;\n\n  s.wrap = wrap;\n  s.gzhead = null;\n  s.w_bits = windowBits;\n  s.w_size = 1 << s.w_bits;\n  s.w_mask = s.w_size - 1;\n\n  s.hash_bits = memLevel + 7;\n  s.hash_size = 1 << s.hash_bits;\n  s.hash_mask = s.hash_size - 1;\n  s.hash_shift = ~~((s.hash_bits + MIN_MATCH - 1) / MIN_MATCH);\n\n  s.window = new utils.Buf8(s.w_size * 2);\n  s.head = new utils.Buf16(s.hash_size);\n  s.prev = new utils.Buf16(s.w_size);\n\n  // Don't need mem init magic for JS.\n  //s.high_water = 0;  /* nothing written to s->window yet */\n\n  s.lit_bufsize = 1 << (memLevel + 6); /* 16K elements by default */\n\n  s.pending_buf_size = s.lit_bufsize * 4;\n\n  //overlay = (ushf *) ZALLOC(strm, s->lit_bufsize, sizeof(ush)+2);\n  //s->pending_buf = (uchf *) overlay;\n  s.pending_buf = new utils.Buf8(s.pending_buf_size);\n\n  // It is offset from `s.pending_buf` (size is `s.lit_bufsize * 2`)\n  //s->d_buf = overlay + s->lit_bufsize/sizeof(ush);\n  s.d_buf = 1 * s.lit_bufsize;\n\n  //s->l_buf = s->pending_buf + (1+sizeof(ush))*s->lit_bufsize;\n  s.l_buf = (1 + 2) * s.lit_bufsize;\n\n  s.level = level;\n  s.strategy = strategy;\n  s.method = method;\n\n  return deflateReset(strm);\n}\n\nfunction deflateInit(strm, level) {\n  return deflateInit2(strm, level, Z_DEFLATED, MAX_WBITS, DEF_MEM_LEVEL, Z_DEFAULT_STRATEGY);\n}\n\n\nfunction deflate(strm, flush) {\n  var old_flush, s;\n  var beg, val; // for gzip header write only\n\n  if (!strm || !strm.state ||\n    flush > Z_BLOCK || flush < 0) {\n    return strm ? err(strm, Z_STREAM_ERROR) : Z_STREAM_ERROR;\n  }\n\n  s = strm.state;\n\n  if (!strm.output ||\n      (!strm.input && strm.avail_in !== 0) ||\n      (s.status === FINISH_STATE && flush !== Z_FINISH)) {\n    return err(strm, (strm.avail_out === 0) ? Z_BUF_ERROR : Z_STREAM_ERROR);\n  }\n\n  s.strm = strm; /* just in case */\n  old_flush = s.last_flush;\n  s.last_flush = flush;\n\n  /* Write the header */\n  if (s.status === INIT_STATE) {\n\n    if (s.wrap === 2) { // GZIP header\n      strm.adler = 0;  //crc32(0L, Z_NULL, 0);\n      put_byte(s, 31);\n      put_byte(s, 139);\n      put_byte(s, 8);\n      if (!s.gzhead) { // s->gzhead == Z_NULL\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, s.level === 9 ? 2 :\n                    (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?\n                     4 : 0));\n        put_byte(s, OS_CODE);\n        s.status = BUSY_STATE;\n      }\n      else {\n        put_byte(s, (s.gzhead.text ? 1 : 0) +\n                    (s.gzhead.hcrc ? 2 : 0) +\n                    (!s.gzhead.extra ? 0 : 4) +\n                    (!s.gzhead.name ? 0 : 8) +\n                    (!s.gzhead.comment ? 0 : 16)\n        );\n        put_byte(s, s.gzhead.time & 0xff);\n        put_byte(s, (s.gzhead.time >> 8) & 0xff);\n        put_byte(s, (s.gzhead.time >> 16) & 0xff);\n        put_byte(s, (s.gzhead.time >> 24) & 0xff);\n        put_byte(s, s.level === 9 ? 2 :\n                    (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?\n                     4 : 0));\n        put_byte(s, s.gzhead.os & 0xff);\n        if (s.gzhead.extra && s.gzhead.extra.length) {\n          put_byte(s, s.gzhead.extra.length & 0xff);\n          put_byte(s, (s.gzhead.extra.length >> 8) & 0xff);\n        }\n        if (s.gzhead.hcrc) {\n          strm.adler = crc32(strm.adler, s.pending_buf, s.pending, 0);\n        }\n        s.gzindex = 0;\n        s.status = EXTRA_STATE;\n      }\n    }\n    else // DEFLATE header\n    {\n      var header = (Z_DEFLATED + ((s.w_bits - 8) << 4)) << 8;\n      var level_flags = -1;\n\n      if (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2) {\n        level_flags = 0;\n      } else if (s.level < 6) {\n        level_flags = 1;\n      } else if (s.level === 6) {\n        level_flags = 2;\n      } else {\n        level_flags = 3;\n      }\n      header |= (level_flags << 6);\n      if (s.strstart !== 0) { header |= PRESET_DICT; }\n      header += 31 - (header % 31);\n\n      s.status = BUSY_STATE;\n      putShortMSB(s, header);\n\n      /* Save the adler32 of the preset dictionary: */\n      if (s.strstart !== 0) {\n        putShortMSB(s, strm.adler >>> 16);\n        putShortMSB(s, strm.adler & 0xffff);\n      }\n      strm.adler = 1; // adler32(0L, Z_NULL, 0);\n    }\n  }\n\n//#ifdef GZIP\n  if (s.status === EXTRA_STATE) {\n    if (s.gzhead.extra/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n\n      while (s.gzindex < (s.gzhead.extra.length & 0xffff)) {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            break;\n          }\n        }\n        put_byte(s, s.gzhead.extra[s.gzindex] & 0xff);\n        s.gzindex++;\n      }\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (s.gzindex === s.gzhead.extra.length) {\n        s.gzindex = 0;\n        s.status = NAME_STATE;\n      }\n    }\n    else {\n      s.status = NAME_STATE;\n    }\n  }\n  if (s.status === NAME_STATE) {\n    if (s.gzhead.name/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n      //int val;\n\n      do {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            val = 1;\n            break;\n          }\n        }\n        // JS specific: little magic to add zero terminator to end of string\n        if (s.gzindex < s.gzhead.name.length) {\n          val = s.gzhead.name.charCodeAt(s.gzindex++) & 0xff;\n        } else {\n          val = 0;\n        }\n        put_byte(s, val);\n      } while (val !== 0);\n\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (val === 0) {\n        s.gzindex = 0;\n        s.status = COMMENT_STATE;\n      }\n    }\n    else {\n      s.status = COMMENT_STATE;\n    }\n  }\n  if (s.status === COMMENT_STATE) {\n    if (s.gzhead.comment/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n      //int val;\n\n      do {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            val = 1;\n            break;\n          }\n        }\n        // JS specific: little magic to add zero terminator to end of string\n        if (s.gzindex < s.gzhead.comment.length) {\n          val = s.gzhead.comment.charCodeAt(s.gzindex++) & 0xff;\n        } else {\n          val = 0;\n        }\n        put_byte(s, val);\n      } while (val !== 0);\n\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (val === 0) {\n        s.status = HCRC_STATE;\n      }\n    }\n    else {\n      s.status = HCRC_STATE;\n    }\n  }\n  if (s.status === HCRC_STATE) {\n    if (s.gzhead.hcrc) {\n      if (s.pending + 2 > s.pending_buf_size) {\n        flush_pending(strm);\n      }\n      if (s.pending + 2 <= s.pending_buf_size) {\n        put_byte(s, strm.adler & 0xff);\n        put_byte(s, (strm.adler >> 8) & 0xff);\n        strm.adler = 0; //crc32(0L, Z_NULL, 0);\n        s.status = BUSY_STATE;\n      }\n    }\n    else {\n      s.status = BUSY_STATE;\n    }\n  }\n//#endif\n\n  /* Flush as much pending output as possible */\n  if (s.pending !== 0) {\n    flush_pending(strm);\n    if (strm.avail_out === 0) {\n      /* Since avail_out is 0, deflate will be called again with\n       * more output space, but possibly with both pending and\n       * avail_in equal to zero. There won't be anything to do,\n       * but this is not an error situation so make sure we\n       * return OK instead of BUF_ERROR at next call of deflate:\n       */\n      s.last_flush = -1;\n      return Z_OK;\n    }\n\n    /* Make sure there is something to do and avoid duplicate consecutive\n     * flushes. For repeated and useless calls with Z_FINISH, we keep\n     * returning Z_STREAM_END instead of Z_BUF_ERROR.\n     */\n  } else if (strm.avail_in === 0 && rank(flush) <= rank(old_flush) &&\n    flush !== Z_FINISH) {\n    return err(strm, Z_BUF_ERROR);\n  }\n\n  /* User must not provide more input after the first FINISH: */\n  if (s.status === FINISH_STATE && strm.avail_in !== 0) {\n    return err(strm, Z_BUF_ERROR);\n  }\n\n  /* Start a new block or continue the current one.\n   */\n  if (strm.avail_in !== 0 || s.lookahead !== 0 ||\n    (flush !== Z_NO_FLUSH && s.status !== FINISH_STATE)) {\n    var bstate = (s.strategy === Z_HUFFMAN_ONLY) ? deflate_huff(s, flush) :\n      (s.strategy === Z_RLE ? deflate_rle(s, flush) :\n        configuration_table[s.level].func(s, flush));\n\n    if (bstate === BS_FINISH_STARTED || bstate === BS_FINISH_DONE) {\n      s.status = FINISH_STATE;\n    }\n    if (bstate === BS_NEED_MORE || bstate === BS_FINISH_STARTED) {\n      if (strm.avail_out === 0) {\n        s.last_flush = -1;\n        /* avoid BUF_ERROR next call, see above */\n      }\n      return Z_OK;\n      /* If flush != Z_NO_FLUSH && avail_out == 0, the next call\n       * of deflate should use the same flush parameter to make sure\n       * that the flush is complete. So we don't have to output an\n       * empty block here, this will be done at next call. This also\n       * ensures that for a very small output buffer, we emit at most\n       * one empty block.\n       */\n    }\n    if (bstate === BS_BLOCK_DONE) {\n      if (flush === Z_PARTIAL_FLUSH) {\n        trees._tr_align(s);\n      }\n      else if (flush !== Z_BLOCK) { /* FULL_FLUSH or SYNC_FLUSH */\n\n        trees._tr_stored_block(s, 0, 0, false);\n        /* For a full flush, this empty block will be recognized\n         * as a special marker by inflate_sync().\n         */\n        if (flush === Z_FULL_FLUSH) {\n          /*** CLEAR_HASH(s); ***/             /* forget history */\n          zero(s.head); // Fill with NIL (= 0);\n\n          if (s.lookahead === 0) {\n            s.strstart = 0;\n            s.block_start = 0;\n            s.insert = 0;\n          }\n        }\n      }\n      flush_pending(strm);\n      if (strm.avail_out === 0) {\n        s.last_flush = -1; /* avoid BUF_ERROR at next call, see above */\n        return Z_OK;\n      }\n    }\n  }\n  //Assert(strm->avail_out > 0, \"bug2\");\n  //if (strm.avail_out <= 0) { throw new Error(\"bug2\");}\n\n  if (flush !== Z_FINISH) { return Z_OK; }\n  if (s.wrap <= 0) { return Z_STREAM_END; }\n\n  /* Write the trailer */\n  if (s.wrap === 2) {\n    put_byte(s, strm.adler & 0xff);\n    put_byte(s, (strm.adler >> 8) & 0xff);\n    put_byte(s, (strm.adler >> 16) & 0xff);\n    put_byte(s, (strm.adler >> 24) & 0xff);\n    put_byte(s, strm.total_in & 0xff);\n    put_byte(s, (strm.total_in >> 8) & 0xff);\n    put_byte(s, (strm.total_in >> 16) & 0xff);\n    put_byte(s, (strm.total_in >> 24) & 0xff);\n  }\n  else\n  {\n    putShortMSB(s, strm.adler >>> 16);\n    putShortMSB(s, strm.adler & 0xffff);\n  }\n\n  flush_pending(strm);\n  /* If avail_out is zero, the application will call deflate again\n   * to flush the rest.\n   */\n  if (s.wrap > 0) { s.wrap = -s.wrap; }\n  /* write the trailer only once! */\n  return s.pending !== 0 ? Z_OK : Z_STREAM_END;\n}\n\nfunction deflateEnd(strm) {\n  var status;\n\n  if (!strm/*== Z_NULL*/ || !strm.state/*== Z_NULL*/) {\n    return Z_STREAM_ERROR;\n  }\n\n  status = strm.state.status;\n  if (status !== INIT_STATE &&\n    status !== EXTRA_STATE &&\n    status !== NAME_STATE &&\n    status !== COMMENT_STATE &&\n    status !== HCRC_STATE &&\n    status !== BUSY_STATE &&\n    status !== FINISH_STATE\n  ) {\n    return err(strm, Z_STREAM_ERROR);\n  }\n\n  strm.state = null;\n\n  return status === BUSY_STATE ? err(strm, Z_DATA_ERROR) : Z_OK;\n}\n\n\n/* =========================================================================\n * Initializes the compression dictionary from the given byte\n * sequence without producing any compressed output.\n */\nfunction deflateSetDictionary(strm, dictionary) {\n  var dictLength = dictionary.length;\n\n  var s;\n  var str, n;\n  var wrap;\n  var avail;\n  var next;\n  var input;\n  var tmpDict;\n\n  if (!strm/*== Z_NULL*/ || !strm.state/*== Z_NULL*/) {\n    return Z_STREAM_ERROR;\n  }\n\n  s = strm.state;\n  wrap = s.wrap;\n\n  if (wrap === 2 || (wrap === 1 && s.status !== INIT_STATE) || s.lookahead) {\n    return Z_STREAM_ERROR;\n  }\n\n  /* when using zlib wrappers, compute Adler-32 for provided dictionary */\n  if (wrap === 1) {\n    /* adler32(strm->adler, dictionary, dictLength); */\n    strm.adler = adler32(strm.adler, dictionary, dictLength, 0);\n  }\n\n  s.wrap = 0;   /* avoid computing Adler-32 in read_buf */\n\n  /* if dictionary would fill window, just replace the history */\n  if (dictLength >= s.w_size) {\n    if (wrap === 0) {            /* already empty otherwise */\n      /*** CLEAR_HASH(s); ***/\n      zero(s.head); // Fill with NIL (= 0);\n      s.strstart = 0;\n      s.block_start = 0;\n      s.insert = 0;\n    }\n    /* use the tail */\n    // dictionary = dictionary.slice(dictLength - s.w_size);\n    tmpDict = new utils.Buf8(s.w_size);\n    utils.arraySet(tmpDict, dictionary, dictLength - s.w_size, s.w_size, 0);\n    dictionary = tmpDict;\n    dictLength = s.w_size;\n  }\n  /* insert dictionary into window and hash */\n  avail = strm.avail_in;\n  next = strm.next_in;\n  input = strm.input;\n  strm.avail_in = dictLength;\n  strm.next_in = 0;\n  strm.input = dictionary;\n  fill_window(s);\n  while (s.lookahead >= MIN_MATCH) {\n    str = s.strstart;\n    n = s.lookahead - (MIN_MATCH - 1);\n    do {\n      /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[str + MIN_MATCH - 1]) & s.hash_mask;\n\n      s.prev[str & s.w_mask] = s.head[s.ins_h];\n\n      s.head[s.ins_h] = str;\n      str++;\n    } while (--n);\n    s.strstart = str;\n    s.lookahead = MIN_MATCH - 1;\n    fill_window(s);\n  }\n  s.strstart += s.lookahead;\n  s.block_start = s.strstart;\n  s.insert = s.lookahead;\n  s.lookahead = 0;\n  s.match_length = s.prev_length = MIN_MATCH - 1;\n  s.match_available = 0;\n  strm.next_in = next;\n  strm.input = input;\n  strm.avail_in = avail;\n  s.wrap = wrap;\n  return Z_OK;\n}\n\n\nexports.deflateInit = deflateInit;\nexports.deflateInit2 = deflateInit2;\nexports.deflateReset = deflateReset;\nexports.deflateResetKeep = deflateResetKeep;\nexports.deflateSetHeader = deflateSetHeader;\nexports.deflate = deflate;\nexports.deflateEnd = deflateEnd;\nexports.deflateSetDictionary = deflateSetDictionary;\nexports.deflateInfo = 'pako deflate (from Nodeca project)';\n\n/* Not implemented\nexports.deflateBound = deflateBound;\nexports.deflateCopy = deflateCopy;\nexports.deflateParams = deflateParams;\nexports.deflatePending = deflatePending;\nexports.deflatePrime = deflatePrime;\nexports.deflateTune = deflateTune;\n*/\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/pako/lib/zlib/deflate.js\n// module id = 51\n// module chunks = 0","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction GZheader() {\n  /* true if compressed data believed to be text */\n  this.text       = 0;\n  /* modification time */\n  this.time       = 0;\n  /* extra flags (not used when writing a gzip file) */\n  this.xflags     = 0;\n  /* operating system */\n  this.os         = 0;\n  /* pointer to extra field or Z_NULL if none */\n  this.extra      = null;\n  /* extra field length (valid if extra != Z_NULL) */\n  this.extra_len  = 0; // Actually, we don't need it in JS,\n                       // but leave for few code modifications\n\n  //\n  // Setup limits is not necessary because in js we should not preallocate memory\n  // for inflate use constant limit in 65536 bytes\n  //\n\n  /* space at extra (only when reading header) */\n  // this.extra_max  = 0;\n  /* pointer to zero-terminated file name or Z_NULL */\n  this.name       = '';\n  /* space at name (only when reading header) */\n  // this.name_max   = 0;\n  /* pointer to zero-terminated comment or Z_NULL */\n  this.comment    = '';\n  /* space at comment (only when reading header) */\n  // this.comm_max   = 0;\n  /* true if there was or will be a header crc */\n  this.hcrc       = 0;\n  /* true when done reading gzip header (not used when writing a gzip file) */\n  this.done       = false;\n}\n\nmodule.exports = GZheader;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/pako/lib/zlib/gzheader.js\n// module id = 52\n// module chunks = 0","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n// See state defs from inflate.js\nvar BAD = 30;       /* got a data error -- remain here until reset */\nvar TYPE = 12;      /* i: waiting for type bits, including last-flag bit */\n\n/*\n   Decode literal, length, and distance codes and write out the resulting\n   literal and match bytes until either not enough input or output is\n   available, an end-of-block is encountered, or a data error is encountered.\n   When large enough input and output buffers are supplied to inflate(), for\n   example, a 16K input buffer and a 64K output buffer, more than 95% of the\n   inflate execution time is spent in this routine.\n\n   Entry assumptions:\n\n        state.mode === LEN\n        strm.avail_in >= 6\n        strm.avail_out >= 258\n        start >= strm.avail_out\n        state.bits < 8\n\n   On return, state.mode is one of:\n\n        LEN -- ran out of enough output space or enough available input\n        TYPE -- reached end of block code, inflate() to interpret next block\n        BAD -- error in block data\n\n   Notes:\n\n    - The maximum input bits used by a length/distance pair is 15 bits for the\n      length code, 5 bits for the length extra, 15 bits for the distance code,\n      and 13 bits for the distance extra.  This totals 48 bits, or six bytes.\n      Therefore if strm.avail_in >= 6, then there is enough input to avoid\n      checking for available input while decoding.\n\n    - The maximum bytes that a single length/distance pair can output is 258\n      bytes, which is the maximum length that can be coded.  inflate_fast()\n      requires strm.avail_out >= 258 for each loop to avoid checking for\n      output space.\n */\nmodule.exports = function inflate_fast(strm, start) {\n  var state;\n  var _in;                    /* local strm.input */\n  var last;                   /* have enough input while in < last */\n  var _out;                   /* local strm.output */\n  var beg;                    /* inflate()'s initial strm.output */\n  var end;                    /* while out < end, enough space available */\n//#ifdef INFLATE_STRICT\n  var dmax;                   /* maximum distance from zlib header */\n//#endif\n  var wsize;                  /* window size or zero if not using window */\n  var whave;                  /* valid bytes in the window */\n  var wnext;                  /* window write index */\n  // Use `s_window` instead `window`, avoid conflict with instrumentation tools\n  var s_window;               /* allocated sliding window, if wsize != 0 */\n  var hold;                   /* local strm.hold */\n  var bits;                   /* local strm.bits */\n  var lcode;                  /* local strm.lencode */\n  var dcode;                  /* local strm.distcode */\n  var lmask;                  /* mask for first level of length codes */\n  var dmask;                  /* mask for first level of distance codes */\n  var here;                   /* retrieved table entry */\n  var op;                     /* code bits, operation, extra bits, or */\n                              /*  window position, window bytes to copy */\n  var len;                    /* match length, unused bytes */\n  var dist;                   /* match distance */\n  var from;                   /* where to copy match from */\n  var from_source;\n\n\n  var input, output; // JS specific, because we have no pointers\n\n  /* copy state to local variables */\n  state = strm.state;\n  //here = state.here;\n  _in = strm.next_in;\n  input = strm.input;\n  last = _in + (strm.avail_in - 5);\n  _out = strm.next_out;\n  output = strm.output;\n  beg = _out - (start - strm.avail_out);\n  end = _out + (strm.avail_out - 257);\n//#ifdef INFLATE_STRICT\n  dmax = state.dmax;\n//#endif\n  wsize = state.wsize;\n  whave = state.whave;\n  wnext = state.wnext;\n  s_window = state.window;\n  hold = state.hold;\n  bits = state.bits;\n  lcode = state.lencode;\n  dcode = state.distcode;\n  lmask = (1 << state.lenbits) - 1;\n  dmask = (1 << state.distbits) - 1;\n\n\n  /* decode literals and length/distances until end-of-block or not enough\n     input data or output space */\n\n  top:\n  do {\n    if (bits < 15) {\n      hold += input[_in++] << bits;\n      bits += 8;\n      hold += input[_in++] << bits;\n      bits += 8;\n    }\n\n    here = lcode[hold & lmask];\n\n    dolen:\n    for (;;) { // Goto emulation\n      op = here >>> 24/*here.bits*/;\n      hold >>>= op;\n      bits -= op;\n      op = (here >>> 16) & 0xff/*here.op*/;\n      if (op === 0) {                          /* literal */\n        //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?\n        //        \"inflate:         literal '%c'\\n\" :\n        //        \"inflate:         literal 0x%02x\\n\", here.val));\n        output[_out++] = here & 0xffff/*here.val*/;\n      }\n      else if (op & 16) {                     /* length base */\n        len = here & 0xffff/*here.val*/;\n        op &= 15;                           /* number of extra bits */\n        if (op) {\n          if (bits < op) {\n            hold += input[_in++] << bits;\n            bits += 8;\n          }\n          len += hold & ((1 << op) - 1);\n          hold >>>= op;\n          bits -= op;\n        }\n        //Tracevv((stderr, \"inflate:         length %u\\n\", len));\n        if (bits < 15) {\n          hold += input[_in++] << bits;\n          bits += 8;\n          hold += input[_in++] << bits;\n          bits += 8;\n        }\n        here = dcode[hold & dmask];\n\n        dodist:\n        for (;;) { // goto emulation\n          op = here >>> 24/*here.bits*/;\n          hold >>>= op;\n          bits -= op;\n          op = (here >>> 16) & 0xff/*here.op*/;\n\n          if (op & 16) {                      /* distance base */\n            dist = here & 0xffff/*here.val*/;\n            op &= 15;                       /* number of extra bits */\n            if (bits < op) {\n              hold += input[_in++] << bits;\n              bits += 8;\n              if (bits < op) {\n                hold += input[_in++] << bits;\n                bits += 8;\n              }\n            }\n            dist += hold & ((1 << op) - 1);\n//#ifdef INFLATE_STRICT\n            if (dist > dmax) {\n              strm.msg = 'invalid distance too far back';\n              state.mode = BAD;\n              break top;\n            }\n//#endif\n            hold >>>= op;\n            bits -= op;\n            //Tracevv((stderr, \"inflate:         distance %u\\n\", dist));\n            op = _out - beg;                /* max distance in output */\n            if (dist > op) {                /* see if copy from window */\n              op = dist - op;               /* distance back in window */\n              if (op > whave) {\n                if (state.sane) {\n                  strm.msg = 'invalid distance too far back';\n                  state.mode = BAD;\n                  break top;\n                }\n\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR\n//                if (len <= op - whave) {\n//                  do {\n//                    output[_out++] = 0;\n//                  } while (--len);\n//                  continue top;\n//                }\n//                len -= op - whave;\n//                do {\n//                  output[_out++] = 0;\n//                } while (--op > whave);\n//                if (op === 0) {\n//                  from = _out - dist;\n//                  do {\n//                    output[_out++] = output[from++];\n//                  } while (--len);\n//                  continue top;\n//                }\n//#endif\n              }\n              from = 0; // window index\n              from_source = s_window;\n              if (wnext === 0) {           /* very common case */\n                from += wsize - op;\n                if (op < len) {         /* some from window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = _out - dist;  /* rest from output */\n                  from_source = output;\n                }\n              }\n              else if (wnext < op) {      /* wrap around window */\n                from += wsize + wnext - op;\n                op -= wnext;\n                if (op < len) {         /* some from end of window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = 0;\n                  if (wnext < len) {  /* some from start of window */\n                    op = wnext;\n                    len -= op;\n                    do {\n                      output[_out++] = s_window[from++];\n                    } while (--op);\n                    from = _out - dist;      /* rest from output */\n                    from_source = output;\n                  }\n                }\n              }\n              else {                      /* contiguous in window */\n                from += wnext - op;\n                if (op < len) {         /* some from window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = _out - dist;  /* rest from output */\n                  from_source = output;\n                }\n              }\n              while (len > 2) {\n                output[_out++] = from_source[from++];\n                output[_out++] = from_source[from++];\n                output[_out++] = from_source[from++];\n                len -= 3;\n              }\n              if (len) {\n                output[_out++] = from_source[from++];\n                if (len > 1) {\n                  output[_out++] = from_source[from++];\n                }\n              }\n            }\n            else {\n              from = _out - dist;          /* copy direct from output */\n              do {                        /* minimum length is three */\n                output[_out++] = output[from++];\n                output[_out++] = output[from++];\n                output[_out++] = output[from++];\n                len -= 3;\n              } while (len > 2);\n              if (len) {\n                output[_out++] = output[from++];\n                if (len > 1) {\n                  output[_out++] = output[from++];\n                }\n              }\n            }\n          }\n          else if ((op & 64) === 0) {          /* 2nd level distance code */\n            here = dcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];\n            continue dodist;\n          }\n          else {\n            strm.msg = 'invalid distance code';\n            state.mode = BAD;\n            break top;\n          }\n\n          break; // need to emulate goto via \"continue\"\n        }\n      }\n      else if ((op & 64) === 0) {              /* 2nd level length code */\n        here = lcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];\n        continue dolen;\n      }\n      else if (op & 32) {                     /* end-of-block */\n        //Tracevv((stderr, \"inflate:         end of block\\n\"));\n        state.mode = TYPE;\n        break top;\n      }\n      else {\n        strm.msg = 'invalid literal/length code';\n        state.mode = BAD;\n        break top;\n      }\n\n      break; // need to emulate goto via \"continue\"\n    }\n  } while (_in < last && _out < end);\n\n  /* return unused bytes (on entry, bits < 8, so in won't go too far back) */\n  len = bits >> 3;\n  _in -= len;\n  bits -= len << 3;\n  hold &= (1 << bits) - 1;\n\n  /* update state and return */\n  strm.next_in = _in;\n  strm.next_out = _out;\n  strm.avail_in = (_in < last ? 5 + (last - _in) : 5 - (_in - last));\n  strm.avail_out = (_out < end ? 257 + (end - _out) : 257 - (_out - end));\n  state.hold = hold;\n  state.bits = bits;\n  return;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/pako/lib/zlib/inffast.js\n// module id = 53\n// module chunks = 0","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar utils         = require('../utils/common');\nvar adler32       = require('./adler32');\nvar crc32         = require('./crc32');\nvar inflate_fast  = require('./inffast');\nvar inflate_table = require('./inftrees');\n\nvar CODES = 0;\nvar LENS = 1;\nvar DISTS = 2;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\n\n/* Allowed flush values; see deflate() and inflate() below for details */\n//var Z_NO_FLUSH      = 0;\n//var Z_PARTIAL_FLUSH = 1;\n//var Z_SYNC_FLUSH    = 2;\n//var Z_FULL_FLUSH    = 3;\nvar Z_FINISH        = 4;\nvar Z_BLOCK         = 5;\nvar Z_TREES         = 6;\n\n\n/* Return codes for the compression/decompression functions. Negative values\n * are errors, positive values are used for special but normal events.\n */\nvar Z_OK            = 0;\nvar Z_STREAM_END    = 1;\nvar Z_NEED_DICT     = 2;\n//var Z_ERRNO         = -1;\nvar Z_STREAM_ERROR  = -2;\nvar Z_DATA_ERROR    = -3;\nvar Z_MEM_ERROR     = -4;\nvar Z_BUF_ERROR     = -5;\n//var Z_VERSION_ERROR = -6;\n\n/* The deflate compression method */\nvar Z_DEFLATED  = 8;\n\n\n/* STATES ====================================================================*/\n/* ===========================================================================*/\n\n\nvar    HEAD = 1;       /* i: waiting for magic header */\nvar    FLAGS = 2;      /* i: waiting for method and flags (gzip) */\nvar    TIME = 3;       /* i: waiting for modification time (gzip) */\nvar    OS = 4;         /* i: waiting for extra flags and operating system (gzip) */\nvar    EXLEN = 5;      /* i: waiting for extra length (gzip) */\nvar    EXTRA = 6;      /* i: waiting for extra bytes (gzip) */\nvar    NAME = 7;       /* i: waiting for end of file name (gzip) */\nvar    COMMENT = 8;    /* i: waiting for end of comment (gzip) */\nvar    HCRC = 9;       /* i: waiting for header crc (gzip) */\nvar    DICTID = 10;    /* i: waiting for dictionary check value */\nvar    DICT = 11;      /* waiting for inflateSetDictionary() call */\nvar        TYPE = 12;      /* i: waiting for type bits, including last-flag bit */\nvar        TYPEDO = 13;    /* i: same, but skip check to exit inflate on new block */\nvar        STORED = 14;    /* i: waiting for stored size (length and complement) */\nvar        COPY_ = 15;     /* i/o: same as COPY below, but only first time in */\nvar        COPY = 16;      /* i/o: waiting for input or output to copy stored block */\nvar        TABLE = 17;     /* i: waiting for dynamic block table lengths */\nvar        LENLENS = 18;   /* i: waiting for code length code lengths */\nvar        CODELENS = 19;  /* i: waiting for length/lit and distance code lengths */\nvar            LEN_ = 20;      /* i: same as LEN below, but only first time in */\nvar            LEN = 21;       /* i: waiting for length/lit/eob code */\nvar            LENEXT = 22;    /* i: waiting for length extra bits */\nvar            DIST = 23;      /* i: waiting for distance code */\nvar            DISTEXT = 24;   /* i: waiting for distance extra bits */\nvar            MATCH = 25;     /* o: waiting for output space to copy string */\nvar            LIT = 26;       /* o: waiting for output space to write literal */\nvar    CHECK = 27;     /* i: waiting for 32-bit check value */\nvar    LENGTH = 28;    /* i: waiting for 32-bit length (gzip) */\nvar    DONE = 29;      /* finished check, done -- remain here until reset */\nvar    BAD = 30;       /* got a data error -- remain here until reset */\nvar    MEM = 31;       /* got an inflate() memory error -- remain here until reset */\nvar    SYNC = 32;      /* looking for synchronization bytes to restart inflate() */\n\n/* ===========================================================================*/\n\n\n\nvar ENOUGH_LENS = 852;\nvar ENOUGH_DISTS = 592;\n//var ENOUGH =  (ENOUGH_LENS+ENOUGH_DISTS);\n\nvar MAX_WBITS = 15;\n/* 32K LZ77 window */\nvar DEF_WBITS = MAX_WBITS;\n\n\nfunction zswap32(q) {\n  return  (((q >>> 24) & 0xff) +\n          ((q >>> 8) & 0xff00) +\n          ((q & 0xff00) << 8) +\n          ((q & 0xff) << 24));\n}\n\n\nfunction InflateState() {\n  this.mode = 0;             /* current inflate mode */\n  this.last = false;          /* true if processing last block */\n  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip */\n  this.havedict = false;      /* true if dictionary provided */\n  this.flags = 0;             /* gzip header method and flags (0 if zlib) */\n  this.dmax = 0;              /* zlib header max distance (INFLATE_STRICT) */\n  this.check = 0;             /* protected copy of check value */\n  this.total = 0;             /* protected copy of output count */\n  // TODO: may be {}\n  this.head = null;           /* where to save gzip header information */\n\n  /* sliding window */\n  this.wbits = 0;             /* log base 2 of requested window size */\n  this.wsize = 0;             /* window size or zero if not using window */\n  this.whave = 0;             /* valid bytes in the window */\n  this.wnext = 0;             /* window write index */\n  this.window = null;         /* allocated sliding window, if needed */\n\n  /* bit accumulator */\n  this.hold = 0;              /* input bit accumulator */\n  this.bits = 0;              /* number of bits in \"in\" */\n\n  /* for string and stored block copying */\n  this.length = 0;            /* literal or length of data to copy */\n  this.offset = 0;            /* distance back to copy string from */\n\n  /* for table and code decoding */\n  this.extra = 0;             /* extra bits needed */\n\n  /* fixed and dynamic code tables */\n  this.lencode = null;          /* starting table for length/literal codes */\n  this.distcode = null;         /* starting table for distance codes */\n  this.lenbits = 0;           /* index bits for lencode */\n  this.distbits = 0;          /* index bits for distcode */\n\n  /* dynamic table building */\n  this.ncode = 0;             /* number of code length code lengths */\n  this.nlen = 0;              /* number of length code lengths */\n  this.ndist = 0;             /* number of distance code lengths */\n  this.have = 0;              /* number of code lengths in lens[] */\n  this.next = null;              /* next available space in codes[] */\n\n  this.lens = new utils.Buf16(320); /* temporary storage for code lengths */\n  this.work = new utils.Buf16(288); /* work area for code table building */\n\n  /*\n   because we don't have pointers in js, we use lencode and distcode directly\n   as buffers so we don't need codes\n  */\n  //this.codes = new utils.Buf32(ENOUGH);       /* space for code tables */\n  this.lendyn = null;              /* dynamic table for length/literal codes (JS specific) */\n  this.distdyn = null;             /* dynamic table for distance codes (JS specific) */\n  this.sane = 0;                   /* if false, allow invalid distance too far */\n  this.back = 0;                   /* bits back of last unprocessed length/lit */\n  this.was = 0;                    /* initial length of match */\n}\n\nfunction inflateResetKeep(strm) {\n  var state;\n\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  state = strm.state;\n  strm.total_in = strm.total_out = state.total = 0;\n  strm.msg = ''; /*Z_NULL*/\n  if (state.wrap) {       /* to support ill-conceived Java test suite */\n    strm.adler = state.wrap & 1;\n  }\n  state.mode = HEAD;\n  state.last = 0;\n  state.havedict = 0;\n  state.dmax = 32768;\n  state.head = null/*Z_NULL*/;\n  state.hold = 0;\n  state.bits = 0;\n  //state.lencode = state.distcode = state.next = state.codes;\n  state.lencode = state.lendyn = new utils.Buf32(ENOUGH_LENS);\n  state.distcode = state.distdyn = new utils.Buf32(ENOUGH_DISTS);\n\n  state.sane = 1;\n  state.back = -1;\n  //Tracev((stderr, \"inflate: reset\\n\"));\n  return Z_OK;\n}\n\nfunction inflateReset(strm) {\n  var state;\n\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  state = strm.state;\n  state.wsize = 0;\n  state.whave = 0;\n  state.wnext = 0;\n  return inflateResetKeep(strm);\n\n}\n\nfunction inflateReset2(strm, windowBits) {\n  var wrap;\n  var state;\n\n  /* get the state */\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  state = strm.state;\n\n  /* extract wrap request from windowBits parameter */\n  if (windowBits < 0) {\n    wrap = 0;\n    windowBits = -windowBits;\n  }\n  else {\n    wrap = (windowBits >> 4) + 1;\n    if (windowBits < 48) {\n      windowBits &= 15;\n    }\n  }\n\n  /* set number of window bits, free window if different */\n  if (windowBits && (windowBits < 8 || windowBits > 15)) {\n    return Z_STREAM_ERROR;\n  }\n  if (state.window !== null && state.wbits !== windowBits) {\n    state.window = null;\n  }\n\n  /* update state and reset the rest of it */\n  state.wrap = wrap;\n  state.wbits = windowBits;\n  return inflateReset(strm);\n}\n\nfunction inflateInit2(strm, windowBits) {\n  var ret;\n  var state;\n\n  if (!strm) { return Z_STREAM_ERROR; }\n  //strm.msg = Z_NULL;                 /* in case we return an error */\n\n  state = new InflateState();\n\n  //if (state === Z_NULL) return Z_MEM_ERROR;\n  //Tracev((stderr, \"inflate: allocated\\n\"));\n  strm.state = state;\n  state.window = null/*Z_NULL*/;\n  ret = inflateReset2(strm, windowBits);\n  if (ret !== Z_OK) {\n    strm.state = null/*Z_NULL*/;\n  }\n  return ret;\n}\n\nfunction inflateInit(strm) {\n  return inflateInit2(strm, DEF_WBITS);\n}\n\n\n/*\n Return state with length and distance decoding tables and index sizes set to\n fixed code decoding.  Normally this returns fixed tables from inffixed.h.\n If BUILDFIXED is defined, then instead this routine builds the tables the\n first time it's called, and returns those tables the first time and\n thereafter.  This reduces the size of the code by about 2K bytes, in\n exchange for a little execution time.  However, BUILDFIXED should not be\n used for threaded applications, since the rewriting of the tables and virgin\n may not be thread-safe.\n */\nvar virgin = true;\n\nvar lenfix, distfix; // We have no pointers in JS, so keep tables separate\n\nfunction fixedtables(state) {\n  /* build fixed huffman tables if first call (may not be thread safe) */\n  if (virgin) {\n    var sym;\n\n    lenfix = new utils.Buf32(512);\n    distfix = new utils.Buf32(32);\n\n    /* literal/length table */\n    sym = 0;\n    while (sym < 144) { state.lens[sym++] = 8; }\n    while (sym < 256) { state.lens[sym++] = 9; }\n    while (sym < 280) { state.lens[sym++] = 7; }\n    while (sym < 288) { state.lens[sym++] = 8; }\n\n    inflate_table(LENS,  state.lens, 0, 288, lenfix,   0, state.work, { bits: 9 });\n\n    /* distance table */\n    sym = 0;\n    while (sym < 32) { state.lens[sym++] = 5; }\n\n    inflate_table(DISTS, state.lens, 0, 32,   distfix, 0, state.work, { bits: 5 });\n\n    /* do this just once */\n    virgin = false;\n  }\n\n  state.lencode = lenfix;\n  state.lenbits = 9;\n  state.distcode = distfix;\n  state.distbits = 5;\n}\n\n\n/*\n Update the window with the last wsize (normally 32K) bytes written before\n returning.  If window does not exist yet, create it.  This is only called\n when a window is already in use, or when output has been written during this\n inflate call, but the end of the deflate stream has not been reached yet.\n It is also called to create a window for dictionary data when a dictionary\n is loaded.\n\n Providing output buffers larger than 32K to inflate() should provide a speed\n advantage, since only the last 32K of output is copied to the sliding window\n upon return from inflate(), and since all distances after the first 32K of\n output will fall in the output data, making match copies simpler and faster.\n The advantage may be dependent on the size of the processor's data caches.\n */\nfunction updatewindow(strm, src, end, copy) {\n  var dist;\n  var state = strm.state;\n\n  /* if it hasn't been done already, allocate space for the window */\n  if (state.window === null) {\n    state.wsize = 1 << state.wbits;\n    state.wnext = 0;\n    state.whave = 0;\n\n    state.window = new utils.Buf8(state.wsize);\n  }\n\n  /* copy state->wsize or less output bytes into the circular window */\n  if (copy >= state.wsize) {\n    utils.arraySet(state.window, src, end - state.wsize, state.wsize, 0);\n    state.wnext = 0;\n    state.whave = state.wsize;\n  }\n  else {\n    dist = state.wsize - state.wnext;\n    if (dist > copy) {\n      dist = copy;\n    }\n    //zmemcpy(state->window + state->wnext, end - copy, dist);\n    utils.arraySet(state.window, src, end - copy, dist, state.wnext);\n    copy -= dist;\n    if (copy) {\n      //zmemcpy(state->window, end - copy, copy);\n      utils.arraySet(state.window, src, end - copy, copy, 0);\n      state.wnext = copy;\n      state.whave = state.wsize;\n    }\n    else {\n      state.wnext += dist;\n      if (state.wnext === state.wsize) { state.wnext = 0; }\n      if (state.whave < state.wsize) { state.whave += dist; }\n    }\n  }\n  return 0;\n}\n\nfunction inflate(strm, flush) {\n  var state;\n  var input, output;          // input/output buffers\n  var next;                   /* next input INDEX */\n  var put;                    /* next output INDEX */\n  var have, left;             /* available input and output */\n  var hold;                   /* bit buffer */\n  var bits;                   /* bits in bit buffer */\n  var _in, _out;              /* save starting available input and output */\n  var copy;                   /* number of stored or match bytes to copy */\n  var from;                   /* where to copy match bytes from */\n  var from_source;\n  var here = 0;               /* current decoding table entry */\n  var here_bits, here_op, here_val; // paked \"here\" denormalized (JS specific)\n  //var last;                   /* parent table entry */\n  var last_bits, last_op, last_val; // paked \"last\" denormalized (JS specific)\n  var len;                    /* length to copy for repeats, bits to drop */\n  var ret;                    /* return code */\n  var hbuf = new utils.Buf8(4);    /* buffer for gzip header crc calculation */\n  var opts;\n\n  var n; // temporary var for NEED_BITS\n\n  var order = /* permutation of code lengths */\n    [ 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 ];\n\n\n  if (!strm || !strm.state || !strm.output ||\n      (!strm.input && strm.avail_in !== 0)) {\n    return Z_STREAM_ERROR;\n  }\n\n  state = strm.state;\n  if (state.mode === TYPE) { state.mode = TYPEDO; }    /* skip check */\n\n\n  //--- LOAD() ---\n  put = strm.next_out;\n  output = strm.output;\n  left = strm.avail_out;\n  next = strm.next_in;\n  input = strm.input;\n  have = strm.avail_in;\n  hold = state.hold;\n  bits = state.bits;\n  //---\n\n  _in = have;\n  _out = left;\n  ret = Z_OK;\n\n  inf_leave: // goto emulation\n  for (;;) {\n    switch (state.mode) {\n      case HEAD:\n        if (state.wrap === 0) {\n          state.mode = TYPEDO;\n          break;\n        }\n        //=== NEEDBITS(16);\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if ((state.wrap & 2) && hold === 0x8b1f) {  /* gzip header */\n          state.check = 0/*crc32(0L, Z_NULL, 0)*/;\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32(state.check, hbuf, 2, 0);\n          //===//\n\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          state.mode = FLAGS;\n          break;\n        }\n        state.flags = 0;           /* expect zlib header */\n        if (state.head) {\n          state.head.done = false;\n        }\n        if (!(state.wrap & 1) ||   /* check if zlib header allowed */\n          (((hold & 0xff)/*BITS(8)*/ << 8) + (hold >> 8)) % 31) {\n          strm.msg = 'incorrect header check';\n          state.mode = BAD;\n          break;\n        }\n        if ((hold & 0x0f)/*BITS(4)*/ !== Z_DEFLATED) {\n          strm.msg = 'unknown compression method';\n          state.mode = BAD;\n          break;\n        }\n        //--- DROPBITS(4) ---//\n        hold >>>= 4;\n        bits -= 4;\n        //---//\n        len = (hold & 0x0f)/*BITS(4)*/ + 8;\n        if (state.wbits === 0) {\n          state.wbits = len;\n        }\n        else if (len > state.wbits) {\n          strm.msg = 'invalid window size';\n          state.mode = BAD;\n          break;\n        }\n        state.dmax = 1 << len;\n        //Tracev((stderr, \"inflate:   zlib header ok\\n\"));\n        strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;\n        state.mode = hold & 0x200 ? DICTID : TYPE;\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        break;\n      case FLAGS:\n        //=== NEEDBITS(16); */\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.flags = hold;\n        if ((state.flags & 0xff) !== Z_DEFLATED) {\n          strm.msg = 'unknown compression method';\n          state.mode = BAD;\n          break;\n        }\n        if (state.flags & 0xe000) {\n          strm.msg = 'unknown header flags set';\n          state.mode = BAD;\n          break;\n        }\n        if (state.head) {\n          state.head.text = ((hold >> 8) & 1);\n        }\n        if (state.flags & 0x0200) {\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32(state.check, hbuf, 2, 0);\n          //===//\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = TIME;\n        /* falls through */\n      case TIME:\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if (state.head) {\n          state.head.time = hold;\n        }\n        if (state.flags & 0x0200) {\n          //=== CRC4(state.check, hold)\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          hbuf[2] = (hold >>> 16) & 0xff;\n          hbuf[3] = (hold >>> 24) & 0xff;\n          state.check = crc32(state.check, hbuf, 4, 0);\n          //===\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = OS;\n        /* falls through */\n      case OS:\n        //=== NEEDBITS(16); */\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if (state.head) {\n          state.head.xflags = (hold & 0xff);\n          state.head.os = (hold >> 8);\n        }\n        if (state.flags & 0x0200) {\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32(state.check, hbuf, 2, 0);\n          //===//\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = EXLEN;\n        /* falls through */\n      case EXLEN:\n        if (state.flags & 0x0400) {\n          //=== NEEDBITS(16); */\n          while (bits < 16) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.length = hold;\n          if (state.head) {\n            state.head.extra_len = hold;\n          }\n          if (state.flags & 0x0200) {\n            //=== CRC2(state.check, hold);\n            hbuf[0] = hold & 0xff;\n            hbuf[1] = (hold >>> 8) & 0xff;\n            state.check = crc32(state.check, hbuf, 2, 0);\n            //===//\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n        }\n        else if (state.head) {\n          state.head.extra = null/*Z_NULL*/;\n        }\n        state.mode = EXTRA;\n        /* falls through */\n      case EXTRA:\n        if (state.flags & 0x0400) {\n          copy = state.length;\n          if (copy > have) { copy = have; }\n          if (copy) {\n            if (state.head) {\n              len = state.head.extra_len - state.length;\n              if (!state.head.extra) {\n                // Use untyped array for more convenient processing later\n                state.head.extra = new Array(state.head.extra_len);\n              }\n              utils.arraySet(\n                state.head.extra,\n                input,\n                next,\n                // extra field is limited to 65536 bytes\n                // - no need for additional size check\n                copy,\n                /*len + copy > state.head.extra_max - len ? state.head.extra_max : copy,*/\n                len\n              );\n              //zmemcpy(state.head.extra + len, next,\n              //        len + copy > state.head.extra_max ?\n              //        state.head.extra_max - len : copy);\n            }\n            if (state.flags & 0x0200) {\n              state.check = crc32(state.check, input, copy, next);\n            }\n            have -= copy;\n            next += copy;\n            state.length -= copy;\n          }\n          if (state.length) { break inf_leave; }\n        }\n        state.length = 0;\n        state.mode = NAME;\n        /* falls through */\n      case NAME:\n        if (state.flags & 0x0800) {\n          if (have === 0) { break inf_leave; }\n          copy = 0;\n          do {\n            // TODO: 2 or 1 bytes?\n            len = input[next + copy++];\n            /* use constant limit because in js we should not preallocate memory */\n            if (state.head && len &&\n                (state.length < 65536 /*state.head.name_max*/)) {\n              state.head.name += String.fromCharCode(len);\n            }\n          } while (len && copy < have);\n\n          if (state.flags & 0x0200) {\n            state.check = crc32(state.check, input, copy, next);\n          }\n          have -= copy;\n          next += copy;\n          if (len) { break inf_leave; }\n        }\n        else if (state.head) {\n          state.head.name = null;\n        }\n        state.length = 0;\n        state.mode = COMMENT;\n        /* falls through */\n      case COMMENT:\n        if (state.flags & 0x1000) {\n          if (have === 0) { break inf_leave; }\n          copy = 0;\n          do {\n            len = input[next + copy++];\n            /* use constant limit because in js we should not preallocate memory */\n            if (state.head && len &&\n                (state.length < 65536 /*state.head.comm_max*/)) {\n              state.head.comment += String.fromCharCode(len);\n            }\n          } while (len && copy < have);\n          if (state.flags & 0x0200) {\n            state.check = crc32(state.check, input, copy, next);\n          }\n          have -= copy;\n          next += copy;\n          if (len) { break inf_leave; }\n        }\n        else if (state.head) {\n          state.head.comment = null;\n        }\n        state.mode = HCRC;\n        /* falls through */\n      case HCRC:\n        if (state.flags & 0x0200) {\n          //=== NEEDBITS(16); */\n          while (bits < 16) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          if (hold !== (state.check & 0xffff)) {\n            strm.msg = 'header crc mismatch';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n        }\n        if (state.head) {\n          state.head.hcrc = ((state.flags >> 9) & 1);\n          state.head.done = true;\n        }\n        strm.adler = state.check = 0;\n        state.mode = TYPE;\n        break;\n      case DICTID:\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        strm.adler = state.check = zswap32(hold);\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = DICT;\n        /* falls through */\n      case DICT:\n        if (state.havedict === 0) {\n          //--- RESTORE() ---\n          strm.next_out = put;\n          strm.avail_out = left;\n          strm.next_in = next;\n          strm.avail_in = have;\n          state.hold = hold;\n          state.bits = bits;\n          //---\n          return Z_NEED_DICT;\n        }\n        strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;\n        state.mode = TYPE;\n        /* falls through */\n      case TYPE:\n        if (flush === Z_BLOCK || flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case TYPEDO:\n        if (state.last) {\n          //--- BYTEBITS() ---//\n          hold >>>= bits & 7;\n          bits -= bits & 7;\n          //---//\n          state.mode = CHECK;\n          break;\n        }\n        //=== NEEDBITS(3); */\n        while (bits < 3) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.last = (hold & 0x01)/*BITS(1)*/;\n        //--- DROPBITS(1) ---//\n        hold >>>= 1;\n        bits -= 1;\n        //---//\n\n        switch ((hold & 0x03)/*BITS(2)*/) {\n          case 0:                             /* stored block */\n            //Tracev((stderr, \"inflate:     stored block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = STORED;\n            break;\n          case 1:                             /* fixed block */\n            fixedtables(state);\n            //Tracev((stderr, \"inflate:     fixed codes block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = LEN_;             /* decode codes */\n            if (flush === Z_TREES) {\n              //--- DROPBITS(2) ---//\n              hold >>>= 2;\n              bits -= 2;\n              //---//\n              break inf_leave;\n            }\n            break;\n          case 2:                             /* dynamic block */\n            //Tracev((stderr, \"inflate:     dynamic codes block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = TABLE;\n            break;\n          case 3:\n            strm.msg = 'invalid block type';\n            state.mode = BAD;\n        }\n        //--- DROPBITS(2) ---//\n        hold >>>= 2;\n        bits -= 2;\n        //---//\n        break;\n      case STORED:\n        //--- BYTEBITS() ---// /* go to byte boundary */\n        hold >>>= bits & 7;\n        bits -= bits & 7;\n        //---//\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if ((hold & 0xffff) !== ((hold >>> 16) ^ 0xffff)) {\n          strm.msg = 'invalid stored block lengths';\n          state.mode = BAD;\n          break;\n        }\n        state.length = hold & 0xffff;\n        //Tracev((stderr, \"inflate:       stored length %u\\n\",\n        //        state.length));\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = COPY_;\n        if (flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case COPY_:\n        state.mode = COPY;\n        /* falls through */\n      case COPY:\n        copy = state.length;\n        if (copy) {\n          if (copy > have) { copy = have; }\n          if (copy > left) { copy = left; }\n          if (copy === 0) { break inf_leave; }\n          //--- zmemcpy(put, next, copy); ---\n          utils.arraySet(output, input, next, copy, put);\n          //---//\n          have -= copy;\n          next += copy;\n          left -= copy;\n          put += copy;\n          state.length -= copy;\n          break;\n        }\n        //Tracev((stderr, \"inflate:       stored end\\n\"));\n        state.mode = TYPE;\n        break;\n      case TABLE:\n        //=== NEEDBITS(14); */\n        while (bits < 14) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.nlen = (hold & 0x1f)/*BITS(5)*/ + 257;\n        //--- DROPBITS(5) ---//\n        hold >>>= 5;\n        bits -= 5;\n        //---//\n        state.ndist = (hold & 0x1f)/*BITS(5)*/ + 1;\n        //--- DROPBITS(5) ---//\n        hold >>>= 5;\n        bits -= 5;\n        //---//\n        state.ncode = (hold & 0x0f)/*BITS(4)*/ + 4;\n        //--- DROPBITS(4) ---//\n        hold >>>= 4;\n        bits -= 4;\n        //---//\n//#ifndef PKZIP_BUG_WORKAROUND\n        if (state.nlen > 286 || state.ndist > 30) {\n          strm.msg = 'too many length or distance symbols';\n          state.mode = BAD;\n          break;\n        }\n//#endif\n        //Tracev((stderr, \"inflate:       table sizes ok\\n\"));\n        state.have = 0;\n        state.mode = LENLENS;\n        /* falls through */\n      case LENLENS:\n        while (state.have < state.ncode) {\n          //=== NEEDBITS(3);\n          while (bits < 3) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.lens[order[state.have++]] = (hold & 0x07);//BITS(3);\n          //--- DROPBITS(3) ---//\n          hold >>>= 3;\n          bits -= 3;\n          //---//\n        }\n        while (state.have < 19) {\n          state.lens[order[state.have++]] = 0;\n        }\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        //state.next = state.codes;\n        //state.lencode = state.next;\n        // Switch to use dynamic table\n        state.lencode = state.lendyn;\n        state.lenbits = 7;\n\n        opts = { bits: state.lenbits };\n        ret = inflate_table(CODES, state.lens, 0, 19, state.lencode, 0, state.work, opts);\n        state.lenbits = opts.bits;\n\n        if (ret) {\n          strm.msg = 'invalid code lengths set';\n          state.mode = BAD;\n          break;\n        }\n        //Tracev((stderr, \"inflate:       code lengths ok\\n\"));\n        state.have = 0;\n        state.mode = CODELENS;\n        /* falls through */\n      case CODELENS:\n        while (state.have < state.nlen + state.ndist) {\n          for (;;) {\n            here = state.lencode[hold & ((1 << state.lenbits) - 1)];/*BITS(state.lenbits)*/\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          if (here_val < 16) {\n            //--- DROPBITS(here.bits) ---//\n            hold >>>= here_bits;\n            bits -= here_bits;\n            //---//\n            state.lens[state.have++] = here_val;\n          }\n          else {\n            if (here_val === 16) {\n              //=== NEEDBITS(here.bits + 2);\n              n = here_bits + 2;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              if (state.have === 0) {\n                strm.msg = 'invalid bit length repeat';\n                state.mode = BAD;\n                break;\n              }\n              len = state.lens[state.have - 1];\n              copy = 3 + (hold & 0x03);//BITS(2);\n              //--- DROPBITS(2) ---//\n              hold >>>= 2;\n              bits -= 2;\n              //---//\n            }\n            else if (here_val === 17) {\n              //=== NEEDBITS(here.bits + 3);\n              n = here_bits + 3;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              len = 0;\n              copy = 3 + (hold & 0x07);//BITS(3);\n              //--- DROPBITS(3) ---//\n              hold >>>= 3;\n              bits -= 3;\n              //---//\n            }\n            else {\n              //=== NEEDBITS(here.bits + 7);\n              n = here_bits + 7;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              len = 0;\n              copy = 11 + (hold & 0x7f);//BITS(7);\n              //--- DROPBITS(7) ---//\n              hold >>>= 7;\n              bits -= 7;\n              //---//\n            }\n            if (state.have + copy > state.nlen + state.ndist) {\n              strm.msg = 'invalid bit length repeat';\n              state.mode = BAD;\n              break;\n            }\n            while (copy--) {\n              state.lens[state.have++] = len;\n            }\n          }\n        }\n\n        /* handle error breaks in while */\n        if (state.mode === BAD) { break; }\n\n        /* check for end-of-block code (better have one) */\n        if (state.lens[256] === 0) {\n          strm.msg = 'invalid code -- missing end-of-block';\n          state.mode = BAD;\n          break;\n        }\n\n        /* build code tables -- note: do not change the lenbits or distbits\n           values here (9 and 6) without reading the comments in inftrees.h\n           concerning the ENOUGH constants, which depend on those values */\n        state.lenbits = 9;\n\n        opts = { bits: state.lenbits };\n        ret = inflate_table(LENS, state.lens, 0, state.nlen, state.lencode, 0, state.work, opts);\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        // state.next_index = opts.table_index;\n        state.lenbits = opts.bits;\n        // state.lencode = state.next;\n\n        if (ret) {\n          strm.msg = 'invalid literal/lengths set';\n          state.mode = BAD;\n          break;\n        }\n\n        state.distbits = 6;\n        //state.distcode.copy(state.codes);\n        // Switch to use dynamic table\n        state.distcode = state.distdyn;\n        opts = { bits: state.distbits };\n        ret = inflate_table(DISTS, state.lens, state.nlen, state.ndist, state.distcode, 0, state.work, opts);\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        // state.next_index = opts.table_index;\n        state.distbits = opts.bits;\n        // state.distcode = state.next;\n\n        if (ret) {\n          strm.msg = 'invalid distances set';\n          state.mode = BAD;\n          break;\n        }\n        //Tracev((stderr, 'inflate:       codes ok\\n'));\n        state.mode = LEN_;\n        if (flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case LEN_:\n        state.mode = LEN;\n        /* falls through */\n      case LEN:\n        if (have >= 6 && left >= 258) {\n          //--- RESTORE() ---\n          strm.next_out = put;\n          strm.avail_out = left;\n          strm.next_in = next;\n          strm.avail_in = have;\n          state.hold = hold;\n          state.bits = bits;\n          //---\n          inflate_fast(strm, _out);\n          //--- LOAD() ---\n          put = strm.next_out;\n          output = strm.output;\n          left = strm.avail_out;\n          next = strm.next_in;\n          input = strm.input;\n          have = strm.avail_in;\n          hold = state.hold;\n          bits = state.bits;\n          //---\n\n          if (state.mode === TYPE) {\n            state.back = -1;\n          }\n          break;\n        }\n        state.back = 0;\n        for (;;) {\n          here = state.lencode[hold & ((1 << state.lenbits) - 1)];  /*BITS(state.lenbits)*/\n          here_bits = here >>> 24;\n          here_op = (here >>> 16) & 0xff;\n          here_val = here & 0xffff;\n\n          if (here_bits <= bits) { break; }\n          //--- PULLBYTE() ---//\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n          //---//\n        }\n        if (here_op && (here_op & 0xf0) === 0) {\n          last_bits = here_bits;\n          last_op = here_op;\n          last_val = here_val;\n          for (;;) {\n            here = state.lencode[last_val +\n                    ((hold & ((1 << (last_bits + last_op)) - 1))/*BITS(last.bits + last.op)*/ >> last_bits)];\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((last_bits + here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          //--- DROPBITS(last.bits) ---//\n          hold >>>= last_bits;\n          bits -= last_bits;\n          //---//\n          state.back += last_bits;\n        }\n        //--- DROPBITS(here.bits) ---//\n        hold >>>= here_bits;\n        bits -= here_bits;\n        //---//\n        state.back += here_bits;\n        state.length = here_val;\n        if (here_op === 0) {\n          //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?\n          //        \"inflate:         literal '%c'\\n\" :\n          //        \"inflate:         literal 0x%02x\\n\", here.val));\n          state.mode = LIT;\n          break;\n        }\n        if (here_op & 32) {\n          //Tracevv((stderr, \"inflate:         end of block\\n\"));\n          state.back = -1;\n          state.mode = TYPE;\n          break;\n        }\n        if (here_op & 64) {\n          strm.msg = 'invalid literal/length code';\n          state.mode = BAD;\n          break;\n        }\n        state.extra = here_op & 15;\n        state.mode = LENEXT;\n        /* falls through */\n      case LENEXT:\n        if (state.extra) {\n          //=== NEEDBITS(state.extra);\n          n = state.extra;\n          while (bits < n) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.length += hold & ((1 << state.extra) - 1)/*BITS(state.extra)*/;\n          //--- DROPBITS(state.extra) ---//\n          hold >>>= state.extra;\n          bits -= state.extra;\n          //---//\n          state.back += state.extra;\n        }\n        //Tracevv((stderr, \"inflate:         length %u\\n\", state.length));\n        state.was = state.length;\n        state.mode = DIST;\n        /* falls through */\n      case DIST:\n        for (;;) {\n          here = state.distcode[hold & ((1 << state.distbits) - 1)];/*BITS(state.distbits)*/\n          here_bits = here >>> 24;\n          here_op = (here >>> 16) & 0xff;\n          here_val = here & 0xffff;\n\n          if ((here_bits) <= bits) { break; }\n          //--- PULLBYTE() ---//\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n          //---//\n        }\n        if ((here_op & 0xf0) === 0) {\n          last_bits = here_bits;\n          last_op = here_op;\n          last_val = here_val;\n          for (;;) {\n            here = state.distcode[last_val +\n                    ((hold & ((1 << (last_bits + last_op)) - 1))/*BITS(last.bits + last.op)*/ >> last_bits)];\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((last_bits + here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          //--- DROPBITS(last.bits) ---//\n          hold >>>= last_bits;\n          bits -= last_bits;\n          //---//\n          state.back += last_bits;\n        }\n        //--- DROPBITS(here.bits) ---//\n        hold >>>= here_bits;\n        bits -= here_bits;\n        //---//\n        state.back += here_bits;\n        if (here_op & 64) {\n          strm.msg = 'invalid distance code';\n          state.mode = BAD;\n          break;\n        }\n        state.offset = here_val;\n        state.extra = (here_op) & 15;\n        state.mode = DISTEXT;\n        /* falls through */\n      case DISTEXT:\n        if (state.extra) {\n          //=== NEEDBITS(state.extra);\n          n = state.extra;\n          while (bits < n) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.offset += hold & ((1 << state.extra) - 1)/*BITS(state.extra)*/;\n          //--- DROPBITS(state.extra) ---//\n          hold >>>= state.extra;\n          bits -= state.extra;\n          //---//\n          state.back += state.extra;\n        }\n//#ifdef INFLATE_STRICT\n        if (state.offset > state.dmax) {\n          strm.msg = 'invalid distance too far back';\n          state.mode = BAD;\n          break;\n        }\n//#endif\n        //Tracevv((stderr, \"inflate:         distance %u\\n\", state.offset));\n        state.mode = MATCH;\n        /* falls through */\n      case MATCH:\n        if (left === 0) { break inf_leave; }\n        copy = _out - left;\n        if (state.offset > copy) {         /* copy from window */\n          copy = state.offset - copy;\n          if (copy > state.whave) {\n            if (state.sane) {\n              strm.msg = 'invalid distance too far back';\n              state.mode = BAD;\n              break;\n            }\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR\n//          Trace((stderr, \"inflate.c too far\\n\"));\n//          copy -= state.whave;\n//          if (copy > state.length) { copy = state.length; }\n//          if (copy > left) { copy = left; }\n//          left -= copy;\n//          state.length -= copy;\n//          do {\n//            output[put++] = 0;\n//          } while (--copy);\n//          if (state.length === 0) { state.mode = LEN; }\n//          break;\n//#endif\n          }\n          if (copy > state.wnext) {\n            copy -= state.wnext;\n            from = state.wsize - copy;\n          }\n          else {\n            from = state.wnext - copy;\n          }\n          if (copy > state.length) { copy = state.length; }\n          from_source = state.window;\n        }\n        else {                              /* copy from output */\n          from_source = output;\n          from = put - state.offset;\n          copy = state.length;\n        }\n        if (copy > left) { copy = left; }\n        left -= copy;\n        state.length -= copy;\n        do {\n          output[put++] = from_source[from++];\n        } while (--copy);\n        if (state.length === 0) { state.mode = LEN; }\n        break;\n      case LIT:\n        if (left === 0) { break inf_leave; }\n        output[put++] = state.length;\n        left--;\n        state.mode = LEN;\n        break;\n      case CHECK:\n        if (state.wrap) {\n          //=== NEEDBITS(32);\n          while (bits < 32) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            // Use '|' instead of '+' to make sure that result is signed\n            hold |= input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          _out -= left;\n          strm.total_out += _out;\n          state.total += _out;\n          if (_out) {\n            strm.adler = state.check =\n                /*UPDATE(state.check, put - _out, _out);*/\n                (state.flags ? crc32(state.check, output, _out, put - _out) : adler32(state.check, output, _out, put - _out));\n\n          }\n          _out = left;\n          // NB: crc32 stored as signed 32-bit int, zswap32 returns signed too\n          if ((state.flags ? hold : zswap32(hold)) !== state.check) {\n            strm.msg = 'incorrect data check';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          //Tracev((stderr, \"inflate:   check matches trailer\\n\"));\n        }\n        state.mode = LENGTH;\n        /* falls through */\n      case LENGTH:\n        if (state.wrap && state.flags) {\n          //=== NEEDBITS(32);\n          while (bits < 32) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          if (hold !== (state.total & 0xffffffff)) {\n            strm.msg = 'incorrect length check';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          //Tracev((stderr, \"inflate:   length matches trailer\\n\"));\n        }\n        state.mode = DONE;\n        /* falls through */\n      case DONE:\n        ret = Z_STREAM_END;\n        break inf_leave;\n      case BAD:\n        ret = Z_DATA_ERROR;\n        break inf_leave;\n      case MEM:\n        return Z_MEM_ERROR;\n      case SYNC:\n        /* falls through */\n      default:\n        return Z_STREAM_ERROR;\n    }\n  }\n\n  // inf_leave <- here is real place for \"goto inf_leave\", emulated via \"break inf_leave\"\n\n  /*\n     Return from inflate(), updating the total counts and the check value.\n     If there was no progress during the inflate() call, return a buffer\n     error.  Call updatewindow() to create and/or update the window state.\n     Note: a memory error from inflate() is non-recoverable.\n   */\n\n  //--- RESTORE() ---\n  strm.next_out = put;\n  strm.avail_out = left;\n  strm.next_in = next;\n  strm.avail_in = have;\n  state.hold = hold;\n  state.bits = bits;\n  //---\n\n  if (state.wsize || (_out !== strm.avail_out && state.mode < BAD &&\n                      (state.mode < CHECK || flush !== Z_FINISH))) {\n    if (updatewindow(strm, strm.output, strm.next_out, _out - strm.avail_out)) {\n      state.mode = MEM;\n      return Z_MEM_ERROR;\n    }\n  }\n  _in -= strm.avail_in;\n  _out -= strm.avail_out;\n  strm.total_in += _in;\n  strm.total_out += _out;\n  state.total += _out;\n  if (state.wrap && _out) {\n    strm.adler = state.check = /*UPDATE(state.check, strm.next_out - _out, _out);*/\n      (state.flags ? crc32(state.check, output, _out, strm.next_out - _out) : adler32(state.check, output, _out, strm.next_out - _out));\n  }\n  strm.data_type = state.bits + (state.last ? 64 : 0) +\n                    (state.mode === TYPE ? 128 : 0) +\n                    (state.mode === LEN_ || state.mode === COPY_ ? 256 : 0);\n  if (((_in === 0 && _out === 0) || flush === Z_FINISH) && ret === Z_OK) {\n    ret = Z_BUF_ERROR;\n  }\n  return ret;\n}\n\nfunction inflateEnd(strm) {\n\n  if (!strm || !strm.state /*|| strm->zfree == (free_func)0*/) {\n    return Z_STREAM_ERROR;\n  }\n\n  var state = strm.state;\n  if (state.window) {\n    state.window = null;\n  }\n  strm.state = null;\n  return Z_OK;\n}\n\nfunction inflateGetHeader(strm, head) {\n  var state;\n\n  /* check state */\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  state = strm.state;\n  if ((state.wrap & 2) === 0) { return Z_STREAM_ERROR; }\n\n  /* save header structure */\n  state.head = head;\n  head.done = false;\n  return Z_OK;\n}\n\nfunction inflateSetDictionary(strm, dictionary) {\n  var dictLength = dictionary.length;\n\n  var state;\n  var dictid;\n  var ret;\n\n  /* check state */\n  if (!strm /* == Z_NULL */ || !strm.state /* == Z_NULL */) { return Z_STREAM_ERROR; }\n  state = strm.state;\n\n  if (state.wrap !== 0 && state.mode !== DICT) {\n    return Z_STREAM_ERROR;\n  }\n\n  /* check for correct dictionary identifier */\n  if (state.mode === DICT) {\n    dictid = 1; /* adler32(0, null, 0)*/\n    /* dictid = adler32(dictid, dictionary, dictLength); */\n    dictid = adler32(dictid, dictionary, dictLength, 0);\n    if (dictid !== state.check) {\n      return Z_DATA_ERROR;\n    }\n  }\n  /* copy dictionary to window using updatewindow(), which will amend the\n   existing dictionary if appropriate */\n  ret = updatewindow(strm, dictionary, dictLength, dictLength);\n  if (ret) {\n    state.mode = MEM;\n    return Z_MEM_ERROR;\n  }\n  state.havedict = 1;\n  // Tracev((stderr, \"inflate:   dictionary set\\n\"));\n  return Z_OK;\n}\n\nexports.inflateReset = inflateReset;\nexports.inflateReset2 = inflateReset2;\nexports.inflateResetKeep = inflateResetKeep;\nexports.inflateInit = inflateInit;\nexports.inflateInit2 = inflateInit2;\nexports.inflate = inflate;\nexports.inflateEnd = inflateEnd;\nexports.inflateGetHeader = inflateGetHeader;\nexports.inflateSetDictionary = inflateSetDictionary;\nexports.inflateInfo = 'pako inflate (from Nodeca project)';\n\n/* Not implemented\nexports.inflateCopy = inflateCopy;\nexports.inflateGetDictionary = inflateGetDictionary;\nexports.inflateMark = inflateMark;\nexports.inflatePrime = inflatePrime;\nexports.inflateSync = inflateSync;\nexports.inflateSyncPoint = inflateSyncPoint;\nexports.inflateUndermine = inflateUndermine;\n*/\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/pako/lib/zlib/inflate.js\n// module id = 54\n// module chunks = 0","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar utils = require('../utils/common');\n\nvar MAXBITS = 15;\nvar ENOUGH_LENS = 852;\nvar ENOUGH_DISTS = 592;\n//var ENOUGH = (ENOUGH_LENS+ENOUGH_DISTS);\n\nvar CODES = 0;\nvar LENS = 1;\nvar DISTS = 2;\n\nvar lbase = [ /* Length codes 257..285 base */\n  3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31,\n  35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0\n];\n\nvar lext = [ /* Length codes 257..285 extra */\n  16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18,\n  19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78\n];\n\nvar dbase = [ /* Distance codes 0..29 base */\n  1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193,\n  257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145,\n  8193, 12289, 16385, 24577, 0, 0\n];\n\nvar dext = [ /* Distance codes 0..29 extra */\n  16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22,\n  23, 23, 24, 24, 25, 25, 26, 26, 27, 27,\n  28, 28, 29, 29, 64, 64\n];\n\nmodule.exports = function inflate_table(type, lens, lens_index, codes, table, table_index, work, opts)\n{\n  var bits = opts.bits;\n      //here = opts.here; /* table entry for duplication */\n\n  var len = 0;               /* a code's length in bits */\n  var sym = 0;               /* index of code symbols */\n  var min = 0, max = 0;          /* minimum and maximum code lengths */\n  var root = 0;              /* number of index bits for root table */\n  var curr = 0;              /* number of index bits for current table */\n  var drop = 0;              /* code bits to drop for sub-table */\n  var left = 0;                   /* number of prefix codes available */\n  var used = 0;              /* code entries in table used */\n  var huff = 0;              /* Huffman code */\n  var incr;              /* for incrementing code, index */\n  var fill;              /* index for replicating entries */\n  var low;               /* low bits for current root entry */\n  var mask;              /* mask for low root bits */\n  var next;             /* next available space in table */\n  var base = null;     /* base value table to use */\n  var base_index = 0;\n//  var shoextra;    /* extra bits table to use */\n  var end;                    /* use base and extra for symbol > end */\n  var count = new utils.Buf16(MAXBITS + 1); //[MAXBITS+1];    /* number of codes of each length */\n  var offs = new utils.Buf16(MAXBITS + 1); //[MAXBITS+1];     /* offsets in table for each length */\n  var extra = null;\n  var extra_index = 0;\n\n  var here_bits, here_op, here_val;\n\n  /*\n   Process a set of code lengths to create a canonical Huffman code.  The\n   code lengths are lens[0..codes-1].  Each length corresponds to the\n   symbols 0..codes-1.  The Huffman code is generated by first sorting the\n   symbols by length from short to long, and retaining the symbol order\n   for codes with equal lengths.  Then the code starts with all zero bits\n   for the first code of the shortest length, and the codes are integer\n   increments for the same length, and zeros are appended as the length\n   increases.  For the deflate format, these bits are stored backwards\n   from their more natural integer increment ordering, and so when the\n   decoding tables are built in the large loop below, the integer codes\n   are incremented backwards.\n\n   This routine assumes, but does not check, that all of the entries in\n   lens[] are in the range 0..MAXBITS.  The caller must assure this.\n   1..MAXBITS is interpreted as that code length.  zero means that that\n   symbol does not occur in this code.\n\n   The codes are sorted by computing a count of codes for each length,\n   creating from that a table of starting indices for each length in the\n   sorted table, and then entering the symbols in order in the sorted\n   table.  The sorted table is work[], with that space being provided by\n   the caller.\n\n   The length counts are used for other purposes as well, i.e. finding\n   the minimum and maximum length codes, determining if there are any\n   codes at all, checking for a valid set of lengths, and looking ahead\n   at length counts to determine sub-table sizes when building the\n   decoding tables.\n   */\n\n  /* accumulate lengths for codes (assumes lens[] all in 0..MAXBITS) */\n  for (len = 0; len <= MAXBITS; len++) {\n    count[len] = 0;\n  }\n  for (sym = 0; sym < codes; sym++) {\n    count[lens[lens_index + sym]]++;\n  }\n\n  /* bound code lengths, force root to be within code lengths */\n  root = bits;\n  for (max = MAXBITS; max >= 1; max--) {\n    if (count[max] !== 0) { break; }\n  }\n  if (root > max) {\n    root = max;\n  }\n  if (max === 0) {                     /* no symbols to code at all */\n    //table.op[opts.table_index] = 64;  //here.op = (var char)64;    /* invalid code marker */\n    //table.bits[opts.table_index] = 1;   //here.bits = (var char)1;\n    //table.val[opts.table_index++] = 0;   //here.val = (var short)0;\n    table[table_index++] = (1 << 24) | (64 << 16) | 0;\n\n\n    //table.op[opts.table_index] = 64;\n    //table.bits[opts.table_index] = 1;\n    //table.val[opts.table_index++] = 0;\n    table[table_index++] = (1 << 24) | (64 << 16) | 0;\n\n    opts.bits = 1;\n    return 0;     /* no symbols, but wait for decoding to report error */\n  }\n  for (min = 1; min < max; min++) {\n    if (count[min] !== 0) { break; }\n  }\n  if (root < min) {\n    root = min;\n  }\n\n  /* check for an over-subscribed or incomplete set of lengths */\n  left = 1;\n  for (len = 1; len <= MAXBITS; len++) {\n    left <<= 1;\n    left -= count[len];\n    if (left < 0) {\n      return -1;\n    }        /* over-subscribed */\n  }\n  if (left > 0 && (type === CODES || max !== 1)) {\n    return -1;                      /* incomplete set */\n  }\n\n  /* generate offsets into symbol table for each length for sorting */\n  offs[1] = 0;\n  for (len = 1; len < MAXBITS; len++) {\n    offs[len + 1] = offs[len] + count[len];\n  }\n\n  /* sort symbols by length, by symbol order within each length */\n  for (sym = 0; sym < codes; sym++) {\n    if (lens[lens_index + sym] !== 0) {\n      work[offs[lens[lens_index + sym]]++] = sym;\n    }\n  }\n\n  /*\n   Create and fill in decoding tables.  In this loop, the table being\n   filled is at next and has curr index bits.  The code being used is huff\n   with length len.  That code is converted to an index by dropping drop\n   bits off of the bottom.  For codes where len is less than drop + curr,\n   those top drop + curr - len bits are incremented through all values to\n   fill the table with replicated entries.\n\n   root is the number of index bits for the root table.  When len exceeds\n   root, sub-tables are created pointed to by the root entry with an index\n   of the low root bits of huff.  This is saved in low to check for when a\n   new sub-table should be started.  drop is zero when the root table is\n   being filled, and drop is root when sub-tables are being filled.\n\n   When a new sub-table is needed, it is necessary to look ahead in the\n   code lengths to determine what size sub-table is needed.  The length\n   counts are used for this, and so count[] is decremented as codes are\n   entered in the tables.\n\n   used keeps track of how many table entries have been allocated from the\n   provided *table space.  It is checked for LENS and DIST tables against\n   the constants ENOUGH_LENS and ENOUGH_DISTS to guard against changes in\n   the initial root table size constants.  See the comments in inftrees.h\n   for more information.\n\n   sym increments through all symbols, and the loop terminates when\n   all codes of length max, i.e. all codes, have been processed.  This\n   routine permits incomplete codes, so another loop after this one fills\n   in the rest of the decoding tables with invalid code markers.\n   */\n\n  /* set up for code type */\n  // poor man optimization - use if-else instead of switch,\n  // to avoid deopts in old v8\n  if (type === CODES) {\n    base = extra = work;    /* dummy value--not used */\n    end = 19;\n\n  } else if (type === LENS) {\n    base = lbase;\n    base_index -= 257;\n    extra = lext;\n    extra_index -= 257;\n    end = 256;\n\n  } else {                    /* DISTS */\n    base = dbase;\n    extra = dext;\n    end = -1;\n  }\n\n  /* initialize opts for loop */\n  huff = 0;                   /* starting code */\n  sym = 0;                    /* starting code symbol */\n  len = min;                  /* starting code length */\n  next = table_index;              /* current table to fill in */\n  curr = root;                /* current table index bits */\n  drop = 0;                   /* current bits to drop from code for index */\n  low = -1;                   /* trigger new sub-table when len > root */\n  used = 1 << root;          /* use root table entries */\n  mask = used - 1;            /* mask for comparing low */\n\n  /* check available table space */\n  if ((type === LENS && used > ENOUGH_LENS) ||\n    (type === DISTS && used > ENOUGH_DISTS)) {\n    return 1;\n  }\n\n  /* process all codes and make table entries */\n  for (;;) {\n    /* create table entry */\n    here_bits = len - drop;\n    if (work[sym] < end) {\n      here_op = 0;\n      here_val = work[sym];\n    }\n    else if (work[sym] > end) {\n      here_op = extra[extra_index + work[sym]];\n      here_val = base[base_index + work[sym]];\n    }\n    else {\n      here_op = 32 + 64;         /* end of block */\n      here_val = 0;\n    }\n\n    /* replicate for those indices with low len bits equal to huff */\n    incr = 1 << (len - drop);\n    fill = 1 << curr;\n    min = fill;                 /* save offset to next table */\n    do {\n      fill -= incr;\n      table[next + (huff >> drop) + fill] = (here_bits << 24) | (here_op << 16) | here_val |0;\n    } while (fill !== 0);\n\n    /* backwards increment the len-bit code huff */\n    incr = 1 << (len - 1);\n    while (huff & incr) {\n      incr >>= 1;\n    }\n    if (incr !== 0) {\n      huff &= incr - 1;\n      huff += incr;\n    } else {\n      huff = 0;\n    }\n\n    /* go to next symbol, update count, len */\n    sym++;\n    if (--count[len] === 0) {\n      if (len === max) { break; }\n      len = lens[lens_index + work[sym]];\n    }\n\n    /* create new sub-table if needed */\n    if (len > root && (huff & mask) !== low) {\n      /* if first time, transition to sub-tables */\n      if (drop === 0) {\n        drop = root;\n      }\n\n      /* increment past last table */\n      next += min;            /* here min is 1 << curr */\n\n      /* determine length of next table */\n      curr = len - drop;\n      left = 1 << curr;\n      while (curr + drop < max) {\n        left -= count[curr + drop];\n        if (left <= 0) { break; }\n        curr++;\n        left <<= 1;\n      }\n\n      /* check for enough space */\n      used += 1 << curr;\n      if ((type === LENS && used > ENOUGH_LENS) ||\n        (type === DISTS && used > ENOUGH_DISTS)) {\n        return 1;\n      }\n\n      /* point entry in root table to sub-table */\n      low = huff & mask;\n      /*table.op[low] = curr;\n      table.bits[low] = root;\n      table.val[low] = next - opts.table_index;*/\n      table[low] = (root << 24) | (curr << 16) | (next - table_index) |0;\n    }\n  }\n\n  /* fill in remaining table entry if code is incomplete (guaranteed to have\n   at most one remaining entry, since if the code is incomplete, the\n   maximum code length that was allowed to get this far is one bit) */\n  if (huff !== 0) {\n    //table.op[next + huff] = 64;            /* invalid code marker */\n    //table.bits[next + huff] = len - drop;\n    //table.val[next + huff] = 0;\n    table[next + huff] = ((len - drop) << 24) | (64 << 16) |0;\n  }\n\n  /* set return parameters */\n  //opts.table_index += used;\n  opts.bits = root;\n  return 0;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/pako/lib/zlib/inftrees.js\n// module id = 55\n// module chunks = 0","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n/* eslint-disable space-unary-ops */\n\nvar utils = require('../utils/common');\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\n\n//var Z_FILTERED          = 1;\n//var Z_HUFFMAN_ONLY      = 2;\n//var Z_RLE               = 3;\nvar Z_FIXED               = 4;\n//var Z_DEFAULT_STRATEGY  = 0;\n\n/* Possible values of the data_type field (though see inflate()) */\nvar Z_BINARY              = 0;\nvar Z_TEXT                = 1;\n//var Z_ASCII             = 1; // = Z_TEXT\nvar Z_UNKNOWN             = 2;\n\n/*============================================================================*/\n\n\nfunction zero(buf) { var len = buf.length; while (--len >= 0) { buf[len] = 0; } }\n\n// From zutil.h\n\nvar STORED_BLOCK = 0;\nvar STATIC_TREES = 1;\nvar DYN_TREES    = 2;\n/* The three kinds of block type */\n\nvar MIN_MATCH    = 3;\nvar MAX_MATCH    = 258;\n/* The minimum and maximum match lengths */\n\n// From deflate.h\n/* ===========================================================================\n * Internal compression state.\n */\n\nvar LENGTH_CODES  = 29;\n/* number of length codes, not counting the special END_BLOCK code */\n\nvar LITERALS      = 256;\n/* number of literal bytes 0..255 */\n\nvar L_CODES       = LITERALS + 1 + LENGTH_CODES;\n/* number of Literal or Length codes, including the END_BLOCK code */\n\nvar D_CODES       = 30;\n/* number of distance codes */\n\nvar BL_CODES      = 19;\n/* number of codes used to transfer the bit lengths */\n\nvar HEAP_SIZE     = 2 * L_CODES + 1;\n/* maximum heap size */\n\nvar MAX_BITS      = 15;\n/* All codes must not exceed MAX_BITS bits */\n\nvar Buf_size      = 16;\n/* size of bit buffer in bi_buf */\n\n\n/* ===========================================================================\n * Constants\n */\n\nvar MAX_BL_BITS = 7;\n/* Bit length codes must not exceed MAX_BL_BITS bits */\n\nvar END_BLOCK   = 256;\n/* end of block literal code */\n\nvar REP_3_6     = 16;\n/* repeat previous bit length 3-6 times (2 bits of repeat count) */\n\nvar REPZ_3_10   = 17;\n/* repeat a zero length 3-10 times  (3 bits of repeat count) */\n\nvar REPZ_11_138 = 18;\n/* repeat a zero length 11-138 times  (7 bits of repeat count) */\n\n/* eslint-disable comma-spacing,array-bracket-spacing */\nvar extra_lbits =   /* extra bits for each length code */\n  [0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];\n\nvar extra_dbits =   /* extra bits for each distance code */\n  [0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];\n\nvar extra_blbits =  /* extra bits for each bit length code */\n  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];\n\nvar bl_order =\n  [16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];\n/* eslint-enable comma-spacing,array-bracket-spacing */\n\n/* The lengths of the bit length codes are sent in order of decreasing\n * probability, to avoid transmitting the lengths for unused bit length codes.\n */\n\n/* ===========================================================================\n * Local data. These are initialized only once.\n */\n\n// We pre-fill arrays with 0 to avoid uninitialized gaps\n\nvar DIST_CODE_LEN = 512; /* see definition of array dist_code below */\n\n// !!!! Use flat array instead of structure, Freq = i*2, Len = i*2+1\nvar static_ltree  = new Array((L_CODES + 2) * 2);\nzero(static_ltree);\n/* The static literal tree. Since the bit lengths are imposed, there is no\n * need for the L_CODES extra codes used during heap construction. However\n * The codes 286 and 287 are needed to build a canonical tree (see _tr_init\n * below).\n */\n\nvar static_dtree  = new Array(D_CODES * 2);\nzero(static_dtree);\n/* The static distance tree. (Actually a trivial tree since all codes use\n * 5 bits.)\n */\n\nvar _dist_code    = new Array(DIST_CODE_LEN);\nzero(_dist_code);\n/* Distance codes. The first 256 values correspond to the distances\n * 3 .. 258, the last 256 values correspond to the top 8 bits of\n * the 15 bit distances.\n */\n\nvar _length_code  = new Array(MAX_MATCH - MIN_MATCH + 1);\nzero(_length_code);\n/* length code for each normalized match length (0 == MIN_MATCH) */\n\nvar base_length   = new Array(LENGTH_CODES);\nzero(base_length);\n/* First normalized length for each code (0 = MIN_MATCH) */\n\nvar base_dist     = new Array(D_CODES);\nzero(base_dist);\n/* First normalized distance for each code (0 = distance of 1) */\n\n\nfunction StaticTreeDesc(static_tree, extra_bits, extra_base, elems, max_length) {\n\n  this.static_tree  = static_tree;  /* static tree or NULL */\n  this.extra_bits   = extra_bits;   /* extra bits for each code or NULL */\n  this.extra_base   = extra_base;   /* base index for extra_bits */\n  this.elems        = elems;        /* max number of elements in the tree */\n  this.max_length   = max_length;   /* max bit length for the codes */\n\n  // show if `static_tree` has data or dummy - needed for monomorphic objects\n  this.has_stree    = static_tree && static_tree.length;\n}\n\n\nvar static_l_desc;\nvar static_d_desc;\nvar static_bl_desc;\n\n\nfunction TreeDesc(dyn_tree, stat_desc) {\n  this.dyn_tree = dyn_tree;     /* the dynamic tree */\n  this.max_code = 0;            /* largest code with non zero frequency */\n  this.stat_desc = stat_desc;   /* the corresponding static tree */\n}\n\n\n\nfunction d_code(dist) {\n  return dist < 256 ? _dist_code[dist] : _dist_code[256 + (dist >>> 7)];\n}\n\n\n/* ===========================================================================\n * Output a short LSB first on the stream.\n * IN assertion: there is enough room in pendingBuf.\n */\nfunction put_short(s, w) {\n//    put_byte(s, (uch)((w) & 0xff));\n//    put_byte(s, (uch)((ush)(w) >> 8));\n  s.pending_buf[s.pending++] = (w) & 0xff;\n  s.pending_buf[s.pending++] = (w >>> 8) & 0xff;\n}\n\n\n/* ===========================================================================\n * Send a value on a given number of bits.\n * IN assertion: length <= 16 and value fits in length bits.\n */\nfunction send_bits(s, value, length) {\n  if (s.bi_valid > (Buf_size - length)) {\n    s.bi_buf |= (value << s.bi_valid) & 0xffff;\n    put_short(s, s.bi_buf);\n    s.bi_buf = value >> (Buf_size - s.bi_valid);\n    s.bi_valid += length - Buf_size;\n  } else {\n    s.bi_buf |= (value << s.bi_valid) & 0xffff;\n    s.bi_valid += length;\n  }\n}\n\n\nfunction send_code(s, c, tree) {\n  send_bits(s, tree[c * 2]/*.Code*/, tree[c * 2 + 1]/*.Len*/);\n}\n\n\n/* ===========================================================================\n * Reverse the first len bits of a code, using straightforward code (a faster\n * method would use a table)\n * IN assertion: 1 <= len <= 15\n */\nfunction bi_reverse(code, len) {\n  var res = 0;\n  do {\n    res |= code & 1;\n    code >>>= 1;\n    res <<= 1;\n  } while (--len > 0);\n  return res >>> 1;\n}\n\n\n/* ===========================================================================\n * Flush the bit buffer, keeping at most 7 bits in it.\n */\nfunction bi_flush(s) {\n  if (s.bi_valid === 16) {\n    put_short(s, s.bi_buf);\n    s.bi_buf = 0;\n    s.bi_valid = 0;\n\n  } else if (s.bi_valid >= 8) {\n    s.pending_buf[s.pending++] = s.bi_buf & 0xff;\n    s.bi_buf >>= 8;\n    s.bi_valid -= 8;\n  }\n}\n\n\n/* ===========================================================================\n * Compute the optimal bit lengths for a tree and update the total bit length\n * for the current block.\n * IN assertion: the fields freq and dad are set, heap[heap_max] and\n *    above are the tree nodes sorted by increasing frequency.\n * OUT assertions: the field len is set to the optimal bit length, the\n *     array bl_count contains the frequencies for each bit length.\n *     The length opt_len is updated; static_len is also updated if stree is\n *     not null.\n */\nfunction gen_bitlen(s, desc)\n//    deflate_state *s;\n//    tree_desc *desc;    /* the tree descriptor */\n{\n  var tree            = desc.dyn_tree;\n  var max_code        = desc.max_code;\n  var stree           = desc.stat_desc.static_tree;\n  var has_stree       = desc.stat_desc.has_stree;\n  var extra           = desc.stat_desc.extra_bits;\n  var base            = desc.stat_desc.extra_base;\n  var max_length      = desc.stat_desc.max_length;\n  var h;              /* heap index */\n  var n, m;           /* iterate over the tree elements */\n  var bits;           /* bit length */\n  var xbits;          /* extra bits */\n  var f;              /* frequency */\n  var overflow = 0;   /* number of elements with bit length too large */\n\n  for (bits = 0; bits <= MAX_BITS; bits++) {\n    s.bl_count[bits] = 0;\n  }\n\n  /* In a first pass, compute the optimal bit lengths (which may\n   * overflow in the case of the bit length tree).\n   */\n  tree[s.heap[s.heap_max] * 2 + 1]/*.Len*/ = 0; /* root of the heap */\n\n  for (h = s.heap_max + 1; h < HEAP_SIZE; h++) {\n    n = s.heap[h];\n    bits = tree[tree[n * 2 + 1]/*.Dad*/ * 2 + 1]/*.Len*/ + 1;\n    if (bits > max_length) {\n      bits = max_length;\n      overflow++;\n    }\n    tree[n * 2 + 1]/*.Len*/ = bits;\n    /* We overwrite tree[n].Dad which is no longer needed */\n\n    if (n > max_code) { continue; } /* not a leaf node */\n\n    s.bl_count[bits]++;\n    xbits = 0;\n    if (n >= base) {\n      xbits = extra[n - base];\n    }\n    f = tree[n * 2]/*.Freq*/;\n    s.opt_len += f * (bits + xbits);\n    if (has_stree) {\n      s.static_len += f * (stree[n * 2 + 1]/*.Len*/ + xbits);\n    }\n  }\n  if (overflow === 0) { return; }\n\n  // Trace((stderr,\"\\nbit length overflow\\n\"));\n  /* This happens for example on obj2 and pic of the Calgary corpus */\n\n  /* Find the first bit length which could increase: */\n  do {\n    bits = max_length - 1;\n    while (s.bl_count[bits] === 0) { bits--; }\n    s.bl_count[bits]--;      /* move one leaf down the tree */\n    s.bl_count[bits + 1] += 2; /* move one overflow item as its brother */\n    s.bl_count[max_length]--;\n    /* The brother of the overflow item also moves one step up,\n     * but this does not affect bl_count[max_length]\n     */\n    overflow -= 2;\n  } while (overflow > 0);\n\n  /* Now recompute all bit lengths, scanning in increasing frequency.\n   * h is still equal to HEAP_SIZE. (It is simpler to reconstruct all\n   * lengths instead of fixing only the wrong ones. This idea is taken\n   * from 'ar' written by Haruhiko Okumura.)\n   */\n  for (bits = max_length; bits !== 0; bits--) {\n    n = s.bl_count[bits];\n    while (n !== 0) {\n      m = s.heap[--h];\n      if (m > max_code) { continue; }\n      if (tree[m * 2 + 1]/*.Len*/ !== bits) {\n        // Trace((stderr,\"code %d bits %d->%d\\n\", m, tree[m].Len, bits));\n        s.opt_len += (bits - tree[m * 2 + 1]/*.Len*/) * tree[m * 2]/*.Freq*/;\n        tree[m * 2 + 1]/*.Len*/ = bits;\n      }\n      n--;\n    }\n  }\n}\n\n\n/* ===========================================================================\n * Generate the codes for a given tree and bit counts (which need not be\n * optimal).\n * IN assertion: the array bl_count contains the bit length statistics for\n * the given tree and the field len is set for all tree elements.\n * OUT assertion: the field code is set for all tree elements of non\n *     zero code length.\n */\nfunction gen_codes(tree, max_code, bl_count)\n//    ct_data *tree;             /* the tree to decorate */\n//    int max_code;              /* largest code with non zero frequency */\n//    ushf *bl_count;            /* number of codes at each bit length */\n{\n  var next_code = new Array(MAX_BITS + 1); /* next code value for each bit length */\n  var code = 0;              /* running code value */\n  var bits;                  /* bit index */\n  var n;                     /* code index */\n\n  /* The distribution counts are first used to generate the code values\n   * without bit reversal.\n   */\n  for (bits = 1; bits <= MAX_BITS; bits++) {\n    next_code[bits] = code = (code + bl_count[bits - 1]) << 1;\n  }\n  /* Check that the bit counts in bl_count are consistent. The last code\n   * must be all ones.\n   */\n  //Assert (code + bl_count[MAX_BITS]-1 == (1<<MAX_BITS)-1,\n  //        \"inconsistent bit counts\");\n  //Tracev((stderr,\"\\ngen_codes: max_code %d \", max_code));\n\n  for (n = 0;  n <= max_code; n++) {\n    var len = tree[n * 2 + 1]/*.Len*/;\n    if (len === 0) { continue; }\n    /* Now reverse the bits */\n    tree[n * 2]/*.Code*/ = bi_reverse(next_code[len]++, len);\n\n    //Tracecv(tree != static_ltree, (stderr,\"\\nn %3d %c l %2d c %4x (%x) \",\n    //     n, (isgraph(n) ? n : ' '), len, tree[n].Code, next_code[len]-1));\n  }\n}\n\n\n/* ===========================================================================\n * Initialize the various 'constant' tables.\n */\nfunction tr_static_init() {\n  var n;        /* iterates over tree elements */\n  var bits;     /* bit counter */\n  var length;   /* length value */\n  var code;     /* code value */\n  var dist;     /* distance index */\n  var bl_count = new Array(MAX_BITS + 1);\n  /* number of codes at each bit length for an optimal tree */\n\n  // do check in _tr_init()\n  //if (static_init_done) return;\n\n  /* For some embedded targets, global variables are not initialized: */\n/*#ifdef NO_INIT_GLOBAL_POINTERS\n  static_l_desc.static_tree = static_ltree;\n  static_l_desc.extra_bits = extra_lbits;\n  static_d_desc.static_tree = static_dtree;\n  static_d_desc.extra_bits = extra_dbits;\n  static_bl_desc.extra_bits = extra_blbits;\n#endif*/\n\n  /* Initialize the mapping length (0..255) -> length code (0..28) */\n  length = 0;\n  for (code = 0; code < LENGTH_CODES - 1; code++) {\n    base_length[code] = length;\n    for (n = 0; n < (1 << extra_lbits[code]); n++) {\n      _length_code[length++] = code;\n    }\n  }\n  //Assert (length == 256, \"tr_static_init: length != 256\");\n  /* Note that the length 255 (match length 258) can be represented\n   * in two different ways: code 284 + 5 bits or code 285, so we\n   * overwrite length_code[255] to use the best encoding:\n   */\n  _length_code[length - 1] = code;\n\n  /* Initialize the mapping dist (0..32K) -> dist code (0..29) */\n  dist = 0;\n  for (code = 0; code < 16; code++) {\n    base_dist[code] = dist;\n    for (n = 0; n < (1 << extra_dbits[code]); n++) {\n      _dist_code[dist++] = code;\n    }\n  }\n  //Assert (dist == 256, \"tr_static_init: dist != 256\");\n  dist >>= 7; /* from now on, all distances are divided by 128 */\n  for (; code < D_CODES; code++) {\n    base_dist[code] = dist << 7;\n    for (n = 0; n < (1 << (extra_dbits[code] - 7)); n++) {\n      _dist_code[256 + dist++] = code;\n    }\n  }\n  //Assert (dist == 256, \"tr_static_init: 256+dist != 512\");\n\n  /* Construct the codes of the static literal tree */\n  for (bits = 0; bits <= MAX_BITS; bits++) {\n    bl_count[bits] = 0;\n  }\n\n  n = 0;\n  while (n <= 143) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 8;\n    n++;\n    bl_count[8]++;\n  }\n  while (n <= 255) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 9;\n    n++;\n    bl_count[9]++;\n  }\n  while (n <= 279) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 7;\n    n++;\n    bl_count[7]++;\n  }\n  while (n <= 287) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 8;\n    n++;\n    bl_count[8]++;\n  }\n  /* Codes 286 and 287 do not exist, but we must include them in the\n   * tree construction to get a canonical Huffman tree (longest code\n   * all ones)\n   */\n  gen_codes(static_ltree, L_CODES + 1, bl_count);\n\n  /* The static distance tree is trivial: */\n  for (n = 0; n < D_CODES; n++) {\n    static_dtree[n * 2 + 1]/*.Len*/ = 5;\n    static_dtree[n * 2]/*.Code*/ = bi_reverse(n, 5);\n  }\n\n  // Now data ready and we can init static trees\n  static_l_desc = new StaticTreeDesc(static_ltree, extra_lbits, LITERALS + 1, L_CODES, MAX_BITS);\n  static_d_desc = new StaticTreeDesc(static_dtree, extra_dbits, 0,          D_CODES, MAX_BITS);\n  static_bl_desc = new StaticTreeDesc(new Array(0), extra_blbits, 0,         BL_CODES, MAX_BL_BITS);\n\n  //static_init_done = true;\n}\n\n\n/* ===========================================================================\n * Initialize a new block.\n */\nfunction init_block(s) {\n  var n; /* iterates over tree elements */\n\n  /* Initialize the trees. */\n  for (n = 0; n < L_CODES;  n++) { s.dyn_ltree[n * 2]/*.Freq*/ = 0; }\n  for (n = 0; n < D_CODES;  n++) { s.dyn_dtree[n * 2]/*.Freq*/ = 0; }\n  for (n = 0; n < BL_CODES; n++) { s.bl_tree[n * 2]/*.Freq*/ = 0; }\n\n  s.dyn_ltree[END_BLOCK * 2]/*.Freq*/ = 1;\n  s.opt_len = s.static_len = 0;\n  s.last_lit = s.matches = 0;\n}\n\n\n/* ===========================================================================\n * Flush the bit buffer and align the output on a byte boundary\n */\nfunction bi_windup(s)\n{\n  if (s.bi_valid > 8) {\n    put_short(s, s.bi_buf);\n  } else if (s.bi_valid > 0) {\n    //put_byte(s, (Byte)s->bi_buf);\n    s.pending_buf[s.pending++] = s.bi_buf;\n  }\n  s.bi_buf = 0;\n  s.bi_valid = 0;\n}\n\n/* ===========================================================================\n * Copy a stored block, storing first the length and its\n * one's complement if requested.\n */\nfunction copy_block(s, buf, len, header)\n//DeflateState *s;\n//charf    *buf;    /* the input data */\n//unsigned len;     /* its length */\n//int      header;  /* true if block header must be written */\n{\n  bi_windup(s);        /* align on byte boundary */\n\n  if (header) {\n    put_short(s, len);\n    put_short(s, ~len);\n  }\n//  while (len--) {\n//    put_byte(s, *buf++);\n//  }\n  utils.arraySet(s.pending_buf, s.window, buf, len, s.pending);\n  s.pending += len;\n}\n\n/* ===========================================================================\n * Compares to subtrees, using the tree depth as tie breaker when\n * the subtrees have equal frequency. This minimizes the worst case length.\n */\nfunction smaller(tree, n, m, depth) {\n  var _n2 = n * 2;\n  var _m2 = m * 2;\n  return (tree[_n2]/*.Freq*/ < tree[_m2]/*.Freq*/ ||\n         (tree[_n2]/*.Freq*/ === tree[_m2]/*.Freq*/ && depth[n] <= depth[m]));\n}\n\n/* ===========================================================================\n * Restore the heap property by moving down the tree starting at node k,\n * exchanging a node with the smallest of its two sons if necessary, stopping\n * when the heap property is re-established (each father smaller than its\n * two sons).\n */\nfunction pqdownheap(s, tree, k)\n//    deflate_state *s;\n//    ct_data *tree;  /* the tree to restore */\n//    int k;               /* node to move down */\n{\n  var v = s.heap[k];\n  var j = k << 1;  /* left son of k */\n  while (j <= s.heap_len) {\n    /* Set j to the smallest of the two sons: */\n    if (j < s.heap_len &&\n      smaller(tree, s.heap[j + 1], s.heap[j], s.depth)) {\n      j++;\n    }\n    /* Exit if v is smaller than both sons */\n    if (smaller(tree, v, s.heap[j], s.depth)) { break; }\n\n    /* Exchange v with the smallest son */\n    s.heap[k] = s.heap[j];\n    k = j;\n\n    /* And continue down the tree, setting j to the left son of k */\n    j <<= 1;\n  }\n  s.heap[k] = v;\n}\n\n\n// inlined manually\n// var SMALLEST = 1;\n\n/* ===========================================================================\n * Send the block data compressed using the given Huffman trees\n */\nfunction compress_block(s, ltree, dtree)\n//    deflate_state *s;\n//    const ct_data *ltree; /* literal tree */\n//    const ct_data *dtree; /* distance tree */\n{\n  var dist;           /* distance of matched string */\n  var lc;             /* match length or unmatched char (if dist == 0) */\n  var lx = 0;         /* running index in l_buf */\n  var code;           /* the code to send */\n  var extra;          /* number of extra bits to send */\n\n  if (s.last_lit !== 0) {\n    do {\n      dist = (s.pending_buf[s.d_buf + lx * 2] << 8) | (s.pending_buf[s.d_buf + lx * 2 + 1]);\n      lc = s.pending_buf[s.l_buf + lx];\n      lx++;\n\n      if (dist === 0) {\n        send_code(s, lc, ltree); /* send a literal byte */\n        //Tracecv(isgraph(lc), (stderr,\" '%c' \", lc));\n      } else {\n        /* Here, lc is the match length - MIN_MATCH */\n        code = _length_code[lc];\n        send_code(s, code + LITERALS + 1, ltree); /* send the length code */\n        extra = extra_lbits[code];\n        if (extra !== 0) {\n          lc -= base_length[code];\n          send_bits(s, lc, extra);       /* send the extra length bits */\n        }\n        dist--; /* dist is now the match distance - 1 */\n        code = d_code(dist);\n        //Assert (code < D_CODES, \"bad d_code\");\n\n        send_code(s, code, dtree);       /* send the distance code */\n        extra = extra_dbits[code];\n        if (extra !== 0) {\n          dist -= base_dist[code];\n          send_bits(s, dist, extra);   /* send the extra distance bits */\n        }\n      } /* literal or match pair ? */\n\n      /* Check that the overlay between pending_buf and d_buf+l_buf is ok: */\n      //Assert((uInt)(s->pending) < s->lit_bufsize + 2*lx,\n      //       \"pendingBuf overflow\");\n\n    } while (lx < s.last_lit);\n  }\n\n  send_code(s, END_BLOCK, ltree);\n}\n\n\n/* ===========================================================================\n * Construct one Huffman tree and assigns the code bit strings and lengths.\n * Update the total bit length for the current block.\n * IN assertion: the field freq is set for all tree elements.\n * OUT assertions: the fields len and code are set to the optimal bit length\n *     and corresponding code. The length opt_len is updated; static_len is\n *     also updated if stree is not null. The field max_code is set.\n */\nfunction build_tree(s, desc)\n//    deflate_state *s;\n//    tree_desc *desc; /* the tree descriptor */\n{\n  var tree     = desc.dyn_tree;\n  var stree    = desc.stat_desc.static_tree;\n  var has_stree = desc.stat_desc.has_stree;\n  var elems    = desc.stat_desc.elems;\n  var n, m;          /* iterate over heap elements */\n  var max_code = -1; /* largest code with non zero frequency */\n  var node;          /* new node being created */\n\n  /* Construct the initial heap, with least frequent element in\n   * heap[SMALLEST]. The sons of heap[n] are heap[2*n] and heap[2*n+1].\n   * heap[0] is not used.\n   */\n  s.heap_len = 0;\n  s.heap_max = HEAP_SIZE;\n\n  for (n = 0; n < elems; n++) {\n    if (tree[n * 2]/*.Freq*/ !== 0) {\n      s.heap[++s.heap_len] = max_code = n;\n      s.depth[n] = 0;\n\n    } else {\n      tree[n * 2 + 1]/*.Len*/ = 0;\n    }\n  }\n\n  /* The pkzip format requires that at least one distance code exists,\n   * and that at least one bit should be sent even if there is only one\n   * possible code. So to avoid special checks later on we force at least\n   * two codes of non zero frequency.\n   */\n  while (s.heap_len < 2) {\n    node = s.heap[++s.heap_len] = (max_code < 2 ? ++max_code : 0);\n    tree[node * 2]/*.Freq*/ = 1;\n    s.depth[node] = 0;\n    s.opt_len--;\n\n    if (has_stree) {\n      s.static_len -= stree[node * 2 + 1]/*.Len*/;\n    }\n    /* node is 0 or 1 so it does not have extra bits */\n  }\n  desc.max_code = max_code;\n\n  /* The elements heap[heap_len/2+1 .. heap_len] are leaves of the tree,\n   * establish sub-heaps of increasing lengths:\n   */\n  for (n = (s.heap_len >> 1/*int /2*/); n >= 1; n--) { pqdownheap(s, tree, n); }\n\n  /* Construct the Huffman tree by repeatedly combining the least two\n   * frequent nodes.\n   */\n  node = elems;              /* next internal node of the tree */\n  do {\n    //pqremove(s, tree, n);  /* n = node of least frequency */\n    /*** pqremove ***/\n    n = s.heap[1/*SMALLEST*/];\n    s.heap[1/*SMALLEST*/] = s.heap[s.heap_len--];\n    pqdownheap(s, tree, 1/*SMALLEST*/);\n    /***/\n\n    m = s.heap[1/*SMALLEST*/]; /* m = node of next least frequency */\n\n    s.heap[--s.heap_max] = n; /* keep the nodes sorted by frequency */\n    s.heap[--s.heap_max] = m;\n\n    /* Create a new node father of n and m */\n    tree[node * 2]/*.Freq*/ = tree[n * 2]/*.Freq*/ + tree[m * 2]/*.Freq*/;\n    s.depth[node] = (s.depth[n] >= s.depth[m] ? s.depth[n] : s.depth[m]) + 1;\n    tree[n * 2 + 1]/*.Dad*/ = tree[m * 2 + 1]/*.Dad*/ = node;\n\n    /* and insert the new node in the heap */\n    s.heap[1/*SMALLEST*/] = node++;\n    pqdownheap(s, tree, 1/*SMALLEST*/);\n\n  } while (s.heap_len >= 2);\n\n  s.heap[--s.heap_max] = s.heap[1/*SMALLEST*/];\n\n  /* At this point, the fields freq and dad are set. We can now\n   * generate the bit lengths.\n   */\n  gen_bitlen(s, desc);\n\n  /* The field len is now set, we can generate the bit codes */\n  gen_codes(tree, max_code, s.bl_count);\n}\n\n\n/* ===========================================================================\n * Scan a literal or distance tree to determine the frequencies of the codes\n * in the bit length tree.\n */\nfunction scan_tree(s, tree, max_code)\n//    deflate_state *s;\n//    ct_data *tree;   /* the tree to be scanned */\n//    int max_code;    /* and its largest code of non zero frequency */\n{\n  var n;                     /* iterates over all tree elements */\n  var prevlen = -1;          /* last emitted length */\n  var curlen;                /* length of current code */\n\n  var nextlen = tree[0 * 2 + 1]/*.Len*/; /* length of next code */\n\n  var count = 0;             /* repeat count of the current code */\n  var max_count = 7;         /* max repeat count */\n  var min_count = 4;         /* min repeat count */\n\n  if (nextlen === 0) {\n    max_count = 138;\n    min_count = 3;\n  }\n  tree[(max_code + 1) * 2 + 1]/*.Len*/ = 0xffff; /* guard */\n\n  for (n = 0; n <= max_code; n++) {\n    curlen = nextlen;\n    nextlen = tree[(n + 1) * 2 + 1]/*.Len*/;\n\n    if (++count < max_count && curlen === nextlen) {\n      continue;\n\n    } else if (count < min_count) {\n      s.bl_tree[curlen * 2]/*.Freq*/ += count;\n\n    } else if (curlen !== 0) {\n\n      if (curlen !== prevlen) { s.bl_tree[curlen * 2]/*.Freq*/++; }\n      s.bl_tree[REP_3_6 * 2]/*.Freq*/++;\n\n    } else if (count <= 10) {\n      s.bl_tree[REPZ_3_10 * 2]/*.Freq*/++;\n\n    } else {\n      s.bl_tree[REPZ_11_138 * 2]/*.Freq*/++;\n    }\n\n    count = 0;\n    prevlen = curlen;\n\n    if (nextlen === 0) {\n      max_count = 138;\n      min_count = 3;\n\n    } else if (curlen === nextlen) {\n      max_count = 6;\n      min_count = 3;\n\n    } else {\n      max_count = 7;\n      min_count = 4;\n    }\n  }\n}\n\n\n/* ===========================================================================\n * Send a literal or distance tree in compressed form, using the codes in\n * bl_tree.\n */\nfunction send_tree(s, tree, max_code)\n//    deflate_state *s;\n//    ct_data *tree; /* the tree to be scanned */\n//    int max_code;       /* and its largest code of non zero frequency */\n{\n  var n;                     /* iterates over all tree elements */\n  var prevlen = -1;          /* last emitted length */\n  var curlen;                /* length of current code */\n\n  var nextlen = tree[0 * 2 + 1]/*.Len*/; /* length of next code */\n\n  var count = 0;             /* repeat count of the current code */\n  var max_count = 7;         /* max repeat count */\n  var min_count = 4;         /* min repeat count */\n\n  /* tree[max_code+1].Len = -1; */  /* guard already set */\n  if (nextlen === 0) {\n    max_count = 138;\n    min_count = 3;\n  }\n\n  for (n = 0; n <= max_code; n++) {\n    curlen = nextlen;\n    nextlen = tree[(n + 1) * 2 + 1]/*.Len*/;\n\n    if (++count < max_count && curlen === nextlen) {\n      continue;\n\n    } else if (count < min_count) {\n      do { send_code(s, curlen, s.bl_tree); } while (--count !== 0);\n\n    } else if (curlen !== 0) {\n      if (curlen !== prevlen) {\n        send_code(s, curlen, s.bl_tree);\n        count--;\n      }\n      //Assert(count >= 3 && count <= 6, \" 3_6?\");\n      send_code(s, REP_3_6, s.bl_tree);\n      send_bits(s, count - 3, 2);\n\n    } else if (count <= 10) {\n      send_code(s, REPZ_3_10, s.bl_tree);\n      send_bits(s, count - 3, 3);\n\n    } else {\n      send_code(s, REPZ_11_138, s.bl_tree);\n      send_bits(s, count - 11, 7);\n    }\n\n    count = 0;\n    prevlen = curlen;\n    if (nextlen === 0) {\n      max_count = 138;\n      min_count = 3;\n\n    } else if (curlen === nextlen) {\n      max_count = 6;\n      min_count = 3;\n\n    } else {\n      max_count = 7;\n      min_count = 4;\n    }\n  }\n}\n\n\n/* ===========================================================================\n * Construct the Huffman tree for the bit lengths and return the index in\n * bl_order of the last bit length code to send.\n */\nfunction build_bl_tree(s) {\n  var max_blindex;  /* index of last bit length code of non zero freq */\n\n  /* Determine the bit length frequencies for literal and distance trees */\n  scan_tree(s, s.dyn_ltree, s.l_desc.max_code);\n  scan_tree(s, s.dyn_dtree, s.d_desc.max_code);\n\n  /* Build the bit length tree: */\n  build_tree(s, s.bl_desc);\n  /* opt_len now includes the length of the tree representations, except\n   * the lengths of the bit lengths codes and the 5+5+4 bits for the counts.\n   */\n\n  /* Determine the number of bit length codes to send. The pkzip format\n   * requires that at least 4 bit length codes be sent. (appnote.txt says\n   * 3 but the actual value used is 4.)\n   */\n  for (max_blindex = BL_CODES - 1; max_blindex >= 3; max_blindex--) {\n    if (s.bl_tree[bl_order[max_blindex] * 2 + 1]/*.Len*/ !== 0) {\n      break;\n    }\n  }\n  /* Update opt_len to include the bit length tree and counts */\n  s.opt_len += 3 * (max_blindex + 1) + 5 + 5 + 4;\n  //Tracev((stderr, \"\\ndyn trees: dyn %ld, stat %ld\",\n  //        s->opt_len, s->static_len));\n\n  return max_blindex;\n}\n\n\n/* ===========================================================================\n * Send the header for a block using dynamic Huffman trees: the counts, the\n * lengths of the bit length codes, the literal tree and the distance tree.\n * IN assertion: lcodes >= 257, dcodes >= 1, blcodes >= 4.\n */\nfunction send_all_trees(s, lcodes, dcodes, blcodes)\n//    deflate_state *s;\n//    int lcodes, dcodes, blcodes; /* number of codes for each tree */\n{\n  var rank;                    /* index in bl_order */\n\n  //Assert (lcodes >= 257 && dcodes >= 1 && blcodes >= 4, \"not enough codes\");\n  //Assert (lcodes <= L_CODES && dcodes <= D_CODES && blcodes <= BL_CODES,\n  //        \"too many codes\");\n  //Tracev((stderr, \"\\nbl counts: \"));\n  send_bits(s, lcodes - 257, 5); /* not +255 as stated in appnote.txt */\n  send_bits(s, dcodes - 1,   5);\n  send_bits(s, blcodes - 4,  4); /* not -3 as stated in appnote.txt */\n  for (rank = 0; rank < blcodes; rank++) {\n    //Tracev((stderr, \"\\nbl code %2d \", bl_order[rank]));\n    send_bits(s, s.bl_tree[bl_order[rank] * 2 + 1]/*.Len*/, 3);\n  }\n  //Tracev((stderr, \"\\nbl tree: sent %ld\", s->bits_sent));\n\n  send_tree(s, s.dyn_ltree, lcodes - 1); /* literal tree */\n  //Tracev((stderr, \"\\nlit tree: sent %ld\", s->bits_sent));\n\n  send_tree(s, s.dyn_dtree, dcodes - 1); /* distance tree */\n  //Tracev((stderr, \"\\ndist tree: sent %ld\", s->bits_sent));\n}\n\n\n/* ===========================================================================\n * Check if the data type is TEXT or BINARY, using the following algorithm:\n * - TEXT if the two conditions below are satisfied:\n *    a) There are no non-portable control characters belonging to the\n *       \"black list\" (0..6, 14..25, 28..31).\n *    b) There is at least one printable character belonging to the\n *       \"white list\" (9 {TAB}, 10 {LF}, 13 {CR}, 32..255).\n * - BINARY otherwise.\n * - The following partially-portable control characters form a\n *   \"gray list\" that is ignored in this detection algorithm:\n *   (7 {BEL}, 8 {BS}, 11 {VT}, 12 {FF}, 26 {SUB}, 27 {ESC}).\n * IN assertion: the fields Freq of dyn_ltree are set.\n */\nfunction detect_data_type(s) {\n  /* black_mask is the bit mask of black-listed bytes\n   * set bits 0..6, 14..25, and 28..31\n   * 0xf3ffc07f = binary 11110011111111111100000001111111\n   */\n  var black_mask = 0xf3ffc07f;\n  var n;\n\n  /* Check for non-textual (\"black-listed\") bytes. */\n  for (n = 0; n <= 31; n++, black_mask >>>= 1) {\n    if ((black_mask & 1) && (s.dyn_ltree[n * 2]/*.Freq*/ !== 0)) {\n      return Z_BINARY;\n    }\n  }\n\n  /* Check for textual (\"white-listed\") bytes. */\n  if (s.dyn_ltree[9 * 2]/*.Freq*/ !== 0 || s.dyn_ltree[10 * 2]/*.Freq*/ !== 0 ||\n      s.dyn_ltree[13 * 2]/*.Freq*/ !== 0) {\n    return Z_TEXT;\n  }\n  for (n = 32; n < LITERALS; n++) {\n    if (s.dyn_ltree[n * 2]/*.Freq*/ !== 0) {\n      return Z_TEXT;\n    }\n  }\n\n  /* There are no \"black-listed\" or \"white-listed\" bytes:\n   * this stream either is empty or has tolerated (\"gray-listed\") bytes only.\n   */\n  return Z_BINARY;\n}\n\n\nvar static_init_done = false;\n\n/* ===========================================================================\n * Initialize the tree data structures for a new zlib stream.\n */\nfunction _tr_init(s)\n{\n\n  if (!static_init_done) {\n    tr_static_init();\n    static_init_done = true;\n  }\n\n  s.l_desc  = new TreeDesc(s.dyn_ltree, static_l_desc);\n  s.d_desc  = new TreeDesc(s.dyn_dtree, static_d_desc);\n  s.bl_desc = new TreeDesc(s.bl_tree, static_bl_desc);\n\n  s.bi_buf = 0;\n  s.bi_valid = 0;\n\n  /* Initialize the first block of the first file: */\n  init_block(s);\n}\n\n\n/* ===========================================================================\n * Send a stored block\n */\nfunction _tr_stored_block(s, buf, stored_len, last)\n//DeflateState *s;\n//charf *buf;       /* input block */\n//ulg stored_len;   /* length of input block */\n//int last;         /* one if this is the last block for a file */\n{\n  send_bits(s, (STORED_BLOCK << 1) + (last ? 1 : 0), 3);    /* send block type */\n  copy_block(s, buf, stored_len, true); /* with header */\n}\n\n\n/* ===========================================================================\n * Send one empty static block to give enough lookahead for inflate.\n * This takes 10 bits, of which 7 may remain in the bit buffer.\n */\nfunction _tr_align(s) {\n  send_bits(s, STATIC_TREES << 1, 3);\n  send_code(s, END_BLOCK, static_ltree);\n  bi_flush(s);\n}\n\n\n/* ===========================================================================\n * Determine the best encoding for the current block: dynamic trees, static\n * trees or store, and output the encoded block to the zip file.\n */\nfunction _tr_flush_block(s, buf, stored_len, last)\n//DeflateState *s;\n//charf *buf;       /* input block, or NULL if too old */\n//ulg stored_len;   /* length of input block */\n//int last;         /* one if this is the last block for a file */\n{\n  var opt_lenb, static_lenb;  /* opt_len and static_len in bytes */\n  var max_blindex = 0;        /* index of last bit length code of non zero freq */\n\n  /* Build the Huffman trees unless a stored block is forced */\n  if (s.level > 0) {\n\n    /* Check if the file is binary or text */\n    if (s.strm.data_type === Z_UNKNOWN) {\n      s.strm.data_type = detect_data_type(s);\n    }\n\n    /* Construct the literal and distance trees */\n    build_tree(s, s.l_desc);\n    // Tracev((stderr, \"\\nlit data: dyn %ld, stat %ld\", s->opt_len,\n    //        s->static_len));\n\n    build_tree(s, s.d_desc);\n    // Tracev((stderr, \"\\ndist data: dyn %ld, stat %ld\", s->opt_len,\n    //        s->static_len));\n    /* At this point, opt_len and static_len are the total bit lengths of\n     * the compressed block data, excluding the tree representations.\n     */\n\n    /* Build the bit length tree for the above two trees, and get the index\n     * in bl_order of the last bit length code to send.\n     */\n    max_blindex = build_bl_tree(s);\n\n    /* Determine the best encoding. Compute the block lengths in bytes. */\n    opt_lenb = (s.opt_len + 3 + 7) >>> 3;\n    static_lenb = (s.static_len + 3 + 7) >>> 3;\n\n    // Tracev((stderr, \"\\nopt %lu(%lu) stat %lu(%lu) stored %lu lit %u \",\n    //        opt_lenb, s->opt_len, static_lenb, s->static_len, stored_len,\n    //        s->last_lit));\n\n    if (static_lenb <= opt_lenb) { opt_lenb = static_lenb; }\n\n  } else {\n    // Assert(buf != (char*)0, \"lost buf\");\n    opt_lenb = static_lenb = stored_len + 5; /* force a stored block */\n  }\n\n  if ((stored_len + 4 <= opt_lenb) && (buf !== -1)) {\n    /* 4: two words for the lengths */\n\n    /* The test buf != NULL is only necessary if LIT_BUFSIZE > WSIZE.\n     * Otherwise we can't have processed more than WSIZE input bytes since\n     * the last block flush, because compression would have been\n     * successful. If LIT_BUFSIZE <= WSIZE, it is never too late to\n     * transform a block into a stored block.\n     */\n    _tr_stored_block(s, buf, stored_len, last);\n\n  } else if (s.strategy === Z_FIXED || static_lenb === opt_lenb) {\n\n    send_bits(s, (STATIC_TREES << 1) + (last ? 1 : 0), 3);\n    compress_block(s, static_ltree, static_dtree);\n\n  } else {\n    send_bits(s, (DYN_TREES << 1) + (last ? 1 : 0), 3);\n    send_all_trees(s, s.l_desc.max_code + 1, s.d_desc.max_code + 1, max_blindex + 1);\n    compress_block(s, s.dyn_ltree, s.dyn_dtree);\n  }\n  // Assert (s->compressed_len == s->bits_sent, \"bad compressed size\");\n  /* The above check is made mod 2^32, for files larger than 512 MB\n   * and uLong implemented on 32 bits.\n   */\n  init_block(s);\n\n  if (last) {\n    bi_windup(s);\n  }\n  // Tracev((stderr,\"\\ncomprlen %lu(%lu) \", s->compressed_len>>3,\n  //       s->compressed_len-7*last));\n}\n\n/* ===========================================================================\n * Save the match info and tally the frequency counts. Return true if\n * the current block must be flushed.\n */\nfunction _tr_tally(s, dist, lc)\n//    deflate_state *s;\n//    unsigned dist;  /* distance of matched string */\n//    unsigned lc;    /* match length-MIN_MATCH or unmatched char (if dist==0) */\n{\n  //var out_length, in_length, dcode;\n\n  s.pending_buf[s.d_buf + s.last_lit * 2]     = (dist >>> 8) & 0xff;\n  s.pending_buf[s.d_buf + s.last_lit * 2 + 1] = dist & 0xff;\n\n  s.pending_buf[s.l_buf + s.last_lit] = lc & 0xff;\n  s.last_lit++;\n\n  if (dist === 0) {\n    /* lc is the unmatched char */\n    s.dyn_ltree[lc * 2]/*.Freq*/++;\n  } else {\n    s.matches++;\n    /* Here, lc is the match length - MIN_MATCH */\n    dist--;             /* dist = match distance - 1 */\n    //Assert((ush)dist < (ush)MAX_DIST(s) &&\n    //       (ush)lc <= (ush)(MAX_MATCH-MIN_MATCH) &&\n    //       (ush)d_code(dist) < (ush)D_CODES,  \"_tr_tally: bad match\");\n\n    s.dyn_ltree[(_length_code[lc] + LITERALS + 1) * 2]/*.Freq*/++;\n    s.dyn_dtree[d_code(dist) * 2]/*.Freq*/++;\n  }\n\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n\n//#ifdef TRUNCATE_BLOCK\n//  /* Try to guess if it is profitable to stop the current block here */\n//  if ((s.last_lit & 0x1fff) === 0 && s.level > 2) {\n//    /* Compute an upper bound for the compressed length */\n//    out_length = s.last_lit*8;\n//    in_length = s.strstart - s.block_start;\n//\n//    for (dcode = 0; dcode < D_CODES; dcode++) {\n//      out_length += s.dyn_dtree[dcode*2]/*.Freq*/ * (5 + extra_dbits[dcode]);\n//    }\n//    out_length >>>= 3;\n//    //Tracev((stderr,\"\\nlast_lit %u, in %ld, out ~%ld(%ld%%) \",\n//    //       s->last_lit, in_length, out_length,\n//    //       100L - out_length*100L/in_length));\n//    if (s.matches < (s.last_lit>>1)/*int /2*/ && out_length < (in_length>>1)/*int /2*/) {\n//      return true;\n//    }\n//  }\n//#endif\n\n  return (s.last_lit === s.lit_bufsize - 1);\n  /* We avoid equality with lit_bufsize because of wraparound at 64K\n   * on 16 bit machines and because stored blocks are restricted to\n   * 64K-1 bytes.\n   */\n}\n\nexports._tr_init  = _tr_init;\nexports._tr_stored_block = _tr_stored_block;\nexports._tr_flush_block  = _tr_flush_block;\nexports._tr_tally = _tr_tally;\nexports._tr_align = _tr_align;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/pako/lib/zlib/trees.js\n// module id = 56\n// module chunks = 0","/*!\n * PEP v0.4.3 | https://github.com/jquery/PEP\n * Copyright jQuery Foundation and other contributors | http://jquery.org/license\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global.PointerEventsPolyfill = factory());\n}(this, function () { 'use strict';\n\n  /**\n   * This is the constructor for new PointerEvents.\n   *\n   * New Pointer Events must be given a type, and an optional dictionary of\n   * initialization properties.\n   *\n   * Due to certain platform requirements, events returned from the constructor\n   * identify as MouseEvents.\n   *\n   * @constructor\n   * @param {String} inType The type of the event to create.\n   * @param {Object} [inDict] An optional dictionary of initial event properties.\n   * @return {Event} A new PointerEvent of type `inType`, initialized with properties from `inDict`.\n   */\n  var MOUSE_PROPS = [\n    'bubbles',\n    'cancelable',\n    'view',\n    'detail',\n    'screenX',\n    'screenY',\n    'clientX',\n    'clientY',\n    'ctrlKey',\n    'altKey',\n    'shiftKey',\n    'metaKey',\n    'button',\n    'relatedTarget',\n    'pageX',\n    'pageY'\n  ];\n\n  var MOUSE_DEFAULTS = [\n    false,\n    false,\n    null,\n    null,\n    0,\n    0,\n    0,\n    0,\n    false,\n    false,\n    false,\n    false,\n    0,\n    null,\n    0,\n    0\n  ];\n\n  function PointerEvent(inType, inDict) {\n    inDict = inDict || Object.create(null);\n\n    var e = document.createEvent('Event');\n    e.initEvent(inType, inDict.bubbles || false, inDict.cancelable || false);\n\n    // define inherited MouseEvent properties\n    // skip bubbles and cancelable since they're set above in initEvent()\n    for (var i = 2, p; i < MOUSE_PROPS.length; i++) {\n      p = MOUSE_PROPS[i];\n      e[p] = inDict[p] || MOUSE_DEFAULTS[i];\n    }\n    e.buttons = inDict.buttons || 0;\n\n    // Spec requires that pointers without pressure specified use 0.5 for down\n    // state and 0 for up state.\n    var pressure = 0;\n\n    if (inDict.pressure && e.buttons) {\n      pressure = inDict.pressure;\n    } else {\n      pressure = e.buttons ? 0.5 : 0;\n    }\n\n    // add x/y properties aliased to clientX/Y\n    e.x = e.clientX;\n    e.y = e.clientY;\n\n    // define the properties of the PointerEvent interface\n    e.pointerId = inDict.pointerId || 0;\n    e.width = inDict.width || 0;\n    e.height = inDict.height || 0;\n    e.pressure = pressure;\n    e.tiltX = inDict.tiltX || 0;\n    e.tiltY = inDict.tiltY || 0;\n    e.twist = inDict.twist || 0;\n    e.tangentialPressure = inDict.tangentialPressure || 0;\n    e.pointerType = inDict.pointerType || '';\n    e.hwTimestamp = inDict.hwTimestamp || 0;\n    e.isPrimary = inDict.isPrimary || false;\n    return e;\n  }\n\n  /**\n   * This module implements a map of pointer states\n   */\n  var USE_MAP = window.Map && window.Map.prototype.forEach;\n  var PointerMap = USE_MAP ? Map : SparseArrayMap;\n\n  function SparseArrayMap() {\n    this.array = [];\n    this.size = 0;\n  }\n\n  SparseArrayMap.prototype = {\n    set: function(k, v) {\n      if (v === undefined) {\n        return this.delete(k);\n      }\n      if (!this.has(k)) {\n        this.size++;\n      }\n      this.array[k] = v;\n    },\n    has: function(k) {\n      return this.array[k] !== undefined;\n    },\n    delete: function(k) {\n      if (this.has(k)) {\n        delete this.array[k];\n        this.size--;\n      }\n    },\n    get: function(k) {\n      return this.array[k];\n    },\n    clear: function() {\n      this.array.length = 0;\n      this.size = 0;\n    },\n\n    // return value, key, map\n    forEach: function(callback, thisArg) {\n      return this.array.forEach(function(v, k) {\n        callback.call(thisArg, v, k, this);\n      }, this);\n    }\n  };\n\n  var CLONE_PROPS = [\n\n    // MouseEvent\n    'bubbles',\n    'cancelable',\n    'view',\n    'detail',\n    'screenX',\n    'screenY',\n    'clientX',\n    'clientY',\n    'ctrlKey',\n    'altKey',\n    'shiftKey',\n    'metaKey',\n    'button',\n    'relatedTarget',\n\n    // DOM Level 3\n    'buttons',\n\n    // PointerEvent\n    'pointerId',\n    'width',\n    'height',\n    'pressure',\n    'tiltX',\n    'tiltY',\n    'pointerType',\n    'hwTimestamp',\n    'isPrimary',\n\n    // event instance\n    'type',\n    'target',\n    'currentTarget',\n    'which',\n    'pageX',\n    'pageY',\n    'timeStamp'\n  ];\n\n  var CLONE_DEFAULTS = [\n\n    // MouseEvent\n    false,\n    false,\n    null,\n    null,\n    0,\n    0,\n    0,\n    0,\n    false,\n    false,\n    false,\n    false,\n    0,\n    null,\n\n    // DOM Level 3\n    0,\n\n    // PointerEvent\n    0,\n    0,\n    0,\n    0,\n    0,\n    0,\n    '',\n    0,\n    false,\n\n    // event instance\n    '',\n    null,\n    null,\n    0,\n    0,\n    0,\n    0\n  ];\n\n  var BOUNDARY_EVENTS = {\n    'pointerover': 1,\n    'pointerout': 1,\n    'pointerenter': 1,\n    'pointerleave': 1\n  };\n\n  var HAS_SVG_INSTANCE = (typeof SVGElementInstance !== 'undefined');\n\n  /**\n   * This module is for normalizing events. Mouse and Touch events will be\n   * collected here, and fire PointerEvents that have the same semantics, no\n   * matter the source.\n   * Events fired:\n   *   - pointerdown: a pointing is added\n   *   - pointerup: a pointer is removed\n   *   - pointermove: a pointer is moved\n   *   - pointerover: a pointer crosses into an element\n   *   - pointerout: a pointer leaves an element\n   *   - pointercancel: a pointer will no longer generate events\n   */\n  var dispatcher = {\n    pointermap: new PointerMap(),\n    eventMap: Object.create(null),\n    captureInfo: Object.create(null),\n\n    // Scope objects for native events.\n    // This exists for ease of testing.\n    eventSources: Object.create(null),\n    eventSourceList: [],\n    /**\n     * Add a new event source that will generate pointer events.\n     *\n     * `inSource` must contain an array of event names named `events`, and\n     * functions with the names specified in the `events` array.\n     * @param {string} name A name for the event source\n     * @param {Object} source A new source of platform events.\n     */\n    registerSource: function(name, source) {\n      var s = source;\n      var newEvents = s.events;\n      if (newEvents) {\n        newEvents.forEach(function(e) {\n          if (s[e]) {\n            this.eventMap[e] = s[e].bind(s);\n          }\n        }, this);\n        this.eventSources[name] = s;\n        this.eventSourceList.push(s);\n      }\n    },\n    register: function(element) {\n      var l = this.eventSourceList.length;\n      for (var i = 0, es; (i < l) && (es = this.eventSourceList[i]); i++) {\n\n        // call eventsource register\n        es.register.call(es, element);\n      }\n    },\n    unregister: function(element) {\n      var l = this.eventSourceList.length;\n      for (var i = 0, es; (i < l) && (es = this.eventSourceList[i]); i++) {\n\n        // call eventsource register\n        es.unregister.call(es, element);\n      }\n    },\n    contains: /*scope.external.contains || */function(container, contained) {\n      try {\n        return container.contains(contained);\n      } catch (ex) {\n\n        // most likely: https://bugzilla.mozilla.org/show_bug.cgi?id=208427\n        return false;\n      }\n    },\n\n    // EVENTS\n    down: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointerdown', inEvent);\n    },\n    move: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointermove', inEvent);\n    },\n    up: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointerup', inEvent);\n    },\n    enter: function(inEvent) {\n      inEvent.bubbles = false;\n      this.fireEvent('pointerenter', inEvent);\n    },\n    leave: function(inEvent) {\n      inEvent.bubbles = false;\n      this.fireEvent('pointerleave', inEvent);\n    },\n    over: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointerover', inEvent);\n    },\n    out: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointerout', inEvent);\n    },\n    cancel: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointercancel', inEvent);\n    },\n    leaveOut: function(event) {\n      this.out(event);\n      this.propagate(event, this.leave, false);\n    },\n    enterOver: function(event) {\n      this.over(event);\n      this.propagate(event, this.enter, true);\n    },\n\n    // LISTENER LOGIC\n    eventHandler: function(inEvent) {\n\n      // This is used to prevent multiple dispatch of pointerevents from\n      // platform events. This can happen when two elements in different scopes\n      // are set up to create pointer events, which is relevant to Shadow DOM.\n      if (inEvent._handledByPE) {\n        return;\n      }\n      var type = inEvent.type;\n      var fn = this.eventMap && this.eventMap[type];\n      if (fn) {\n        fn(inEvent);\n      }\n      inEvent._handledByPE = true;\n    },\n\n    // set up event listeners\n    listen: function(target, events) {\n      events.forEach(function(e) {\n        this.addEvent(target, e);\n      }, this);\n    },\n\n    // remove event listeners\n    unlisten: function(target, events) {\n      events.forEach(function(e) {\n        this.removeEvent(target, e);\n      }, this);\n    },\n    addEvent: /*scope.external.addEvent || */function(target, eventName) {\n      target.addEventListener(eventName, this.boundHandler);\n    },\n    removeEvent: /*scope.external.removeEvent || */function(target, eventName) {\n      target.removeEventListener(eventName, this.boundHandler);\n    },\n\n    // EVENT CREATION AND TRACKING\n    /**\n     * Creates a new Event of type `inType`, based on the information in\n     * `inEvent`.\n     *\n     * @param {string} inType A string representing the type of event to create\n     * @param {Event} inEvent A platform event with a target\n     * @return {Event} A PointerEvent of type `inType`\n     */\n    makeEvent: function(inType, inEvent) {\n\n      // relatedTarget must be null if pointer is captured\n      if (this.captureInfo[inEvent.pointerId]) {\n        inEvent.relatedTarget = null;\n      }\n      var e = new PointerEvent(inType, inEvent);\n      if (inEvent.preventDefault) {\n        e.preventDefault = inEvent.preventDefault;\n      }\n      e._target = e._target || inEvent.target;\n      return e;\n    },\n\n    // make and dispatch an event in one call\n    fireEvent: function(inType, inEvent) {\n      var e = this.makeEvent(inType, inEvent);\n      return this.dispatchEvent(e);\n    },\n    /**\n     * Returns a snapshot of inEvent, with writable properties.\n     *\n     * @param {Event} inEvent An event that contains properties to copy.\n     * @return {Object} An object containing shallow copies of `inEvent`'s\n     *    properties.\n     */\n    cloneEvent: function(inEvent) {\n      var eventCopy = Object.create(null);\n      var p;\n      for (var i = 0; i < CLONE_PROPS.length; i++) {\n        p = CLONE_PROPS[i];\n        eventCopy[p] = inEvent[p] || CLONE_DEFAULTS[i];\n\n        // Work around SVGInstanceElement shadow tree\n        // Return the <use> element that is represented by the instance for Safari, Chrome, IE.\n        // This is the behavior implemented by Firefox.\n        if (HAS_SVG_INSTANCE && (p === 'target' || p === 'relatedTarget')) {\n          if (eventCopy[p] instanceof SVGElementInstance) {\n            eventCopy[p] = eventCopy[p].correspondingUseElement;\n          }\n        }\n      }\n\n      // keep the semantics of preventDefault\n      if (inEvent.preventDefault) {\n        eventCopy.preventDefault = function() {\n          inEvent.preventDefault();\n        };\n      }\n      return eventCopy;\n    },\n    getTarget: function(inEvent) {\n      var capture = this.captureInfo[inEvent.pointerId];\n      if (!capture) {\n        return inEvent._target;\n      }\n      if (inEvent._target === capture || !(inEvent.type in BOUNDARY_EVENTS)) {\n        return capture;\n      }\n    },\n    propagate: function(event, fn, propagateDown) {\n      var target = event.target;\n      var targets = [];\n\n      // Order of conditions due to document.contains() missing in IE.\n      while (target !== document && !target.contains(event.relatedTarget)) {\n        targets.push(target);\n        target = target.parentNode;\n\n        // Touch: Do not propagate if node is detached.\n        if (!target) {\n          return;\n        }\n      }\n      if (propagateDown) {\n        targets.reverse();\n      }\n      targets.forEach(function(target) {\n        event.target = target;\n        fn.call(this, event);\n      }, this);\n    },\n    setCapture: function(inPointerId, inTarget, skipDispatch) {\n      if (this.captureInfo[inPointerId]) {\n        this.releaseCapture(inPointerId, skipDispatch);\n      }\n\n      this.captureInfo[inPointerId] = inTarget;\n      this.implicitRelease = this.releaseCapture.bind(this, inPointerId, skipDispatch);\n      document.addEventListener('pointerup', this.implicitRelease);\n      document.addEventListener('pointercancel', this.implicitRelease);\n\n      var e = new PointerEvent('gotpointercapture');\n      e.pointerId = inPointerId;\n      e._target = inTarget;\n\n      if (!skipDispatch) {\n        this.asyncDispatchEvent(e);\n      }\n    },\n    releaseCapture: function(inPointerId, skipDispatch) {\n      var t = this.captureInfo[inPointerId];\n      if (!t) {\n        return;\n      }\n\n      this.captureInfo[inPointerId] = undefined;\n      document.removeEventListener('pointerup', this.implicitRelease);\n      document.removeEventListener('pointercancel', this.implicitRelease);\n\n      var e = new PointerEvent('lostpointercapture');\n      e.pointerId = inPointerId;\n      e._target = t;\n\n      if (!skipDispatch) {\n        this.asyncDispatchEvent(e);\n      }\n    },\n    /**\n     * Dispatches the event to its target.\n     *\n     * @param {Event} inEvent The event to be dispatched.\n     * @return {Boolean} True if an event handler returns true, false otherwise.\n     */\n    dispatchEvent: /*scope.external.dispatchEvent || */function(inEvent) {\n      var t = this.getTarget(inEvent);\n      if (t) {\n        return t.dispatchEvent(inEvent);\n      }\n    },\n    asyncDispatchEvent: function(inEvent) {\n      requestAnimationFrame(this.dispatchEvent.bind(this, inEvent));\n    }\n  };\n  dispatcher.boundHandler = dispatcher.eventHandler.bind(dispatcher);\n\n  var targeting = {\n    shadow: function(inEl) {\n      if (inEl) {\n        return inEl.shadowRoot || inEl.webkitShadowRoot;\n      }\n    },\n    canTarget: function(shadow) {\n      return shadow && Boolean(shadow.elementFromPoint);\n    },\n    targetingShadow: function(inEl) {\n      var s = this.shadow(inEl);\n      if (this.canTarget(s)) {\n        return s;\n      }\n    },\n    olderShadow: function(shadow) {\n      var os = shadow.olderShadowRoot;\n      if (!os) {\n        var se = shadow.querySelector('shadow');\n        if (se) {\n          os = se.olderShadowRoot;\n        }\n      }\n      return os;\n    },\n    allShadows: function(element) {\n      var shadows = [];\n      var s = this.shadow(element);\n      while (s) {\n        shadows.push(s);\n        s = this.olderShadow(s);\n      }\n      return shadows;\n    },\n    searchRoot: function(inRoot, x, y) {\n      if (inRoot) {\n        var t = inRoot.elementFromPoint(x, y);\n        var st, sr;\n\n        // is element a shadow host?\n        sr = this.targetingShadow(t);\n        while (sr) {\n\n          // find the the element inside the shadow root\n          st = sr.elementFromPoint(x, y);\n          if (!st) {\n\n            // check for older shadows\n            sr = this.olderShadow(sr);\n          } else {\n\n            // shadowed element may contain a shadow root\n            var ssr = this.targetingShadow(st);\n            return this.searchRoot(ssr, x, y) || st;\n          }\n        }\n\n        // light dom element is the target\n        return t;\n      }\n    },\n    owner: function(element) {\n      var s = element;\n\n      // walk up until you hit the shadow root or document\n      while (s.parentNode) {\n        s = s.parentNode;\n      }\n\n      // the owner element is expected to be a Document or ShadowRoot\n      if (s.nodeType !== Node.DOCUMENT_NODE && s.nodeType !== Node.DOCUMENT_FRAGMENT_NODE) {\n        s = document;\n      }\n      return s;\n    },\n    findTarget: function(inEvent) {\n      var x = inEvent.clientX;\n      var y = inEvent.clientY;\n\n      // if the listener is in the shadow root, it is much faster to start there\n      var s = this.owner(inEvent.target);\n\n      // if x, y is not in this root, fall back to document search\n      if (!s.elementFromPoint(x, y)) {\n        s = document;\n      }\n      return this.searchRoot(s, x, y);\n    }\n  };\n\n  var forEach = Array.prototype.forEach.call.bind(Array.prototype.forEach);\n  var map = Array.prototype.map.call.bind(Array.prototype.map);\n  var toArray = Array.prototype.slice.call.bind(Array.prototype.slice);\n  var filter = Array.prototype.filter.call.bind(Array.prototype.filter);\n  var MO = window.MutationObserver || window.WebKitMutationObserver;\n  var SELECTOR = '[touch-action]';\n  var OBSERVER_INIT = {\n    subtree: true,\n    childList: true,\n    attributes: true,\n    attributeOldValue: true,\n    attributeFilter: ['touch-action']\n  };\n\n  function Installer(add, remove, changed, binder) {\n    this.addCallback = add.bind(binder);\n    this.removeCallback = remove.bind(binder);\n    this.changedCallback = changed.bind(binder);\n    if (MO) {\n      this.observer = new MO(this.mutationWatcher.bind(this));\n    }\n  }\n\n  Installer.prototype = {\n    watchSubtree: function(target) {\n\n      // Only watch scopes that can target find, as these are top-level.\n      // Otherwise we can see duplicate additions and removals that add noise.\n      //\n      // TODO(dfreedman): For some instances with ShadowDOMPolyfill, we can see\n      // a removal without an insertion when a node is redistributed among\n      // shadows. Since it all ends up correct in the document, watching only\n      // the document will yield the correct mutations to watch.\n      if (this.observer && targeting.canTarget(target)) {\n        this.observer.observe(target, OBSERVER_INIT);\n      }\n    },\n    enableOnSubtree: function(target) {\n      this.watchSubtree(target);\n      if (target === document && document.readyState !== 'complete') {\n        this.installOnLoad();\n      } else {\n        this.installNewSubtree(target);\n      }\n    },\n    installNewSubtree: function(target) {\n      forEach(this.findElements(target), this.addElement, this);\n    },\n    findElements: function(target) {\n      if (target.querySelectorAll) {\n        return target.querySelectorAll(SELECTOR);\n      }\n      return [];\n    },\n    removeElement: function(el) {\n      this.removeCallback(el);\n    },\n    addElement: function(el) {\n      this.addCallback(el);\n    },\n    elementChanged: function(el, oldValue) {\n      this.changedCallback(el, oldValue);\n    },\n    concatLists: function(accum, list) {\n      return accum.concat(toArray(list));\n    },\n\n    // register all touch-action = none nodes on document load\n    installOnLoad: function() {\n      document.addEventListener('readystatechange', function() {\n        if (document.readyState === 'complete') {\n          this.installNewSubtree(document);\n        }\n      }.bind(this));\n    },\n    isElement: function(n) {\n      return n.nodeType === Node.ELEMENT_NODE;\n    },\n    flattenMutationTree: function(inNodes) {\n\n      // find children with touch-action\n      var tree = map(inNodes, this.findElements, this);\n\n      // make sure the added nodes are accounted for\n      tree.push(filter(inNodes, this.isElement));\n\n      // flatten the list\n      return tree.reduce(this.concatLists, []);\n    },\n    mutationWatcher: function(mutations) {\n      mutations.forEach(this.mutationHandler, this);\n    },\n    mutationHandler: function(m) {\n      if (m.type === 'childList') {\n        var added = this.flattenMutationTree(m.addedNodes);\n        added.forEach(this.addElement, this);\n        var removed = this.flattenMutationTree(m.removedNodes);\n        removed.forEach(this.removeElement, this);\n      } else if (m.type === 'attributes') {\n        this.elementChanged(m.target, m.oldValue);\n      }\n    }\n  };\n\n  function shadowSelector(v) {\n    return 'body /shadow-deep/ ' + selector(v);\n  }\n  function selector(v) {\n    return '[touch-action=\"' + v + '\"]';\n  }\n  function rule(v) {\n    return '{ -ms-touch-action: ' + v + '; touch-action: ' + v + '; }';\n  }\n  var attrib2css = [\n    'none',\n    'auto',\n    'pan-x',\n    'pan-y',\n    {\n      rule: 'pan-x pan-y',\n      selectors: [\n        'pan-x pan-y',\n        'pan-y pan-x'\n      ]\n    }\n  ];\n  var styles = '';\n\n  // only install stylesheet if the browser has touch action support\n  var hasNativePE = window.PointerEvent || window.MSPointerEvent;\n\n  // only add shadow selectors if shadowdom is supported\n  var hasShadowRoot = !window.ShadowDOMPolyfill && document.head.createShadowRoot;\n\n  function applyAttributeStyles() {\n    if (hasNativePE) {\n      attrib2css.forEach(function(r) {\n        if (String(r) === r) {\n          styles += selector(r) + rule(r) + '\\n';\n          if (hasShadowRoot) {\n            styles += shadowSelector(r) + rule(r) + '\\n';\n          }\n        } else {\n          styles += r.selectors.map(selector) + rule(r.rule) + '\\n';\n          if (hasShadowRoot) {\n            styles += r.selectors.map(shadowSelector) + rule(r.rule) + '\\n';\n          }\n        }\n      });\n\n      var el = document.createElement('style');\n      el.textContent = styles;\n      document.head.appendChild(el);\n    }\n  }\n\n  var pointermap = dispatcher.pointermap;\n\n  // radius around touchend that swallows mouse events\n  var DEDUP_DIST = 25;\n\n  // left, middle, right, back, forward\n  var BUTTON_TO_BUTTONS = [1, 4, 2, 8, 16];\n\n  var HAS_BUTTONS = false;\n  try {\n    HAS_BUTTONS = new MouseEvent('test', { buttons: 1 }).buttons === 1;\n  } catch (e) {}\n\n  // handler block for native mouse events\n  var mouseEvents = {\n    POINTER_ID: 1,\n    POINTER_TYPE: 'mouse',\n    events: [\n      'mousedown',\n      'mousemove',\n      'mouseup',\n      'mouseover',\n      'mouseout'\n    ],\n    register: function(target) {\n      dispatcher.listen(target, this.events);\n    },\n    unregister: function(target) {\n      dispatcher.unlisten(target, this.events);\n    },\n    lastTouches: [],\n\n    // collide with the global mouse listener\n    isEventSimulatedFromTouch: function(inEvent) {\n      var lts = this.lastTouches;\n      var x = inEvent.clientX;\n      var y = inEvent.clientY;\n      for (var i = 0, l = lts.length, t; i < l && (t = lts[i]); i++) {\n\n        // simulated mouse events will be swallowed near a primary touchend\n        var dx = Math.abs(x - t.x);\n        var dy = Math.abs(y - t.y);\n        if (dx <= DEDUP_DIST && dy <= DEDUP_DIST) {\n          return true;\n        }\n      }\n    },\n    prepareEvent: function(inEvent) {\n      var e = dispatcher.cloneEvent(inEvent);\n\n      // forward mouse preventDefault\n      var pd = e.preventDefault;\n      e.preventDefault = function() {\n        inEvent.preventDefault();\n        pd();\n      };\n      e.pointerId = this.POINTER_ID;\n      e.isPrimary = true;\n      e.pointerType = this.POINTER_TYPE;\n      return e;\n    },\n    prepareButtonsForMove: function(e, inEvent) {\n      var p = pointermap.get(this.POINTER_ID);\n\n      // Update buttons state after possible out-of-document mouseup.\n      if (inEvent.which === 0 || !p) {\n        e.buttons = 0;\n      } else {\n        e.buttons = p.buttons;\n      }\n      inEvent.buttons = e.buttons;\n    },\n    mousedown: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var p = pointermap.get(this.POINTER_ID);\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) {\n          e.buttons = BUTTON_TO_BUTTONS[e.button];\n          if (p) { e.buttons |= p.buttons; }\n          inEvent.buttons = e.buttons;\n        }\n        pointermap.set(this.POINTER_ID, inEvent);\n        if (!p || p.buttons === 0) {\n          dispatcher.down(e);\n        } else {\n          dispatcher.move(e);\n        }\n      }\n    },\n    mousemove: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) { this.prepareButtonsForMove(e, inEvent); }\n        e.button = -1;\n        pointermap.set(this.POINTER_ID, inEvent);\n        dispatcher.move(e);\n      }\n    },\n    mouseup: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var p = pointermap.get(this.POINTER_ID);\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) {\n          var up = BUTTON_TO_BUTTONS[e.button];\n\n          // Produces wrong state of buttons in Browsers without `buttons` support\n          // when a mouse button that was pressed outside the document is released\n          // inside and other buttons are still pressed down.\n          e.buttons = p ? p.buttons & ~up : 0;\n          inEvent.buttons = e.buttons;\n        }\n        pointermap.set(this.POINTER_ID, inEvent);\n\n        // Support: Firefox <=44 only\n        // FF Ubuntu includes the lifted button in the `buttons` property on\n        // mouseup.\n        // https://bugzilla.mozilla.org/show_bug.cgi?id=1223366\n        e.buttons &= ~BUTTON_TO_BUTTONS[e.button];\n        if (e.buttons === 0) {\n          dispatcher.up(e);\n        } else {\n          dispatcher.move(e);\n        }\n      }\n    },\n    mouseover: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) { this.prepareButtonsForMove(e, inEvent); }\n        e.button = -1;\n        pointermap.set(this.POINTER_ID, inEvent);\n        dispatcher.enterOver(e);\n      }\n    },\n    mouseout: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) { this.prepareButtonsForMove(e, inEvent); }\n        e.button = -1;\n        dispatcher.leaveOut(e);\n      }\n    },\n    cancel: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.cancel(e);\n      this.deactivateMouse();\n    },\n    deactivateMouse: function() {\n      pointermap.delete(this.POINTER_ID);\n    }\n  };\n\n  var captureInfo = dispatcher.captureInfo;\n  var findTarget = targeting.findTarget.bind(targeting);\n  var allShadows = targeting.allShadows.bind(targeting);\n  var pointermap$1 = dispatcher.pointermap;\n\n  // This should be long enough to ignore compat mouse events made by touch\n  var DEDUP_TIMEOUT = 2500;\n  var CLICK_COUNT_TIMEOUT = 200;\n  var ATTRIB = 'touch-action';\n  var INSTALLER;\n\n  // handler block for native touch events\n  var touchEvents = {\n    events: [\n      'touchstart',\n      'touchmove',\n      'touchend',\n      'touchcancel'\n    ],\n    register: function(target) {\n      INSTALLER.enableOnSubtree(target);\n    },\n    unregister: function() {\n\n      // TODO(dfreedman): is it worth it to disconnect the MO?\n    },\n    elementAdded: function(el) {\n      var a = el.getAttribute(ATTRIB);\n      var st = this.touchActionToScrollType(a);\n      if (st) {\n        el._scrollType = st;\n        dispatcher.listen(el, this.events);\n\n        // set touch-action on shadows as well\n        allShadows(el).forEach(function(s) {\n          s._scrollType = st;\n          dispatcher.listen(s, this.events);\n        }, this);\n      }\n    },\n    elementRemoved: function(el) {\n      el._scrollType = undefined;\n      dispatcher.unlisten(el, this.events);\n\n      // remove touch-action from shadow\n      allShadows(el).forEach(function(s) {\n        s._scrollType = undefined;\n        dispatcher.unlisten(s, this.events);\n      }, this);\n    },\n    elementChanged: function(el, oldValue) {\n      var a = el.getAttribute(ATTRIB);\n      var st = this.touchActionToScrollType(a);\n      var oldSt = this.touchActionToScrollType(oldValue);\n\n      // simply update scrollType if listeners are already established\n      if (st && oldSt) {\n        el._scrollType = st;\n        allShadows(el).forEach(function(s) {\n          s._scrollType = st;\n        }, this);\n      } else if (oldSt) {\n        this.elementRemoved(el);\n      } else if (st) {\n        this.elementAdded(el);\n      }\n    },\n    scrollTypes: {\n      EMITTER: 'none',\n      XSCROLLER: 'pan-x',\n      YSCROLLER: 'pan-y',\n      SCROLLER: /^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/\n    },\n    touchActionToScrollType: function(touchAction) {\n      var t = touchAction;\n      var st = this.scrollTypes;\n      if (t === 'none') {\n        return 'none';\n      } else if (t === st.XSCROLLER) {\n        return 'X';\n      } else if (t === st.YSCROLLER) {\n        return 'Y';\n      } else if (st.SCROLLER.exec(t)) {\n        return 'XY';\n      }\n    },\n    POINTER_TYPE: 'touch',\n    firstTouch: null,\n    isPrimaryTouch: function(inTouch) {\n      return this.firstTouch === inTouch.identifier;\n    },\n    setPrimaryTouch: function(inTouch) {\n\n      // set primary touch if there no pointers, or the only pointer is the mouse\n      if (pointermap$1.size === 0 || (pointermap$1.size === 1 && pointermap$1.has(1))) {\n        this.firstTouch = inTouch.identifier;\n        this.firstXY = { X: inTouch.clientX, Y: inTouch.clientY };\n        this.scrolling = false;\n        this.cancelResetClickCount();\n      }\n    },\n    removePrimaryPointer: function(inPointer) {\n      if (inPointer.isPrimary) {\n        this.firstTouch = null;\n        this.firstXY = null;\n        this.resetClickCount();\n      }\n    },\n    clickCount: 0,\n    resetId: null,\n    resetClickCount: function() {\n      var fn = function() {\n        this.clickCount = 0;\n        this.resetId = null;\n      }.bind(this);\n      this.resetId = setTimeout(fn, CLICK_COUNT_TIMEOUT);\n    },\n    cancelResetClickCount: function() {\n      if (this.resetId) {\n        clearTimeout(this.resetId);\n      }\n    },\n    typeToButtons: function(type) {\n      var ret = 0;\n      if (type === 'touchstart' || type === 'touchmove') {\n        ret = 1;\n      }\n      return ret;\n    },\n    touchToPointer: function(inTouch) {\n      var cte = this.currentTouchEvent;\n      var e = dispatcher.cloneEvent(inTouch);\n\n      // We reserve pointerId 1 for Mouse.\n      // Touch identifiers can start at 0.\n      // Add 2 to the touch identifier for compatibility.\n      var id = e.pointerId = inTouch.identifier + 2;\n      e.target = captureInfo[id] || findTarget(e);\n      e.bubbles = true;\n      e.cancelable = true;\n      e.detail = this.clickCount;\n      e.button = 0;\n      e.buttons = this.typeToButtons(cte.type);\n      e.width = (inTouch.radiusX || inTouch.webkitRadiusX || 0) * 2;\n      e.height = (inTouch.radiusY || inTouch.webkitRadiusY || 0) * 2;\n      e.pressure = inTouch.force || inTouch.webkitForce || 0.5;\n      e.isPrimary = this.isPrimaryTouch(inTouch);\n      e.pointerType = this.POINTER_TYPE;\n\n      // forward modifier keys\n      e.altKey = cte.altKey;\n      e.ctrlKey = cte.ctrlKey;\n      e.metaKey = cte.metaKey;\n      e.shiftKey = cte.shiftKey;\n\n      // forward touch preventDefaults\n      var self = this;\n      e.preventDefault = function() {\n        self.scrolling = false;\n        self.firstXY = null;\n        cte.preventDefault();\n      };\n      return e;\n    },\n    processTouches: function(inEvent, inFunction) {\n      var tl = inEvent.changedTouches;\n      this.currentTouchEvent = inEvent;\n      for (var i = 0, t; i < tl.length; i++) {\n        t = tl[i];\n        inFunction.call(this, this.touchToPointer(t));\n      }\n    },\n\n    // For single axis scrollers, determines whether the element should emit\n    // pointer events or behave as a scroller\n    shouldScroll: function(inEvent) {\n      if (this.firstXY) {\n        var ret;\n        var scrollAxis = inEvent.currentTarget._scrollType;\n        if (scrollAxis === 'none') {\n\n          // this element is a touch-action: none, should never scroll\n          ret = false;\n        } else if (scrollAxis === 'XY') {\n\n          // this element should always scroll\n          ret = true;\n        } else {\n          var t = inEvent.changedTouches[0];\n\n          // check the intended scroll axis, and other axis\n          var a = scrollAxis;\n          var oa = scrollAxis === 'Y' ? 'X' : 'Y';\n          var da = Math.abs(t['client' + a] - this.firstXY[a]);\n          var doa = Math.abs(t['client' + oa] - this.firstXY[oa]);\n\n          // if delta in the scroll axis > delta other axis, scroll instead of\n          // making events\n          ret = da >= doa;\n        }\n        this.firstXY = null;\n        return ret;\n      }\n    },\n    findTouch: function(inTL, inId) {\n      for (var i = 0, l = inTL.length, t; i < l && (t = inTL[i]); i++) {\n        if (t.identifier === inId) {\n          return true;\n        }\n      }\n    },\n\n    // In some instances, a touchstart can happen without a touchend. This\n    // leaves the pointermap in a broken state.\n    // Therefore, on every touchstart, we remove the touches that did not fire a\n    // touchend event.\n    // To keep state globally consistent, we fire a\n    // pointercancel for this \"abandoned\" touch\n    vacuumTouches: function(inEvent) {\n      var tl = inEvent.touches;\n\n      // pointermap.size should be < tl.length here, as the touchstart has not\n      // been processed yet.\n      if (pointermap$1.size >= tl.length) {\n        var d = [];\n        pointermap$1.forEach(function(value, key) {\n\n          // Never remove pointerId == 1, which is mouse.\n          // Touch identifiers are 2 smaller than their pointerId, which is the\n          // index in pointermap.\n          if (key !== 1 && !this.findTouch(tl, key - 2)) {\n            var p = value.out;\n            d.push(p);\n          }\n        }, this);\n        d.forEach(this.cancelOut, this);\n      }\n    },\n    touchstart: function(inEvent) {\n      this.vacuumTouches(inEvent);\n      this.setPrimaryTouch(inEvent.changedTouches[0]);\n      this.dedupSynthMouse(inEvent);\n      if (!this.scrolling) {\n        this.clickCount++;\n        this.processTouches(inEvent, this.overDown);\n      }\n    },\n    overDown: function(inPointer) {\n      pointermap$1.set(inPointer.pointerId, {\n        target: inPointer.target,\n        out: inPointer,\n        outTarget: inPointer.target\n      });\n      dispatcher.enterOver(inPointer);\n      dispatcher.down(inPointer);\n    },\n    touchmove: function(inEvent) {\n      if (!this.scrolling) {\n        if (this.shouldScroll(inEvent)) {\n          this.scrolling = true;\n          this.touchcancel(inEvent);\n        } else {\n          inEvent.preventDefault();\n          this.processTouches(inEvent, this.moveOverOut);\n        }\n      }\n    },\n    moveOverOut: function(inPointer) {\n      var event = inPointer;\n      var pointer = pointermap$1.get(event.pointerId);\n\n      // a finger drifted off the screen, ignore it\n      if (!pointer) {\n        return;\n      }\n      var outEvent = pointer.out;\n      var outTarget = pointer.outTarget;\n      dispatcher.move(event);\n      if (outEvent && outTarget !== event.target) {\n        outEvent.relatedTarget = event.target;\n        event.relatedTarget = outTarget;\n\n        // recover from retargeting by shadow\n        outEvent.target = outTarget;\n        if (event.target) {\n          dispatcher.leaveOut(outEvent);\n          dispatcher.enterOver(event);\n        } else {\n\n          // clean up case when finger leaves the screen\n          event.target = outTarget;\n          event.relatedTarget = null;\n          this.cancelOut(event);\n        }\n      }\n      pointer.out = event;\n      pointer.outTarget = event.target;\n    },\n    touchend: function(inEvent) {\n      this.dedupSynthMouse(inEvent);\n      this.processTouches(inEvent, this.upOut);\n    },\n    upOut: function(inPointer) {\n      if (!this.scrolling) {\n        dispatcher.up(inPointer);\n        dispatcher.leaveOut(inPointer);\n      }\n      this.cleanUpPointer(inPointer);\n    },\n    touchcancel: function(inEvent) {\n      this.processTouches(inEvent, this.cancelOut);\n    },\n    cancelOut: function(inPointer) {\n      dispatcher.cancel(inPointer);\n      dispatcher.leaveOut(inPointer);\n      this.cleanUpPointer(inPointer);\n    },\n    cleanUpPointer: function(inPointer) {\n      pointermap$1.delete(inPointer.pointerId);\n      this.removePrimaryPointer(inPointer);\n    },\n\n    // prevent synth mouse events from creating pointer events\n    dedupSynthMouse: function(inEvent) {\n      var lts = mouseEvents.lastTouches;\n      var t = inEvent.changedTouches[0];\n\n      // only the primary finger will synth mouse events\n      if (this.isPrimaryTouch(t)) {\n\n        // remember x/y of last touch\n        var lt = { x: t.clientX, y: t.clientY };\n        lts.push(lt);\n        var fn = (function(lts, lt) {\n          var i = lts.indexOf(lt);\n          if (i > -1) {\n            lts.splice(i, 1);\n          }\n        }).bind(null, lts, lt);\n        setTimeout(fn, DEDUP_TIMEOUT);\n      }\n    }\n  };\n\n  INSTALLER = new Installer(touchEvents.elementAdded, touchEvents.elementRemoved,\n    touchEvents.elementChanged, touchEvents);\n\n  var pointermap$2 = dispatcher.pointermap;\n  var HAS_BITMAP_TYPE = window.MSPointerEvent &&\n    typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE === 'number';\n  var msEvents = {\n    events: [\n      'MSPointerDown',\n      'MSPointerMove',\n      'MSPointerUp',\n      'MSPointerOut',\n      'MSPointerOver',\n      'MSPointerCancel',\n      'MSGotPointerCapture',\n      'MSLostPointerCapture'\n    ],\n    register: function(target) {\n      dispatcher.listen(target, this.events);\n    },\n    unregister: function(target) {\n      dispatcher.unlisten(target, this.events);\n    },\n    POINTER_TYPES: [\n      '',\n      'unavailable',\n      'touch',\n      'pen',\n      'mouse'\n    ],\n    prepareEvent: function(inEvent) {\n      var e = inEvent;\n      if (HAS_BITMAP_TYPE) {\n        e = dispatcher.cloneEvent(inEvent);\n        e.pointerType = this.POINTER_TYPES[inEvent.pointerType];\n      }\n      return e;\n    },\n    cleanup: function(id) {\n      pointermap$2.delete(id);\n    },\n    MSPointerDown: function(inEvent) {\n      pointermap$2.set(inEvent.pointerId, inEvent);\n      var e = this.prepareEvent(inEvent);\n      dispatcher.down(e);\n    },\n    MSPointerMove: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.move(e);\n    },\n    MSPointerUp: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.up(e);\n      this.cleanup(inEvent.pointerId);\n    },\n    MSPointerOut: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.leaveOut(e);\n    },\n    MSPointerOver: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.enterOver(e);\n    },\n    MSPointerCancel: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.cancel(e);\n      this.cleanup(inEvent.pointerId);\n    },\n    MSLostPointerCapture: function(inEvent) {\n      var e = dispatcher.makeEvent('lostpointercapture', inEvent);\n      dispatcher.dispatchEvent(e);\n    },\n    MSGotPointerCapture: function(inEvent) {\n      var e = dispatcher.makeEvent('gotpointercapture', inEvent);\n      dispatcher.dispatchEvent(e);\n    }\n  };\n\n  function applyPolyfill() {\n\n    // only activate if this platform does not have pointer events\n    if (!window.PointerEvent) {\n      window.PointerEvent = PointerEvent;\n\n      if (window.navigator.msPointerEnabled) {\n        var tp = window.navigator.msMaxTouchPoints;\n        Object.defineProperty(window.navigator, 'maxTouchPoints', {\n          value: tp,\n          enumerable: true\n        });\n        dispatcher.registerSource('ms', msEvents);\n      } else {\n        Object.defineProperty(window.navigator, 'maxTouchPoints', {\n          value: 0,\n          enumerable: true\n        });\n        dispatcher.registerSource('mouse', mouseEvents);\n        if (window.ontouchstart !== undefined) {\n          dispatcher.registerSource('touch', touchEvents);\n        }\n      }\n\n      dispatcher.register(document);\n    }\n  }\n\n  var n = window.navigator;\n  var s;\n  var r;\n  var h;\n  function assertActive(id) {\n    if (!dispatcher.pointermap.has(id)) {\n      var error = new Error('InvalidPointerId');\n      error.name = 'InvalidPointerId';\n      throw error;\n    }\n  }\n  function assertConnected(elem) {\n    var parent = elem.parentNode;\n    while (parent && parent !== elem.ownerDocument) {\n      parent = parent.parentNode;\n    }\n    if (!parent) {\n      var error = new Error('InvalidStateError');\n      error.name = 'InvalidStateError';\n      throw error;\n    }\n  }\n  function inActiveButtonState(id) {\n    var p = dispatcher.pointermap.get(id);\n    return p.buttons !== 0;\n  }\n  if (n.msPointerEnabled) {\n    s = function(pointerId) {\n      assertActive(pointerId);\n      assertConnected(this);\n      if (inActiveButtonState(pointerId)) {\n        dispatcher.setCapture(pointerId, this, true);\n        this.msSetPointerCapture(pointerId);\n      }\n    };\n    r = function(pointerId) {\n      assertActive(pointerId);\n      dispatcher.releaseCapture(pointerId, true);\n      this.msReleasePointerCapture(pointerId);\n    };\n  } else {\n    s = function setPointerCapture(pointerId) {\n      assertActive(pointerId);\n      assertConnected(this);\n      if (inActiveButtonState(pointerId)) {\n        dispatcher.setCapture(pointerId, this);\n      }\n    };\n    r = function releasePointerCapture(pointerId) {\n      assertActive(pointerId);\n      dispatcher.releaseCapture(pointerId);\n    };\n  }\n  h = function hasPointerCapture(pointerId) {\n    return !!dispatcher.captureInfo[pointerId];\n  };\n\n  function applyPolyfill$1() {\n    if (window.Element && !Element.prototype.setPointerCapture) {\n      Object.defineProperties(Element.prototype, {\n        'setPointerCapture': {\n          value: s\n        },\n        'releasePointerCapture': {\n          value: r\n        },\n        'hasPointerCapture': {\n          value: h\n        }\n      });\n    }\n  }\n\n  applyAttributeStyles();\n  applyPolyfill();\n  applyPolyfill$1();\n\n  var pointerevents = {\n    dispatcher: dispatcher,\n    Installer: Installer,\n    PointerEvent: PointerEvent,\n    PointerMap: PointerMap,\n    targetFinding: targeting\n  };\n\n  return pointerevents;\n\n}));\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/pepjs/dist/pep.js\n// module id = 57\n// module chunks = 0","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/bamboo-home/xml-data/build-dir/JSPS-SOLO-JOB1/~/process/browser.js\n// module id = 58\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../node_modules/less-loader/dist/cjs.js!./skin.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../node_modules/less-loader/dist/cjs.js!./skin.less\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../node_modules/less-loader/dist/cjs.js!./skin.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/skin/skin.less\n// module id = 59\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/src/index.js??postcss!./drawing.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/src/index.js??postcss!./drawing.css\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/src/index.js??postcss!./drawing.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/drawing.css\n// module id = 60\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/src/index.js??postcss!./tiramisu.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/src/index.js??postcss!./tiramisu.css\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/src/index.js??postcss!./tiramisu.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/tiramisu.css\n// module id = 61\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/src/index.js??postcss!./tiramisu.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/src/index.js??postcss!./tiramisu.css\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/src/index.js??postcss!./tiramisu.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../solo-core/src/res/tiramisu.css\n// module id = 62\n// module chunks = 0","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 63\n// module chunks = 0","/* brought from https://github.com/KyleAMathews/deepmerge and unwrapped from UMD */\nfunction deepmerge(target, src) {\n    var array = Array.isArray(src);\n    var dst = array && [] || {};\n\n    if (array) {\n        target = target || [];\n        dst = dst.concat(target);\n        src.forEach(function(e, i) {\n            if (typeof dst[i] === 'undefined') {\n                dst[i] = e;\n            } else if (typeof e === 'object') {\n                dst[i] = deepmerge(target[i], e);\n            } else {\n                if (target.indexOf(e) === -1) {\n                    dst.push(e);\n                }\n            }\n        });\n    } else {\n        if (target && typeof target === 'object') {\n            Object.keys(target).forEach(function (key) {\n                dst[key] = target[key];\n            });\n        }\n        Object.keys(src).forEach(function (key) {\n            if (typeof src[key] !== 'object' || !src[key]) {\n                dst[key] = src[key];\n            }\n            else {\n                if (!target[key]) {\n                    dst[key] = src[key];\n                } else {\n                    dst[key] = deepmerge(target[key], src[key]);\n                }\n            }\n        });\n    }\n\n    return dst;\n}\n\nmodule.exports = deepmerge;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/deepmerge.js\n// module id = 64\n// module chunks = 0","var Vec3f = require('./vec3f');\r\n\r\n/**\r\n * Construct a new Rotation object.<br><br>\r\n * \r\n * #### new Rotation(x, y, z, angle)\r\n * #### new Rotation([x, y, z, angle])\r\n * \r\n * where \r\n * - _x_, _y_, and _z_ are the axis of the rotation; \r\n * - _angle_ is the angle of the rotation (in radians).<br><br>\r\n * \r\n * #### new Rotation(<{@link Vec3f}> axis, angle)\r\n * \r\n * where \r\n * - _axis_ is the axis of rotation;\r\n * - _angle_ is the angle of the rotation (in radians).<br><br>\r\n * \r\n * #### new Rotation(<{@link Vec3f}> fromVector, <{@link Vec3f}> toVector)\r\n * \r\n * where\r\n * - _fromVector_ and _toVector_ are normalized and the rotation value that would rotate from the _fromVector_ to the _toVector_ is stored in the object.\r\n * \r\n * @class The Rotation object corresponds to a VRML SFRotation field. It has four numeric properties: x, y, z (the axis of rotation) and angle.\r\n */\r\nfunction Rotation( /*oVec3f, angle | oVec3f, oVec3f | x, y, z, angle*/ ) {\r\n    if (arguments.length == 4) {\r\n        /**\r\n         * First value of the axis vector.\r\n         * @type number\r\n         * @default 0\r\n         */\r\n        this.x = arguments[0];\r\n        /**\r\n         * Second value of the axis vector.\r\n         * @type number\r\n         * @default 1\r\n         */\r\n        this.y = arguments[1];\r\n        /**\r\n         * Third value of the axis vector.\r\n         * @type number\r\n         * @default 0\r\n         */\r\n        this.z = arguments[2];\r\n        /**\r\n         * The angle of the rotation (in radians).\r\n         * @type number\r\n         * @default 0\r\n         */\r\n        this.angle = arguments[3];\r\n    } else if (arguments.length == 2) {\r\n        if (typeof (arguments[1]) == 'number') {\r\n            this.setAxis(arguments[0]);\r\n            this.angle = arguments[1];\r\n        } else {\r\n            var FLT_EPSILON = 1.192092896e-07;\r\n            var v = arguments[0].normalize();\r\n            var v1 = arguments[1].normalize();\r\n            var axis = v.cross(v1);\r\n            var len = axis.length();\r\n            if (len <= FLT_EPSILON) {\r\n                if (v.dot(v1) < 0.0) {\r\n                    axis = v.cross(new Vec3f(1, 0, 0));\r\n                    this.angle = Math.PI;\r\n                    len = axis.length();\r\n                    if (len <= FLT_EPSILON)\r\n                        axis = v.cross(new Vec3f(0, 1, 0));\r\n                    axis = axis.normalize();\r\n\r\n                } else {\r\n                    axis = new Vec3f(0, 1, 0);\r\n                    this.angle = 0.0;\r\n                }\r\n            } else {\r\n                this.angle = Math.atan2(len, v.dot(v1));\r\n                axis = axis.normalize();\r\n            }\r\n            this.setAxis(axis);\r\n        }\r\n    } else if (arguments.length == 1 && typeof arguments[0] == \"object\" && arguments[0] !== null && arguments[0].length === 4) {\r\n        this.x = arguments[0][0];\r\n        this.y = arguments[0][1];\r\n        this.z = arguments[0][2];\r\n        this.angle = arguments[0][3];\r\n    } else {\r\n        this.x = 0;\r\n        this.y = 1;\r\n        this.z = 0;\r\n        this.angle = 0;\r\n    }\r\n}\r\n\r\n/**\r\n * Returns array represents rotations fields [x, y, z, angle].\r\n * @returns {number[]} Array of four floats.\r\n */\r\nRotation.prototype.toArray =\r\n    function () {\r\n        return [this.x, this.y, this.z, this.angle];\r\n    };\r\n\r\n/**\r\n * Returns the value of oVec3f multiplied by the matrix corresponding to this object's rotation.\r\n * @param {Vec3f} oVec3f The Vec3f object.\r\n * @returns {Vec3f}\r\n */\r\nRotation.prototype.multVec =\r\n    function (oVec3f) {\r\n        var e = -this.angle;\r\n        var s = Math.sin(e);\r\n        var c = Math.cos(e);\r\n\r\n        var f = this.x;\r\n        var g = this.y;\r\n        var h = this.z;\r\n\r\n        var x = oVec3f.x;\r\n        var y = oVec3f.y;\r\n        var z = oVec3f.z;\r\n\r\n        var p = (f * x + g * y + h * z) * (1 - c);\r\n\r\n        var px = f * p + c * x + s * (h * y - g * z);\r\n        var py = g * p + c * y + s * (f * z - h * x);\r\n        var pz = h * p + c * z + s * (g * x - f * y);\r\n        return new Vec3f(px, py, pz);\r\n    };\r\n\r\n/**\r\n * Returns the inverse of this object's rotation.\r\n * @returns {Rotation}\r\n */\r\nRotation.prototype.inverse =\r\n    function () {\r\n        return new Rotation(this.x, this.y, this.z, -this.angle);\r\n    };\r\n\r\n/**\r\n * Returns the object multiplied by the passed value.\r\n * @param {Rotation} oRotation The Rotation object.\r\n * @returns {Rotation}\r\n */\r\nRotation.prototype.multiply =\r\n    function (oRotation) {\r\n        var angle = oRotation.angle;\r\n        var Sa = Math.sin(angle / 2);\r\n        var Ca = Math.cos(angle / 2);\r\n        var As = oRotation.getAxis().multiply(Sa);\r\n\r\n        var Sb = Math.sin(this.angle / 2);\r\n        var Cb = Math.cos(this.angle / 2);\r\n        var Bs = this.getAxis().multiply(Sb);\r\n\r\n        var Cab = Ca * Cb - As.dot(Bs);\r\n\r\n        var ABs = As.multiply(Cb).add(Bs.multiply(Ca)).add(Bs.cross(As));\r\n\r\n        var msq = ABs.x * ABs.x + ABs.y * ABs.y + ABs.z * ABs.z;\r\n\r\n        var result = new Rotation(0, 0, 1, 0);\r\n        if (msq !== 0) {\r\n            var Sab = Math.sqrt(msq);\r\n            result.setAxis(ABs.divide(Sab));\r\n            result.angle = 2 * Math.atan2(Sab, Cab);\r\n        }\r\n        return result;\r\n    };\r\n\r\n/**\r\n * Sets the axis of rotation to the value passed in oVec3f.\r\n * @param {Vec3f} oVec3f The Vec3f object.\r\n */\r\nRotation.prototype.setAxis =\r\n    function (oVec3f) {\r\n        this.x = oVec3f.x;\r\n        this.y = oVec3f.y;\r\n        this.z = oVec3f.z;\r\n    };\r\n\r\n/**\r\n * Returns the axis of rotation.\r\n * @returns {Vec3f}\r\n */\r\nRotation.prototype.getAxis =\r\n    function () {\r\n        return new Vec3f(this.x, this.y, this.z);\r\n    };\r\n\r\n/**\r\n * Returns a string containing the value of x, y, z, and angle separated by spaces.\r\n * @returns {string}\r\n */\r\nRotation.prototype.toString =\r\n    function () {\r\n        return this.toArray().join(' ');\r\n    };\r\n\r\nmodule.exports = Rotation;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/rotation.js\n// module id = 65\n// module chunks = 0","/**\n * XMLNodeData class\n *\n * @author timduck@cortona3d.com\n */\n\n/**\n * Creates a new data element for the XML element.\n * \n * @class\n * @classdesc A helper class for representing XML data, for example:\n * ```xml\n * <node att1=\"value1\" att2=\"value2\">\n *      <foo>Foo</foo>\n *      <bar>\n *          <![CDATA[Bar]]>\n *      </bar>\n *      <items>\n *          <item>i1</item>\n *          <item>i2</item>\n *          <item>i3</item>\n *          <item>i4</item>\n *      </items>\n * </node>\n * ```\n * ```\n * {\n *  node: {\n *      \"@name\": \"node\",\n *      \"@attributes\": {\n *          att1: \"value1\",\n *          att2: \"value2\"\n *      },\n *      \"@children\": [\n *          { \"@name\": \"foo\", \"#text\": \"Foo\" },\n *          { \"@name\": \"bar\", \"#text\": \"Bar\" },\n *          { \"@name\": \"items\", ... }\n *      ],\n *      foo: { \"@name\": \"foo\", \"#text\": \"Foo\" },\n *      bar: { \"@name\": \"bar\", \"#text\": \"Bar\" },\n *      items: {\n *          \"@name\": \"items\",\n *          \"@children\": [ ... ],\n *          item: [\n *              { \"@name\": \"item\", \"#text\": \"i1\" },\n *              { \"@name\": \"item\", \"#text\": \"i2\" },\n *              { \"@name\": \"item\", \"#text\": \"i3\" },\n *              { \"@name\": \"item\", \"#text\": \"i4\" }\n *          ]\n *      }\n *  }\n * }\n * ```\n * @prop {string} #text The text content of a node.\n * @prop {KeyValuePairs} @attributes Node attributes.\n * @prop {XMLNodeData|string[]} @children Node children, including not empty strings.\n */\nfunction XMLNodeData() {}\n\n/**\n * Returns the array of {@link XMLNodeData} objects depending on the argument:\n * \n * - If type of the argument is the {@link XMLNodeData} object, the method returns an array of one element to the object;\n * - If type of the argument is _array_, the method returns the array itself;\n * - If type of the argument is _string_, the argument value is interpreted as simple XPath expresion to select XML elements, If the elements are not found, an empty array is returned;\n * - If argument is omitted, the method returns the array element containing the object itself.\n * \n * Examples of supported XPath expressions: \n * - \"root/some/path/child\" - exact name;\n * - \"root//child\" - recursive descent; searches for the specified element at any depth;\n * - \"root/some/path/*\" - wildcard; selects all elements regardless of the element name.\n * \n * @param {XMLNodeData|string} [obj]\n * @returns {XMLNodeData[]} The array of the {@link XMLNodeData} objects\n */\nXMLNodeData.prototype.$ = function (obj, recurse) {\n    var current = obj || this;\n    if (typeof obj === 'string' && obj) {\n        if (obj === '*') {\n            current = (this['@children'] || []).filter(function (node) {\n                return typeof node !== 'string';\n            });\n            if (recurse) {\n                current = current.reduce(function (a, node) {\n                    return a.concat(node, node.$(obj, recurse));\n                }, []);\n            }\n        } else {\n            // nodes path: \"root/children/child\" --> child = [...]\n            // \"root//child\"\n            // \"root/*/child\" \n\n            var index = obj.indexOf('/'),\n                head = obj.substring(0, index),\n                tail = obj.substring(index + 1),\n                next = tail.indexOf('/');\n\n            // 'head//some/path'\n            if (index >= 0 && next === 0) {\n                tail = tail.substring(1);\n                current = this.$(head, recurse).reduce(function (a, node) {\n                    return a.concat(node.$(tail, true));\n                }, []);\n            } else {\n                if (recurse) {\n                    current = this.$('*').reduce(function (a, node) {\n                        return a.concat(node.$(obj, true));\n                    }, this.$(obj));\n                } else {\n                    current = (index < 0) ? this[obj] : this.$(head).reduce(function (a, node) {\n                        return a.concat(node.$(tail));\n                    }, []);\n                }\n            }\n        }\n    }\n    return !current ? [] : !current.map ? [current] : current;\n};\n\n/**\n * Returns the text content of the element itself or defined by an XPath expression.\n * \n * @param {string} [path] Simple XPath expresion, i.e. \"SimulationInteractivity/SimulationInformation/ExporterVersionNumber\"\n * @returns {string}\n */\nXMLNodeData.prototype.$text = function (path) {\n    if (!path) {\n        return this['#text'] || (this['@children'] || []).reduce(function (s, child) {\n            if (typeof child === 'string') return s + child;\n            return s + child.$text();\n        }, '');\n    }\n    return this.$(path).reduce(function (s, node) {\n        return s + node.$text();\n    }, '');\n};\n\n/**\n * Returns the value of a specified attribute on the element.\n * \n * @param {string} name The name of an attribute\n * @returns {string} Tha value of an attribute\n */\nXMLNodeData.prototype.$attr = function (name) {\n    if (!this['@attributes']) return null;\n    return this['@attributes'][name];\n};\n\nmodule.exports = XMLNodeData;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/XMLNodeData.js\n// module id = 66\n// module chunks = 0","var Cortona3DSolo = require('solo');\r\nvar app = require('app').app;\r\nvar util = require('lib/util');\r\n\r\nvar m_hoverRow = -1;\r\n\r\nvar DOUBLE_TAP_TIME = 250;\r\n\r\nvar ipcExports = {\r\n    /**\r\n     * The namespace represents an application interface to manage DPL table in the interactive parts catalog.\r\n     * \r\n     * @namespace\r\n     * @memberof module:solo.app.ipc\r\n     */\r\n    dpl: {\r\n\r\n        /**\r\n         * Setup the DPL table for the current IPC sheet.\r\n         * \r\n         * @param {HTMLTableElement} dplTableElement An HTML table representing the current IPC sheet\r\n         * @see external:HTMLTableElement\r\n         * @fires \"app.ipc.dpl.didSetupRow\"\r\n         * @fires \"app.ipc.dpl.willSetupTable\"\r\n         * @fires \"app.ipc.dpl.didSetupTable\"\r\n         */\r\n        setupTable: function (dplTableElement) {\r\n            Cortona3DSolo.dispatch('app.ipc.dpl.willSetupTable', dplTableElement);\r\n            if (dplTableElement) {\r\n                m_hoverRow = -1;\r\n\r\n                // TO-DO: touch devices\r\n                // TO-DO: keyboard accelerators\r\n\r\n                var timeoutOut,\r\n                    indexOut;\r\n\r\n                Array.prototype.slice.call(dplTableElement.rows).forEach(function (row) {\r\n                    if (row.id) {\r\n                        var index = +row.id.substring(3);\r\n                        row.setAttribute('data-index', index);\r\n                        row.onmouseover = function (e) {\r\n                            clearTimeout(timeoutOut);\r\n                            var index = +this.getAttribute('data-index');\r\n                            if (indexOut !== index) {\r\n                                indexOut = null;\r\n                                Cortona3DSolo.dispatch(\"app.ipc.dpl.didHoverRow\", index);\r\n                            }\r\n                        };\r\n                        row.onmouseout = function (e) {\r\n                            indexOut = +this.getAttribute('data-index');\r\n                            clearTimeout(timeoutOut);\r\n                            timeoutOut = setTimeout(function () {\r\n                                Cortona3DSolo.dispatch(\"app.ipc.dpl.didHoverRow\", -1);\r\n                                indexOut = null;\r\n                            }, 10);\r\n                        };\r\n                        row.onclick = function (e) {\r\n                            var index = +this.getAttribute('data-index');\r\n                            var keys = +(e.shiftKey && 1) | +(e.ctrlKey && 2) | +(e.altKey && 4);\r\n                            var self = this;\r\n                            if (!this.__debounceTimeout) {\r\n                                this.__debounceTimeout = setTimeout(function () {\r\n                                        delete self.__debounceTimeout;\r\n                                        Cortona3DSolo.dispatch(\"app.ipc.dpl.didSelectRow\", index, keys);\r\n                                    },\r\n                                    DOUBLE_TAP_TIME);\r\n                            } else {\r\n                                clearTimeout(this.__debounceTimeout);\r\n                                delete this.__debounceTimeout;\r\n                            }\r\n                        };\r\n                        row.oncontextmenu = function (e) {\r\n                            var index = +this.getAttribute('data-index');\r\n                            var target = dplTableElement,\r\n                                rect = target.getBoundingClientRect(),\r\n                                offsetX = e.clientX - rect.left,\r\n                                offsetY = e.clientY - rect.top;\r\n                            Cortona3DSolo.dispatch(\"app.ipc.dpl.didCallContextMenu\", index, offsetX, offsetY, target);\r\n                            if (e.preventDefault) e.preventDefault();\r\n                            if (e.stopPropagation) e.stopPropagation();\r\n                        };\r\n                        Cortona3DSolo.dispatch(\"app.ipc.dpl.didSetupRow\", row, index);\r\n                    }\r\n                });\r\n            }\r\n            Cortona3DSolo.dispatch('app.ipc.dpl.didSetupTable', dplTableElement);\r\n        },\r\n        /**\r\n         * Highlight the line in the DPL table.\r\n         * \r\n         * @param {number} index The row number on the current IPC sheet\r\n         */\r\n        hoverRow: function (index) {\r\n            var el;\r\n            if (m_hoverRow >= 0) {\r\n                el = document.getElementById('row' + m_hoverRow);\r\n                if (el) el.classList.remove('hover');\r\n            }\r\n            if (index >= 0) {\r\n                el = document.getElementById('row' + index);\r\n                if (el) el.classList.add('hover');\r\n            }\r\n            m_hoverRow = index;\r\n        },\r\n        /**\r\n         * Highlight the line in the DPL table.\r\n         * \r\n         * @param {number} index The row number on the current IPC sheet\r\n         * @param {boolean} [flag=true] -\r\n         * - true - highlight the DPL table row\r\n         * - false - clear selection\r\n         */\r\n        highlightRow: function (index, flag) {\r\n            flag = (typeof flag == 'undefined') ? true : flag;\r\n            util.toggleClass(document.getElementById('row' + index), 'hover', flag);\r\n        },\r\n        /**\r\n         * Select the line in the DPL table.\r\n         * \r\n         * @param {number} index The row number on the current IPC sheet\r\n         * @param {boolean} [flag=true] -\r\n         * - true - select the DPL table row\r\n         * - false - clear selection\r\n         */\r\n        selectRow: function (index, flag) {\r\n            flag = (typeof flag == 'undefined') ? true : flag;\r\n            util.toggleClass(document.getElementById('row' + index), 'selected', flag);\r\n        },\r\n        /**\r\n         * Toggles the line in the DPL table.\r\n         * \r\n         * @param {number} index The row number on the current IPC sheet\r\n         * @param {boolean} [flag] -\r\n         * - true - make the DPL table row visible\r\n         * - false - make the DPL table row hidden\r\n         * @since 1.4.3\r\n         */\r\n        toggleRow: function (index, flag) {\r\n            var el = document.getElementById('row' + index);\r\n            if (el) {\r\n                flag = (typeof flag == 'undefined') ? el.classList.contains('hidden') : flag;\r\n                util.toggleClass(el, 'hidden', !flag);\r\n            }\r\n        },\r\n    }\r\n};\r\n\r\nmodule.exports = ipcExports.dpl;\r\n\r\n/**\r\n * The hook method is invoked before the DPL table is initialized.\r\n * \r\n * @memberof module:solo.app.ipc.dpl\r\n * @abstract \r\n * @function willSetupTable\r\n * @param {HTMLTableElement} tableElement The table element\r\n * @see external:HTMLTableElement\r\n * @see The corresponding event {@link event:\"app.ipc.dpl.willSetupTable\" \"app.ipc.dpl.willSetupTable\"}\r\n * @since 1.5.0\r\n */\r\n/**\r\n * @event \"app.ipc.dpl.willSetupTable\"\r\n * @see The corresponding hook method {@link module:solo.app.ipc.dpl.willSetupTable app.ipc.dpl.willSetupTable()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked after the DPL table is initialized.\r\n * \r\n * @memberof module:solo.app.ipc.dpl\r\n * @abstract \r\n * @function didSetupTable\r\n * @param {HTMLTableElement} tableElement The table element\r\n * @see external:HTMLTableElement\r\n * @see The corresponding event {@link event:\"app.ipc.dpl.didSetupTable\" \"app.ipc.dpl.didSetupTable\"}\r\n * @since 1.5.0\r\n */\r\n/**\r\n * @event \"app.ipc.dpl.didSetupTable\"\r\n * @see The corresponding hook method {@link module:solo.app.ipc.dpl.didSetupTable app.ipc.dpl.didSetupTable()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked when the line of the DPL table is initialized.\r\n * \r\n * @memberof module:solo.app.ipc.dpl\r\n * @abstract \r\n * @function didSetupRow\r\n * @param {HTMLTableRowElement} rowElement The row element\r\n * @param {number} index The row number in the DPL table\r\n * @see external:HTMLTableRowElement\r\n * @see The corresponding event {@link event:\"app.ipc.dpl.didSetupRow\" \"app.ipc.dpl.didSetupRow\"}\r\n */\r\n/**\r\n * @event \"app.ipc.dpl.didSetupRow\"\r\n * @see The corresponding hook method {@link module:solo.app.ipc.dpl.didSetupRow app.ipc.dpl.didSetupRow()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked when the line of the DPL table is selected.\r\n * \r\n * @memberof module:solo.app.ipc.dpl\r\n * @abstract \r\n * @function didSelectRow\r\n * @param {number} index The row number on the current IPC sheet\r\n * @param {number} keys Flags bitmask that corresponds to the state of the SHIFT, CTRL, and ALT keys:\r\n * - 0x01 - SHIFT key\r\n * - 0x02 - CTRL key\r\n * - 0x04 - ALT key\r\n * @see The corresponding event {@link event:\"app.ipc.dpl.didSelectRow\" \"app.ipc.dpl.didSelectRow\"}\r\n */\r\n/**\r\n * @event \"app.ipc.dpl.didSelectRow\"\r\n * @see The corresponding hook method {@link module:solo.app.ipc.dpl.didSelectRow app.ipc.dpl.didSelectRow()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked when the line of the DPL table is hovered.\r\n * \r\n * @memberof module:solo.app.ipc.dpl\r\n * @abstract \r\n * @function didHoverRow\r\n * @param {number} index The row number on the current IPC sheet\r\n * @see The corresponding event {@link event:\"app.ipc.dpl.didHoverRow\" \"app.ipc.dpl.didHoverRow\"}\r\n */\r\n/**\r\n * @event \"app.ipc.dpl.didHoverRow\"\r\n * @see The corresponding hook method {@link module:solo.app.ipc.dpl.didHoverRow app.ipc.dpl.didHoverRow()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked when the context menu is called in the DPL table. \r\n * The mouse uses secondary button click. The touch device uses long tap.\r\n * \r\n * @memberof module:solo.app.ipc.dpl\r\n * @abstract \r\n * @function didCallContextMenu\r\n * @param {number} index The row number on the current IPC sheet\r\n * @param {number} offsetX The X coordinate relative to the target element\r\n * @param {number} offsetY The Y coordinate relative to the target element \r\n * @param {HTMLElement} target Target element (`<table>`)\r\n * @see The corresponding event {@link event:\"app.ipc.dpl.didCallContextMenu\" \"app.ipc.dpl.didCallContextMenu\"}\r\n */\r\n/**\r\n * @event \"app.ipc.dpl.didCallContextMenu\"\r\n * @see The corresponding hook method {@link module:solo.app.ipc.dpl.didCallContextMenu app.ipc.dpl.didCallContextMenu()}\r\n */\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app.ipc.dpl.js\n// module id = 67\n// module chunks = 0","var app = require('app').app;\nvar expand = require('lib/util').expand;\n\nmodule.exports = function (interactivity, baseURL) {\n    var json = interactivity.json;\n\n    var getMetadata = require('interactivity.metadata.js');\n\n    var m_ipcInteractivityMap = {\n        dpl: [],\n        def: [],\n        prefferedViews: [],\n        sheets: {},\n        options: {},\n        metadata: {},\n        info: []\n    };\n\n    /*\n        dplid: ['itemid', ...],\n\n        catalog: {\n            options: {\n                'name': 'value',\n                ...\n            },\n            metadata: {\n                'decl-id': 'value',\n                ...\n            },\n            dpl: ['csn', ...],\n            def: [['DEF_name', ...], ...],\n            prefferedViews: ['viewId', ...],\n            children: [[row, ....], ...] // children for row\n            parent: [row, ...] // parent for row\n            \n            sheets: { \n                'viewId': { // sheet/view\n                    id: 'viewId',\n                    description: '',\n                    drawing: 'url',\n                    items: [row, ...]\n                }, \n                ...\n            }\n        },\n    */\n\n    var dplid = json.$('ipc/figure/dplist/item').map(function (item) {\n        return item.$attr('id');\n    });\n\n    var sheetsMap = {};\n    var doc = app.modelInfo || {\n        sheets: json.$('ipc/figure/views/view')\n            .filter(function (view) {\n                return +view.$attr('hidden') === 0;\n            })\n            .map(function (view) {\n                return {\n                    id: view.$attr('id')\n                };\n            })\n    };\n\n    doc.sheets.forEach(function (sheet) {\n        var view = json.$('ipc/figure/views/view').filter(function (view) {\n            return view.$attr('id') === sheet.id;\n        })[0];\n\n        var sh = expand(sheet, {\n            changed: !!+view.$attr('changed'),\n            items: view.$('refItem').map(function (refItem) {\n                return dplid.indexOf(refItem.$attr('ref'));\n            }).sort(function (a, b) {\n                return a - b;\n            })\n        });\n\n        var refmedias = view.$('refmedia').filter(function (refmedia) {\n            return refmedia.$attr('ref') != 1;\n        });\n\n        if (refmedias.length > 0) {\n            var mediaId = refmedias[0].$attr('ref');\n            var src = json.$('ipc/figure/media').filter(function (media) {\n                return media.$attr('id') == mediaId;\n            })[0].$attr('src');\n            sh.drawing = baseURL + src;\n        }\n\n        sheetsMap[sheet.id] = sh;\n    });\n\n    var options = require('interactivity.options.js')(json);\n    var metadata = getMetadata(json.$('ipc/figure/metadata/value'));\n\n    var parent = json.$('ipc/figure/dplist/item').map(function (item, row, items) {\n        var indent = getIndent(item) - 1;\n        var parent = -1;\n        for (var i = row - 1; i >= 0; i--) {\n            var asp = +getMeta(items[i], 'ASP') || 0;\n            var attach = +getMeta(items[i], '_301F121F8EF84EC0B9979C8D10D19A79') || 0;\n            if (asp !== 1 && attach === 0) { // not attaching part\n                if (getIndent(items[i]) === indent) break;\n            }\n        }\n        for (; i >= 0; i--) {\n            if (getIndent(items[i]) === indent) {\n                if (!+getMeta(items[i], 'NIL')) {\n                    parent = i;\n                    break;\n                }\n            }\n        }\n        return parent;\n    });\n\n    var itemInfo = json.$('ipc/figure/dplist/item').map(function (item, row) {\n        var info = {\n            row: row\n        };\n        var itemMetaValues = item.$('metadata/value');\n        info.id = item.$attr('id');\n        info.metadata = getMetadata(itemMetaValues);\n        info.part = {};\n        info.part.id = item.$attr('refPart');\n        var part = json.$('ipc/parts/part').reduce(function (acc, part) {\n            return part.$attr('id') == info.part.id ? part : acc;\n        });\n        var partMetaValues = part.$('metadata/value');\n        info.part.metadata = getMetadata(partMetaValues);\n\n        info.roles = new Array(8);\n\n        itemMetaValues.concat(partMetaValues).forEach(function (value) {\n            var role = +value.$attr('role');\n            if (role) {\n                info.roles[role] = value.$text();\n            }\n        });\n\n        info.sheetId = item.refview ? item.refview.$attr('ref') : '';\n        info.screentip = item.tooltip ? item.$text('tooltip') : '';\n        info.callout = item.callout ? item.$text('callout') : '';\n\n        info.objectNames = item.$('refmedia').filter(function (refmedia) {\n            return refmedia.$attr('ref') == 1;\n        }).map(function (refmedia) {\n            return refmedia.$text();\n        });\n\n        info.commands = item.$('commands/command').map(function (command) {\n            var values = {};\n            command.$('value').forEach(function (value) {\n                values[value.$attr('name')] = value.$text();\n            });\n            return {\n                id: command.$attr('id'),\n                type: command.$attr('type'),\n                args: command.$('value').map(function (value) {\n                    return value.$text();\n                }),\n                values: values\n            };\n        });\n\n        return info;\n    });\n\n    function normalizeCSN(s) {\n        return String(s).replace(/(^\\s+|\\s+$)/g, '').replace(/^0+(\\d)/, '$1');\n    }\n\n    function initializeDPLItemMap(interactivity) {\n        if (!m_ipcInteractivityMap.dpl) {\n            m_ipcInteractivityMap.dpl = json.$('ipc/figure/dplist/item').map(function (item, row) {\n                var csn;\n                if (typeof interactivity.willGetCSNString == 'function') {\n                    csn = interactivity.willGetCSNString(itemInfo[row], row);\n                } else if (itemInfo[row].callout) {\n                    csn = itemInfo[row].callout;\n                } else {\n                    csn = itemInfo[row].roles[3] || ''; // Item number\n                    csn += itemInfo[row].roles[4] || ''; // Item number variant\n                }\n                return csn;\n            });\n        }\n    }\n\n    m_ipcInteractivityMap = {\n        info: itemInfo,\n        def: json.$('ipc/figure/dplist/item').map(function (item, row) {\n            return itemInfo[row].objectNames;\n        }),\n        prefferedViews: json.$('ipc/figure/dplist/item').map(function (item, row) {\n            return itemInfo[row].sheetId;\n        }),\n        sheets: sheetsMap,\n        options: options,\n        metadata: metadata,\n        parent: parent,\n        children: parent.map(function (row, index, array) {\n            return array.reduce(function (acc, value, i, array) {\n                return (value === index) ? acc.concat(i) : acc;\n            }, []);\n        })\n    };\n\n    // getMeta\n    function getMeta(item, declId) {\n        var metadataValues = item.$('metadata/value');\n        return metadataValues.filter(function (value) {\n            return value.$attr('decl-id') == declId;\n        }).reduce(function (acc, value) {\n            return acc + value.$text();\n        }, '');\n    }\n\n    // getIndent\n    function getIndent(item) {\n        var indent = item.$('metadata/value').filter(function (value) {\n            return value.$attr('role') == 5; // Indent\n        });\n        if (indent.length > 0) {\n            indent = +indent[0].$text() || 0;\n        }\n        return indent;\n    }\n\n    var appExports = {\n        ipc: {\n            /**\n             * The namespace represents an interface to access the information from the companion file for interactive parts catalog (IPC).\n             * \n             * @namespace\n             * @memberof module:solo.app.ipc\n             */\n            interactivity: {\n                /**\n                 * JavaScript representation of the companion file *.interactivity.xml*\n                 * \n                 * @name json\n                 * @memberof module:solo.app.ipc.interactivity\n                 * @property {XMLNodeData} json JavaScript representation of the XML file\n                 * *XML:*\n                 * ```\n                 * <node att1=\"att1-value\" att2=\"att2-value\">\n                 *      <foo>Foo</foo>\n                 *      <bar>\n                 *          <![CDATA[  Bar]]>\n                 *      </bar>\n                 *      <items>\n                 *          <item>i1</item>\n                 *          <item>i2</item>\n                 *          <item>i3</item>\n                 *          <item>i4</item>\n                 *      </items>\n                 * </node>\n                 * ```\n                 * *JSON:*\n                 * ```\n                 * {\n                 *  \"node\": {\n                 *      \"@attributes\": {\n                 *          \"att1\": \"att1-value\",\n                 *          \"att2\": \"att2-value\"\n                 *      },\n                 *      \"foo\": { \"#text\": \"Foo\" },\n                 *      \"bar\": { \"#text\": \"  Bar\" },\n                 *      \"items\": {\n                 *          \"item\": [\n                 *              { \"#text\": \"i1\" },\n                 *              { \"#text\": \"i2\" },\n                 *              { \"#text\": \"i3\" },\n                 *              { \"#text\": \"i4\" }\n                 *          ]\n                 *      }\n                 *  }\n                 * }\n                 * ```\n                 */\n                //json: json,\n\n                /**\n                 * Gets the DPL line number by the row number on the current IPC sheet.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {number} index The row number on the current IPC sheet\n                 * @returns {number} DPL line number\n                 */\n                getRowByIndex: function (index) {\n                    var currentSheetId = app.ipc.getCurrentSheet().id;\n                    return m_ipcInteractivityMap.sheets[currentSheetId].items[index]; //-> number\n                },\n\n                /**\n                 * Gets the row number on the current IPC sheet by the DPL line number.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {number} row DPL line number\n                 * @returns {number} The row number on the current IPC sheet\n                 */\n                getIndexByRow: function (row) {\n                    var currentSheetId = app.ipc.getCurrentSheet().id;\n                    return m_ipcInteractivityMap.sheets[currentSheetId].items.indexOf(row); //-> number\n                },\n\n                /**\n                 * Gets the DPL line number by the catalog sequence item number (CSN).\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {string} item CSN\n                 * @returns {number} DPL line number\n                 */\n                getRowByItem: function (item) {\n                    initializeDPLItemMap(this);\n                    var csn = normalizeCSN(item),\n                        i;\n                    for (i = m_ipcInteractivityMap.dpl.length - 1; i >= 0; i--) {\n                        if (normalizeCSN(m_ipcInteractivityMap.dpl[i]) === csn) {\n                            break;\n                        }\n                    }\n                    return i; //-> number\n                },\n\n                /**\n                 * Gets CSN by the DPL line number.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {number} row DPL line number\n                 * @returns {string} CSN\n                 */\n                getItemByRow: function (row) {\n                    initializeDPLItemMap(this);\n                    return m_ipcInteractivityMap.dpl[row]; //-> string\n                },\n\n                /**\n                 *  Gets the row number on the current IPC sheet by CSN.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {string} item CSN\n                 * @returns {number} The row number on the current IPC sheet\n                 */\n                getIndexByItem: function (item) {\n                    return this.getIndexByRow(this.getRowByItem(item)); //-> number\n                },\n\n                /**\n                 * Gets CSN by the row number on the current IPC sheet\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {number} index The row number on the current IPC sheet\n                 * @returns {string} CSN\n                 */\n                getItemByIndex: function (index) {\n                    return this.getItemByRow(this.getRowByIndex(index)); //-> string\n                },\n\n                /**\n                 * Gets DPL line number for the 3D object name.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {any} name The name of 3D object\n                 * @returns {number} DPL line number\n                 */\n                getRowByObjectName: function (name) {\n                    var i,\n                        a = m_ipcInteractivityMap.def;\n                    for (i = a.length - 1; i >= 0 ; i--) {\n                        if (a[i].indexOf(name) >= 0) {\n                            break;\n                        }\n                    }\n                    return i; //-> number\n                },\n\n                /**\n                 * Gets the names of 3D objects for the DPL line number.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {any} row DPL line number\n                 * @returns {string[]} An array of 3D object names\n                 */\n                getObjectsNamesByRow: function (row) {\n                    return m_ipcInteractivityMap.def[row]; //-> [name, ...]\n                },\n\n                /**\n                 * Returns the URL to the 2D illustration of the IPC sheet.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {string} [id] IPC sheet identifier\n                 * @returns {string} URL to the 2D illustration\n                 */\n                getDrawingForIPCView: function (id) {\n                    id = id || app.ipc.currentSheetInfo.id;\n                    var sheetInfo = m_ipcInteractivityMap.sheets[id];\n                    return (sheetInfo && sheetInfo.drawing) || '';\n                },\n\n                /**\n                 * Returns the IPC sheet information.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {string} [id] IPC sheet identifier\n                 * @returns {CatalogSheetInfo} The object represents IPC sheet information.\n                 */\n                getSheetInfo: function (id) {\n                    id = id || app.ipc.currentSheetInfo.id;\n                    return m_ipcInteractivityMap.sheets[id];\n                },\n\n                /**\n                 * Returns publication options from the companion file in form of key-value array.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @returns {KeyValuePairs} \n                 */\n                getOptions: function () {\n                    return m_ipcInteractivityMap.options;\n                },\n\n                /**\n                 * Returns project metadata from the companion file in form of key-value array.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @returns {KeyValuePairs} \n                 */\n                getProjectMetadata: function () {\n                    return m_ipcInteractivityMap.metadata;\n                },\n\n                /**\n                 * Gets screen tip for the object by the row number on the current IPC sheet.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {number} index The row number on the current IPC sheet\n                 * @returns {string} Screen tip for the object\n                 */\n                getScreenTip: function (index) {\n                    var row = this.getRowByIndex(index);\n                    return this.getItemInfo(row).screentip;\n                },\n\n                /**\n                 * Gets preffered sheet for the object by the row number on the current IPC sheet.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {number} index The row number on the current IPC sheet\n                 * @returns {string} Preffered IPC sheet identifier\n                 */\n                getPrefferedSheetId: function (index) {\n                    var row = this.getRowByIndex(index);\n                    return this.getItemInfo(row).sheetId;\n                },\n\n                /**\n                 * Returns the IPC item information.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {number} row DPL line number\n                 * @returns {CatalogItemInfo} The object represents IPC item information\n                 * @since 1.4.0\n                 */\n                getItemInfo: function (row) {\n                    return m_ipcInteractivityMap.info[row];\n                },\n\n                /**\n                 * Gets the parent for the DPL line number.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {number} row DPL line number\n                 * @returns {number} DPL line number or -1\n                 * @since 1.4.0\n                 */\n                getParent: function (row) {\n                    return m_ipcInteractivityMap.parent[row];\n                },\n\n                /**\n                 * Gets children for the DPL line number.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {number} row DPL line number\n                 * @param {boolean} [deep] Recursive\n                 * @returns {number[]} Array of the DPL line number \n                 * @since 1.4.0\n                 */\n                getChildren: function (row, deep) {\n                    var res = [];\n                    var ch = m_ipcInteractivityMap.children[row];\n                    var self = this;\n                    if (deep) {\n                        ch.forEach(function (child) {\n                            res.push(child);\n                            res = res.concat(self.getChildren(child, deep));\n                        });\n                    } else {\n                        res = ch;\n                    }\n                    return res;\n                }\n            }\n        }\n    };\n\n    return appExports.ipc;\n};\n\n\n/**\n * The hook method is invoked to get the CSN string for DPL row presented by argument.\n * Must return the CSN string for DPL row.\n * Default returns the concatenation of metadata values \"Item number\" and \"Item number variant\".\n * \n * @memberof module:solo.app.ipc.interactivity\n * @abstract \n * @method willGetCSNString\n * @param {CatalogItemInfo} itemInfo The object represents IPC item information\n * @param {number} row DPL line number\n * @returns {string} Returns the CSN string\n */\n\n/**\n * The object represents the catalog item information, for example:\n * ```\n * {\n *      id: \"2dc27be52b0\",\n *      row: 1,\n *      metadata: {\n *          IND: \"2\",\n *          ITEM: \"10\",\n *          QNA: \"1\",\n *          _470D3AF1C4C540EA8EF895E86D7C147D: \"2\",\n *          _B479653540A9423B8170B31E38783811: \"\"\n *      },\n *      objectNames: [ \"PM005301_1\" ],\n *      part: { ... },\n *      roles: [ , \"PM005301\", \"Back Plate Assy\", \"10\", , \"2\", \"1\", ],\n *      screentip: \"Item:10\",\n *      callout: \"10\",\n *      sheetId: \"view_2\",\n *      commands: [ ... ]\n * }\n * ```\n * @prop {string} id The unique identifier of the object in the companion xml file.\n * @prop {number} row The number of DPL row.\n * @prop {KeyValuePairs} metadata Metadata of the catalog item.\n * @prop {string[]} objectNames An array of 3D object names associated with the catalog item.\n * @prop {CatalogPartInfo} part The object represents the part information.\n * @prop {string[]} roles The array of the metadata values by {@link MetadataRoleCode role number}:\n * - `0` - Undefined\n * - `1` - Part number\n * - `2` - Description for part\n * - `3` - Item number\n * - `4` - Item number variant\n * - `5` - Indent\n * - `6` - Item quantity per next higher assembly\n * - `7` - Item total quantity\n * @prop {string} screentip A string contains a brief note or label pertaining to the catalog item.\n * @prop {string} callout A string contains the CSN string for the catalog item. This is also the name of a 2D hotspot.\n * @prop {string} sheetId The identifier of the preferred catalog sheet for the catalog item.\n * @prop {DPLCommandInfo[]} commands\n * @typedef {object} CatalogItemInfo\n * @see {@link module:solo.app.ipc.interactivity.getItemInfo app.ipc.interactivity.getItemInfo()}\n */\n\n/**\n * The object represents the command information, for example:\n * ```\n * {\n *      id: \"233f0c80570\",\n *      type: \"MODAPPLY\",\n *      args: [ \"A B\" ],\n *      values: { \n *          \"MODEL APPLY CODES\": \"A B\"\n *      }\n * }\n * ```\n * @prop {string} id The unique identifier of the object in the companion xml file.\n * @prop {string} type The name of the command.\n * @prop {string[]} args Array of arguments of the command.\n * @prop {KeyValuePairs} Arguments of the command by name.\n * @typedef {object} DPLCommandInfo\n * @see CatalogItemInfo\n */\n\n\n/**\n * The object represents the part information, for example:\n * ```\n * {\n *      id: \"2dc27a27920\",\n *      metadata: {\n *          DFP: \"Back Plate Assy\",\n *          PNR, \"PM005301\"\n *      }\n * }\n * ```\n * @prop {string} id The unique identifier of the object in the companion xml file.\n * @prop {KeyValuePairs} metadata Metadata of the catalog part.\n * @typedef {object} CatalogPartInfo\n * @see CatalogItemInfo\n */\n\n/**\n * The object represents the IPC sheet information, for example:\n * ```\n * {\n *      id: \"view_0\",\n *      description: \"Assembled View\",\n *      drawing: \"http://.../pump-catalog-1.svg\",\n *      indentationLevel: 0,\n *      items: [0,1,13,28]\n * }\n * ```\n * @prop {string} id - IPC sheet ID. \n * @prop {string} description - IPC sheet description.\n * @prop {string} drawing - The name of the file for 2D illustration.\n * @prop {number} indentationLevel - The indentation level that indicates IPC sheets relationships.\n * @prop {number[]} items - An array of row numbers of the DPL table active on this sheet.\n * @prop {boolean} changed\n * @typedef {object} CatalogSheetInfo\n * @see DocumentCatalogInfo\n * @see {@link module:solo.app.ipc.interactivity.getSheetInfo app.ipc.interactivity.getSheetInfo()}\n */\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app.ipc.interactivity.js\n// module id = 68\n// module chunks = 0","var app = require('app').app;\n\nmodule.exports = function (interactivity, baseURL) {\n    var json = interactivity.json;\n    var getMetadata = require('interactivity.metadata.js');\n\n    var m_prcInteractivityMap = {\n        defs: {},\n        docitems: {},\n        procedureItems: {},\n        options: {},\n        metadata: {}\n    };\n\n    /*\n        procedure: {\n            options: {\n                'name': 'value',\n                ...\n            },\n            metadata: {\n                'decl-id': 'value',\n                ...\n            },\n            defs: {\n                'def': {\n                    'DocID': '',\n                    'name': 'value',\n                    '{decl-id}': 'value',\n                },\n                ...\n            },\n            docitems: {\n                'DocID': {\n                    id: DocID,\n                    metadata: {\n                        'decl-id': 'value',\n                        ...\n                    },\n                    objectNames: ['def', ...],\n                    screentip: ''\n                }\n                ...\n            }\n            pictures: [\n                {\n                    drawing: '',\n                    description: '',\n                    flags: 0\n                }\n            ],\n            procedureItems: {\n                'id': {\n                    type: 'procedure|step|action|event'\n                    comment: '',\n                    description: '',\n                    parent: 'id',\n                    parentStep: 'id',\n                    eventType: '',\n                    children: ['id', ...],\n                    actions: ['id', ...],\n                    events: ['id', ...]\n                }\n            }\n            procedureId: 'id'\n        }\n\n    */\n\n    json.$('SimulationInteractivity/DocItems/DocItem').forEach(function (DocItem) {\n        var def = DocItem.$attr('id'),\n            defInfo = {},\n            metadata = {};\n\n        DocItem.$('metadata/value').forEach(function (value) {\n            var text = value.$text();\n            defInfo[value.$attr(\"name\")] = text;\n            defInfo['{' + value.$attr(\"decl-id\") + '}'] = text;\n            metadata[value.$attr(\"decl-id\")] = text;\n        });\n\n        m_prcInteractivityMap.defs[def] = defInfo;\n\n        var docid = defInfo['{DocID}'];\n        if (!m_prcInteractivityMap.docitems[docid]) {\n            m_prcInteractivityMap.docitems[docid] = {\n                id: docid,\n                objectNames: [],\n                metadata: metadata,\n                screentip: DocItem.$text('tooltip')\n            };\n        }\n        m_prcInteractivityMap.docitems[docid].objectNames.push(def);\n    });\n\n    m_prcInteractivityMap.pictures = json.$('SimulationInteractivity/Resources/Picture').map(function (Picture) {\n        return {\n            description: Picture.$attr('descr'),\n            drawing: baseURL + Picture.$text(),\n            flags: Picture.$attr('flags') || 0\n        };\n    });\n\n    m_prcInteractivityMap.options = require('interactivity.options.js')(json);\n    m_prcInteractivityMap.metadata = getMetadata(json.$('SimulationInteractivity/SimulationInformation/metadata/value'));\n\n    m_prcInteractivityMap.procedureId = json.SimulationInteractivity.Simulation && json.SimulationInteractivity.Simulation.$attr('id');\n\n    function findDescription(id, node) {\n        node = node || json.SimulationInteractivity.Simulation;\n        var i,\n            description = \"\";\n        if (node.$attr('id') != id) {\n            if (node.Step) {\n                for (i = 0; i < node.Step.length && !description; i++) {\n                    description = findDescription(id, node.Step[i]);\n                }\n            } else if (node.Substep) {\n                for (i = 0; i < node.Substep.length && !description; i++) {\n                    description = findDescription(id, node.Substep[i]);\n                }\n            }\n        } else {\n            description = node.$text('Description');\n        }\n        return description;\n    }\n\n    function processEvent(node, parentId) {\n        var id = node.$attr('id');\n        m_prcInteractivityMap.procedureItems[id] = {\n            id: id,\n            type: 'event',\n            description: node.$text('Description'),\n            eventType: node.$text('Type').toUpperCase(),\n            parent: parentId\n        };\n    }\n\n    function processItem(node, parentId) {\n        var i,\n            id = node.$attr('id'),\n            itemInfo = {\n                id: id,\n                comment: node.$text('Comment'),\n                description: findDescription(id),\n                children: node.$('Item').map(function (node) {\n                    return node.$attr('id');\n                }),\n                actions: node.$('Action').map(function (node) {\n                    return node.$attr('id');\n                }),\n                metadata: node.$('metadata/value').reduce(function (metadata, value) {\n                    metadata[value.$attr('decl-id')] = value.$text();\n                    return metadata;\n                }, {}),\n                raw: node\n            };\n        itemInfo.type = ((itemInfo.children.length + itemInfo.actions.length) > 0 || node['@name'] !== 'Action') ? 'step' : 'action';\n\n        if (parentId) {\n            itemInfo.parent = parentId;\n        }\n\n        if (itemInfo.type == 'action') {\n            delete itemInfo.children;\n            delete itemInfo.actions;\n            var steps = json.$('SimulationInteractivity/Simulation/Step');\n            for (i = 0; i < steps.length; i++) {\n                var step = steps[i];\n                var substep = step.$('Substep').filter(function (substep) {\n                    return substep.$attr('id') == id;\n                });\n                if (substep.length > 0) {\n                    itemInfo.parentStep = step.$attr('id');\n                    itemInfo.events = substep[0].$('Event').map(function (node) {\n                        processEvent(node, id);\n                        return node.$attr('id');\n                    });\n                    break;\n                }\n            }\n        }\n\n        m_prcInteractivityMap.procedureItems[id] = itemInfo;\n\n        node.$('Action').forEach(function (action) {\n            processItem(action, id);\n        });\n\n        node.$('Item').forEach(function (item) {\n            processItem(item, id);\n        });\n    }\n\n    if (json.SimulationInteractivity.Procedure) {\n        processItem(json.SimulationInteractivity.Procedure);\n        m_prcInteractivityMap.procedureItems[m_prcInteractivityMap.procedureId].type = 'procedure';\n        m_prcInteractivityMap.procedureItems[m_prcInteractivityMap.procedureId].comment = json.$text('SimulationInteractivity/Simulation/Comment');\n    }\n\n    var appExports = {\n        procedure: {\n            /**\n             * The namespace represents an interface to access the information from the companion file for the interactive procedure.\n             * \n             * @namespace\n             * @memberof module:solo.app.procedure\n             */\n            interactivity: {\n                /**\n                 * JavaScript representation of the companion file *.interactivity.xml*\n                 * \n                 * @name json\n                 * @memberof module:solo.app.procedure.interactivity\n                 * @property {XMLNodeData} json JavaScript representation of the XML file\n                 * \n                 * *XML:*\n                 * ```\n                 * <node att1=\"att1-value\" att2=\"att2-value\">\n                 *      <foo>Foo</foo>\n                 *      <bar>\n                 *          <![CDATA[  Bar]]>\n                 *      </bar>\n                 *      <items>\n                 *          <item>i1</item>\n                 *          <item>i2</item>\n                 *          <item>i3</item>\n                 *          <item>i4</item>\n                 *      </items>\n                 * </node>\n                 * ```\n                 * *JSON:*\n                 * ```\n                 * {\n                 *  \"node\": {\n                 *      \"@attributes\": {\n                 *          \"att1\": \"att1-value\",\n                 *          \"att2\": \"att2-value\"\n                 *      },\n                 *      \"foo\": { \"#text\": \"Foo\" },\n                 *      \"bar\": { \"#text\": \"  Bar\" },\n                 *      \"items\": {\n                 *          \"item\": [\n                 *              { \"#text\": \"i1\" },\n                 *              { \"#text\": \"i2\" },\n                 *              { \"#text\": \"i3\" },\n                 *              { \"#text\": \"i4\" }\n                 *          ]\n                 *      }\n                 *  }\n                 * }\n                 * ```\n                 */\n                //json: json,\n\n                /**\n                 * Returns the 3D procedure ID\n                 * \n                 * @memberof module:solo.app.procedure.interactivity\n                 * @returns {string} 3D procedure ID\n                 */\n                getProcedureId: function () {\n                    return m_prcInteractivityMap.procedureId;\n                },\n\n                /**\n                 * Returns an array of the 2D illustration from the companion file.\n                 * \n                 * @memberof module:solo.app.procedure.interactivity\n                 * @returns {ProcedureDrawingInfo[]} Array of 2D illustrations in the procedure\n                 */\n                getDrawings: function () {\n                    return m_prcInteractivityMap.pictures;\n                },\n\n                /**\n                 * Returns an DocID for the name of 3D object.\n                 * \n                 * @memberof module:solo.app.procedure.interactivity\n                 * @param {string} name The name of 3D object\n                 * @returns {DocID} DocID value\n                 */\n                getDocIdByObjectName: function (name) {\n                    var defInfo = m_prcInteractivityMap.defs[name];\n                    if (defInfo) {\n                        return defInfo['{DocID}'];\n                    }\n                    return null;\n                },\n\n                /**\n                 * Returns an array of the name of 3D object by DocID.\n                 * \n                 * @memberof module:solo.app.procedure.interactivity\n                 * @param {DocID} docId DocID value\n                 * @returns {string[]} An array of the names of 3D objects\n                 */\n                getObjectNamesByDocId: function (docId) {\n                    var docItemInfo = m_prcInteractivityMap.docitems[docId];\n                    return docItemInfo ? docItemInfo.objectNames : [];\n                },\n\n                /**\n                 * Returns information about the 3D item by DocID.\n                 * \n                 * @memberof module:solo.app.procedure.interactivity\n                 * @param {DocID} docId DocID value\n                 * @returns {DocItemInfo} The object represents an information about the 3D item\n                 * @since 1.5.2\n                 */\n                getDocItemInfo: function (docId) {\n                    return m_prcInteractivityMap.docitems[docId];\n                },\n\n                /**\n                 * Returns information about the 3D item.\n                 * \n                 * @memberof module:solo.app.procedure.interactivity\n                 * @param {string} name The name of 3D object\n                 * @returns {DocItemMetadata} The object represents the metadata value of the 3D object by name and id\n                 * @since 1.4.0\n                 */\n                getDocItemMetadata: function (name) {\n                    return m_prcInteractivityMap.defs[name];\n                },\n\n                /**\n                 * Returns an array of all DocID.\n                 * \n                 * @memberof module:solo.app.procedure.interactivity\n                 * @returns {DocID[]} An array of DocID\n                 */\n                getDocItems: function () {\n                    var res = [];\n                    for (var docId in m_prcInteractivityMap.docitems) res.push(docId);\n                    return res;\n                },\n\n                /**\n                 * Returns information about the procedure item.\n                 * \n                 * @memberof module:solo.app.procedure.interactivity\n                 * @param {string} id Procedure item ID\n                 * @returns {ProcedureElementInfo} The object represents an information about the procedure item\n                 */\n                getProcedureItemInfo: function (id) {\n                    return m_prcInteractivityMap.procedureItems[id];\n                },\n\n                /**\n                 * Returns the publication options from the companion file in form of key-value array.\n                 * \n                 * @memberof module:solo.app.procedure.interactivity\n                 * @returns {KeyValuePairs} Key-value array\n                 */\n                getOptions: function () {\n                    return m_prcInteractivityMap.options;\n                },\n\n                /**\n                 * Returns the project metadata from the companion file in form of key-value array.\n                 * \n                 * @memberof module:solo.app.procedure.interactivity\n                 * @returns {KeyValuePairs} Key-value array\n                 */\n                getProjectMetadata: function () {\n                    return m_prcInteractivityMap.metadata;\n                }\n            }\n        }\n    };\n\n    return appExports.procedure;\n};\n\n/**\n * The identifier of the 3D object used to link to the document.\n * @typedef {string} DocID\n */\n\n/**\n * The object represents the metadata value of the 3D object by name and id, for example:\n * ```\n *   {\n *      {DocID}: \"SH40400\", // by metadata id in form: {decl-id}\n *      {_F0CF006A8AC54725A80D5DC19077CD1D}: \"SH40400\",\n *      {_F519A19D050D45A68584453C44EA85DC}: \"1\",\n *      DocID: \"SH40400\",   // by metadata name\n *      \"Part Number\": \"SH40400\",\n *      Qty: \"1\"\n *   }\n * ```\n * @typedef {KeyValuePairs} DocItemMetadata\n * @see {@link module:solo.app.procedure.interactivity.getDocItemMetadata app.procedure.interactivity.getDocItemMetadata()}\n */\n\n/**\n * Information about the element of the procedure, for example:\n * ```\n *   {\n *       type: \"procedure\",\n *       id: \"R84E4929F-26B0-4848-9375-4A1D42DF4F6F\",\n *       description: \"Pump Disassembly Procedure\",\n *       raw: [ ... ],\n *       ...\n *   }\n * ```\n * @typedef {ProcedureRootInfo|ProcedureStepInfo|ProcedureActionInfo|ProcedureAlertInfo} ProcedureElementInfo\n * @prop {string} type The type of the procedure element:\n * - `\"procedure\"`\n * - `\"step\"`\n * - `\"action\"`\n * - `\"event\"`\n * @prop {string} id The identifier of the procedure element.\n * @prop {string} description Description of the procedure element.\n * @prop {XMLNodeData} raw An XMLNodeData instance that represents an element in the companion file.\n * @see {@link module:solo.app.procedure.interactivity.getProcedureItemInfo app.procedure.interactivity.getProcedureItemInfo()}\n */\n\n/**\n * Information about the procedure, for example:\n * ```\n *   {\n *       type: \"procedure\",\n *       id: \"R84E4929F-26B0-4848-9375-4A1D42DF4F6F\",\n *       description: \"Pump Disassembly Procedure\",\n *       comment: \"<p><b><span style=\\\"font-size: 117%;\\\">Pump Disassembly Procedure</span></b></p>\",\n *       children: [\n *          \"R94679328-76C1-46FC-B49E-C23070C14A16\",\n *          \"R14F8C444-4ADF-4930-B685-4B1E9E613550\",\n *          \"R6F5017B0-FD12-4636-A638-D77CF6193B65\",\n *          \"D767D5C6-0D78-4F52-AB27-404E22EB43E0\",\n *          ...\n *       ],\n *       actions: [],\n *       metadata: {}\n *   }\n * ```\n * @typedef {ProcedureElementInfo} ProcedureRootInfo\n * @prop {string} type=procedure See {@link ProcedureElementInfo}.\n * @prop {string} id See {@link ProcedureElementInfo}.\n * @prop {string} description See {@link ProcedureElementInfo}.\n * @prop {string} comment The comment to the element of the procedure in the form of an HTML string.\n * @prop {string[]} children Array of identifiers for children elements.\n * @prop {string[]} actions Array of identifiers for actions of the element.\n * @prop {KeyValuePairs} metadata Metadata of the item.\n * @see ProcedureElementInfo\n */\n\n/**\n * Information about the step of the procedure, for example:\n * ```\n *  {\n *      type: \"step\",\n *      id: \"R94679328-76C1-46FC-B49E-C23070C14A16\",\n *      description\t\"1\",\n *      comment\t\"<p>Remove the bolts securing the faceplate to the the casing. Remove the faceplate.</p>\",\n *      parent: \"R84E4929F-26B0-4848-9375-4A1D42DF4F6F\",\n *      children: [],\n *      actions\t[\n *          \"D6C54479-3203-4473-85E2-637875CA4F18\"\n *      ],\n *      metadata: {}\n *   }\n * ```\n * @typedef {ProcedureElementInfo} ProcedureStepInfo\n * @prop {string} type=step See {@link ProcedureElementInfo}.\n * @prop {string} id See {@link ProcedureElementInfo}.\n * @prop {string} description See {@link ProcedureElementInfo}.\n * @prop {string} comment The comment to the element of the procedure in the form of an HTML string.\n * @prop {string} parent The identifier of the parent element in the procedure.\n * @prop {string[]} children Array of identifiers for children elements.\n * @prop {string[]} actions Array of identifiers for actions of the element. See {@link ProcedureActionInfo}.\n * @prop {KeyValuePairs} metadata Metadata of the item.\n * @see ProcedureElementInfo\n */\n\n/**\n * Information about the action in the procedure, for example:\n * ```\n *  {\n *      type: \"action\",\n *      id: \"5124CF6D-621B-46EC-9EF9-B9EDB0FDD496\",\n *      description\t\"\",\n *      comment: \"<p>Visually inspect all parts. Replace all worn or damaged parts before reassembling pump. It is recommended that new gaskets be installed each time the pump is disassembled and reassembled<span style=\\\"font-size: 117%;\\\">.</span></p>\",\n *      parent: \"R1712E390-60A4-45CC-ACEC-63ED166989EE\",\n *      parentStep: \"R1712E390-60A4-45CC-ACEC-63ED166989EE\",\n *      events: [\n *          \"NOTE-694FE061-2655-4CF1-A567-D78212E2FF87\"\n *      ],\n *      metadata: {}\n *   }\n * ```\n * @typedef {ProcedureElementInfo} ProcedureActionInfo\n * @prop {string} type=action See {@link ProcedureElementInfo}.\n * @prop {string} id See {@link ProcedureElementInfo}.\n * @prop {string} description See {@link ProcedureElementInfo}.\n * @prop {string} comment The comment to the element of the procedure in the form of an HTML string.\n * @prop {string} parent The identifier of the parent element in the procedure.\n * @prop {string} parentStep The identifier of the parent step corresponding to the step of the VRML procedure.\n * @prop {string[]} Array of identifiers for procedure elements of type `\"event\"`. See {@link ProcedureAlertInfo}.\n * @prop {KeyValuePairs} metadata Metadata of the item.\n * @see ProcedureElementInfo\n */\n\n/**\n * Information about the alert in the procedure, for example:\n * ```\n *  {\n *      type: \"event\",\n *      id: \"NOTE-694FE061-2655-4CF1-A567-D78212E2FF87\",\n *      description: \"note001\",\n *      parent: \"5124CF6D-621B-46EC-9EF9-B9EDB0FDD496\",\n *      eventType: \"\"\n *   }\n * ```\n * @typedef {ProcedureElementInfo} ProcedureAlertInfo\n * @prop {string} type=event See {@link ProcedureElementInfo}.\n * @prop {string} id See {@link ProcedureElementInfo}.\n * @prop {string} description See {@link ProcedureElementInfo}.\n * @prop {string} parent The identifier of the parent action in the procedure.\n * @prop {string} eventType The type of alert:\n * - `\"WARNING\"`\n * - `\"CAUTION\"`\n * - `\"NOTE\"`\n * - custom type\n * @see ProcedureElementInfo\n */\n\n/**\n * Information about the 3D item that is referenced by the document, for example:\n * ```\n * { \n *      id: \"id02\",\n *      objectNames: [ \"PM005301_2\" ],\n *      metadata: {\n *          DocID: \"id01\",\n *          _6A7337C8022746BA8C02F29B0FC2257F: \"Back Plate Assy\",\n *          _F0CF006A8AC54725A80D5DC19077CD1D: \"PM005302\",\n *          _F519A19D050D45A68584453C44EA85DC: \"1\"\n *      },\n *      screentip: \"Back Plate Assy\\nP/N: PM005302\"\n * }\n * ```\n * @typedef {object} DocItemInfo\n * @prop {DocID} id The unique ID of the 3D item used to link to the document.\n * @prop {string[]} objectNames An array of the names of 3D objects.\n * @prop {KeyValuePairs} metadata Metadata of the 3D item.\n * @prop {string} screentip A string contains a brief note or label pertaining to the 3D item.\n * @see {@link module:solo.app.procedure.interactivity.getDrawings app.procedure.interactivity.getDrawings()}\n */\n\n /**\n * Information about the 2D drawing in the procedure, for example:\n * ```\n * { \n *     drawing: \"http://.../pump-procedure-1.svg\", \n *     description: \"Pump Cross-Section\",\n *     flags: 0\n * }\n * ```\n * @typedef {object} ProcedureDrawingInfo\n * @prop {string} drawing The filename or URL of the 2D illustration.\n * @prop {string} description Description of 2D illustration.\n * @prop {number} flags Flags for the 2D illustration.\n * @see {@link module:solo.app.procedure.interactivity.getDrawings app.procedure.interactivity.getDrawings()}\n */\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app.procedure.interactivity.js\n// module id = 69\n// module chunks = 0","/**\n * SVG Drawing module.\n *\n * @module drawing\n * @author timduck@cortona3d.com\n * @copyright (C) 2015-2016 Paragraphics, Ltd. All rights reserved.\n */\n\nvar expand = require('lib/util').expand;\nvar EventEmitter = require('events').EventEmitter;\n\nvar SVGNS = \"http://www.w3.org/2000/svg\";\nvar XLINKNS = \"http://www.w3.org/1999/xlink\";\n\nvar SUPPORT_TOUCH = ('ontouchstart' in window);\nvar SUPPORT_ONLY_TOUCH = SUPPORT_TOUCH && /mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent);\n\nvar Hammer = require('hammerjs');\nvar pako = require('pako');\n\nvar PRESS_TIME = 750;\nvar DOUBLE_TAP_TIME = 250;\n\nvar m_svgHammerManagers = [];\nvar debounceTimeout = {};\n\n/*\n    Members\n */\n\nvar m_svgElement,\n    m_svgShadow,\n    m_viewportShadow,\n    m_view,\n    m_viewport,\n    m_viewBox,\n    m_zoom = 1,\n    m_originX = 0,\n    m_originY = 0,\n    m_maxScale = 50,\n    m_minScale = 1,\n    m_enableDrawingOptimization = false,\n    m_textNodesCount = 0,\n    m_disableAutoCalculationScaleLimit = false,\n    m_enableHoverFilling = false,\n    m_isPressed = false,\n    m_isDoubleTap = false,\n    m_isHidden = true,\n    m_isReady = false,\n    m_loadingUrl = '',\n    m_image = null,\n    m_xhr = null,\n    m_delegate = {\n        didCompleteLoad: function (url) {\n            m_isReady = true;\n            if (this.delegate.didCompleteLoad) {\n                this.delegate.didCompleteLoad.call(this, url);\n            }\n        },\n        didClickHotspot: function (name, keys) {\n            if (this.delegate.didClickHotspot) {\n                this.delegate.didClickHotspot.call(this, name, keys);\n            }\n        },\n        didEnterHotspot: function (name) {\n            if (this.delegate.didEnterHotspot) {\n                this.delegate.didEnterHotspot.call(this, name);\n            }\n        },\n        didLeaveHotspot: function (name) {\n            if (this.delegate.didLeaveHotspot) {\n                this.delegate.didLeaveHotspot.call(this, name);\n            }\n        },\n        didCallContextMenu: function (name, offsetX, offsetY, target) {\n            if (this.delegate.didCallContextMenu) {\n                this.delegate.didCallContextMenu.call(this, name, offsetX, offsetY, target);\n            }\n        },\n        failedLoadingDocument: function (url, message) {\n            if (this.delegate.failedLoadingDocument) {\n                this.delegate.failedLoadingDocument.call(this, url, message);\n            }\n        },\n        onProgress: function (loaded, total) {\n            if (this.delegate.onProgress) {\n                this.delegate.onProgress.call(this, loaded, total);\n            }\n        },\n        onZoomChange: function (zoom) {\n            if (this.delegate.onZoomChange) {\n                this.delegate.onZoomChange.call(this, zoom);\n            }\n        }\n    };\n\n// IE11 SVGElement.classList polyfill\n(function () {\n    // helpers\n    var regExp = function (name) {\n        return new RegExp('(^| )' + name + '( |$)');\n    };\n    var forEach = function (list, fn, scope) {\n        for (var i = 0; i < list.length; i++) {\n            fn.call(scope, list[i]);\n        }\n    };\n\n    // class list object with basic methods\n    function ClassList(element) {\n        this.element = element;\n    }\n\n    ClassList.prototype = {\n        add: function () {\n            forEach(arguments, function (name) {\n                if (!this.contains(name)) {\n                    this.element.className.baseVal += ' ' + name;\n                }\n            }, this);\n        },\n        remove: function () {\n            forEach(arguments, function (name) {\n                this.element.className.baseVal =\n                    this.element.className.baseVal.replace(regExp(name), '');\n            }, this);\n        },\n        toggle: function (name, flag) {\n            flag = typeof flag === 'undefined' ? !this.contains(name) : flag;\n            return (flag ? this.add(name) : this.remove(name)), flag;\n        },\n        contains: function (name) {\n            return regExp(name).test(this.element.className.baseVal);\n        }\n    };\n\n    if (!('classList' in SVGElement.prototype)) {\n        Object.defineProperty(SVGElement.prototype, 'classList', {\n            get: function () {\n                return new ClassList(this);\n            }\n        });\n    }\n})();\n\n/**\n * @private\n * @async\n */\nfunction arrayBufferToString(buffer, encoding) {\n    return new Promise(function (resolve, reject) {\n        var blob = new Blob([buffer], {\n            type: 'text/plain'\n        });\n        var reader = new FileReader();\n        reader.onload = function (evt) {\n            resolve(evt.target.result);\n        };\n        reader.readAsText(blob, encoding);\n    });\n}\n\n/**\n * @private\n */\nfunction getFirstChild(n) {\n    var child = n.firstChild;\n    while (child && !child.tagName) {\n        child = child.nextSibling;\n    }\n    return child;\n}\n\n/**\n * @private\n */\nfunction getHotspotRegion(n) {\n    var firstChild,\n        res = Array.prototype.slice.call(n.getElementsByTagName('path')).filter(function (path) {\n            return path.classList.contains('hotspot-region');\n        })[0];\n\n    if (!res) {\n        // changing the order of nodes in SVG <a> element\n        // 1. g/path (geometry)\n        // 2. path (hotspot region)\n        // 3. g/text\n        firstChild = getFirstChild(n);\n        if (firstChild && firstChild.tagName === 'path') {\n            res = firstChild;\n            firstChild.classList.add('hotspot-region');\n            n.appendChild(firstChild);\n\n            Array.prototype.slice.call(n.getElementsByTagName('text')).forEach(function (text) {\n                var textParentNode = text.parentNode;\n                if (textParentNode !== n) {\n                    if (textParentNode.parentNode === n) {\n                        n.appendChild(textParentNode.cloneNode()).appendChild(text);\n                        if (!textParentNode.childElementCount) {\n                            textParentNode.parentNode.removeChild(textParentNode);\n                        }\n                    }\n                } else {\n                    n.appendChild(text);\n                }\n            });\n        }\n    }\n\n    return res;\n}\n\n/**\n * @private\n */\nfunction getHotspotNodes(n) {\n    var el = [],\n        hotspotRegion = getHotspotRegion(n);\n    if (hotspotRegion) {\n        el.push(hotspotRegion);\n    } else {\n        el = el.concat(\n            Array.prototype.slice.call(n.getElementsByTagName('path')),\n            Array.prototype.slice.call(n.getElementsByTagName('text'))\n        );\n    }\n    return el;\n}\n\n/**\n * \n * @private\n * @param {any} node\n * @returns {SVGAElement}\n */\nfunction getSVGAElement(node) {\n    var res = node;\n    while (res && res.nodeName.toLowerCase() != 'a') res = res.parentNode;\n    return res;\n}\n\nvar m_eventHandlersA = {\n    /**\n     * \n     * \n     * @private\n     * @param {any} e\n     */\n    mouseover: function (e) {\n        e = e || window.event;\n        var target = getSVGAElement(e.target || e.srcElement),\n            name = target ? target.getAttribute('name') : '';\n        SVGDrawing.dispatch(\"didEnterHotspot\", name);\n        e.preventDefault();\n    },\n    /**\n     * \n     * \n     * @private\n     * @param {any} e\n     */\n    mouseout: function (e) {\n        e = e || window.event;\n        var target = getSVGAElement(e.target || e.srcElement),\n            name = target ? target.getAttribute('name') : '';\n        SVGDrawing.dispatch(\"didLeaveHotspot\", name);\n        e.preventDefault();\n    }\n};\n\nvar m_lastX,\n    m_lastY,\n    m_lastScale;\n\nvar m_eventHandlers = {\n    /**\n     * \n     * \n     * @private\n     * @param {any} e\n     */\n    contextmenu: function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        if (m_isPressed) return;\n        e = e || window.event;\n        var target = e.target || e.srcElement,\n            svgANode = getSVGAElement(target),\n            name = svgANode ? svgANode.getAttribute('name') : '',\n            rect = m_view.getBoundingClientRect(),\n            offsetX = e.clientX - rect.left,\n            offsetY = e.clientY - rect.top;\n        SVGDrawing.dispatch(\"didCallContextMenu\", name, offsetX, offsetY, m_view);\n    },\n\n    /**\n     * \n     * \n     * @private\n     * @param {any} e\n     * @returns {any}\n     */\n    wheel: function (e) {\n        e = e || window.event;\n        var delta = e.deltaY < 0 ? -0.1 : 0.1;\n\n        var W = m_view.clientWidth,\n            H = m_view.clientHeight,\n            dimensions = getViewBoxDimensions(),\n            w = dimensions.w,\n            h = dimensions.h;\n\n        var scale = Math.max(m_minScale, Math.min(m_maxScale, (1 - delta) * m_zoom)) / m_zoom,\n            rect = m_view.getBoundingClientRect(),\n            offsetX = e.clientX - rect.left,\n            offsetY = e.clientY - rect.top,\n            x = (offsetX - (W - w) / 2 - m_originX / dimensions.scale) / m_zoom * dimensions.scale,\n            y = (offsetY - (H - h) / 2 - m_originY / dimensions.scale) / m_zoom * dimensions.scale,\n            originX = m_originX + x * (1 - scale) * m_zoom,\n            originY = m_originY + y * (1 - scale) * m_zoom;\n\n        setTransform(originX, originY, m_zoom * scale);\n\n        e.preventDefault();\n        return false;\n    },\n    /**\n     * \n     * \n     * @private\n     * @param {any} e\n     * @returns {any}\n     */\n    dblclick: function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        if (m_isDoubleTap) return;\n        var scale = (m_maxScale - m_minScale) * 0.4 + m_minScale;\n        if (Math.abs(m_zoom - scale) < 0.001) {\n            reset();\n        } else {\n            scale = scale / m_zoom;\n            var W = m_view.clientWidth,\n                H = m_view.clientHeight,\n                dimensions = getViewBoxDimensions(),\n                w = dimensions.w,\n                h = dimensions.h;\n            var rect = m_view.getBoundingClientRect(),\n                offsetX = e.clientX - rect.left,\n                offsetY = e.clientY - rect.top,\n                x = (offsetX - (W - w) / 2 - m_originX / dimensions.scale) / m_zoom * dimensions.scale,\n                y = (offsetY - (H - h) / 2 - m_originY / dimensions.scale) / m_zoom * dimensions.scale,\n                originX = m_originX + x * (1 - scale) * m_zoom,\n                originY = m_originY + y * (1 - scale) * m_zoom;\n            setTransform(originX, originY, m_zoom * scale);\n        }\n    }\n};\n\n/**\n * \n * \n * @private\n * @returns {object}\n */\nfunction getViewBoxDimensions() {\n    if (m_zoom === 1) {\n        m_viewBox = (m_enableDrawingOptimization && m_viewportShadow) ? m_svgShadow.getBBox() : m_svgElement.getBBox();\n    }\n    var viewBox = m_viewBox,\n        W = m_view.clientWidth,\n        H = m_view.clientHeight,\n        w = viewBox.width,\n        h = viewBox.height,\n        A = W / H,\n        a = w / h;\n\n    if (A > a) {\n        // width\n        h = H;\n        w = h * a;\n    } else if (A < a) {\n        // height\n        w = W;\n        h = w / a;\n    } else {\n        h = H;\n        w = W;\n    }\n    return {\n        h: h,\n        w: w,\n        scale: viewBox.width / w\n    };\n}\n\n/**\n * \n * \n * @private\n * @param {any} dx\n * @param {any} dy\n */\nfunction setOriginBy(dx, dy) {\n    var dimensions = getViewBoxDimensions();\n    setOrigin(m_originX + dx * dimensions.scale, m_originY + dy * dimensions.scale);\n}\n\n/**\n * \n * \n * @private\n * @param {any} x\n * @param {any} y\n */\nfunction setOrigin(x, y) {\n    var W = m_view.clientWidth,\n        H = m_view.clientHeight,\n        dimensions = getViewBoxDimensions(),\n        w = dimensions.w,\n        h = dimensions.h,\n        scale = dimensions.scale,\n        viewW = w * m_zoom,\n        viewH = h * m_zoom;\n\n    var oX = -Math.abs(W - w) / 2;\n    var oY = -Math.abs(H - h) / 2;\n\n    if (viewW <= W) {\n        m_originX = Math.max(Math.min(x, (oX + W - viewW) * scale), oX * scale);\n    } else {\n        m_originX = Math.max(Math.min(x, oX * scale), (oX + W - viewW) * scale);\n    }\n    if (viewH <= H) {\n        m_originY = Math.max(Math.min(y, (oY + H - viewH) * scale), oY * scale);\n    } else {\n        m_originY = Math.max(Math.min(y, oY * scale), (oY + H - viewH) * scale);\n    }\n}\n\n/**\n * \n * \n * @param {any} x\n * @param {any} y\n * @param {any} zoom\n */\nfunction setTransform(x, y, zoom) {\n    m_originX = x;\n    m_originY = y;\n    m_zoom = zoom;\n    SVGDrawing.dispatch(\"onZoomChange\", m_zoom);\n    applyTransform();\n}\n\n/**\n * \n * @private\n */\nvar m_applyTimeout,\n    m_shadowTimeout;\n\nfunction applyTransformTo(viewport) {\n    if (!viewport) return;\n    var m = viewport.transform.baseVal;\n    if (isNaN(m_originX) || isNaN(m_originY) || isNaN(m_zoom)) {\n        m_originX = 0;\n        m_originY = 0;\n        m_zoom = 1;\n    }\n    m.getItem(0).setTranslate(m_originX, m_originY);\n    m.getItem(1).setScale(m_zoom, m_zoom);\n}\n\nfunction applyTransform() {\n    if (!m_viewport) return;\n    clearTimeout(m_applyTimeout);\n    m_applyTimeout = setTimeout(function () {\n        function _apply() {\n            m_shadowTimeout = null;\n            m_svgElement.style.display = 'block';\n            m_svgShadow.style.visibility = 'hidden';\n            applyTransformTo(m_viewport);\n        }\n        clearTimeout(m_shadowTimeout);\n        if (!m_enableDrawingOptimization || !m_viewportShadow) {\n            _apply();\n        } else {\n            if (!m_shadowTimeout) {\n                m_svgShadow.style.visibility = 'visible';\n                m_svgElement.style.display = 'none';\n            }\n            m_shadowTimeout = setTimeout(_apply, 1000);\n            applyTransformTo(m_viewportShadow);\n        }\n    }, 0);\n}\n\n/**\n * \n * @memberof module:drawing\n * @returns {SVGElement} \n */\nfunction getSVGSource() {\n    var div = document.createElement('div');\n    div.appendChild(m_svgElement.cloneNode(true));\n    div.firstChild.removeAttribute('id');\n    div.firstChild.removeAttribute('style');\n    return div.innerHTML;\n}\n\n/**\n * @memberof module:drawing\n */\nfunction attach() {\n    var eventName,\n        mc,\n        mcOptions = {},\n        i,\n        a = m_svgElement.getElementsByTagName('a');\n\n    if (!m_isReady) return;\n    if (m_svgHammerManagers.length) return;\n\n    if (navigator.pointerEnabled === false) {\n        if (SUPPORT_ONLY_TOUCH) {\n            mcOptions.inputClass = Hammer.TouchInput;\n        } else if (!SUPPORT_TOUCH) {\n            mcOptions.inputClass = Hammer.MouseInput;\n        } else {\n            mcOptions.inputClass = Hammer.TouchMouseInput;\n        }\n    }\n\n    for (i = 0; i < a.length; i++) {\n        (function (anchor) {\n            // In an HTML5 document the attribute has to be accessed with vm2d:name since namespaces are not supported.\n            // https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttributeNS#Examples\n            var name = anchor.getAttribute('vm2d:name');\n\n            if (name) {\n                anchor.setAttribute('name', name);\n            }\n\n            name = anchor.getAttribute('name');\n            if (!name) {\n                name = anchor.textContent.replace(/[\\r\\n\\s]+/g, ' ').trim();\n                if (name) {\n                    anchor.setAttribute('name', name);\n                }\n                console.log('WARNING: Element \"' + anchor.tagName + '\" has no \"name\" attribute. Uses text content instead: \"' + name + '\"');\n            }\n            if (name) {\n                mc = new Hammer.Manager(anchor, expand({\n                    recognizers: [\n                        [Hammer.Tap]\n                    ]\n                }, mcOptions));\n                mc.on('tap', function (e) {\n                    var event = e.srcEvent || e;\n                    var keys = +(event.shiftKey && 1) | +(event.ctrlKey && 2) | +(event.altKey && 4);\n                    if (!debounceTimeout[name]) {\n                        debounceTimeout[name] = setTimeout(function () {\n                            delete debounceTimeout[name];\n                            SVGDrawing.dispatch(\"didClickHotspot\", name, keys);\n                        }, DOUBLE_TAP_TIME);\n                    } else {\n                        clearTimeout(debounceTimeout[name]);\n                        delete debounceTimeout[name];\n                    }\n                });\n                m_svgHammerManagers.push(mc);\n\n                for (eventName in m_eventHandlersA) {\n                    anchor.addEventListener(eventName, m_eventHandlersA[eventName], false);\n                }\n            }\n        })(a[i]);\n    }\n\n    mc = new Hammer.Manager(m_view, mcOptions);\n\n    var press = new Hammer.Press({\n        time: PRESS_TIME\n    });\n\n    var doubletap = new Hammer.Tap({\n        event: 'doubletap',\n        taps: 2,\n        threshold: 5,\n        posThreshold: 100,\n        interval: DOUBLE_TAP_TIME\n    });\n\n    var pinch = new Hammer.Pinch({\n        enable: true\n    });\n\n    var pan = new Hammer.Pan({\n        pointers: 0,\n        threshold: 1\n    });\n\n    pinch.recognizeWith(pan);\n\n    mc.add(press);\n    mc.add(doubletap);\n    mc.add(pinch);\n    mc.add(pan);\n    mc.set({\n        touchAction: 'none'\n    });\n\n    mc.on('press', function (e) {\n        if (e.pointerType === 'mouse') return;\n        m_eventHandlers.contextmenu(e.srcEvent);\n        m_isPressed = true;\n    });\n\n    mc.on('pressup', function (e) {\n        if (e.pointerType === 'mouse') return;\n        setTimeout(function () {\n            m_isPressed = false;\n        }, 250);\n    });\n\n    mc.on('doubletap', function (e) {\n        m_eventHandlers.dblclick(e.srcEvent);\n        m_isDoubleTap = true;\n        setTimeout(function () {\n            m_isDoubleTap = false;\n        }, 250);\n    });\n\n    mc.on('pinchstart', function (e) {\n        m_lastScale = 1;\n    });\n\n    mc.on('pinch', function (e) {\n        var W = m_view.clientWidth,\n            H = m_view.clientHeight,\n            dimensions = getViewBoxDimensions(),\n            w = dimensions.w,\n            h = dimensions.h;\n\n        var scale = Math.max(m_minScale, Math.min(m_maxScale, (1 - (m_lastScale - e.scale)) * m_zoom)) / m_zoom,\n            rect = m_view.getBoundingClientRect(),\n            clientX = e.center.x,\n            clientY = e.center.y,\n            offsetX = clientX - rect.left,\n            offsetY = clientY - rect.top,\n            x = (offsetX - (W - w) / 2 - m_originX / dimensions.scale) / m_zoom * dimensions.scale,\n            y = (offsetY - (H - h) / 2 - m_originY / dimensions.scale) / m_zoom * dimensions.scale,\n            originX = m_originX + x * (1 - scale) * m_zoom,\n            originY = m_originY + y * (1 - scale) * m_zoom;\n\n        setTransform(originX, originY, m_zoom * scale);\n\n        m_lastScale = e.scale;\n    });\n\n    mc.on('panstart', function (e) {\n        m_view.style.cursor = 'move';\n        m_lastX = e.deltaX;\n        m_lastY = e.deltaY;\n    });\n\n    mc.on('pan', function (e) {\n        setOriginBy(e.deltaX - m_lastX, e.deltaY - m_lastY);\n        m_lastX = e.deltaX;\n        m_lastY = e.deltaY;\n        applyTransform();\n    });\n\n    mc.on('panend', function (e) {\n        m_view.style.cursor = 'default';\n    });\n\n    m_svgHammerManagers.push(mc);\n\n    for (eventName in m_eventHandlers) {\n        m_view.addEventListener(eventName, m_eventHandlers[eventName], false);\n    }\n}\n\n/**\n * @memberof module:drawing\n */\nfunction detach() {\n    var eventName,\n        name,\n        anchor,\n        i,\n        a = m_svgElement.getElementsByTagName('a');\n    for (i = 0; i < a.length; i++) {\n        anchor = a[i];\n        if (anchor.__mc) anchor.__mc.destroy();\n        delete anchor.__mc;\n        for (eventName in m_eventHandlersA) {\n            anchor.removeEventListener(eventName, m_eventHandlersA[eventName], false);\n        }\n    }\n    for (eventName in m_eventHandlers) {\n        m_view.removeEventListener(eventName, m_eventHandlers[eventName], false);\n    }\n    m_svgHammerManagers.forEach(function (mc) {\n        mc.destroy();\n    });\n    m_svgHammerManagers.length = 0;\n    for (name in debounceTimeout) {\n        clearTimeout(debounceTimeout[name]);\n    }\n    debounceTimeout = {};\n    m_zoom = 1;\n    m_originX = 0;\n    m_originY = 0;\n}\n\n/**\n * \n * @memberof module:drawing\n * @param {string} url\n * @param {boolean} raster\n */\nfunction load(url, raster) {\n    /** \n     * @private\n     */\n    function onLoadSvg(syntax) {\n        var svg,\n            div = document.createElement('div');\n\n        div.innerHTML = syntax;\n        svg = div.querySelector('svg');\n\n        if (!svg) throw new Error('No SVG data.');\n\n        if (svg) {\n            detach();\n\n            var cssText = m_svgElement.style.cssText;\n            var cssClass = m_svgElement.getAttribute('class') || '';\n\n            m_svgElement.parentNode.replaceChild(svg, m_svgElement);\n            m_svgElement = svg;\n            m_svgElement.setAttribute('touch-action', 'none');\n            m_svgElement.style.touchAction = 'none';\n\n            var titleNode = svg.getElementsByTagName('title')[0];\n            if (titleNode) svg.removeChild(titleNode);\n\n            var childNodes = Array.prototype.slice.call(svg.childNodes || svg.children).filter(function (el) {\n                var n = el.nodeName;\n                return n !== '#text' && n !== 'title' && n !== 'defs' && n != 'desc';\n            });\n\n            m_viewport = document.createElementNS(SVGNS, 'g');\n\n            var v = m_viewport.transform.baseVal;\n            v.initialize(svg.createSVGTransform());\n            v.appendItem(svg.createSVGTransform());\n\n            childNodes.forEach(function (node) {\n                m_viewport.appendChild(node);\n            });\n            svg.appendChild(m_viewport);\n\n            if (!svg.getAttribute('viewBox')) {\n                svg.setAttribute('viewBox', '0 0 ' + svg.getAttribute('width') + ' ' + svg.getAttribute('height'));\n            }\n\n            var viewBox = (svg.getAttribute('viewBox') || '0 0 0 0').split(' ');\n\n            if (!svg.getAttribute('width')) {\n                svg.setAttribute('width', viewBox[2]);\n            }\n\n            if (!svg.getAttribute('height')) {\n                svg.setAttribute('height', viewBox[3]);\n            }\n\n            svg.style.cssText = cssText;\n            svg.setAttribute('class', cssClass);\n\n            m_isReady = true;\n            SVGDrawing.dispatch(\"didCompleteLoad\", url);\n\n            if (!m_isHidden) attach();\n            m_loadingUrl = url;\n\n            m_textNodesCount = svg.getElementsByTagName('text').length;\n\n            initShadow();\n            calculateScaleLimit();\n        }\n    }\n    if (url == m_loadingUrl) return;\n    if (m_xhr) {\n        m_xhr.abort();\n        m_xhr = null;\n    }\n    if (m_image) {\n        m_image.onload = null;\n        m_image = null;\n    }\n    if (raster || /\\.(png|jpe?g|jpe|gif)$/i.test(url)) {\n        // PNG, JPEG, GIF\n        var img = new Image();\n        img.onload = function () {\n            unload();\n\n            var image = document.createElementNS(SVGNS, 'image');\n            image.setAttribute('image-rendering', 'optimizeQuality');\n            image.setAttribute('width', img.width);\n            image.setAttribute('height', img.height);\n            m_svgElement.setAttribute('viewBox', '0 0 ' + img.width + ' ' + img.height);\n            image.setAttributeNS(XLINKNS, 'href', img.src);\n\n            m_viewport = document.createElementNS(SVGNS, 'g');\n            var v = m_viewport.transform.baseVal;\n            v.initialize(m_svgElement.createSVGTransform());\n            v.appendItem(m_svgElement.createSVGTransform());\n            m_viewport.appendChild(image);\n            m_svgElement.appendChild(m_viewport);\n\n            calculateScaleLimit();\n\n            m_isReady = true;\n            SVGDrawing.dispatch(\"didCompleteLoad\", img.src);\n\n            if (!m_isHidden) attach();\n            m_loadingUrl = url;\n        };\n        img.src = url;\n        m_image = img;\n    } else {\n        // SVG(Z)\n        var xhr = new window.XMLHttpRequest();\n        if (xhr.overrideMimeType) {\n            xhr.overrideMimeType('application/octet-stream'); //application/xhtml+xml\n        }\n        try {\n            var self = this;\n            xhr.open(\"GET\", url, true);\n            xhr.responseType = 'arraybuffer';\n            /**\n             * \n             * @private\n             */\n            xhr.onerror = function () {\n                SVGDrawing.dispatch(\"onProgress\", 0, -1);\n                SVGDrawing.dispatch(\"failedLoadingDocument\", url, xhr.status);\n            };\n            /**\n             * \n             * @private\n             */\n            xhr.onprogress = function (e) {\n                var loaded = e.loaded;\n                var total = e.lengthComputable || e.lengthComputable === undefined ? e.total : 0;\n                SVGDrawing.dispatch(\"onProgress\", loaded, total);\n            };\n            /**\n             * \n             * @private\n             */\n            xhr.onload = function () {\n                SVGDrawing.dispatch(\"onProgress\", 0, -1);\n                var binData = new Uint8Array(xhr.response);\n\n                Promise\n                    .resolve()\n                    .then(function () {\n                        /*\n                        if (Cortona3DSolo && Cortona3DSolo.app.util.inflate) {\n                            var data = Cortona3DSolo.app.util.inflate(binData);\n                            if (!data) throw new Error();\n                            return arrayBufferToString(new Uint8Array(data))\n                                .then(function (str) {\n                                    Cortona3DSolo.app.util.freeTypedArray(data);\n                                    return str;\n                                });\n                        }\n                        */\n                        return arrayBufferToString(new Uint8Array(pako.inflate(binData)));\n                    })\n                    .catch(function () {\n                        return arrayBufferToString(binData);\n                    })\n                    .then(onLoadSvg)\n                    .catch(function () {\n                        SVGDrawing.dispatch(\"failedLoadingDocument\", url, xhr.status);\n                        m_loadingUrl = '';\n                    });\n            };\n            xhr.send(null);\n            m_xhr = xhr;\n        } catch (e) {\n            SVGDrawing.dispatch(\"failedLoadingDocument\", url, e.message);\n            m_loadingUrl = '';\n        }\n    }\n}\n\n/**\n * @memberof module:drawing\n */\nfunction unload() {\n    detach();\n    while (m_svgElement.firstChild) {\n        m_svgElement.removeChild(m_svgElement.firstChild);\n    }\n    freeShadow();\n    m_isReady = false;\n}\n\nfunction freeShadow() {\n    while (m_svgShadow.firstChild) {\n        m_svgShadow.removeChild(m_svgShadow.firstChild);\n    }\n    m_viewportShadow = null;\n}\n\nfunction initShadow() {\n    freeShadow();\n\n    if (m_textNodesCount < 5000 || !m_enableDrawingOptimization) return;\n\n    var svgString = new XMLSerializer().serializeToString(m_svgElement);\n\n    var DOMURL = self.URL || self.webkitURL || self,\n        img = new Image(),\n        svg = new Blob([svgString], {\n            type: \"image/svg+xml;charset=utf-8\"\n        }),\n        url = DOMURL.createObjectURL(svg);\n\n    img.onload = function () {\n        DOMURL.revokeObjectURL(url);\n\n        if (!img.width && !img.height) {\n            m_enableDrawingOptimization = false;\n            return;\n        }\n\n        var canvas = m_view.appendChild(document.createElement('canvas'));\n\n        canvas.style.display = 'none';\n\n        canvas.width = img.width;\n        canvas.height = img.height;\n\n        var ctx = canvas.getContext(\"2d\");\n        ctx.drawImage(img, 0, 0, img.width, img.height);\n\n        var png = canvas.toDataURL(\"image/png\");\n        var image = document.createElementNS(SVGNS, 'image');\n\n        image.setAttribute('image-rendering', 'optimizeQuality');\n        image.setAttribute('width', img.width);\n        image.setAttribute('height', img.height);\n        m_svgShadow.setAttribute('viewBox', '0 0 ' + img.width + ' ' + img.height);\n        image.setAttributeNS(XLINKNS, 'href', png);\n\n        m_viewportShadow = document.createElementNS(SVGNS, 'g');\n        var v = m_viewportShadow.transform.baseVal;\n        v.initialize(m_svgShadow.createSVGTransform());\n        v.appendItem(m_svgShadow.createSVGTransform());\n        m_viewportShadow.appendChild(image);\n        m_svgShadow.appendChild(m_viewportShadow);\n        applyTransformTo(m_viewportShadow);\n\n        m_view.removeChild(canvas);\n    };\n\n    img.src = url;\n}\n\nfunction calculateScaleLimit() {\n    if (m_disableAutoCalculationScaleLimit) return;\n    try {\n        var viewBox = m_svgElement.getBBox();\n        m_maxScale = Math.sqrt(viewBox.width * viewBox.width + viewBox.height * viewBox.height) / 50 || 50;\n    } catch (e) {}\n}\n\n/**\n * \n * @memberof module:drawing\n * @param {any} hotspotName\n * @param {any} className\n * @param {any} flag\n * @returns {boolean}\n */\nfunction toggleHotspotClass(hotspotName, className, flag) {\n    var res = flag;\n    m_svgElement.querySelectorAll('a[name=\"' + hotspotName + '\"]').forEach(function (n) {\n        getHotspotNodes(n).forEach(function (path) {\n            if (path.classList) {\n                res = path.classList.toggle(className, flag);\n            }\n        });\n    });\n    return res;\n}\n\n/**\n * \n * @memberof module:drawing\n * @param {any} hotspotName\n * @param {any} color\n */\nfunction highlight(hotspotName, color) {\n    Array.prototype.slice.call(m_svgElement.getElementsByTagName('a')).forEach(function (n) {\n        if (n.getAttribute('name') === hotspotName) {\n            getHotspotNodes(n).forEach(function (path) {\n                if (m_enableHoverFilling) {\n                    if (path.tagName !== 'text') {\n                        path.style.fill = color;\n                        path.style.fillOpacity = 0.5;\n                    }\n                } else {\n                    path.style.stroke = color;\n                    path.style.strokeWidth = path.tagName === 'text' ? '.1em' : '.5px';\n                    path.style.strokeOpacity = 1;\n                }\n            });\n        }\n    });\n}\n\n/**\n * \n * @memberof module:drawing\n * @param {any} hotspotName\n */\nfunction unhighlight(hotspotName) {\n    Array.prototype.slice.call(m_svgElement.getElementsByTagName('a')).forEach(function (n) {\n        if (n.getAttribute('name') === hotspotName) {\n            getHotspotNodes(n).forEach(function (path) {\n                if (m_enableHoverFilling) {\n                    if (path.tagName !== 'text') {\n                        path.style.fill = path.style.stroke;\n                        path.style.fillOpacity = path.style.strokeOpacity;\n                    }\n                } else {\n                    path.style.stroke = '';\n                    path.style.strokeWidth = '';\n                    path.style.strokeOpacity = '';\n                }\n            });\n        }\n    });\n}\n\n/**\n * \n * @memberof module:drawing\n * @param {any} hotspotName\n * @param {any} color\n */\nfunction select(hotspotName, color) {\n    Array.prototype.slice.call(m_svgElement.getElementsByTagName('a')).forEach(function (n) {\n        if (n.getAttribute('name') === hotspotName) {\n            getHotspotNodes(n).forEach(function (path) {\n                if (m_enableHoverFilling) {\n                    path.style.stroke = color;\n                    path.style.strokeWidth = path.tagName === 'text' ? '.1em' : '.5px';\n                    path.style.strokeOpacity = 1;\n                }\n                if (path.tagName !== 'text') {\n                    path.style.fill = color;\n                    path.style.fillOpacity = 0.8;\n                }\n            });\n        }\n    });\n}\n\n/**\n * \n * @memberof module:drawing\n * @param {any} hotspotName\n */\nfunction unselect(hotspotName) {\n    Array.prototype.slice.call(m_svgElement.getElementsByTagName('a')).forEach(function (n) {\n        if (n.getAttribute('name') === hotspotName) {\n            getHotspotNodes(n).forEach(function (path) {\n                if (m_enableHoverFilling) {\n                    path.style.stroke = '';\n                    path.style.strokeWidth = '';\n                    path.style.strokeOpacity = '';\n                }\n                if (path.tagName !== 'text') {\n                    path.style.fill = '';\n                    path.style.fillOpacity = '';\n                }\n            });\n        }\n    });\n}\n\n/**\n * @memberof module:drawing\n */\nfunction reset() {\n    setTransform(0, 0, 1);\n}\n\n/**\n * \n * @memberof module:drawing\n * @param {any} delta\n */\nfunction scaleBy(delta) {\n    if (m_zoom === 1) {\n        m_viewBox = m_svgElement.getBBox();\n    }\n    var viewBox = m_viewBox,\n        W = m_view.clientWidth,\n        H = m_view.clientHeight,\n        w = viewBox.width,\n        h = viewBox.height,\n        A = W / H,\n        a = w / h;\n\n    if (A > a) {\n        // width\n        h = H * m_zoom;\n        w = h * a;\n    } else if (A < a) {\n        // height\n        w = W * m_zoom;\n        h = w / a;\n    } else {\n        h = H * m_zoom;\n        w = W * m_zoom;\n    }\n\n    var zoom = Math.max(m_minScale, Math.min(m_maxScale, m_zoom + delta)),\n        s = (m_zoom - zoom) / 2;\n\n    m_zoom = zoom;\n\n    setOriginBy(w * s, h * s);\n    applyTransform();\n}\n\n/**\n * @memberof module:drawing\n */\nfunction hide() {\n    detach();\n    m_view.style.visibility = 'hidden';\n    m_isHidden = true;\n}\n\n/**\n * @memberof module:drawing\n */\nfunction show() {\n    attach();\n    m_view.style.visibility = 'visible';\n    m_isHidden = false;\n    calculateScaleLimit();\n}\n\n/**\n * @memberof module:drawing\n * @param {HTMLElement} svgElement\n * @param {object} [options]\n */\nfunction initialize(svgElement, options) {\n    svgElement.setAttribute('touch-action', 'none');\n    svgElement.style.touchAction = 'none';\n    svgElement.style.width = '100%';\n    svgElement.style.height = '100%';\n    svgElement.style.position = 'absolute';\n    svgElement.style.display = 'block';\n    svgElement.style.overflow = 'hidden';\n    m_svgElement = svgElement;\n    m_view = document.createElement('div');\n    m_view.classList.add('cortona3dsolo-svg');\n    svgElement.parentNode.replaceChild(m_view, svgElement);\n    m_view.appendChild(svgElement);\n    m_svgShadow = m_view.appendChild(document.createElementNS(SVGNS, 'svg'));\n    m_svgShadow.setAttribute('touch-action', 'none');\n    m_svgShadow.style.touchAction = 'none';\n    m_svgShadow.style.pointerEvents = 'none';\n    m_svgShadow.style.width = '100%';\n    m_svgShadow.style.height = '100%';\n    m_svgShadow.style.position = 'absolute';\n    svgElement.style.display = 'block';\n    m_svgShadow.style.overflow = 'hidden';\n    m_svgShadow.style.visibility = 'hidden';\n    hide();\n}\n\nvar SVGDrawing = expand(new EventEmitter(), {\n    dispatch: function (eventName) {\n        SVGDrawing.emit.apply(SVGDrawing, arguments);\n        if (typeof SVGDrawing.delegate[eventName] == 'function') {\n            SVGDrawing.delegate[eventName].apply(SVGDrawing, Array.prototype.slice.call(arguments, 1));\n        }\n    },\n    initialize: initialize, // initialize(svgElement, options)\n    hide: hide,\n    show: show,\n    reset: reset,\n    scaleBy: scaleBy,\n    toggleHotspotClass: toggleHotspotClass,\n    select: select,\n    unselect: unselect,\n    highlight: highlight,\n    unhighlight: unhighlight,\n    load: load,\n    unload: unload,\n    attach: attach,\n    detach: detach,\n    getSVGSource: getSVGSource,\n    /**\n     * @returns {boolean}\n     */\n    checkComplete: function () {\n        return m_isReady;\n    },\n    /**\n     * @returns {boolean}\n     */\n    checkShown: function () {\n        return !m_isHidden;\n    },\n    /**\n     * Hooks\n     */\n    delegate: {} // hooks\n    /*\n     didClickHotspot(name) \n     didEnterHotspot(name)\n     didLeaveHotspot(name)\n     didCompleteLoad(url)\n     didCallContextMenu(name, offsetX, offsetY, target)\n     failedLoadingDocument()\n     onProgress(loaded, total)\n     onZoomChange(zoom)\n     */\n});\n\nObject.defineProperties(SVGDrawing, {\n    'svg': {\n        get: function () {\n            return m_svgElement;\n        },\n        enumerable: true\n    },\n    'enableDrawingOptimization': {\n        get: function () {\n            return m_enableDrawingOptimization;\n        },\n        set: function (value) {\n            m_enableDrawingOptimization = !!value;\n        },\n        enumerable: true\n    },\n    'enableHoverFilling': {\n        get: function () {\n            return m_enableHoverFilling;\n        },\n        set: function (value) {\n            m_enableHoverFilling = !!value;\n        },\n        enumerable: true\n    },\n    'maxScale': {\n        get: function () {\n            return m_maxScale;\n        },\n        set: function (scale) {\n            m_disableAutoCalculationScaleLimit = !!scale;\n            m_maxScale = Math.max(+scale > 0 ? scale : 50, m_minScale);\n        },\n        enumerable: true\n    },\n    'minScale': {\n        get: function () {\n            return m_minScale;\n        },\n        set: function (scale) {\n            m_minScale = Math.min(+scale > 0 ? scale : 1, m_maxScale);\n        },\n        enumerable: true\n    }\n});\n\nmodule.exports = SVGDrawing;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/drawing.js\n// module id = 70\n// module chunks = 0","require('es6-promise/auto'); // require Promise polyfill for IE\n\n/**\n * The global object that is exposed by the Cortona3D Solo library.\n * \n * @global\n * @implements module:solo\n * @implements external:EventEmitter\n * @tutorial event-handling\n */\n\nvar Cortona3DSolo = require('solo');\n\nif (!window.Cortona3DSolo) window.Cortona3DSolo = Cortona3DSolo;\n\nCortona3DSolo.setMaxListeners(0); // Infinity\n\n/**\n * @memberof module:solo\n * @member {string} baseURL The relative base URL of a Cortona3D Solo library.\n * @since 1.4.0\n */\n\nvar m_baseUrl = Cortona3DSolo.baseUrl || Cortona3DSolo.baseURL || (document.currentScript && document.currentScript.src.replace(/[^\\\\\\/]+$/, ''));\n\nObject.defineProperty(Cortona3DSolo, 'baseURL', {\n    get: function () {\n        return m_baseUrl;\n    },\n    set: function (value) {\n        m_baseUrl = value;\n    },\n    enumerable: true\n});\n\nObject.defineProperty(Cortona3DSolo, 'baseUrl', {\n    get: function () {\n        return m_baseUrl;\n    },\n    set: function (value) {\n        m_baseUrl = value;\n    },\n    enumerable: true\n});\n\nvar util = require('lib/util');\nvar expand = util.expand;\nvar b64toBlob = require('lib/b64ToBlob');\n\nvar usedModules = require('app').usedModules;\n\nconsole.log('Cortona3D Solo v' + VERSION);\n\nmodule.exports = expand(Cortona3DSolo, {\n    /**\n     * _Asynchronous method_. Enables the use of functional modules in API.\n     * \n     * @memberof module:solo\n     * @async\n     * @param {string} moduleName -\n     * - `\"core\"` - the internal module to manage the 3D illustration without usage of the Cortona3D Viewer component. See namespaces {@link module:solo.core core}, {@link module:solo.app app};\n     * - `\"drawing\"` - the internal module to manage the 2D illustration. See namespace {@link module:solo.app.drawing app.drawing};\n     * - `\"touch\"` - the internal module to work with pointer events in the 3D window. See namespace {@link module:solo.touch touch};\n     * - `\"skin\"` - the internal module that provide UI framework. See namespace {@link module:solo.skin skin};\n     * - `\"require\"` - the internal module implements the functionality of the {@link https://github.com/amdjs/amdjs-api/blob/master/AMD.md AMD} module loader similar to {@link http://requirejs.org/ RequireJS}. Adds three global functions:\n     *     - `require()`\n     *     - `requirejs()`\n     *     - `define()`\n     * - The name of the external add-on that is used to extend the functionality of the standard API and use the format of the AMD module. It is required to use external or built-in loader of AMD modules.\n     * @param {object} [options] - Module options\n     * @param {string} options.src - The src property specifies the URL of the external file:\n     * - companion file *.interactivity.xml*\n     * - VRML file *.wrl*\n     * - compressed (zip) package file containing the RapidAuthor publication *.cortona3d* *.vmb* *.zip*\n     * - SVG file *.svg* \n     * - image file *.png* *.jpg* *.gif*\n     * @param {number} options.features - A features bitmask of the Cortona3D Solo instance. See the {@link module:solo.app app} properties.\n     * @param {HTMLElement} options.element \n     * - The `<canvas>` element for the `\"core\"` module\n     * - The `<svg>` element for the `\"drawing\"` module\n     * @param {string} options.prefixURL -  The URL prefix to loading the Corona3D Solo files.\n     * It is preferable to use {@link module:solo.baseURL solo.baseURL} property instead of this option.\n     * @param {number} options.totalMemory=64 - Total memory used by the Cortona3D Solo core in MB.\n     * @param {HexColorString} options.hotspotHoverColor=#FF0000 - The color to the hovered hotspot area on the 2D illustration.\n     * @param {HexColorString} options.hotspotSelectionColor=#FF0000 - The color to the selected hotspot area on the 2D illustration.\n     * @param {HexColorString} options.ipcHoverColor=#808080 - The color to the hovered 3D object in the interactive parts catalog.\n     * @param {HexColorString} options.ipcSelectionColor=#FFD133 - The color to the selected 3D object in the interactive parts catalog.\n     * @returns {Promise<object>} `Promise` whose fulfillment handler receives an object with exports and options of the loaded functional module\n     * @see external:Promise\n     */\n    use: function (moduleName, options) {\n        if (moduleName === 'Cortona3DSoloSkin') {\n            moduleName = 'skin';\n        } else if (moduleName === 'Cortona3DSoloTouch') {\n            moduleName = 'touch';\n        }\n        var usedModule = usedModules[moduleName],\n            usedAddon = usedModules.addons[moduleName];\n        switch (moduleName) {\n            case 'core':\n                if (!usedModule) {\n                    return new Promise(function (resolve, reject) {\n                        usedModules[moduleName] = usedModule = {\n                            config: expand({}, options)\n                        };\n                        Cortona3DSolo.core = require('core.base').configure(options);\n                        expand(Cortona3DSolo.app, require('app.base').app);\n                        expand(Cortona3DSolo.app, require('app.procedure').app);\n                        expand(Cortona3DSolo.app, require('app.ipc').app);\n                        expand(Cortona3DSolo.app, require('app.ui').app);\n                        expand(Cortona3DSolo.app, require('app.util').app);\n                        Cortona3DSolo.once(\"core.onRuntimeInitialized\", function () {\n                            resolve(usedModule);\n                        });\n                        Cortona3DSolo.once(\"core.onError\", reject);\n                    });\n                }\n                break;\n            case 'drawing':\n                if (!usedModule) {\n                    usedModules[moduleName] = usedModule = {\n                        config: expand({}, options)\n                    };\n                    expand(Cortona3DSolo.app, require('app.drawing').configure(options));\n                }\n                break;\n            case 'touch':\n                if (!usedModule) {\n                    usedModules[moduleName] = usedModule = {\n                        config: expand({}, options)\n                    };\n                    expand(Cortona3DSolo, require('touch').configure(options));\n                }\n                break;\n            case 'skin':\n                if (!usedModule) {\n                    Cortona3DSolo.use('require');\n                    usedModules[moduleName] = usedModule = {\n                        config: expand({}, options)\n                    };\n                    expand(Cortona3DSolo, require('skin').configure(options));\n                }\n                break;\n            case 'require':\n                if (!usedModule) {\n                    if (util.detectAMDLoader()) {\n                        console.log('The AMD loader is already on the page.');\n                    } else {\n                        expand(window, require('./require-mini'));\n                    }\n                    usedModules[moduleName] = usedModule = {\n                        config: expand({}, options) // require global config\n                    };\n                    window.require.onError = function () {};\n                    window.require.config(usedModule.config);\n                    require('./require-plugin-res');\n                    require('./require-plugin-file');\n                    require('./require-plugin-css');\n                    require('./require-plugin-json');\n                    require('./require-plugin-xml');\n                }\n                break;\n            default: // addon\n                if (usedAddon) {\n                    return Promise.resolve(usedAddon);\n                } else {\n                    return Cortona3DSolo\n                        .use('require')\n                        .then(function () {\n                            // module options\n                            var localOptions = expand({}, options),\n                                config = usedModules.require && usedModules.require.config || {},\n                                prefixURL = localOptions.prefixURL || Cortona3DSolo.baseURL;\n\n                            usedModules.addons[moduleName] = usedAddon = {\n                                config: localOptions\n                            };\n\n                            if (!prefixURL) {\n                                if (usedModules.core) {\n                                    if (typeof Module.locateFile === 'function') {\n                                        prefixURL = Module.locateFile('');\n                                    } else if (Module.memoryInitializerPrefixURL) {\n                                        prefixURL = Module.memoryInitializerPrefixURL;\n                                    }\n                                }\n                            }\n\n                            config = expand({}, config, {\n                                context: 'Cortona3DSolo',\n                                baseUrl: prefixURL,\n                                config: {}\n                            });\n\n                            config.config[moduleName] = localOptions;\n\n                            return Cortona3DSolo.app.util.requirePromise([moduleName], window.requirejs.config(config))\n                                .then(function (exports) {\n                                    usedAddon.exports = exports;\n                                    return usedAddon;\n                                });\n                        });\n                }\n        }\n        return Promise.resolve(usedModule);\n    },\n    app: expand(require('app').app, {\n        util: {\n            /**\n             * A helper method.\n             * Convert DOM XML tree to JavaScript object:\n             * ```xml\n             * <node att1=\"value1\" att2=\"value2\">\n             *      <foo>Foo</foo>\n             *      <bar>\n             *          <![CDATA[Bar]]>\n             *      </bar>\n             *      <items>\n             *          <item>i1</item>\n             *          <item>i2</item>\n             *          <item>i3</item>\n             *          <item>i4</item>\n             *      </items>\n             * </node>\n             * ```\n             * ```\n             * {\n             *  node: {\n             *      \"@name\": \"node\",\n             *      \"@attributes\": {\n             *          att1: \"value1\",\n             *          att2: \"value2\"\n             *      },\n             *      \"@children\": [\n             *          { \"@name\": \"foo\", \"#text\": \"Foo\" },\n             *          { \"@name\": \"bar\", \"#text\": \"Bar\" },\n             *          { \"@name\": \"items\", ... }\n             *      ],\n             *      foo: { \"@name\": \"foo\", \"#text\": \"Foo\" },\n             *      bar: { \"@name\": \"bar\", \"#text\": \"Bar\" },\n             *      items: {\n             *          \"@name\": \"items\",\n             *          \"@children\": [ ... ],\n             *          item: [\n             *              { \"@name\": \"item\", \"#text\": \"i1\" },\n             *              { \"@name\": \"item\", \"#text\": \"i2\" },\n             *              { \"@name\": \"item\", \"#text\": \"i3\" },\n             *              { \"@name\": \"item\", \"#text\": \"i4\" }\n             *          ]\n             *      }\n             *  }\n             * }\n             * ```\n             * @memberof module:solo.app.util\n             * @method\n             * @param {Document} xml The XML document\n             * @returns {XMLNodeData} The JavaScript object\n             */\n            xmlToJSON: require('xml2json.js'),\n            /**\n             * Loads a resource file from URL using XMLHttpRequest\n             * \n             * @async\n             * @memberof module:solo.app.util\n             * @method\n             * @param {string} url An URL to load the resource\n             * @param {string} [overrideMimeType]\n             * @param {string} [responseType]\n             * @returns {Promise<XMLHttpRequest>} `Promise` whose fulfillment handler receives an XMLHttpRequest object when the requested resource has successfully been loaded.\n             * @see {@link https://developer.mozilla.org/ru/docs/Web/API/XMLHttpRequest XMLHttpRequest}\n             * @see external:Promise\n             * @fires \"app.onProgress\"\n             * @since 1.4.3\n             */\n            loadResource: util.loadResource,\n            /**\n             * Converts the path specified by the first argument to the absolute path relative to the base path specified by the second argument.\n             * If the second argument is omitted, the absolute path is generated relative to the URL of the loaded HTML document.\n             * \n             * @memberof module:solo.app.util\n             * @method\n             * @param {string} resourceUrl\n             * @param {string} [baseUrl]\n             * @return {string} \n             * @since 1.4.3\n             */\n            toUrl: function (resourceUrl, baseUrl) {\n                var url = (typeof resourceUrl !== 'string') ? '' : resourceUrl;\n                if (url.match(/^[a-z]+\\:\\/\\//i)) {\n                    return url; // absolute url\n                } else if (url.match(/^\\/\\//)) {\n                    return 'http:' + url; // absolute url\n                } else if (url.match(/^[a-z]+\\:/i)) {\n                    return url; // data URI\n                }\n\n                var a = document.createElement('a');\n                if (url[0] === '/') {\n                    a.href = util.getBaseURL(baseUrl);\n                    a.href = a.protocol + '//' + a.host + url;\n                } else {\n                    a.href = util.getBaseURL(baseUrl) + url;\n                }\n                url = a.href;\n                if (url.match(/^file\\:\\/\\//i)) {\n                    url = decodeURI(url);\n                }\n                return url.replace(/(\\/\\.\\/|\\/[^/]+\\/\\.\\.\\/)/g, '/').replace(/([^:/])\\/{2,}/g, '$1/');\n            },\n            /**\n             * Converts base64-encoded data to a Blob object.\n             * \n             * @async\n             * @memberof module:solo.app.util\n             * @method\n             * @param {string} b64Data A string containing base64 encoded data or data URL\n             * @param {string} [contentType] The content type to assign to the new Blob\n             * @param {number} [sliceSize=1048576]\n             * @returns {Promise<Blob>} `Promise` whose fulfillment handler receives a Blob object when base64-encoded data has successfully been decoded\n             * @see external:Blob\n             * @see external:Promise\n             * @since 1.5.6\n             */\n            b64toBlob: b64toBlob,\n\n            /** \n             * The method defines a new class that can be inherited from parent class.\n             *\n             * @memberof module:solo.app.util\n             * @method\n             * @param parent {?Function} The parent class of the new class or null\n             * @param ctor {Function} The constructor of the new class\n             * @param methods {Object} An object literal containing the methods of the new class\n             * @return {Function} The constructor function of the new class\n             * @since 1.6.0\n             */\n            defineClass: util.defineClass,\n\n            /**\n             * Wrap `requirejs()` call with Promise.\n             * \n             * @async\n             * @memberof module:solo.app.util\n             * @method\n             * @param {string} name The name of module to load\n             * @param {function} [requirejs=window.requirejs] An `requirejs` function\n             * @returns {Promise<exports>} `Promise` whose fulfillment handler receives the export object of a successfully loaded AMD module\n             * @see external:Promise\n             * @since 1.6.0\n             */\n            requirePromise: function (name, req) {\n                return new Promise(function (resolve, reject) {\n                    req = req || window.requirejs;\n                    Promise.all([req([name], resolve, reject)]).catch(function () {});\n                });\n            }\n        },\n        ui: {\n            /** \n             * Creates HTML element with given tag name, list of attributes and array of children.\n             *\n             * @memberof module:solo.app.ui\n             * @method\n             * @param {CSSSelector} name The name of the new element. Class and ID selectors can be used. If the element type name is omitted, `<div>` is created by default. \n             * @param {object} [options] The properties of the new element. \n             * @param {...*} [content] The contents of the new element. It can be plain text, HTMLElement or an array.\n             * @return {HTMLElement}\n             * @since 1.6.0\n             * @example\nvar h = Cortona3DSolo.app.ui.createElement;\n\nh('img#img-001.graphic', { src: 'image.png' }); \n// -> <img id=\"img-001\" class=\"graphic\" src=\"image.png\"/>\n\nh('span#msg', 'A text'); \n// -> <span id=\"msg\">A text</span>\n\nh('#bydefault', h('ul', [h('li', 'a'), h('li', 'b')]); \n// -> <div id=\"bydefault\"><ul><li>a</li><li>b</li></ul></div>\n             */\n            createElement: require('lib/create-element').createElement,\n            /** \n             * Create HTML elements from string.\n             *\n             * @memberof module:solo.app.ui\n             * @method\n             * @param {string} syntax HTML string\n             * @return {HTMLElement[]}\n             * @since 1.6.0\n             * @example\nCortona3DSolo.app.ui.html('<img src=\"image.png\"/><span>A text</span>');\n// -> [ <img src=\"image.png\"/>, <span>A text</span> ]\n             */\n            html: require('lib/create-element').createElementsFromHTML,\n            /**\n             * Returns a new instance of CSSObject.\n             *  \n             * @memberof module:solo.app.ui\n             * @method\n             * @param {object} [rules]\n             * @return {CSSObject}\n             * @since 1.6.0\n             * @example\nCortona3DSolo.app.ui.css({ body: { backgroundColor: 'red' }});\n// -> body { background-color: red; }\n            */\n            css: require('lib/css-object'),\n            /** \n             * Returns new instance of ColorObject.\n             * \n             * @memberof module:solo.app.ui\n             * @method\n             * @param {string|object|number} [color] \n             * - HTML hex string\n             * - RGB object\n             * - HSL object\n             * - an 32-bit integer specifies RGB color in the following hexadecimal form `0x00BBGGRR`.\n             * @return {ColorObject}\n             * @since 1.6.0\n             * @example\nvar color = Cortona3DSolo.app.ui.color;\ncolor('#FF8800');\ncolor('#F80');\ncolor({r: 255, g: 136, b: 0});\ncolor({h: 32, s: 100, l: 50});\ncolor(0x0088FF);\n             */\n            color: require('lib/color-object')\n        }\n    }),\n    /**\n     * A helper method.\n     * Recursively combines the properties of objects. If a property with the name already exists, it will be overwritten.\n     * @memberof module:solo\n     * @method\n     * @param {objеct} obj Destination object\n     * @param {...objеct} [src] Source objects\n     * @returns {object} Destination object\n     */\n    expand: expand,\n    /**\n     * Dispatches the event by emit the event object into event flow from the main object {@link Cortona3DSolo} or by calling appropriate hook method.\n     * @memberof module:solo\n     * @param {string} eventName Event name\n     * @param {...any} [arg] Arguments of the event\n     * @since 1.4.0\n     */\n    dispatch: function (eventName, arg) {\n        if (!PRODUCTION) {\n            if (eventName.indexOf(\"AnimationFrame\") === -1) {\n                console.log(\"EVENT(\" + eventName + \"): \", Array.prototype.slice.call(arguments, 1));\n            }\n        }\n        Cortona3DSolo.emit.apply(Cortona3DSolo, arguments);\n        var ns = eventName.split('.');\n        var method = ns.pop();\n        var context = Cortona3DSolo;\n        while (ns.length && context) {\n            context = context[ns.shift()];\n        }\n        if (context && typeof context[method] == 'function') {\n            switch (arguments.length) {\n                case 1:\n                    context[method].call(Cortona3DSolo);\n                    break;\n                case 2:\n                    context[method].call(Cortona3DSolo, arguments[1]);\n                    break;\n                case 3:\n                    context[method].call(Cortona3DSolo, arguments[1], arguments[2]);\n                    break;\n                case 4:\n                    context[method].call(Cortona3DSolo, arguments[1], arguments[2], arguments[3]);\n                    break;\n                case 5:\n                    context[method].call(Cortona3DSolo, arguments[1], arguments[2], arguments[3], arguments[3]);\n                    break;\n                default:\n                    // slow method\n                    context[method].apply(Cortona3DSolo, Array.prototype.slice.call(arguments, 1));\n            }\n        }\n    }\n});\n\n/**\n * Gets a semantic version string of the library.\n * \n * @static\n * @member {SemVer} version\n * @memberof module:solo\n * @since 1.5.0\n * @see http://semver.org/\n */\n\nObject.defineProperty(Cortona3DSolo, 'version', {\n    get: function () {\n        return VERSION;\n    },\n    enumerable: true\n});\n\n/**\n * The EventEmitter class in the event standard module Node.js.\n * @external EventEmitter\n * @see https://nodejs.org/api/events.html#events_class_eventemitter\n */\n\n/**\n * The Promise object represents the eventual completion (or failure) of an asynchronous operation, and its resulting value.\n * @external Promise\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\n */\n\n/**\n * The HTMLTableRowElement interface provides special properties and methods for manipulating the layout and presentation of rows in an HTML table.\n * @external HTMLTableRowElement\n * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableRowElement\n */\n\n/**\n * The HTMLTableElement interface provides special properties and methods for manipulating the layout and presentation of tables in an HTML document.\n * @external HTMLTableElement\n * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableElement\n */\n\n/**\n * The HTMLImageElement interface provides special properties and methods  for manipulating the layout and presentation of <img> elements.\n * @external HTMLImageElement \n * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement \n */\n\n/**\n * The HTMLCanvasElement interface provides properties and methods for manipulating the layout and presentation of canvas elements.\n * @external HTMLCanvasElement \n * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement \n */\n\n/**\n * The URL interface represents an object providing static methods used for creating object URLs.\n * @external URL \n * @see https://developer.mozilla.org/en-US/docs/Web/API/URL\n */\n\n/**\n * Module is a global JavaScript object with attributes that Emscripten-generated code calls at various points in its execution.\n * @external Module\n * @see http://kripken.github.io/emscripten-site/docs/api_reference/module.html#module-object\n */\n\n/**\n * A Blob object represents a file-like object of immutable, raw data.\n * @external Blob \n * @see https://developer.mozilla.org/en-US/docs/Web/API/Blob\n */\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/index.js\n// module id = 71\n// module chunks = 0","var util = require('lib/util');\r\n\r\nvar EventEmitter = require('events').EventEmitter;\r\n\r\nvar createElement = require('lib/create-element').createElement,\r\n    html = require('lib/create-element').createElementsFromHTML,\r\n    css = require('lib/css-object'),\r\n    millicolor = require('lib/color-object');\r\n\r\n// NodeList.prototype.forEach polyfill\r\nif (window.NodeList && !NodeList.prototype.forEach) {\r\n    NodeList.prototype.forEach = Array.prototype.forEach;\r\n}\r\n\r\n// Source: https://github.com/jserz/js_piece/blob/master/DOM/ParentNode/append()/append().md\r\n(function (arr) {\r\n    arr.forEach(function (item) {\r\n        if (item.hasOwnProperty('append')) {\r\n            return;\r\n        }\r\n        Object.defineProperty(item, 'append', {\r\n            configurable: true,\r\n            enumerable: true,\r\n            writable: true,\r\n            value: function append() {\r\n                var argArr = Array.prototype.slice.call(arguments),\r\n                    docFrag = document.createDocumentFragment();\r\n\r\n                argArr.forEach(function (argItem) {\r\n                    var isNode = argItem instanceof Node;\r\n                    docFrag.appendChild(isNode ? argItem : document.createTextNode(String(argItem)));\r\n                });\r\n\r\n                this.appendChild(docFrag);\r\n            }\r\n        });\r\n    });\r\n})([Element.prototype, Document.prototype, DocumentFragment.prototype]);\r\n\r\nElement.prototype.remove = function () {\r\n    Array.prototype.slice.call(arguments).forEach(function (el) {\r\n        this.removeChild(el);\r\n    }, this);\r\n};\r\n\r\nfunction toUISkinKey(name) {\r\n    return name.toLowerCase().replace(/\\W/g, '');\r\n}\r\n\r\nfunction toArray(arg, from) {\r\n    if (util.isNumber(from)) {\r\n        return Array.prototype.slice.call(arg, from);\r\n    }\r\n    return Array.prototype.slice.call(arg);\r\n}\r\n\r\nfunction createTag(tag, options, content) {\r\n    var attr = options;\r\n\r\n    if (util.isString(options)) {\r\n        tag += options;\r\n        attr = {};\r\n    }\r\n    return createElement(tag, attr, toArray(arguments, 2));\r\n}\r\n\r\nvar UISkinElement = util.defineClass(EventEmitter,\r\n    /**\r\n     * @classdesc The class that provides the base interface for all UI objects.\r\n     * @hideconstructor\r\n     * @constructs\r\n     * @implements {external:EventEmitter}\r\n     */\r\n    function () {\r\n        this.setMaxListeners(0); // Infinity\r\n    },\r\n    /** \r\n     * @lends UISkinElement.prototype \r\n     */\r\n    {\r\n        /**\r\n         * The root node of the object.\r\n         * \r\n         * @abstract\r\n         * @member {HTMLElement} $el \r\n         * @memberof UISkinElement\r\n         */\r\n        emit: function (name) {\r\n            if (!PRODUCTION) {\r\n                console.log('EVENT: ', Array.prototype.slice.call(arguments), this);\r\n            }\r\n            EventEmitter.prototype.emit.apply(this, arguments);\r\n        },\r\n        /**\r\n         * Inserts a set of {@link UISkinComponent} objects, `Node` objects or `DOMString` objects \r\n         * after the last child of the root node of the object.\r\n         * \r\n         * @param {...(UISkinComponent|HTMLElement|string)} child\r\n         */\r\n        append: function () {\r\n            if (this.$el) {\r\n                Element.prototype.append.apply(this.$el,\r\n                    Array.prototype.slice.call(arguments).map(function (arg) {\r\n                        if (arg instanceof UISkinComponent) {\r\n                            return arg.$el || '';\r\n                        }\r\n                        return arg || '';\r\n                    })\r\n                );\r\n            }\r\n        },\r\n        /**\r\n         * Removes a set of {@link UISkinComponent} objects or `Node` objects from the DOM.\r\n         * The string argument is treated as a CSS selector that defines the nodes to be removed from the DOM. \r\n         * \r\n         * If the argument is omitted, the root node of the object itself is removed from the DOM.\r\n         * \r\n         * @param {...(UISkinComponent|HTMLElement|CSSSelector)} [child]\r\n         */\r\n        remove: function () {\r\n            if (!arguments.length) {\r\n                if (this instanceof UISkinComponent) {\r\n                    if (this.$el) {\r\n                        this.$el.parentNode.removeChild(this.$el);\r\n                    }\r\n                }\r\n            } else {\r\n                Array.prototype.slice.call(arguments).forEach(function (el) {\r\n                    if (typeof el === 'string' && this.$el) {\r\n                        el = this.$el.querySelectorAll(el);\r\n                        this.remove.apply(this, Array.prototype.slice.call(el));\r\n                        return;\r\n                    } else if (el instanceof UISkinComponent) {\r\n                        el = el.$el;\r\n                    }\r\n                    if (el && el.parentNode) {\r\n                        el.parentNode.removeChild(el);\r\n                    }\r\n                }, this);\r\n            }\r\n        }\r\n    }\r\n);\r\n\r\nvar UISkinComponent = util.defineClass(UISkinElement,\r\n    /**\r\n     * @classdesc The class that provides an interface for the UI component object.\r\n     * @hideconstructor\r\n     * @constructs\r\n     * @implements {UISkinElement}\r\n     */\r\n    function () {\r\n        UISkinElement.call(this);\r\n    },\r\n    /** \r\n     * @lends UISkinComponent.prototype \r\n     */\r\n    {\r\n        /**\r\n         * Assigns a DOM node to the component instance.\r\n         * \r\n         * @memberof UISkinComponent.prototype \r\n         * @method\r\n         * @param {HTMLElement} element\r\n         * @returns {UISkinComponent} This object itself\r\n         * @example \r\ndefine(function (require, exports, module) {\r\n    module.exports = function (skin, options, solo) {\r\n        var element = skin.createElement('span', options.text);\r\n        // \"this\" is UISkinComponent instance \r\n        return this.exports(element); \r\n    }\r\n});\r\n         */\r\n        exports: function (element, props) {\r\n            if (element) {\r\n                Object.defineProperties(this, {\r\n                    /**\r\n                     * The root node of the component.\r\n                     * \r\n                     * @member {HTMLElement} $el\r\n                     * @readonly\r\n                     * @memberof UISkinComponent\r\n                     */\r\n                    '$el': {\r\n                        value: element\r\n                    },\r\n                    'element': {\r\n                        value: element\r\n                    }\r\n                });\r\n                if (element.classList) {\r\n                    /**\r\n                     * Reference to the `classList` property of the root node.\r\n                     * \r\n                     * @member {DOMTokenList} classList\r\n                     * @readonly\r\n                     * @memberof UISkinComponent\r\n                     */\r\n                    Object.defineProperty(this, 'classList', {\r\n                        value: element.classList\r\n                    });\r\n                }\r\n            }\r\n            if (props) {\r\n                for (var key in props) {\r\n                    if (props.hasOwnProperty(key)) {\r\n                        switch (typeof props[key]) {\r\n                            case 'function':\r\n                                Object.defineProperty(this, key, {\r\n                                    configurable: true,\r\n                                    enumerable: true,\r\n                                    writable: true,\r\n                                    value: props[key]\r\n                                });\r\n                                break;\r\n                            default:\r\n                                Object.defineProperty(this, key, props[key]);\r\n\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return this;\r\n        }\r\n    }\r\n);\r\n\r\nvar UISkinController = util.defineClass(UISkinElement,\r\n    /**\r\n     * @classdesc The class that provides an interface for the UI controller object.\r\n     * \r\n     * The UI controller object is linked to a box area in the HTML layout where UI elements will be added, which is called the skin area.\r\n     * \r\n     * @hideconstructor\r\n     * @constructs\r\n     * @implements {UISkinElement}\r\n     */\r\n    function (name, baseElement) {\r\n        UISkinElement.call(this);\r\n\r\n        this.name = name;\r\n\r\n        var rootNode = document.body;\r\n        if (baseElement) {\r\n            rootNode = baseElement;\r\n        } else if (Cortona3DSolo.core && Cortona3DSolo.core.canvas) {\r\n            rootNode = Cortona3DSolo.core.canvas.parentNode;\r\n        } else if (Cortona3DSolo.drawing && Cortona3DSolo.drawing.svg) {\r\n            rootNode = Cortona3DSolo.drawing.svg.parentNode;\r\n        }\r\n\r\n        var element = rootNode.querySelector('.skin-holder');\r\n\r\n        if (!element || element.parentNode !== rootNode) {\r\n            element = (function (div) {\r\n                rootNode.insertBefore(div, rootNode.firstChild).className = 'skin-holder';\r\n                return div;\r\n            })(document.createElement('div'));\r\n        }\r\n\r\n        element.classList.add('skin-holder-' + toUISkinKey(this.name));\r\n\r\n        Object.defineProperties(this, {\r\n            /**\r\n             * The root node of the skin area.\r\n             * \r\n             * @member {HTMLElement} $el\r\n             * @readonly\r\n             * @memberof UISkinController\r\n             */\r\n            '$el': {\r\n                value: element\r\n            },\r\n            'element': {\r\n                value: element\r\n            },\r\n            /**\r\n             * Reference to the `classList` property of the root node.\r\n             * \r\n             * @member {DOMTokenList} classList\r\n             * @readonly\r\n             * @memberof UISkinController\r\n             */\r\n            'classList': {\r\n                value: element.classList\r\n            }\r\n        });\r\n    },\r\n    /** \r\n     * @lends UISkinController.prototype \r\n     */\r\n    {\r\n        /**\r\n         * Creates an instance of the component as needed and appends it to the skin area root node if the component is an object of type {@link UISkinComponent} or HTMLElement.\r\n         * \r\n         * The argument can be:\r\n         * - a factory function of the component - {@link UISkinComponentFactory}\r\n         * - the instance of the component - {@link UISkinComponent}\r\n         * - an HTML node\r\n         * - a string with the module name of the component\r\n         * - an object with two properties `component` and `option`\r\n         * - a Promise object that returns any object of the types listed here\r\n         * - an array containing any object of the types listed here\r\n         * \r\n         * If an array is used as an argument, the return value is an array of created components.\r\n         * \r\n         * If an asynchronous load is required when creating a component instance, \r\n         * i.e. a string with the name of the component module or a Promise object is used, \r\n         * the Promise object is returned with the result.\r\n         * \r\n         * @param {(UISkinComponent|UISkinComponentFactory|HTMLElement|string|object|Promise|Array)} components \r\n         * @param {object} [options] An options object that apply to factory \r\n         * @returns {UISkinComponent|Promise.<UISkinComponent>|HTMLElement|Array}\r\n         * @example <caption>HTML element</caption>\r\nvar skin = solo.skin.create('app');\r\nskin.render(skin.create('span', 'A message')); // -> HTMLElement\r\n         * @example <caption>Component module</caption>\r\nskin.render('components/wait', { type: 'win8' }); // -> Promise.<UISkinComponent>\r\n         * @example <caption>Component factory function</caption>\r\nskin.render(function (skin, options, solo) {\r\n    return this.exports(skin.create('span', options.message || ''));\r\n}); // -> UISkinComponent\r\n         * @example <caption>A Promise object that returns the component factory function</caption>\r\nskin.render(solo.skin.require('components/wait'), { type: 'win8' }); // -> Promise.<UISkinComponent>\r\n         * @example <caption>A Promise object that returns the component instance</caption>\r\nskin.render(skin.use('components/wait', { type: 'win8' })); // -> Promise.<UISkinComponent>\r\n         * @example <caption>An object</caption>\r\nskin.render({\r\n    component: require('components/wait'),\r\n    options: {\r\n        type: 'win8'\r\n    }\r\n}, options); // -> UISkinComponent\r\n         * @example <caption>An array</caption>\r\nskin.render([ ... ], options); // -> UISkinComponent[]\r\n         * @example <caption>An array with the asynchronous loading of elements</caption>\r\nskin.render([\r\n    skin.create('h3', 'Component sample'), \r\n    'components/wait'\r\n], { type: 'win8' }); // -> Promise.<[HTMLElement, UISkinComponent]>\r\n         */\r\n        render: function (components, options) {\r\n            var self = this,\r\n                component;\r\n            if (components) {\r\n                if (util.isString(components)) {\r\n                    return this.render(this.use(components, options), options);\r\n                } else if (util.isFunction(components)) {\r\n                    component = this.create(components, options);\r\n                    return this.render(component, options);\r\n                } else if (util.isObject(components)) {\r\n                    if ((components instanceof UISkinComponent) || (components instanceof Node)) {\r\n                        this.append(components);\r\n                        return components;\r\n                    } else if (components instanceof Promise) {\r\n                        return components.then(function (component) {\r\n                            return self.render(component, options);\r\n                        });\r\n                    } else if (components.forEach) {\r\n                        res = components.map(function (item) {\r\n                            return this.render(item, options);\r\n                        }, this);\r\n                        return res.some(function (component) {\r\n                            return component instanceof Promise;\r\n                        }) ? Promise.all(res) : res;\r\n                    } else if (util.isObject(components.rules) && util.isFunction(components.render)) {\r\n                        components.render();\r\n                        return components;\r\n                    } else if (components.component) {\r\n                        return this.render(components.component, Cortona3DSolo.expand(components.options || {}, options || {}));\r\n                    }\r\n                }\r\n            }\r\n            return components;\r\n        },\r\n        /**\r\n         * @private\r\n         */\r\n        register: function (factory, options) {\r\n            return this.create(factory, options);\r\n        },\r\n        /**\r\n         * Creates an instance of the component.\r\n         * \r\n         * Loads the module with the factory function, if necessary, \r\n         * performs the factory function of the component and returns the result.\r\n         * \r\n         * @async\r\n         * @param {string|UISkinComponentFactory} name \r\n         * - a string with the module name of the component\r\n         * - factory function of the component - {@link UISkinComponentFactory}\r\n         * @param {*} options \r\n         * @returns {Promise.<UISkinComponent>} `Promise` whose fulfillment handler receives an {@link UISkinComponent} instance of the requested component.\r\n         */\r\n        use: function (name, options) {\r\n            var self = this;\r\n\r\n            if (util.isString(name)) {\r\n                return Cortona3DSolo.skin.require(name)\r\n                    .then(function (factory) {\r\n                        return self.create(factory, options);\r\n                    });\r\n            }\r\n\r\n            if (util.isFunction(name)) {\r\n                // use(factory, options)\r\n                return Promise.resolve(this.create(name, options));\r\n            }\r\n\r\n            return Promise.reject(new Error('The first argument in use() must be string or factory function.'));\r\n        },\r\n        /**\r\n         * Shows the HTML element.\r\n         * If the argument is omitted, shows the contents of the skin area itself.\r\n         * \r\n         * @param {HTMLElement|CSSSelector} [el] HTML node or CSS selector\r\n         */\r\n        show: function (el) {\r\n            if (util.isString(el)) {\r\n                el = document.querySelector(el);\r\n            } else if (util.isUndefined(el)) {\r\n                el = this.$el;\r\n            }\r\n            if (el) {\r\n                el.style.visibility = 'visible';\r\n                el.style.display = '';\r\n            }\r\n            return el;\r\n        },\r\n        /**\r\n         * Hides the HTML element.\r\n         * If the argument is omitted, hides the contents of the skin area itself.\r\n         * \r\n         * @param {HTMLElement|CSSSelector} [el] HTML node or CSS selector\r\n         * @param {boolean} [force=false] \r\n         * - `false` - `style.visibility='hidden'` is used\r\n         * - `true` - `style.dispaly='none'` is used\r\n         */\r\n        hide: function (el, force) {\r\n            if (util.isString(el)) {\r\n                el = document.querySelector(el);\r\n            } else if (util.isUndefined(el)) {\r\n                el = this.$el;\r\n                force = true;\r\n            }\r\n            if (el) {\r\n                el.style.visibility = 'hidden';\r\n                if (force) {\r\n                    el.style.display = 'none';\r\n                }\r\n            }\r\n            return el;\r\n        },\r\n        /**\r\n         * Toggles visibility of the HTML element.\r\n         * If the argument is omitted, toggles visibility of the skin area itself.\r\n         * \r\n         * @param {HTMLElement|CSSSelector} [el] HTML node or CSS selector\r\n         * @param {boolean} [visibility] \r\n         * @returns {boolean}\r\n         */\r\n        toggle: function (el, visibility) {\r\n            if (util.isString(el)) {\r\n                el = document.querySelector(el);\r\n            } else if (typeof el === \"boolean\") {\r\n                el = this.$el;\r\n                visibility = el;\r\n            } else if (util.isUndefined(el)) {\r\n                el = this.$el;\r\n            }\r\n            if (el) {\r\n                if (util.isUndefined(visibility)) visibility = el.style.display === 'none';\r\n                el.style.display = visibility ? '' : 'none';\r\n                el.style.visibility = visibility ? 'visible' : 'hidden';\r\n            }\r\n            return visibility;\r\n        },\r\n        /**\r\n         * Clears contents of the HTML element.\r\n         * If the argument is omitted, the contents of the skin root node are cleared.\r\n         * \r\n         * @param {HTMLElement|CSSSelector} [el] HTML node or CSS selector\r\n         */\r\n        clear: function (el) {\r\n            if (util.isString(el)) {\r\n                el = document.querySelector(el);\r\n            } else if (util.isUndefined(el)) {\r\n                el = this.$el;\r\n            }\r\n            if (el) {\r\n                el.innerHTML = '';\r\n            }\r\n        },\r\n        /**\r\n         * Creates an HTML element or instance of a component.\r\n         * \r\n         * @param {string|UISkinComponentFactory} factory\r\n         * @param {object} [options] Contains properties needed to create a new HTML element or UISkinComponent object.\r\n         * @param {...*} [content] The contents of the new HTML element.\r\n         * @returns {HTMLElement|UISkinComponent}\r\n         * @see {@link module:solo.app.ui.createElement app.ui.createElement()}\r\n         * @example\r\nskin.create('span#msg', 'A message'); // -> HTMLElement\r\nskin.create(require('components/wait'), { type: 'win8' }); // -> UISkinComponent\r\n         */\r\n        create: function (factory, options) {\r\n            function isArray(o) { return util.isObject(o) && util.isFunction(o.forEach); }\r\n            function resolveUISkinComponent(child) {\r\n                if (isArray(child)) {\r\n                    return child.map(resolveUISkinComponent);\r\n                } else if (util.isObject(child) && (child instanceof UISkinComponent)) {\r\n                    return child.$el || '';\r\n                } else {\r\n                    return child;\r\n                }\r\n            }\r\n            if (util.isFunction(factory)) {\r\n                var component = new UISkinComponent(),\r\n                    res = factory.call(component, this, options || {}, Cortona3DSolo);\r\n                if (!util.isUndefined(res)) {\r\n                    component = res;\r\n                }\r\n                return component || {};\r\n            } else {\r\n                return createElement.apply(this, Array.prototype.slice.call(arguments).map(resolveUISkinComponent));\r\n            }\r\n        },\r\n        /**\r\n         * @private\r\n         * @param {object} options\r\n         * @param {...*} [content]\r\n         */\r\n        toolbar: function (options, content) {\r\n            var el = this.div.apply(this, arguments);\r\n            el.classList.add('skin-toolbar');\r\n            return el;\r\n        },\r\n        /**\r\n         * @private\r\n         * @param {object} options\r\n         * @param {...*} [content]\r\n         */\r\n        container: function (options, content) {\r\n            var el = this.div.apply(this, arguments);\r\n            el.classList.add('skin-container');\r\n            return el;\r\n        },\r\n        /**\r\n         * @private\r\n         * @param {object} options\r\n         * @param {...*} [content]\r\n         */\r\n        panel: function (options, content) {\r\n            var el = this.div.apply(this, arguments);\r\n            el.classList.add('skin-panel');\r\n            return el;\r\n        },\r\n        /**\r\n         * @private\r\n         * @param {object} options\r\n         * @param {...*} [content]\r\n         */\r\n        button: function (options, content) {\r\n            var el = createTag.apply(this, ['button'].concat(toArray(arguments)));\r\n            el.classList.add('skin-control');\r\n            return el;\r\n        },\r\n        /**\r\n         * @private\r\n         * @param {object} options\r\n         * @param {...*} [content]\r\n         */\r\n        buttonImg: function (options, content) {\r\n            var el = this.span.apply(this, arguments);\r\n            el.classList.add('skin-img-button');\r\n            return el;\r\n        },\r\n        /**\r\n         * @private\r\n         * @param {object} options\r\n         * @param {...*} [content]\r\n         */\r\n        input: function (options, content) {\r\n            var el = createTag.apply(this, ['input'].concat(toArray(arguments)));\r\n            el.classList.add('skin-control');\r\n            return el;\r\n        },\r\n        /**\r\n         * Creates an HTML element `<select>`\r\n         * @param {object} options The properties of the new element.\r\n         * @param {object[]} items An array of objects with the contents of `<select>` items.\r\n         * The object must contains properties:\r\n         * - `description` - the `<option>` contents\r\n         * - `value` - value of the attribute of the same name\r\n         * - `selected` - value of the attribute of the same name\r\n         * A string can be used as the content of an element `<option>` instead of an object.\r\n         */\r\n        select: function (options, items) {\r\n            var el = createTag.apply(this, ['select', options].concat(\r\n                items.map(function (option) {\r\n                    var o = option;\r\n                    if (util.isString(option)) {\r\n                        o = {\r\n                            description: option\r\n                        };\r\n                    }\r\n                    return this.create('option', {\r\n                        selected: o.selected,\r\n                        value: o.value\r\n                    }, o.description);\r\n                }, this)\r\n            ));\r\n            el.classList.add('skin-control');\r\n            return el;\r\n        },\r\n        /**\r\n         * @private\r\n         * @param {string} type \"ul\" or \"ol\"\r\n         * @param {object} options\r\n         * @param {object[]} items\r\n         */\r\n        list: function (type, options, items) {\r\n            if (type !== 'ul' && type !== 'ol') {\r\n                console.error('Type of list must be \"ol\" or \"ul\" only.');\r\n            }\r\n            var el = createTag.apply(this, [type, options].concat(\r\n                items.map(function (item) {\r\n                    return this.create('li', {}, item);\r\n                }, this)\r\n            ));\r\n            return el;\r\n        },\r\n        /**\r\n         * Creates the HTML `<ul>` element\r\n         * \r\n         * @param {object} options The properties of the new element.\r\n         * @param {object[]} items An array of objects to create the content of `<li>` elements. This can be a string or HTML element.\r\n         */\r\n        ul: function (options, items) {\r\n            return this.list('ul', options, items);\r\n        },\r\n        /**\r\n         * Creates the HTML `<ol>` element\r\n         * \r\n         * @param {object} options The properties of the new element.\r\n         * @param {object[]} items An array of objects to create the content of `<li>` elements. This can be a string or HTML element.\r\n         */\r\n        ol: function (options, items) {\r\n            return this.list('ol', options, items);\r\n        },\r\n        /**\r\n         * Creates the HTML `<dl>` element\r\n         * \r\n         * @param {object} options The properties of the new element.\r\n         * @param {object[]} items An array of objects with the contents of `<dl>` items.\r\n         * The object must contains properties:\r\n         * - `term` - the `<dt>` contents\r\n         * - `def` - the `<dd>` contents\r\n         */\r\n        dl: function (options, items) {\r\n            var self = this;\r\n            var el = createTag.apply(this, ['dl', options].concat(\r\n                items.reduce(function (a, item) {\r\n                    return a.concat(\r\n                        self.create('dt', {}, item.term),\r\n                        self.create('dd', {}, item.def)\r\n                    );\r\n                }, [])\r\n            ));\r\n            return el;\r\n        },\r\n        /**\r\n         * @private\r\n         * @param {object} options\r\n         * @param {...*} [content]\r\n         */\r\n        text: function (options, content) {\r\n            var el = this.span.apply(this, arguments);\r\n            el.classList.add('skin-text');\r\n            return el;\r\n        },\r\n        /**\r\n         * @private\r\n         * @param {object} options\r\n         * @param {...*} [content]\r\n         */\r\n        label: createTag.bind(this, 'label'),\r\n        /**\r\n         * @private\r\n         * @param {object} options\r\n         * @param {...*} [content]\r\n         */\r\n        p: createTag.bind(this, 'p'),\r\n        /**\r\n         * @private\r\n         * @param {object} options\r\n         * @param {...*} [content]\r\n         */\r\n        a: createTag.bind(this, 'a'),\r\n        /**\r\n         * @private\r\n         * @param {object} options\r\n         * @param {...*} [content]\r\n         */\r\n        span: createTag.bind(this, 'span'),\r\n        /**\r\n         * @private\r\n         * @param {object} options\r\n         * @param {...*} [content]\r\n         */\r\n        div: createTag.bind(this, 'div'),\r\n        /**\r\n         * Checks if the HTML element is hidden.\r\n         * \r\n         * @param {HTMLElement} node\r\n         * @returns {boolean}\r\n         */\r\n        isHidden: function (node) {\r\n            return !node.offsetWidth && !node.offsetHeight;\r\n        },\r\n        /**\r\n         * Checks if the HTML element is visible in the scroll area on the screen.\r\n         * \r\n         * @param {HTMLElement} node\r\n         * @param {boolean} [checkHorizontal=false] Checks also the offset on the horizontal axis.\r\n         * @returns {boolean}\r\n         */\r\n        isVisible: function (node, checkHorizontal) {\r\n            var nodeRect = node.getBoundingClientRect(),\r\n                thisRect = this.$el.getBoundingClientRect();\r\n            return (nodeRect.top >= thisRect.top && nodeRect.bottom <= thisRect.bottom) &&\r\n                (!checkHorizontal || (nodeRect.left >= thisRect.left && nodeRect.right <= thisRect.right));\r\n        },\r\n        createElement: createElement,\r\n        html: html,\r\n        css: css,\r\n        color: millicolor\r\n    }\r\n);\r\n\r\nmodule.exports = UISkinController;\r\n\r\n/**\r\n * A function that creates a new instance of a user interface component.\r\n * \r\n * @param {UISkinController} skin\r\n * @param {object} options\r\n * @param {Cortona3DSolo} solo\r\n * @typedef {function} UISkinComponentFactory\r\n * @this UISkinComponent\r\n * @example\r\nfunction (skin, options, solo) {\r\n    return this.exports(skin.create('#message', options.message | ''));\r\n}\r\n */\r\n\r\n/**\r\n * A CSS selector that directly match one element in a document, based on the type of element, class, or id.\r\n * \r\n * @typedef {string} CSSSelector\r\n * @example \r\nspan#ident.class-one.class-two\r\n */\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/skin/UISkinController.js\n// module id = 72\n// module chunks = 0"],"sourceRoot":""}